<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Installation/Disks/zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:46:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>手册：X86/安装/准备磁盘 - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"Handbook","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":560,"wgPageName":"Handbook:X86/Installation/Disks/zh-cn","wgTitle":"X86/Installation/Disks/zh-cn","wgCurRevisionId":335094,"wgRevisionId":335094,"wgArticleId":128448,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"zh-cn","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"zh","wgMonthNames":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgMonthNamesShort":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgRelevantPageName":"Handbook:X86/Installation/Disks/zh-cn","wgRelevantArticleId":128448,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],
"sfgAutocompleteOnAllChars":!1,"sfgFieldProperties":[],"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en","*"],"wgULSCurrentAutonym":"English","wgTranslatePageTranslation":"translation"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.translate","ext.smw.style","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.css" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="Handbook:X86/Installation/Disks/zh-cn" href="https://wiki.gentoo.org/index.php?title=Special:ExportRDF/Handbook:X86/Installation/Disks/zh-cn&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="https://wiki.gentoo.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.gentoo.org/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="https://wiki.gentoo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-560 ns-subject page-Handbook_X86_Installation_Disks_zh-cn skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="https://wiki.gentoo.org/" title="Back to the homepage" class="site-logo"><object data="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.svg" type="image/svg+xml">
							<img src="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="../../../Special_MyLanguage/Help_Contents.html" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Gentoo.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="../../../Project_Gentoo.html">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Documentation.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="../../../Handbook_Main_Page.html">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="../../../FAQ.html">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="../../../Project_Documentation/Overview.html">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="../../../Category_Core_system.html">Core system</a></li><li id="n-Hardware"><a href="../../../Category_Hardware.html">Hardware</a></li><li id="n-Software"><a href="../../../Category_Software.html">Software</a></li><li id="n-Desktop"><a href="../../../Category_Desktop.html">Desktop</a></li><li id="n-Server-.26-Security"><a href="../../../Category_Server_and_Security.html">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="../../../Category_Project_and_Community.html">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="../../../Special_WhatLinksHere/Handbook_X86/Installation/Disks/zh-cn.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../../Special_RecentChangesLinked/Handbook_X86/Installation/Disks/zh-cn.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Disks/zh-cn&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Disks/zh-cn&amp;oldid=335094" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Disks/zh-cn&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="../../../Special_Browse/Handbook_X86-2FInstallation-2FDisks-2Fzh-2Dcn.html" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FInstallation%2FDisks%2Fzh-cn&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FInstallation%2FDisks%2Fzh-cn" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-handbook" class="selected active"><a href="zh-cn.html">Handbook</a></li><li id="ca-talk" class="new"><a href="https://wiki.gentoo.org/index.php?title=Handbook_Talk:X86/Installation/Disks/zh-cn&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="https://wiki.gentoo.org/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Disks/zh-cn&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Disks/zh-cn&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="zh-CN">
							<span dir="auto">手册：X86/安装/准备磁盘</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages"><a href="../../../Special_MyLanguage/Handbook_X86.html" title="Special:MyLanguage/Handbook:X86">Handbook:X86</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="zh-CN" dir="ltr" class="mw-content-ltr"><div class="mw-translate-page-info" lang="en" dir="ltr">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.gentoo.org/index.php?title=Special:Translate&amp;group=page-Handbook%3AX86%2FInstallation%2FDisks&amp;action=page&amp;filter=&amp;language=zh-cn">translated version</a></span> of the page <a href="../Disks.html" title="Handbook:X86/Installation/Disks">Handbook:X86/Installation/Disks</a> and the translation is 100% complete.</div>
<hr /><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Installation/Festplatten (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Disks.html" title="Handbook:X86/Installation/Disks (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Instalación/Discos (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:X86/インストール/ディスク (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:X86/Installation/Disks/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Instalação/Discos (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Installation/Disks (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="tr.html" title="Handbook:X86/Installation/Disks/tr (50% translated)" class="mw-pt-progress mw-pt-progress--med">Türkçe</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</span></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 安装
</th></tr>
<tr>
<td> <a href="../About/zh-cn.html" title="Handbook:X86/Installation/About/zh-cn">关于安装</a>
</td></tr>
<tr>
<td> <a href="../Media/zh-cn.html" title="Handbook:X86/Installation/Media/zh-cn">选择安装媒介</a>
</td></tr>
<tr>
<td> <a href="../Networking/zh-cn.html" title="Handbook:X86/Installation/Networking/zh-cn">配置网络</a>
</td></tr>
<tr>
<td> <strong class="selflink">准备磁盘</strong>
</td></tr>
<tr>
<td> <a href="../Stage/zh-cn.html" title="Handbook:X86/Installation/Stage/zh-cn">安装stage3</a>
</td></tr>
<tr>
<td> <a href="../Base/zh-cn.html" title="Handbook:X86/Installation/Base/zh-cn">安装基本系统</a>
</td></tr>
<tr>
<td> <a href="../Kernel/zh-cn.html" title="Handbook:X86/Installation/Kernel/zh-cn">配置Linux内核</a>
</td></tr>
<tr>
<td> <a href="../System/zh-cn.html" title="Handbook:X86/Installation/System/zh-cn">配置系统</a>
</td></tr>
<tr>
<td> <a href="../Tools/zh-cn.html" title="Handbook:X86/Installation/Tools/zh-cn">安装系统工具</a>
</td></tr>
<tr>
<td> <a href="../Bootloader/zh-cn.html" title="Handbook:X86/Installation/Bootloader/zh-cn">配置系统引导程序Bootloader</a>
</td></tr>
<tr>
<td> <a href="../Finalizing/zh-cn.html" title="Handbook:X86/Installation/Finalizing/zh-cn">收尾安装工作</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 使用Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/zh-cn.html" title="Handbook:X86/Working/Portage/zh-cn">Portage介绍</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/zh-cn.html" title="Handbook:X86/Working/USE/zh-cn">USE标记</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/zh-cn.html" title="Handbook:X86/Working/Features/zh-cn">Portage功能特性</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/zh-cn.html" title="Handbook:X86/Working/Initscripts/zh-cn">初始化脚本（Initscript）系统</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/zh-cn.html" title="Handbook:X86/Working/EnvVar/zh-cn">环境变量</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 使用Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/zh-cn.html" title="Handbook:X86/Portage/Files/zh-cn">文件和目录</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/zh-cn.html" title="Handbook:X86/Portage/Variables/zh-cn">变量</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/zh-cn.html" title="Handbook:X86/Portage/Branches/zh-cn">混合使用不同的软件分支</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/zh-cn.html" title="Handbook:X86/Portage/Tools/zh-cn">额外的工具</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/zh-cn.html" title="Handbook:X86/Portage/CustomTree/zh-cn">定制Portage树</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/zh-cn.html" title="Handbook:X86/Portage/Advanced/zh-cn">高级特性</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 网络配置
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/zh-cn.html" title="Handbook:X86/Networking/Introduction/zh-cn">入门</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/zh-cn.html" title="Handbook:X86/Networking/Advanced/zh-cn">高级配置</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/zh-cn.html" title="Handbook:X86/Networking/Modular/zh-cn">模块化网络</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/zh-cn.html" title="Handbook:X86/Networking/Wireless/zh-cn">无线</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/zh-cn.html" title="Handbook:X86/Networking/Extending/zh-cn">添加功能</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/zh-cn.html" title="Handbook:X86/Networking/Dynamic/zh-cn">动态管理</a>
</td></tr></table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#.E5.9D.97.E8.AE.BE.E5.A4.87.E7.AE.80.E4.BB.8B"><span class="tocnumber">1</span> <span class="toctext">块设备简介</span></a>
<ul>
<li class="toclevel-2"><a href="#.E5.9D.97.E8.AE.BE.E5.A4.87"><span class="tocnumber">1.1</span> <span class="toctext">块设备</span></a></li>
<li class="toclevel-2"><a href="#.E5.88.86.E5.8C.BA"><span class="tocnumber">1.2</span> <span class="toctext">分区</span></a>
<ul>
<li class="toclevel-3"><a href="#MBR"><span class="tocnumber">1.2.1</span> <span class="toctext">MBR</span></a></li>
<li class="toclevel-3"><a href="#GPT"><span class="tocnumber">1.2.2</span> <span class="toctext">GPT</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#GPT.E8.BF.98.E6.98.AFMBR"><span class="tocnumber">1.3</span> <span class="toctext">GPT还是MBR</span></a></li>
<li class="toclevel-2"><a href="#.E4.BD.BF.E7.94.A8UEFI"><span class="tocnumber">1.4</span> <span class="toctext">使用UEFI</span></a></li>
<li class="toclevel-2"><a href="#.E9.AB.98.E7.BA.A7.E5.AD.98.E5.82.A8"><span class="tocnumber">1.5</span> <span class="toctext">高级存储</span></a></li>
<li class="toclevel-2"><a href="#.E9.BB.98.E8.AE.A4.E5.88.86.E5.8C.BA.E6.96.B9.E6.A1.88"><span class="tocnumber">1.6</span> <span class="toctext">默认分区方案</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E8.AE.BE.E8.AE.A1.E4.B8.80.E4.B8.AA.E5.88.86.E5.8C.BA.E6.96.B9.E6.A1.88"><span class="tocnumber">2</span> <span class="toctext">设计一个分区方案</span></a>
<ul>
<li class="toclevel-2"><a href="#.E5.A4.9A.E5.B0.91.E4.B8.AA.E4.BB.A5.E5.8F.8A.E5.A4.9A.E5.A4.A7.EF.BC.9F"><span class="tocnumber">2.1</span> <span class="toctext">多少个以及多大？</span></a></li>
<li class="toclevel-2"><a href="#.E9.82.A3.E4.B9.88swap.E7.A9.BA.E9.97.B4.E5.91.A2.EF.BC.9F"><span class="tocnumber">2.2</span> <span class="toctext">那么swap空间呢？</span></a></li>
<li class="toclevel-2"><a href="#.E4.BB.80.E4.B9.88.E6.98.AFBIOS.E5.BC.95.E5.AF.BC.E5.88.86.E5.8C.BA.EF.BC.9F"><span class="tocnumber">2.3</span> <span class="toctext">什么是BIOS引导分区？</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E9.BB.98.E8.AE.A4.EF.BC.9A.E4.BD.BF.E7.94.A8parted.E5.AF.B9.E7.A3.81.E7.9B.98.E8.BF.9B.E8.A1.8C.E5.88.86.E5.8C.BA"><span class="tocnumber">3</span> <span class="toctext">默认：使用parted对磁盘进行分区</span></a>
<ul>
<li class="toclevel-2"><a href="#.E4.BD.BF.E7.94.A8parted.E6.9F.A5.E7.9C.8B.E5.BD.93.E5.89.8D.E5.88.86.E5.8C.BA.E5.B8.83.E5.B1.80"><span class="tocnumber">3.1</span> <span class="toctext">使用parted查看当前分区布局</span></a></li>
<li class="toclevel-2"><a href="#.E8.AE.BE.E7.BD.AEGPT.E6.A0.87.E7.AD.BE"><span class="tocnumber">3.2</span> <span class="toctext">设置GPT标签</span></a></li>
<li class="toclevel-2"><a href="#.E4.BD.BF.E7.94.A8parted.E7.A7.BB.E9.99.A4.E5.85.A8.E9.83.A8.E5.88.86.E5.8C.BA"><span class="tocnumber">3.3</span> <span class="toctext">使用parted移除全部分区</span></a></li>
<li class="toclevel-2"><a href="#.E5.88.9B.E5.BB.BA.E5.88.86.E5.8C.BA"><span class="tocnumber">3.4</span> <span class="toctext">创建分区</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E5.A4.87.E9.80.89.EF.BC.9A.E4.BD.BF.E7.94.A8fdisk.E5.AF.B9.E7.A3.81.E7.9B.98.E8.BF.9B.E8.A1.8C.E5.88.86.E5.8C.BA"><span class="tocnumber">4</span> <span class="toctext">备选：使用fdisk对磁盘进行分区</span></a>
<ul>
<li class="toclevel-2"><a href="#.E6.9F.A5.E7.9C.8B.E5.BD.93.E5.89.8D.E5.88.86.E5.8C.BA.E5.B8.83.E5.B1.80"><span class="tocnumber">4.1</span> <span class="toctext">查看当前分区布局</span></a></li>
<li class="toclevel-2"><a href="#.E4.BD.BF.E7.94.A8fdisk.E7.A7.BB.E9.99.A4.E5.85.A8.E9.83.A8.E5.88.86.E5.8C.BA"><span class="tocnumber">4.2</span> <span class="toctext">使用fdisk移除全部分区</span></a></li>
<li class="toclevel-2"><a href="#.E5.88.9B.E5.BB.BABIOS.E5.BC.95.E5.AF.BC.E5.88.86.E5.8C.BA"><span class="tocnumber">4.3</span> <span class="toctext">创建BIOS引导分区</span></a></li>
<li class="toclevel-2"><a href="#.E5.88.9B.E5.BB.BA.E5.BC.95.E5.AF.BC.E5.88.86.E5.8C.BA"><span class="tocnumber">4.4</span> <span class="toctext">创建引导分区</span></a></li>
<li class="toclevel-2"><a href="#.E5.88.9B.E5.BB.BAswap.E5.88.86.E5.8C.BA"><span class="tocnumber">4.5</span> <span class="toctext">创建swap分区</span></a></li>
<li class="toclevel-2"><a href="#.E5.88.9B.E5.BB.BA.E6.A0.B9.E5.88.86.E5.8C.BA"><span class="tocnumber">4.6</span> <span class="toctext">创建根分区</span></a></li>
<li class="toclevel-2"><a href="#.E4.BF.9D.E5.AD.98.E5.88.86.E5.8C.BA.E5.B8.83.E5.B1.80"><span class="tocnumber">4.7</span> <span class="toctext">保存分区布局</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E5.88.9B.E5.BB.BA.E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F"><span class="tocnumber">5</span> <span class="toctext">创建文件系统</span></a>
<ul>
<li class="toclevel-2"><a href="#.E4.BB.8B.E7.BB.8D"><span class="tocnumber">5.1</span> <span class="toctext">介绍</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F"><span class="tocnumber">6</span> <span class="toctext">文件系统</span></a>
<ul>
<li class="toclevel-2"><a href="#.E4.B8.BA.E5.88.86.E5.8C.BA.E5.BA.94.E7.94.A8.E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F"><span class="tocnumber">6.1</span> <span class="toctext">为分区应用文件系统</span></a></li>
<li class="toclevel-2"><a href="#.E6.BF.80.E6.B4.BBswap.E5.88.86.E5.8C.BA"><span class="tocnumber">6.2</span> <span class="toctext">激活swap分区</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E6.8C.82.E8.BD.BD"><span class="tocnumber">7</span> <span class="toctext">挂载</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".E5.9D.97.E8.AE.BE.E5.A4.87.E7.AE.80.E4.BB.8B">块设备简介</span></h2>
<h3><span class="mw-headline" id=".E5.9D.97.E8.AE.BE.E5.A4.87">块设备</span></h3>
<p>让我们来好好看看Gentoo Linux以及普通Linux中有关磁盘方面的知识，包括Linux文件系统，分区和块设备。一旦磁盘和文件的来龙去脉都了解，我们将设置分区和文件系统的安装Gentoo Linux。
</p><p>首先，让我们来看看块设备。最著名的块设备可能是代表Linux系统第一块磁盘的<span style="font-family: monospace; font-size: 95%">/dev/sda</span>。SCSI和SATA磁盘全标为<span style="font-family: monospace; font-size: 95%">/dev/sd*</span>；甚至IDE磁盘在新的libata内核框架下也标为<span style="font-family: monospace; font-size: 95%">/dev/sd*</span>。当使用老设备框架时，第一个IDE磁盘是<span style="font-family: monospace; font-size: 95%">/dev/hda</span>。
</p><p>上面的块设备代表的抽象接口的磁盘。用户程序可以使用这些块设备来与你的磁盘进行交互，而无需担心驱动器到底是IDE，SCSI还是其他什么东西。该程序可以把磁盘当作一系列连续的，可随机访问的512字节块的存储。
</p><p><br />
</p><p><br />
</p>
<h3><span class="mw-headline" id=".E5.88.86.E5.8C.BA">分区</span></h3>
<p>Although it is theoretically possible to use a full disk to house a Linux system, this is almost never done in practice. Instead, full disk block devices are split up in smaller, more manageable block devices. On x86 systems, these are called partitions. There are currently two standard partitioning technologies in use: MBR and GPT.
</p>
<h4><span class="mw-headline" id="MBR">MBR</span></h4>
<p>The <i>MBR (Master Boot Record)</i> setup uses 32-bit identifiers for the start sector and length of the partitions, and supports three partition types: primary, extended and logical. Primary partitions have their information stored in the master boot record itself - a very small (usually 512 bytes) location at the very beginning of a disk. Due to this small space, only four primary partitions are supported (for instance, <span style="font-family: monospace; font-size: 95%">/dev/sda1</span> to <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>).
</p><p>To support more partitions, one of the primary partitions can be marked as an extended partition. This partition can then contain logical partitions (partitions within a partition).
</p><p>Each partition is limited to 2 TB in size (due to the 32-bit identifiers). Also, the MBR setup does not provide any backup-MBR, so if an application or user overwrites the MBR, all partition information is lost.
</p>
<h4><span class="mw-headline" id="GPT">GPT</span></h4>
<p>The <i>GPT (GUID Partition table)</i> setup uses 64-bit identifiers for the partitions. The location in which it stores the partition information is also much bigger than the 512 bytes of an MBR, and there is no limit on the amount of partitions. Also the size of a partition is bounded by a much greater limit (almost 8 ZB - yes, zettabytes).
</p><p>When a system's software interface between the operating system and firmware is UEFI (instead of BIOS), GPT is almost mandatory as compatibility issues will arise with MBR here.
</p><p>GPT also has the advantage that it has a backup GPT at the end of the disk, which can be used to recover damage of the primary GPT at the beginning. GPT also carries CRC32 checksums to detect errors in the header and partition tables.
</p>
<h3><span class="mw-headline" id="GPT.E8.BF.98.E6.98.AFMBR">GPT还是MBR</span></h3>
<p>From the description above, one might think that using GPT should always be the recommended approach. But there are a few caveats with this.
</p><p>Using GPT on a BIOS-based computer works, but then one cannot dual-boot with a Microsoft Windows operating system. The reason is that Microsoft Windows will boot in EFI mode if it detects a GPT partition label.
</p><p>Some buggy BIOSes or EFIs configured to boot in BIOS/CSM/legacy mode might also have problems with booting from GPT labeled disks. If that is the case, it might be possible to work around the problem by adding the boot/active flag on the protective MBR partition which has to be done through <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> with the <code>-t dos</code> option to force it to read the partition table using the MBR format.
</p><p>In this case, launch <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> and toggle the flag using the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">a</kbd> key. Press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">1</kbd> to select the first partition, then press the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">w</kbd> key to write the changes to the disk and exit the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> application:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>fdisk -t dos /dev/sda</code></div><pre>
Welcome to fdisk (util-linux 2.24.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.
  
Command (m for help): a
Partition number (1-4): 1
  
Command (m for help): w
</pre></div>
<h3><span class="mw-headline" id=".E4.BD.BF.E7.94.A8UEFI">使用UEFI</span></h3>
<p>When installing Gentoo on a system that uses UEFI to boot the operating system (instead of BIOS), then it is important that an EFI system partition is created. The instructions for <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> below contain the necessary pointers for this.
</p><p>The EFI system partition also needs to be a FAT32 partition (or <i>vfat</i> as it is shown on Linux systems). The instructions at the end of this chapter use <i>ext2</i> as the example file system for the <span style="font-family: monospace; font-size: 95%">/boot/</span> partition. Make sure to use <i>vfat</i>, like so:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.vfat /dev/sda2</code></div></div>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />If the boot partition is not using the FAT32 (vfat) file system, then the systems UEFI firmware will not be able to find the Linux kernel and boot the system!</div>
<h3><span class="mw-headline" id=".E9.AB.98.E7.BA.A7.E5.AD.98.E5.82.A8">高级存储</span></h3>
<p>The x86 Installation CDs provide support for LVM2. LVM2 increases the flexibility offered by the partitioning setup. During the installation instructions, we will focus on "regular" partitions, but it is still good to know LVM2 is supported as well.
</p>
<h3><span class="mw-headline" id=".E9.BB.98.E8.AE.A4.E5.88.86.E5.8C.BA.E6.96.B9.E6.A1.88">默认分区方案</span></h3>
<p>Throughout the remainder of the handbook, the following partitioning scheme is used. If this suffices, then the reader can immediately jump to <a href="#Default:_Using_parted_to_partition_the_disk">Default: Using parted to partition the disk</a> or <a href="#Alternative:_Using_fdisk_to_partition_the_disk">Alternative: Using fdisk to partition the disk</a>. Both are partitioning tools, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> is well known and stable and recommended for the MBR partition layout, while <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> is more recent and recommended for GPT layouts.
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> 分区
</th>
<th> 文件系统
</th>
<th> 大小
</th>
<th> 描述
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> （引导器）
</td>
<td> 2M
</td>
<td> BIOS引导分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> ext2（或者vfat）
</td>
<td> 128M
</td>
<td> 引导分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> （swap）
</td>
<td> 512M及更高
</td>
<td> Swap分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> ext4
</td>
<td> 剩余的磁盘
</td>
<td> 根分区
</td></tr></table>
<p>Before going to the creation instructions, the first set of sections will describe in more detail how partitioning schemes can be created and what the common pitfalls are.
</p>
<h2><span class="mw-headline" id=".E8.AE.BE.E8.AE.A1.E4.B8.80.E4.B8.AA.E5.88.86.E5.8C.BA.E6.96.B9.E6.A1.88">设计一个分区方案</span></h2>
<h3><span class="mw-headline" id=".E5.A4.9A.E5.B0.91.E4.B8.AA.E4.BB.A5.E5.8F.8A.E5.A4.9A.E5.A4.A7.EF.BC.9F">多少个以及多大？</span></h3>
<p>分区的数量是高度依赖于环境。比如，如果有很多个用户，则建议有一个独立的<span style="font-family: monospace; font-size: 95%">/home/</span>，以增强安全性及便于备份。如果要安装的Gentoo是用来做邮件服务器，则<span style="font-family: monospace; font-size: 95%">/var/</span>应该独立，因为所有的邮件都储存于<span style="font-family: monospace; font-size: 95%">/var/</span>。选择一个正确的文件系统将会获得最大化的性能。游戏服务器应该有一个独立的<span style="font-family: monospace; font-size: 95%">/opt/</span>，因为大多数游戏服务器都安装在那里。原因也和<span style="font-family: monospace; font-size: 95%">/home/</span>一样：安全和备份。在大多数场景下，应该保持<span style="font-family: monospace; font-size: 95%">/usr/</span>大一些：不仅是因为它包含多数的应用程序，Portage树就要占用大约500MB，而且还不包含许多储存在其内的源码。
</p><p>由此可见，它非常依赖于管理员想用它来做什么。独立分区或卷有以下的优势：
</p>
<ul><li> 为每个分区或者卷选择性能最好的文件系统。</li>
<li> 当一个失控的工具持续向一个分区或卷写文件时，也不至于让整个系统由于无可用空间而无法运行。</li>
<li> 如果有必要，可以简化文件系统检查，多个检查可以并行的完成（其实在这一点上，有多个磁盘比多个分区更有优势）。</li>
<li> 可以通过在挂载一些分区或卷时使用只读、<code>nosuid</code>（忽略setuid属性）、<code>noexec</code>（忽略可执行属性）等来增加安全性。</li></ul>
<p>不过，多个分区同样也有劣势。如果不能合理的配置，系统可能会在一个分区上有很多空闲空间，而其他分区却没有空间。另外一个麻烦是独立的分区——尤其是像<span style="font-family: monospace; font-size: 95%">/usr/</span>或<span style="font-family: monospace; font-size: 95%">/var/</span>这样的重要挂载点——经常需要管理员在引导时通过一个initramfs来在其他引导脚本启动前挂载这些分区。在不同的情况下，结果也可能不同。
</p><p>另外对于SCSI和SATA还有一个最多15分区的限制，除非使用GPT标签。
</p>
<h3><span class="mw-headline" id=".E9.82.A3.E4.B9.88swap.E7.A9.BA.E9.97.B4.E5.91.A2.EF.BC.9F">那么swap空间呢？</span></h3>
<p>对于swap空间，没有一个完美值。swap空间的目的是当内存（RAM）有压力时为内核提供磁盘存储。一个swap空间允许内核将看过来稍后不会被访问的内存页面移动到磁盘（swap或者page-out）、施放内存。当然，如果那块内存突然要使用到，需要花一些时间（相比较内存，硬盘是非常慢的）将这些页面需要放回到内存中（page-in）。
</p><p>如果系统不运行很需要内存的应用程序或系统有足够多的可能内存，则不需要太多的swap空间。不过，swap空间还用来在休眠时储存整个内存。如果一个系统需要休眠，则需要大一点的swap空间，通常至少为系统安装的内存数量。
</p><p><br />
</p>
<h3><span class="mw-headline" id=".E4.BB.80.E4.B9.88.E6.98.AFBIOS.E5.BC.95.E5.AF.BC.E5.88.86.E5.8C.BA.EF.BC.9F">什么是BIOS引导分区？</span></h3>
<p>A BIOS boot partition is a very small (1 to 2 MB) partition in which boot loaders like GRUB2 can put additional data that doesn't fit in the allocated storage (a few hundred bytes in case of MBR) and cannot be placed elsewhere.
</p><p>Such partitions are not always necessary, but considering the low space consumption and the difficulties we have with documenting the plethora of partitioning differences otherwise, it is recommended to create it in either case.
</p><p>For completeness, the BIOS boot partition is needed when GPT partition layout is used with GRUB2, or when the MBR partition layout is used with GRUB2 when the first partition starts earlier than the 1 MB location on the disk.
</p>
<h2><span class="mw-headline" id=".E9.BB.98.E8.AE.A4.EF.BC.9A.E4.BD.BF.E7.94.A8parted.E5.AF.B9.E7.A3.81.E7.9B.98.E8.BF.9B.E8.A1.8C.E5.88.86.E5.8C.BA">默认：使用parted对磁盘进行分区</span></h2>
<p>In this chapter, the example partition layout mentioned earlier in the instructions will be used:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> 分区
</th>
<th> 描述
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> BIOS引导分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> 引导分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> Swap分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> 根分区
</td></tr></table>
<p>Change the partition layout according to personal preference. 
</p>
<h3><span class="mw-headline" id=".E4.BD.BF.E7.94.A8parted.E6.9F.A5.E7.9C.8B.E5.BD.93.E5.89.8D.E5.88.86.E5.8C.BA.E5.B8.83.E5.B1.80">使用parted查看当前分区布局</span></h3>
<p>The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> application offers a simple interface for partitioning the disks and supports very large partitions (more than 2 TB). Fire up <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> against the disk (in our example, we use <span style="font-family: monospace; font-size: 95%">/dev/sda</span>). It is recommended to ask <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> to use optimal partition alignment:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>parted -a optimal /dev/sda</code></div><pre>
GNU Parted 2.3
Using /dev/sda
Welcome to GNU Parted! Type 'help' to view a list of commands.
</pre></div>
<p>Alignment means that partitions are started on well-known boundaries within the disk, ensuring that operations on the disk from the operating system level (retrieve pages from the disk) use the least amount of internal disk operations. Misaligned partitions might require the disk to fetch two pages instead of one even if the operating system asked for a single page.
</p><p>To find out about all options supported by parted, type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">help</span> and press return.
</p>
<h3><span class="mw-headline" id=".E8.AE.BE.E7.BD.AEGPT.E6.A0.87.E7.AD.BE">设置GPT标签</span></h3>
<p>Most disks on the <b><span style="font-family: monospace; font-size: 95%; color: #54487a">x86</span></b> or <b><span style="font-family: monospace; font-size: 95%; color: #54487a">amd64</span></b> architectures are prepared using an <i>msdos</i> label. Using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span>, the command to put a GPT label on the disk is <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel gpt</span>:
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />Changing the partition type will remove all partitions from the disk. All data on the disk will be lost.</div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mklabel gpt</code></div></div>
<p>To have the disk with MBR layout, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel msdos</span>.
</p>
<h3><span class="mw-headline" id=".E4.BD.BF.E7.94.A8parted.E7.A7.BB.E9.99.A4.E5.85.A8.E9.83.A8.E5.88.86.E5.8C.BA">使用parted移除全部分区</span></h3>
<p>If this isn't done yet (for instance through the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel</span> operation earlier, or because the disk is a freshly formatted one), first remove all existing partitions from the disk. Type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">print</span> to view the current partitions, and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rm NUMBER</span> where NUMBER is the partition to remove.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>rm 2</code></div></div>
<p>Do the same for all other partitions that aren't needed. However, make sure to not make any mistakes here - parted executes the changes immediately (unlike <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> which stages them, allowing a user to "undo" his changes before saving or exiting fdisk).
</p>
<h3><span class="mw-headline" id=".E5.88.9B.E5.BB.BA.E5.88.86.E5.8C.BA">创建分区</span></h3>
<p>Now create the partitions. Creating partitions with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> isn't very difficult - all we need to do is inform parted about the following settings:
</p>
<ul><li> The partition type to use. This usually is <i>primary</i>. If the msdos partition label is used, keep in mind that there can be no more than 4 primary partitions. If more than 4 partitions are needed, make one of the first four partitions extended and create logical partitions inside it.</li>
<li> The start location of a partition (which can be expressed in MB, GB, ...)</li>
<li> The end location of the partition (which can be expressed in MB, GB, ...)</li></ul>
<p>First, tell parted that the size unit we work with is megabytes (actually mebibytes, abbreviated as MiB which is the "standard" notation, but we will use MB in the text throughout as it is much more common):
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>unit mib</code></div></div>
<p>Now create a 2 MB partition that will be used by the GRUB2 boot loader later. Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkpart</span> command for this, and inform <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> to start from 1 MB and end at 3 MB (creating a partition of 2 MB in size).
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 1 3
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 1 grub
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>set 1 bios_grub on
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>print</code></div><pre>
Model: Virtio Block Device (virtblk)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
  
Number   Start      End      Size     File system  Name   Flags
 1       1.00MiB    3.00MiB  2.00MiB               grub   bios_grub
</pre></div>
<p>Do the same for the boot partition (128 MB), swap partition (in the example, 512 MB) and the root partition that spans the remaining disk (for which the end location is marked as -1, meaning the end of the disk minus one MB, which is the farthest a partition can go).
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 3 131
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 2 boot
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 131 643
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 3 swap
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 643 -1
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 4 rootfs</code></div></div>
<p>When using the UEFI interface to boot the system (instead of BIOS), mark the boot partition as the EFI System Partition. Parted does this automatically when the <i>boot</i> option is set on the partition:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>set 2 boot on</code></div></div>
<p>The end result looks like so:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>print</code></div><pre>
Model: Virtio Block Device (virtblk)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
  
Number   Start      End      Size     File system  Name   Flags
 1       1.00MiB    3.00MiB  2.00MiB               grub   bios_grub
 2       3.00MiB    131MiB   128MiB                boot   boot
 3       131MiB     643MiB   512MiB                swap
 4       643MiB     20479MiB 19836MiB              rootfs
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />On an UEFI installation, the boot flag will show up on the boot partition.</div>
<p>Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">quit</span> command to exit parted.
</p>
<h2><span class="mw-headline" id=".E5.A4.87.E9.80.89.EF.BC.9A.E4.BD.BF.E7.94.A8fdisk.E5.AF.B9.E7.A3.81.E7.9B.98.E8.BF.9B.E8.A1.8C.E5.88.86.E5.8C.BA">备选：使用fdisk对磁盘进行分区</span></h2>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Although recent <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> should support GPT, it has still shown to have some issues with it. The instructions given below assume that the partition layout being used is MBR.</div>
<p>The following parts explain how to create the example partition layout using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span>. The example partition layout was mentioned earlier:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> 分区
</th>
<th> 描述
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> BIOS引导分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> 引导分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> Swap分区
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> 根分区
</td></tr></table>
<p>Change the partition layout according to personal preference. 
</p>
<h3><span class="mw-headline" id=".E6.9F.A5.E7.9C.8B.E5.BD.93.E5.89.8D.E5.88.86.E5.8C.BA.E5.B8.83.E5.B1.80">查看当前分区布局</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> is a popular and powerful tool to split a disk into partitions. Fire up <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> against the disk (in our example, we use <span style="font-family: monospace; font-size: 95%">/dev/sda</span>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>fdisk /dev/sda</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />To use GPT support, add <code>-t gpt</code>. It is recommended to closely investigate the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> output in case more recent developments in <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> change its default behavior of defaulting to MBR. The remainder of the instructions assume an MBR layout.</div>
<p>Use the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> key to display the disk's current partition configuration:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 240 heads, 63 sectors, 2184 cylinders
Units = cylinders of 15120 * 512 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1   *         1        14    105808+  83  Linux
/dev/sda2            15        49    264600   82  Linux swap
/dev/sda3            50        70    158760   83  Linux
/dev/sda4            71      2184  15981840    5  Extended
/dev/sda5            71       209   1050808+  83  Linux
/dev/sda6           210       348   1050808+  83  Linux
/dev/sda7           349       626   2101648+  83  Linux
/dev/sda8           627       904   2101648+  83  Linux
/dev/sda9           905      2184   9676768+  83  Linux
</pre></div>
<p>This particular disk is configured to house seven Linux filesystems (each with a corresponding partition listed as "Linux") as well as a swap partition (listed as "Linux swap").
</p>
<h3><span class="mw-headline" id=".E4.BD.BF.E7.94.A8fdisk.E7.A7.BB.E9.99.A4.E5.85.A8.E9.83.A8.E5.88.86.E5.8C.BA">使用fdisk移除全部分区</span></h3>
<p>First remove all existing partitions from the disk. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">d</kbd> to delete a partition. For instance, to delete an existing <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>d</code></div><pre>
Partition number (1-4): 1
</pre></div>
<p>The partition has now been scheduled for deletion. It will no longer show up when printing the list of partitions (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd>, but it will not be erased until the changes have been saved. This allows users to abort the operation if a mistake was made - in that case, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">q</kbd> immediately and hit enter and the partition will not be deleted.
</p><p>Repeatedly type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to print out a partition listing and then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">d</kbd> and the number of the partition to delete it. Eventually, the partition table will be empty:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
Device Boot    Start       End    Blocks   Id  System
</pre></div>
<p>Now that the in-memory partition table is empty, we're ready to create the partitions.
</p>
<h3><span class="mw-headline" id=".E5.88.9B.E5.BB.BABIOS.E5.BC.95.E5.AF.BC.E5.88.86.E5.8C.BA">创建BIOS引导分区</span></h3>
<p>First create a very small BIOS boot partition. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to select a primary partition, followed by <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">1</kbd> to select the first primary partition. When prompted for the first sector, make sure it starts from 2048 (which is needed for the boot loader) and hit enter. When prompted for the last sector, type +2M to create a partition 2 Mbyte in size:
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The start from sector 2048 is a fail-safe in case the boot loader does not detect this partition as being available for its use.</div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>n</code></div><pre>
Command action
  e   extended
  p   primary partition (1-4)
p
Partition number (1-4): 1
First sector (64-10486533532, default 64): 2048
Last sector, +sectors +size{M,K,G} (4096-10486533532, default 10486533532): +2M
</pre></div>
<p>Mark the partition for EFI purposes:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>t</code></div><pre>
Selected partition 1
Hex code (type L to list codes): 4
Changed system type of partition 1 to 4 (BIOS boot)
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Using EFI with MBR partition layout is discouraged. If an EFI capable system is used, please use GPT layout.</div>
<h3><span class="mw-headline" id=".E5.88.9B.E5.BB.BA.E5.BC.95.E5.AF.BC.E5.88.86.E5.8C.BA">创建引导分区</span></h3>
<p>Now create a small boot partition. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to select a primary partition, followed by <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">2</kbd> to select the second primary partition. When prompted for the first sector, accept the default by hitting <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, type +128M to create a partition 128 Mbyte in size:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>n</code></div><pre>
Command action
  e   extended
  p   primary partition (1-4)
p
Partition number (1-4): 2
First sector (5198-10486533532, default 5198): (Hit enter)
Last sector, +sectors +size{M,K,G} (4096-10486533532, default 10486533532): +128M
</pre></div>
<p>Now, when pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd>, the following partition printout is displayed:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1             1         3      5198+  ef  EFI (FAT-12/16/32)
/dev/sda2             3        14    105808+  83  Linux
</pre></div>
<p>Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">a</kbd> to toggle the bootable flag on a partition and select <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">2</kbd>. After pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> again, notice that an * is placed in the "Boot" column.
</p>
<h3><span class="mw-headline" id=".E5.88.9B.E5.BB.BAswap.E5.88.86.E5.8C.BA">创建swap分区</span></h3>
<p>To create the swap partition, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to tell fdisk to create a primary partition. Then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">3</kbd> to create the third primary partition, <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>. When prompted for the first sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, type +512M (or any other size needed for the swap space) to create a partition 512MB in size.
</p><p>After all this is done, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">t</kbd> to set the partition type, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">3</kbd> to select the partition just created and then type in <i>82</i> to set the partition type to "Linux Swap".
</p>
<h3><span class="mw-headline" id=".E5.88.9B.E5.BB.BA.E6.A0.B9.E5.88.86.E5.8C.BA">创建根分区</span></h3>
<p>Finally, to create the root partition, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to tell <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> to create a primary partition. Then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">4</kbd> to create the fourth primary partition, <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>. When prompted for the first sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd> to create a partition that takes up the rest of the remaining space on the disk. After completing these steps, typing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> should display a partition table that looks similar to this:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1             1         3      5198+  ef  EFI (FAT-12/16/32)
/dev/sda2   *         3        14    105808+  83  Linux
/dev/sda3            15        81    506520   82  Linux swap
/dev/sda4            82      3876  28690200   83  Linux
</pre></div>
<h3><span class="mw-headline" id=".E4.BF.9D.E5.AD.98.E5.88.86.E5.8C.BA.E5.B8.83.E5.B1.80">保存分区布局</span></h3>
<p>To save the partition layout and exit <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span>, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">w</kbd>.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>w</code></div></div>
<p>With the partitions created, it is now time to put filesystems on them.
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id=".E5.88.9B.E5.BB.BA.E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F">创建文件系统</span></h2>
<h3><span class="mw-headline" id=".E4.BB.8B.E7.BB.8D">介绍</span></h3>
<p>现在分区已经创建，该在上面设置文件系统了。下一章节中描述了Linux所支持的众多文件系统。知道使用哪一个文件系统的读者可以继续阅读<a href="#Applying_a_filesystem_to_a_partition">为分区应用文件系统</a>。剩下的人应该学习可用的文件系统……
</p>
<h2><span class="mw-headline" id=".E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F">文件系统</span></h2>
<p>有一些可以使用的文件系统。有些在x86架构上稳定——建议在选择为一个重要分区实验性的选择文件系统前继续阅读。
</p>
<dl><dt> btrfs</dt>
<dd> 是下一代文件系统，提供了许多高级功能，如快照，通过校验和自我修复、 透明压缩、 子卷和集成 RAID。几个发行版已经开始将它作为一个默认的选项,但它还未为生产工作做好准备。文件系统报告崩溃是常见的。其开发人员敦促人们运行最新的内核版本来解决安全问题,以及老的问题。 这种情况已经很多年了,现在使用它还为时过早。如果出现变更，以及发生了变化，解决错误问题，都很少往旧内核注入补丁。请谨慎使用这个文件系统! </dd>
<dt> ext2</dt>
<dd> 是经考验证明可靠的Linux文件系统，但是没有元数据日志，这意味这在启动系统时的ext2文件系统的日常检查相当耗时。现在相当一部分的新一代的日志文件系统都可以非常迅速检查一致性，因此比那些非日志文件系统更受欢迎。当你启动系统碰巧遇到文件系统状态不一致时，日志文件系统不会在那里耽搁很长时间。</dd>
<dt> ext3</dt>
<dd> 是ext2文件系统的带日志版本，提供了元数据日志模式以快速恢复数据。此外还提供了其他增强的日志模式，如完整数据日志模式和有序数据日志模式。它使用了HTree索引，在几乎所有的情况下都能保持高性能。简而言之，ext3是非常好及可靠的文件系统。</dd>
<dt> ext4 </dt>
<dd>最初创建为ext3的一个分支，EXT4带来了新的功能，性能改进和去除中度更改磁盘格式大小限制。它可以跨越体积高达1的EB并用16 TB最大文件大小。取而代之的是经典的ext2/3位块分配的ext4的使用范围，这对提高大文件的性能，并减少碎片。的Ext4还提供了更为复杂的块分配算法（延迟分配和多嵌段分配）给文件系统驱动更多的方式来优化数据的布局在磁盘上。 EXT4是推荐的通用所有平台的文件系统。</dd>
<dt> JFS</dt>
<dd> 是IBM的高性能日志文件系统。JFS是一个轻量级的、快速的和稳定的基于B+树的文件系统，在很多情况下都有很好的表现。</dd>
<dt> ReiserFS</dt>
<dd>是基于B+树的文件系统，它有着非常全面的性能，特别时在处理很多小文件的时候，虽然会占用多一点CPU。ReiserFS相比其他文件系统显得受维护的不够。</dd>
<dt> XFS </dt>
<dd> 是一种带元数据日志的文件系统，它有一个健壮的特性集，并且对可伸缩性进行了优化。XFS似乎对各种各样的硬件问题显得不够宽容。</dd>
<dt> vfat</dt>
<dd> 也称为FAT32，被支持Linux，但不支持任何权限设置。它主要用于互操作性与其他操作系统（主要是微软的Windows），但也是很有必要的一些系统固件（如UEFI）的支持。</dd></dl>
<p>When using ext2, ext3 or ext4 on a small partition (less than 8GB), then the file system must be created with the proper options to reserve enough inodes. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mke2fs</span> application uses the "bytes-per-inode" setting to calculate how many inodes a file system should have. On smaller partitions, it is advised to increase the calculated number of inodes.
</p><p>对于ext2，可以使用下面的命令来完成：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -T small /dev/&lt;device&gt;</code></div></div>
<p>对于ext3或ext4，添加<code>-j</code>选项来启用日志：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -j -T small /dev/&lt;device&gt;</code></div></div>
<p>This will generally quadruple the number of inodes for a given file system as its "bytes-per-inode" reduces from one every 16kB to one every 4kB. This can be tuned even further by providing the ratio:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -i &lt;ratio&gt; /dev/&lt;device&gt;</code></div></div>
<h3><span class="mw-headline" id=".E4.B8.BA.E5.88.86.E5.8C.BA.E5.BA.94.E7.94.A8.E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F">为分区应用文件系统</span></h3>
<p>To create a filesystem on a partition or volume, there are tools available for each possible filesystem:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col" width="15%"> 文件系统
</th>
<th> 创建命令
</th></tr>
<tr>
<td> btrfs
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.btrfs</span>
</td></tr>
<tr>
<td> ext2
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext2</span>
</td></tr>
<tr>
<td> ext3
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext3</span>
</td></tr>
<tr>
<td> ext4
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext4</span>
</td></tr>
<tr>
<td> jfs
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.jfs</span>
</td></tr>
<tr>
<td> reiserfs
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkreiserfs</span>
</td></tr>
<tr>
<td> xfs
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.xfs</span>
</td></tr>
<tr>
<td> vfat
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.vfat</span>
</td></tr></table>
<p>For instance, to have the boot partition (<span style="font-family: monospace; font-size: 95%">/dev/sda2</span>) in ext2 and the root partition (<span style="font-family: monospace; font-size: 95%">/dev/sda4</span>) in ext4 as used in the example partition structure, the following commands would be used:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.ext2 /dev/sda2</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.ext4 /dev/sda4</code></div></div>
<p>Now create the filesystems on the newly created partitions (or logical volumes).
</p>
<h3><span class="mw-headline" id=".E6.BF.80.E6.B4.BBswap.E5.88.86.E5.8C.BA">激活swap分区</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkswap</span> is the command that is used to initialize swap partitions:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkswap /dev/sda3</code></div></div>
<p>To activate the swap partition, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">swapon</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>swapon /dev/sda3</code></div></div>
<p>Create and activate the swap with the commands mentioned above.
</p>
<h2><span class="mw-headline" id=".E6.8C.82.E8.BD.BD">挂载</span></h2>
<p>Now that the partitions are initialized and are housing a filesystem, it is time to mount those partitions. Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mount</span> command, but don't forget to create the necessary mount directories for every partition created. As an example we mount the root and boot partition:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount /dev/sda4 /mnt/gentoo</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir /mnt/gentoo/boot</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount /dev/sda2 /mnt/gentoo/boot</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 附注</strong><br />如果<span style="font-family: monospace; font-size: 95%">/tmp/</span>需要放在一个独立分区，确保在挂载后变更它的权限：
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>chmod 1777 /mnt/gentoo/tmp</code></div></div>
这同样适用于<span style="font-family: monospace; font-size: 95%">/var/tmp</span>。</div>
<p>Later in the instructions the proc filesystem (a virtual interface with the kernel) as well as other kernel psuedo-filesystems will be mounted. But first we <a href="../Stage.html" title="Handbook:X86/Installation/Stage">install the Gentoo installation files</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../Networking/zh-cn.html" title="Previous part" class="btn btn-default">&#8592; Configuring the network</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../Stage/zh-cn.html" title="Next part" class="btn btn-default">Installing Stage3 &#8594;</a></div>
<p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20160112154244
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.848 seconds
Real time usage: 0.920 seconds
Preprocessor visited node count: 4234/1000000
Preprocessor generated node count: 4770/1000000
Post‐expand include size: 188407/2097152 bytes
Template argument size: 10463/2097152 bytes
Highest expansion depth: 15/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  726.676      1 - Handbook:Parts/Installation/Disks/zh-cn
100.00%  726.676      1 - -total
 47.81%  347.451      1 - Handbook:X86/Blocks/Disks/zh-cn
 47.36%  344.129      1 - Handbook:AMD64/Blocks/Disks/zh-cn
 27.91%  202.838     30 - Template:GenericCmd
 22.26%  161.774      1 - Handbook:Parts/TOC/zh-cn
 19.90%  144.612     13 - Template:RootCmd
 19.65%  142.808     17 - Template:Cmd
  6.18%   44.893     39 - Template:GenericCmd/Line
  5.59%   40.613     36 - Template:Path
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:128448-0!*!0!!en!*!* and timestamp 20160112154243 and revision id 335094
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Disks/zh-cn&amp;oldid=335094">http://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Disks/zh-cn&amp;oldid=335094</a>"</div>
															<div id='catlinks' class='catlinks catlinks-allhidden'></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 6 July 2015, at 05:45.</li>
																															<li id="privacy"><a href="../../../Gentoo_Wiki_Privacy_policy.html" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="../../../Gentoo_Wiki_About.html" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="../../../Gentoo_Wiki_General_disclaimer.html" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "Handbook:X86/Installation/Disks/zh-cn"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="http://piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":1124});
} );</script></body>
<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Installation/Disks/zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:46:50 GMT -->
</html>