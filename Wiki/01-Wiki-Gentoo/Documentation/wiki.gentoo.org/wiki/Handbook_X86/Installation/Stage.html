<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Installation/Stage by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Handbook:X86/Installation/Stage - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"Handbook","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":560,"wgPageName":"Handbook:X86/Installation/Stage","wgTitle":"X86/Installation/Stage","wgCurRevisionId":182084,"wgRevisionId":182084,"wgArticleId":67414,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Handbook:X86/Installation/Stage","wgRelevantArticleId":67414,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],"sfgAutocompleteOnAllChars":!1,
"sfgFieldProperties":[],"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en-us","en"],"wgULSCurrentAutonym":"English","wgTranslatePageTranslation":"source"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.smw.style","ext.translate","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.css" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="Handbook:X86/Installation/Stage" href="https://wiki.gentoo.org/index.php?title=Special:ExportRDF/Handbook:X86/Installation/Stage&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="https://wiki.gentoo.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.gentoo.org/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="https://wiki.gentoo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-560 ns-subject page-Handbook_X86_Installation_Stage skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="https://wiki.gentoo.org/" title="Back to the homepage" class="site-logo"><object data="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.svg" type="image/svg+xml">
							<img src="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="../../Special_MyLanguage/Help_Contents.html" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="../../Gentoo_Wiki_Menu-Gentoo.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="../../Project_Gentoo.html">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="../../Gentoo_Wiki_Menu-Documentation.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="../../Handbook_Main_Page.html">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="../../FAQ.html">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="../../Project_Documentation/Overview.html">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="../../Category_Core_system.html">Core system</a></li><li id="n-Hardware"><a href="../../Category_Hardware.html">Hardware</a></li><li id="n-Software"><a href="../../Category_Software.html">Software</a></li><li id="n-Desktop"><a href="../../Category_Desktop.html">Desktop</a></li><li id="n-Server-.26-Security"><a href="../../Category_Server_and_Security.html">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="../../Category_Project_and_Community.html">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="../../Special_WhatLinksHere/Handbook_X86/Installation/Stage.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../Special_RecentChangesLinked/Handbook_X86/Installation/Stage.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Stage&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Stage&amp;oldid=182084" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Stage&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="../../Special_Browse/Handbook_X86-2FInstallation-2FStage.html" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FInstallation%2FStage&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FInstallation%2FStage" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-handbook" class="selected active"><a href="Stage.html">Handbook</a></li><li id="ca-talk" class="new"><a href="https://wiki.gentoo.org/index.php?title=Handbook_Talk:X86/Installation/Stage&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="https://wiki.gentoo.org/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Stage&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Stage&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="en">
							<span dir="auto">Handbook:X86/Installation/Stage</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages"><a href="../../Special_MyLanguage/Handbook_X86.html" title="Special:MyLanguage/Handbook:X86">Handbook:X86</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="Stage/de.html" title="Handbuch:X86/Installation/Stage (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">English</span> • ‎<a href="Stage/es.html" title="Manual de Gentoo: X86/Instalación/Stage (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="Stage/ja.html" title="ハンドブック:X86/インストール/Stage (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="Stage/ko.html" title="Handbook:X86/Installation/Stage/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="Stage/pt-br.html" title="Manual:X86/Instalação/Stage (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="Stage/ru.html" title="Handbook:X86/Installation/Stage (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="Stage/tr.html" title="Handbook:X86/Installation/Stage/tr (50% translated)" class="mw-pt-progress mw-pt-progress--med">Türkçe</a> • ‎<a href="Stage/zh-cn.html" title="手册：X86/安装/安装stage3 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="About.html" title="Handbook:X86/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="Media.html" title="Handbook:X86/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="Networking.html" title="Handbook:X86/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <strong class="selflink">Installing stage3</strong>
</td></tr>
<tr>
<td> <a href="Base.html" title="Handbook:X86/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="Kernel.html" title="Handbook:X86/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="System.html" title="Handbook:X86/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="Tools.html" title="Handbook:X86/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="Bootloader.html" title="Handbook:X86/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="Finalizing.html" title="Handbook:X86/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../Working/Portage.html" title="Handbook:X86/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../Working/USE.html" title="Handbook:X86/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../Working/Features.html" title="Handbook:X86/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../Working/Initscripts.html" title="Handbook:X86/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../Working/EnvVar.html" title="Handbook:X86/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../Portage/Files.html" title="Handbook:X86/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../Portage/Variables.html" title="Handbook:X86/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../Portage/Branches.html" title="Handbook:X86/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../Portage/Tools.html" title="Handbook:X86/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../Portage/CustomTree.html" title="Handbook:X86/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../Portage/Advanced.html" title="Handbook:X86/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../Networking/Introduction.html" title="Handbook:X86/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../Networking/Advanced.html" title="Handbook:X86/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../Networking/Modular.html" title="Handbook:X86/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../Networking/Wireless.html" title="Handbook:X86/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../Networking/Extending.html" title="Handbook:X86/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../Networking/Dynamic.html" title="Handbook:X86/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Installing_a_stage_tarball"><span class="tocnumber">1</span> <span class="toctext">Installing a stage tarball</span></a>
<ul>
<li class="toclevel-2"><a href="#Setting_the_date_and_time"><span class="tocnumber">1.1</span> <span class="toctext">Setting the date and time</span></a></li>
<li class="toclevel-2"><a href="#Downloading_the_stage_tarball"><span class="tocnumber">1.2</span> <span class="toctext">Downloading the stage tarball</span></a></li>
<li class="toclevel-2"><a href="#Unpacking_the_stage_tarball"><span class="tocnumber">1.3</span> <span class="toctext">Unpacking the stage tarball</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Configuring_compile_options"><span class="tocnumber">2</span> <span class="toctext">Configuring compile options</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction"><span class="tocnumber">2.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#CFLAGS_and_CXXFLAGS"><span class="tocnumber">2.2</span> <span class="toctext">CFLAGS and CXXFLAGS</span></a></li>
<li class="toclevel-2"><a href="#MAKEOPTS"><span class="tocnumber">2.3</span> <span class="toctext">MAKEOPTS</span></a></li>
<li class="toclevel-2"><a href="#Ready.2C_set.2C_go"><span class="tocnumber">2.4</span> <span class="toctext">Ready, set, go</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Installing_a_stage_tarball">Installing a stage tarball</span></h2>
<h3><span class="mw-headline" id="Setting_the_date_and_time">Setting the date and time</span></h3>
<p>Before installing Gentoo, make sure that the date and time are set correctly. A mis-configured clock may lead to strange results in the future!
</p><p>To verify the current date and time, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">date</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>date</code></div><pre>
Fri Mar 29 16:21:18 UTC 2005
</pre></div>
<p>If the date/time displayed is wrong, update it using the <code>MMDDhhmmYYYY</code> syntax (Month, Day, hour, minute and Year). At this stage, it is recommended to use UTC time. Later on during the installation, the timezone will be defined.
</p><p>For instance, to set the date to March 29th, 16:21 in the year 2014:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>date 032916212014</code></div></div>
<h3><span class="mw-headline" id="Downloading_the_stage_tarball">Downloading the stage tarball</span></h3>
<p>Go to the Gentoo mount point where the root file system is mounted (most likely <span style="font-family: monospace; font-size: 95%">/mnt/gentoo</span>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /mnt/gentoo</code></div></div>
<p>Depending on the installation medium, there are a couple of tools available to download a stage. One of these tools is <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, a non-graphical, menu-driven browser. To download a stage, surf to the Gentoo mirror list like so:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>links <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>To use an HTTP proxy with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, pass on the URL with the <code>-http-proxy</code> option:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>links -http-proxy proxy.server.com:8080 <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>Next to <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span> there is also the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">lynx</span> browser. Like <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span> it is a non-graphical browser but it is not menu-driven.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>lynx <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>If a proxy needs to be defined, export the <var>http_proxy</var> and/or <var>ftp_proxy</var> variables:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export http_proxy="<a rel="nofollow" class="external free" href="http://proxy.server.com:port/">http://proxy.server.com:port</a>"
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export ftp_proxy="<a rel="nofollow" class="external free" href="http://proxy.server.com:port/">http://proxy.server.com:port</a>"</code></div></div>
<p>On the mirror list, select a mirror close by. Usually HTTP mirrors suffice, but other protocols are available as well. Move to the <span style="font-family: monospace; font-size: 95%">releases/x86/autobuilds/</span> directory. There all available stage files are displayed (they might be stored within subdirectories named after the individual sub-architectures). Select one and press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">D</kbd> to download.
</p><p>Like with the minimal installation CDs, additional downloads are available:
</p>
<ul><li> A <span style="font-family: monospace; font-size: 95%">.CONTENTS</span> file that contains a list of all files inside the stage tarball</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file that contains checksums of the stage file, in different algorithms</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file that, like the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file, contains checksums of the stage file in different algorithms, but is also cryptographically signed to ensure it is provided by the Gentoo project</li></ul>
<p>When finished, press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Q</kbd> to quit the browser.
</p><p>After downloading the stage file, it is possible to verify the integrity of the downloaded stage tarball. Use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">openssl</span> and compare the output with the checksums provided by the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> or <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file.
</p><p>For instance, to validate the SHA512 checksum:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>openssl dgst -r -sha512 stage3-x86-&lt;release&gt;.tar.bz2</code></div></div>
<p>Another way is to use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">sha512sum</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>sha512sum stage3-x86-&lt;release&gt;.tar.bz2</code></div></div>
<p>To validate the Whirlpool checksum:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>openssl dgst -r -whirlpool stage3-x86-&lt;release&gt;.tar.bz2</code></div></div>
<p>Compare the output of these commands with the value registered in the <span style="font-family: monospace; font-size: 95%">.DIGESTS(.asc)</span> files. The values need to match, otherwise the downloaded file might be corrupt (or the digests file is).
</p><p>Just like with the ISO file, it is also possible to verify the cryptographic signature of the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gpg</span> to make sure the checksums have not been tampered with:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>gpg --verify stage3-x86-&lt;release&gt;.tar.bz2.DIGESTS.asc</code></div></div>
<h3><span class="mw-headline" id="Unpacking_the_stage_tarball">Unpacking the stage tarball</span></h3>
<p>Now unpack the downloaded stage onto the system. We use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">tar</span> to proceed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>tar xvjpf stage3-*.tar.bz2 --xattrs</code></div></div>
<p>Make sure that the same options (<code>xvjpf</code> and <code>--xattrs</code>) are used. The x stands for Extract, the v for Verbose to see what happens during the extraction process (optional), the j for Decompress with bzip2, the p for Preserve permissions and the f to denote that we want to extract a File, not standard input. Finally, the <code>--xattrs</code> is to include the extended attributes stored in the archive as well.
</p><p>Now that the stage is installed, continue with <a href="#Configuring_the_compile_options">Configuring the compile options</a>.
</p>
<h2><span class="mw-headline" id="Configuring_compile_options">Configuring compile options</span></h2>
<h3><span class="mw-headline" id="Introduction">Introduction</span></h3>
<p>To optimize Gentoo, it is possible to set a couple of variables which impacts the behavior of Portage, Gentoo's officially supported package manager. All those variables can be set as environment variables (using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">export</span>) but that isn't permanent. To keep the settings, Portage reads in the <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> file, a configuration file for Portage.
</p><p>There is currently only one officially supported package manager for Gentoo, however alternatives to Portage do exist! <a href="../../Paludis.html" title="Paludis">Paludis</a> is a semi-popular alternative package manager found in the main Gentoo repository. From here on out the Handbook will presume Portage will be used as the system's package manager.
</p>
<div class="alert alert-success gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong>Tip</strong><br />A <a href="../../Paludis/Guide.html" title="Paludis/Guide">Paludis guide</a> has been written for users who are interested in configuring their system to use Paludis instead of Portage. Just remember: if things do not work out as expected Gentoo help channels will not provide support for non-official package managers!</div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />A commented listing of all possible variables can be found in <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/usr/share/portage/config/make.conf.example</span>. For a successful Gentoo installation only the variables that are mentioned below need to be set.</div>
<p>Fire up an editor (in this guide we use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">nano</span>) to alter the optimization variables we will discuss hereafter.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>From the <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file it is obvious how the file should be structured: commented lines start with "#", other lines define variables using the VARIABLE="content" syntax. Several of those variables are discussed next.
</p>
<h3><span class="mw-headline" id="CFLAGS_and_CXXFLAGS">CFLAGS and CXXFLAGS</span></h3>
<p>The <var>CFLAGS</var> and <var>CXXFLAGS</var> variables define the optimization flags for the GCC C and C++ compiler respectively. Although those are defined generally here, for maximum performance one would need to optimize these flags for each program separately. The reason for this is because every program is different. However, this is not manageable, hence the definition of these flags in the <span style="font-family: monospace; font-size: 95%">make.conf</span> file.
</p><p>In <span style="font-family: monospace; font-size: 95%">make.conf</span> one should define the optimization flags that will make the system the most responsive generally. Don't place experimental settings in this variable; too much optimization can make programs behave bad (crash, or even worse, malfunction).
</p><p>We will not explain all possible optimization options. To understand them all, read the <a rel="nofollow" class="external text" href="http://gcc.gnu.org/onlinedocs/">GNU Online Manual(s)</a> or the gcc info page (<span style="font-family: monospace; font-size: 95%; font-weight: bold;">info gcc</span> - only works on a working Linux system). The <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file itself also contains lots of examples and information; don't forget to read it too.
</p><p>A first setting is the <code>-march=</code> or <code>-mtune=</code> flag, which specifies the name of the target architecture. Possible options are described in the <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file (as comments). A commonly used value is <i>native</i> as that tells the compiler to select the target architecture of the current system (the one users are installing Gentoo on).
</p><p>A second one is the <code>-O</code> flag (that is a capital O, not a zero), which specifies the gcc optimization class flag. Possible classes are s (for size-optimized), 0 (zero - for no optimizations), 1, 2 or even 3 for more speed-optimization flags (every class has the same flags as the one before, plus some extras). <code>-O2</code> is the recommended default. <code>-O3</code> is known to cause problems when used system-wide, so we recommend to stick to <code>-O2</code>.
</p><p>Another popular optimization flag is <code>-pipe</code> (use pipes rather than temporary files for communication between the various stages of compilation). It has no impact on the generated code, but uses more memory. On systems with low memory, gcc might get killed. In that case, do not use this flag.
</p><p>Using <code>-fomit-frame-pointer</code> (which doesn't keep the frame pointer in a register for functions that don't need one) might have serious repercussions on the debugging of applications.
</p><p>When the <var>CFLAGS</var> and <var>CXXFLAGS</var> variables are defined, combine the several optimization flags in one string. The default values contained in the stage3 archive that is unpacked should be good enough. The following one is just an example:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example CFLAGS and CXXFLAGS variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-march=native -O2 -pipe&quot;</span>
<span class="c"># Use the same settings for both variables</span>
<span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CFLAGS</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div></pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The <a href="../../GCC_optimization.html" title="GCC optimization">GCC optimization guide</a> has more information on how the various compilation options can affect a system.</div>
<h3><span class="mw-headline" id="MAKEOPTS">MAKEOPTS</span></h3>
<p>The <var>MAKEOPTS</var> variable defines how many parallel compilations should occur when installing a package. A good choice is the number of CPUs (or CPU cores) in the system plus one, but this guideline isn't always perfect.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example MAKEOPTS declaration in make.conf</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">MAKEOPTS</span><span class="o">=</span><span class="s2">&quot;-j2&quot;</span>
</pre></div></pre></div>
<h3><span class="mw-headline" id="Ready.2C_set.2C_go">Ready, set, go</span></h3>
<p>Update the <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/etc/portage/make.conf</span> file to match personal preference and save (nano users would hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Ctrl</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">X</kbd>). 
</p><p>Then continue with <a href="Base.html" title="Handbook:X86/Installation/Base">Installing the Gentoo base system</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="Disks.html" title="Previous part" class="btn btn-default">&#8592; Preparing the disks</a> <a href="../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="Base.html" title="Next part" class="btn btn-default">Installing base system &#8594;</a></div>
<p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20160111221254
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.512 seconds
Real time usage: 0.561 seconds
Preprocessor visited node count: 1767/1000000
Preprocessor generated node count: 2895/1000000
Post‐expand include size: 47977/2097152 bytes
Template argument size: 5724/2097152 bytes
Highest expansion depth: 11/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  452.698      1 - Handbook:Parts/Installation/Stage
100.00%  452.698      1 - -total
 50.83%  230.110      1 - Handbook:Parts/TOC
 26.48%  119.890     13 - Template:RootCmd
 17.53%   79.368     13 - Template:GenericCmd
  4.51%   20.430     18 - Template:Path
  4.30%   19.447      1 - Handbook:Parts/Navigator
  3.94%   17.844     14 - Template:GenericCmd/Line
  2.72%   12.305      2 - Template:CodeBox
  1.92%    8.692      2 - Template:PreBox
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:67414-0!*!0!!en!*!* and timestamp 20160111221254 and revision id 182084
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Stage&amp;oldid=182084">http://wiki.gentoo.org/index.php?title=Handbook:X86/Installation/Stage&amp;oldid=182084</a>"</div>
															<div id='catlinks' class='catlinks catlinks-allhidden'></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 13 December 2014, at 19:41.</li>
																															<li id="privacy"><a href="../../Gentoo_Wiki_Privacy_policy.html" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="../../Gentoo_Wiki_About.html" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="../../Gentoo_Wiki_General_disclaimer.html" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "Handbook:X86/Installation/Stage"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="http://piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":677});
} );</script></body>
<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Installation/Stage by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:51 GMT -->
</html>