<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Full/Working/de by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Gentoo Linux x86 Handbuch: Arbeiten mit Gentoo - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"Handbook","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":560,"wgPageName":"Handbook:X86/Full/Working/de","wgTitle":"X86/Full/Working/de","wgCurRevisionId":217366,"wgRevisionId":217366,"wgArticleId":88580,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"de","wgPageContentModel":"wikitext","wgSeparatorTransformTable":[",\t.",".\t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],"wgMonthNamesShort":["","Jan.","Feb.","Mär.","Apr.","Mai","Jun.","Jul.","Aug.","Sep.","Okt.","Nov.","Dez."],"wgRelevantPageName":"Handbook:X86/Full/Working/de","wgRelevantArticleId":88580,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],"sfgAutocompleteOnAllChars":
!1,"sfgFieldProperties":[],"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en","*"],"wgULSCurrentAutonym":"English","wgTranslatePageTranslation":"translation"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.translate","ext.smw.style","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.css" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="Handbook:X86/Full/Working/de" href="https://wiki.gentoo.org/index.php?title=Special:ExportRDF/Handbook:X86/Full/Working/de&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="https://wiki.gentoo.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.gentoo.org/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="https://wiki.gentoo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-560 ns-subject page-Handbook_X86_Full_Working_de skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="https://wiki.gentoo.org/" title="Back to the homepage" class="site-logo"><object data="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.svg" type="image/svg+xml">
							<img src="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="../../../Special_MyLanguage/Help_Contents.html" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Gentoo.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="../../../Project_Gentoo.html">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Documentation.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="../../../Handbook_Main_Page.html">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="../../../FAQ.html">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="../../../Project_Documentation/Overview.html">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="../../../Category_Core_system.html">Core system</a></li><li id="n-Hardware"><a href="../../../Category_Hardware.html">Hardware</a></li><li id="n-Software"><a href="../../../Category_Software.html">Software</a></li><li id="n-Desktop"><a href="../../../Category_Desktop.html">Desktop</a></li><li id="n-Server-.26-Security"><a href="../../../Category_Server_and_Security.html">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="../../../Category_Project_and_Community.html">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="../../../Special_WhatLinksHere/Handbook_X86/Full/Working/de.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../../Special_RecentChangesLinked/Handbook_X86/Full/Working/de.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Working/de&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Working/de&amp;oldid=217366" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Working/de&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="../../../Special_Browse/Handbook_X86-2FFull-2FWorking-2Fde.html" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FFull%2FWorking%2Fde&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FFull%2FWorking%2Fde" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-handbook" class="selected active"><a href="de.html">Handbook</a></li><li id="ca-talk" class="new"><a href="https://wiki.gentoo.org/index.php?title=Handbook_Talk:X86/Full/Working/de&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="https://wiki.gentoo.org/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Working/de&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Working/de&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="de">
							<span dir="auto">Gentoo Linux x86 Handbuch: Arbeiten mit Gentoo</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages"><a href="../../../Special_MyLanguage/Handbook_X86.html" title="Special:MyLanguage/Handbook:X86">Handbook:X86</a> | <a href="../../../Special_MyLanguage/Handbook_X86/Full.html" title="Special:MyLanguage/Handbook:X86/Full">Full</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="de" dir="ltr" class="mw-content-ltr"><div class="mw-translate-page-info" lang="en" dir="ltr">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.gentoo.org/index.php?title=Special:Translate&amp;group=page-Handbook%3AX86%2FFull%2FWorking&amp;action=page&amp;filter=&amp;language=de">translated version</a></span> of the page <a href="../Working.html" title="Handbook:X86/Full/Working">Handbook:X86/Full/Working</a> and the translation is 100% complete.</div>
<hr /><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Welcome_to_portage"><span class="tocnumber">1</span> <span class="toctext">Welcome to portage</span></a></li>
<li class="toclevel-1"><a href="#Portage_tree"><span class="tocnumber">2</span> <span class="toctext">Portage tree</span></a>
<ul>
<li class="toclevel-2"><a href="#Ebuilds"><span class="tocnumber">2.1</span> <span class="toctext">Ebuilds</span></a></li>
<li class="toclevel-2"><a href="#Updating_the_portage_tree"><span class="tocnumber">2.2</span> <span class="toctext">Updating the portage tree</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Maintaining_software"><span class="tocnumber">3</span> <span class="toctext">Maintaining software</span></a>
<ul>
<li class="toclevel-2"><a href="#Searching_for_software"><span class="tocnumber">3.1</span> <span class="toctext">Searching for software</span></a></li>
<li class="toclevel-2"><a href="#Installing_software"><span class="tocnumber">3.2</span> <span class="toctext">Installing software</span></a></li>
<li class="toclevel-2"><a href="#Finding_installed_package_documentation"><span class="tocnumber">3.3</span> <span class="toctext">Finding installed package documentation</span></a></li>
<li class="toclevel-2"><a href="#Removing_software"><span class="tocnumber">3.4</span> <span class="toctext">Removing software</span></a></li>
<li class="toclevel-2"><a href="#Updating_the_system"><span class="tocnumber">3.5</span> <span class="toctext">Updating the system</span></a></li>
<li class="toclevel-2"><a href="#Metapackages"><span class="tocnumber">3.6</span> <span class="toctext">Metapackages</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Licenses"><span class="tocnumber">4</span> <span class="toctext">Licenses</span></a></li>
<li class="toclevel-1"><a href="#When_portage_is_complaining"><span class="tocnumber">5</span> <span class="toctext">When portage is complaining</span></a>
<ul>
<li class="toclevel-2"><a href="#Terminology"><span class="tocnumber">5.1</span> <span class="toctext">Terminology</span></a></li>
<li class="toclevel-2"><a href="#Blocked_packages"><span class="tocnumber">5.2</span> <span class="toctext">Blocked packages</span></a></li>
<li class="toclevel-2"><a href="#Masked_packages"><span class="tocnumber">5.3</span> <span class="toctext">Masked packages</span></a></li>
<li class="toclevel-2"><a href="#Necessary_USE_flag_changes"><span class="tocnumber">5.4</span> <span class="toctext">Necessary USE flag changes</span></a></li>
<li class="toclevel-2"><a href="#Missing_dependencies"><span class="tocnumber">5.5</span> <span class="toctext">Missing dependencies</span></a></li>
<li class="toclevel-2"><a href="#Ambiguous_ebuild_name"><span class="tocnumber">5.6</span> <span class="toctext">Ambiguous ebuild name</span></a></li>
<li class="toclevel-2"><a href="#Circular_dependencies"><span class="tocnumber">5.7</span> <span class="toctext">Circular dependencies</span></a></li>
<li class="toclevel-2"><a href="#Fetch_failed"><span class="tocnumber">5.8</span> <span class="toctext">Fetch failed</span></a></li>
<li class="toclevel-2"><a href="#System_profile_protection"><span class="tocnumber">5.9</span> <span class="toctext">System profile protection</span></a></li>
<li class="toclevel-2"><a href="#Digest_verification_failure"><span class="tocnumber">5.10</span> <span class="toctext">Digest verification failure</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Was_sind_USE-Flags"><span class="tocnumber">6</span> <span class="toctext">Was sind USE-Flags</span></a>
<ul>
<li class="toclevel-2"><a href="#Die_Idee_hinter_USE-Flags"><span class="tocnumber">6.1</span> <span class="toctext">Die Idee hinter USE-Flags</span></a></li>
<li class="toclevel-2"><a href="#Definition_of_a_USE_flag"><span class="tocnumber">6.2</span> <span class="toctext">Definition of a USE flag</span></a></li>
<li class="toclevel-2"><a href="#What_USE_flags_exist"><span class="tocnumber">6.3</span> <span class="toctext">What USE flags exist</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Using_USE_flags"><span class="tocnumber">7</span> <span class="toctext">Using USE flags</span></a>
<ul>
<li class="toclevel-2"><a href="#Declare_permanent_USE_flags"><span class="tocnumber">7.1</span> <span class="toctext">Declare permanent USE flags</span></a></li>
<li class="toclevel-2"><a href="#Declaring_USE_flags_for_individual_packages"><span class="tocnumber">7.2</span> <span class="toctext">Declaring USE flags for individual packages</span></a></li>
<li class="toclevel-2"><a href="#Declaring_temporary_USE_flags"><span class="tocnumber">7.3</span> <span class="toctext">Declaring temporary USE flags</span></a></li>
<li class="toclevel-2"><a href="#Precedence"><span class="tocnumber">7.4</span> <span class="toctext">Precedence</span></a></li>
<li class="toclevel-2"><a href="#Adapting_the_entire_system_to_the_new_USE_flags"><span class="tocnumber">7.5</span> <span class="toctext">Adapting the entire system to the new USE flags</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Package_specific_USE_flags"><span class="tocnumber">8</span> <span class="toctext">Package specific USE flags</span></a>
<ul>
<li class="toclevel-2"><a href="#Viewing_available_USE_flags"><span class="tocnumber">8.1</span> <span class="toctext">Viewing available USE flags</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Satisfying_REQUIRED_USE_conditions"><span class="tocnumber">9</span> <span class="toctext">Satisfying REQUIRED_USE conditions</span></a></li>
<li class="toclevel-1"><a href="#Portage_features"><span class="tocnumber">10</span> <span class="toctext">Portage features</span></a></li>
<li class="toclevel-1"><a href="#Distributed_compiling"><span class="tocnumber">11</span> <span class="toctext">Distributed compiling</span></a>
<ul>
<li class="toclevel-2"><a href="#Using_distcc"><span class="tocnumber">11.1</span> <span class="toctext">Using distcc</span></a></li>
<li class="toclevel-2"><a href="#Installing_distcc"><span class="tocnumber">11.2</span> <span class="toctext">Installing distcc</span></a></li>
<li class="toclevel-2"><a href="#Activating_Portage_distcc_support"><span class="tocnumber">11.3</span> <span class="toctext">Activating Portage distcc support</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Caching_compilation_objects"><span class="tocnumber">12</span> <span class="toctext">Caching compilation objects</span></a>
<ul>
<li class="toclevel-2"><a href="#About_ccache"><span class="tocnumber">12.1</span> <span class="toctext">About ccache</span></a></li>
<li class="toclevel-2"><a href="#Installing_ccache"><span class="tocnumber">12.2</span> <span class="toctext">Installing ccache</span></a></li>
<li class="toclevel-2"><a href="#Activating_Portage_ccache_support"><span class="tocnumber">12.3</span> <span class="toctext">Activating Portage ccache support</span></a></li>
<li class="toclevel-2"><a href="#Using_ccache_outside_Portage"><span class="tocnumber">12.4</span> <span class="toctext">Using ccache outside Portage</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Binary_package_support"><span class="tocnumber">13</span> <span class="toctext">Binary package support</span></a>
<ul>
<li class="toclevel-2"><a href="#Creating_prebuilt_packages"><span class="tocnumber">13.1</span> <span class="toctext">Creating prebuilt packages</span></a></li>
<li class="toclevel-2"><a href="#Installing_prebuilt_packages"><span class="tocnumber">13.2</span> <span class="toctext">Installing prebuilt packages</span></a></li>
<li class="toclevel-2"><a href="#Distributing_prebuilt_packages_to_others"><span class="tocnumber">13.3</span> <span class="toctext">Distributing prebuilt packages to others</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Fetching_files"><span class="tocnumber">14</span> <span class="toctext">Fetching files</span></a>
<ul>
<li class="toclevel-2"><a href="#Userfetch"><span class="tocnumber">14.1</span> <span class="toctext">Userfetch</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Pulling_validated_Gentoo_ebuild_tree_snapshots"><span class="tocnumber">15</span> <span class="toctext">Pulling validated Gentoo ebuild tree snapshots</span></a></li>
<li class="toclevel-1"><a href="#Runlevels"><span class="tocnumber">16</span> <span class="toctext">Runlevels</span></a>
<ul>
<li class="toclevel-2"><a href="#Booting_the_system"><span class="tocnumber">16.1</span> <span class="toctext">Booting the system</span></a></li>
<li class="toclevel-2"><a href="#Initscripts"><span class="tocnumber">16.2</span> <span class="toctext">Initscripts</span></a></li>
<li class="toclevel-2"><a href="#How_init_works"><span class="tocnumber">16.3</span> <span class="toctext">How init works</span></a></li>
<li class="toclevel-2"><a href="#Available_runlevels"><span class="tocnumber">16.4</span> <span class="toctext">Available runlevels</span></a></li>
<li class="toclevel-2"><a href="#Working_with_initscripts"><span class="tocnumber">16.5</span> <span class="toctext">Working with initscripts</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Updating_runlevels"><span class="tocnumber">17</span> <span class="toctext">Updating runlevels</span></a>
<ul>
<li class="toclevel-2"><a href="#rc-update"><span class="tocnumber">17.1</span> <span class="toctext">rc-update</span></a></li>
<li class="toclevel-2"><a href="#Adding_and_removing_services"><span class="tocnumber">17.2</span> <span class="toctext">Adding and removing services</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Configuring_services"><span class="tocnumber">18</span> <span class="toctext">Configuring services</span></a>
<ul>
<li class="toclevel-2"><a href="#Why_additional_configuration_is_needed"><span class="tocnumber">18.1</span> <span class="toctext">Why additional configuration is needed</span></a></li>
<li class="toclevel-2"><a href="#conf.d_directory"><span class="tocnumber">18.2</span> <span class="toctext">conf.d directory</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Writing_initscripts"><span class="tocnumber">19</span> <span class="toctext">Writing initscripts</span></a>
<ul>
<li class="toclevel-2"><a href="#Is_it_necessary"><span class="tocnumber">19.1</span> <span class="toctext">Is it necessary</span></a></li>
<li class="toclevel-2"><a href="#Layout"><span class="tocnumber">19.2</span> <span class="toctext">Layout</span></a></li>
<li class="toclevel-2"><a href="#Dependencies"><span class="tocnumber">19.3</span> <span class="toctext">Dependencies</span></a></li>
<li class="toclevel-2"><a href="#Controlling_the_order"><span class="tocnumber">19.4</span> <span class="toctext">Controlling the order</span></a></li>
<li class="toclevel-2"><a href="#Standard_functions"><span class="tocnumber">19.5</span> <span class="toctext">Standard functions</span></a></li>
<li class="toclevel-2"><a href="#Adding_custom_options"><span class="tocnumber">19.6</span> <span class="toctext">Adding custom options</span></a></li>
<li class="toclevel-2"><a href="#Service_configuration_variables"><span class="tocnumber">19.7</span> <span class="toctext">Service configuration variables</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Changing_runlevel_behavior"><span class="tocnumber">20</span> <span class="toctext">Changing runlevel behavior</span></a>
<ul>
<li class="toclevel-2"><a href="#Who_might_benefit_from_this"><span class="tocnumber">20.1</span> <span class="toctext">Who might benefit from this</span></a></li>
<li class="toclevel-2"><a href="#Using_softlevel"><span class="tocnumber">20.2</span> <span class="toctext">Using softlevel</span></a></li>
<li class="toclevel-2"><a href="#Using_bootlevel"><span class="tocnumber">20.3</span> <span class="toctext">Using bootlevel</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Environment_variables"><span class="tocnumber">21</span> <span class="toctext">Environment variables</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction"><span class="tocnumber">21.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#Important_examples"><span class="tocnumber">21.2</span> <span class="toctext">Important examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Defining_variables_globally"><span class="tocnumber">22</span> <span class="toctext">Defining variables globally</span></a>
<ul>
<li class="toclevel-2"><a href="#The_env.d_directory"><span class="tocnumber">22.1</span> <span class="toctext">The env.d directory</span></a></li>
<li class="toclevel-2"><a href="#env-update"><span class="tocnumber">22.2</span> <span class="toctext">env-update</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Defining_variables_locally"><span class="tocnumber">23</span> <span class="toctext">Defining variables locally</span></a>
<ul>
<li class="toclevel-2"><a href="#User_specific"><span class="tocnumber">23.1</span> <span class="toctext">User specific</span></a></li>
<li class="toclevel-2"><a href="#Session_specific"><span class="tocnumber">23.2</span> <span class="toctext">Session specific</span></a></li>
</ul>
</li>
</ul>
</div>

<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">Deutsch</span> • ‎<a href="../Working.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Trabajando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:X86/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:X86/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Trabalhando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #aaaaaa; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:left;">
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About/de.html" title="Handbook:X86/Installation/About/de">Über die Installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/de.html" title="Handbook:X86/Installation/Media/de">Auswählen des Mediums</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/de.html" title="Handbook:X86/Installation/Networking/de">Konfiguration des Netzwerks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/de.html" title="Handbook:X86/Installation/Disks/de">Vorbereiten der Festplatte(n)</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/de.html" title="Handbook:X86/Installation/Stage/de">Installation der stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/de.html" title="Handbook:X86/Installation/Base/de">Installation des Basissystems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/de.html" title="Handbook:X86/Installation/Kernel/de">Konfiguration des Kernels</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/de.html" title="Handbook:X86/Installation/System/de">Konfiguration des Systems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/de.html" title="Handbook:X86/Installation/Tools/de">Installation der Tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/de.html" title="Handbook:X86/Installation/Bootloader/de">Konfiguration des Bootloaders</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/de.html" title="Handbook:X86/Installation/Finalizing/de">Abschluss</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/de.html" title="Handbook:X86/Working/Portage/de">Portage-Einführung</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/de.html" title="Handbook:X86/Working/USE/de">USE-Flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/de.html" title="Handbook:X86/Working/Features/de">Portage-Features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/de.html" title="Handbook:X86/Working/Initscripts/de">Initskript-System</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/de.html" title="Handbook:X86/Working/EnvVar/de">Umgebungsvariablen</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/de.html" title="Handbook:X86/Portage/Files/de">Dateien und Verzeichnisse</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/de.html" title="Handbook:X86/Portage/Variables/de">Variablen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/de.html" title="Handbook:X86/Portage/Branches/de">Mischen von Softwarezweigen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/de.html" title="Handbook:X86/Portage/Tools/de">Zusätzliche Tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/de.html" title="Handbook:X86/Portage/CustomTree/de">Eigener Portage-Tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/de.html" title="Handbook:X86/Portage/Advanced/de">Erweiterte Portage-Features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Netzwerkkonfiguration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/de.html" title="Handbook:X86/Networking/Introduction/de">Zu Beginn</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/de.html" title="Handbook:X86/Networking/Advanced/de">Fortgeschrittene Konfiguration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/de.html" title="Handbook:X86/Networking/Modular/de">Modulare Vernetzung</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/de.html" title="Handbook:X86/Networking/Wireless/de">Drahtlose Netzwerke</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/de.html" title="Handbook:X86/Networking/Extending/de">Funktionalität hinzufügen</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/de.html" title="Handbook:X86/Networking/Dynamic/de">Dynamisches Netzwerkmanagement</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Welcome_to_portage">Welcome to portage</span></h2>
<p>Portage is one of Gentoo's most notable innovations in software management. With its high flexibility and enormous amount of features it is frequently seen as the best software management tool available for Linux.
</p><p>Portage is completely written in <a rel="nofollow" class="external text" href="http://www.python.org/">Python</a> and <a rel="nofollow" class="external text" href="http://www.gnu.org/software/bash">Bash</a> and therefore fully visible to the users as both are scripting languages.
</p><p>Most users will work with Portage through the <code>emerge</code> tool. This chapter is not meant to duplicate the information available from the emerge man page. For a complete rundown of emerge's options, please consult the man page:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>man emerge</code></div></div>
<h2><span class="mw-headline" id="Portage_tree">Portage tree</span></h2>
<h3><span class="mw-headline" id="Ebuilds">Ebuilds</span></h3>
<p>When Gentoo's documentation talks about packages, it means software titles that are available to the Gentoo users through the portage tree. The portage tree is a collection of ebuilds, files that contain all information portage needs to maintain software (install, search, query, ...). These ebuilds reside in <span style="font-family: monospace; font-size: 95%">/usr/portage</span> by default.
</p><p>Whenever someone asks portage to perform some action regarding software titles, it will use the ebuilds on the system as a base. It is therefore important to regularly update the ebuilds on the system so portage knows about new software, security updates, etc.
</p>
<h3><span class="mw-headline" id="Updating_the_portage_tree">Updating the portage tree</span></h3>
<p>The portage tree is usually updated with <code>rsync</code>, a fast incremental file transfer utility. Updating is fairly simple as the <code>emerge</code> command provides a front-end for <code>rsync</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync</code></div></div>
<p>Sometimes firewall restrictions apply that prevent <code>rsync</code> from contacting the mirrors. In this case, update the portage tree through Gentoo's daily generated portage tree snapshots. The <code>emerge-webrsync</code> tool automatically fetches and installs the latest snapshot on the system:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge-webrsync</code></div></div>
<p>An additional advantage of using <code>emerge-webrsync</code> is that it allows the administrator to only pull in portage tree snapshots that are signed by the Gentoo release engineering GPG key. More information on this can be found in the Portage Features section on Fetching Validated Portage Tree Snapshots.
</p>
<h2><span class="mw-headline" id="Maintaining_software">Maintaining software</span></h2>
<h3><span class="mw-headline" id="Searching_for_software">Searching for software</span></h3>
<p>There are multiple ways to search through the portage tree for software. One way is through <code>emerge</code> itself. By default, <code>emerge --search</code> returns the names of packages whose title matches (either fully or partially) the given search term.
</p><p>For instance, to search for all packages who have "pdf" in their name:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>emerge --search pdf</code></div></div>
<p>To search through the descriptions as well, use the <code>--searchdesc</code> (or <code>-S</code>) switch:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>emerge --searchdesc pdf</code></div></div>
<p>Notice that the output returns a lot of information. The fields are clearly labelled so we won't go further into their meanings:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example output for a search command</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>*  net-print/cups-pdf
      Latest version available: 1.5.2
      Latest version installed: [ Not Installed ]
      Size of downloaded files: 15 kB
      Homepage:    http://cip.physik.uni-wuerzburg.de/~vrbehr/cups-pdf/
      Description: Provides a virtual printer for CUPS to produce PDF files.
      License:     GPL-2
</pre></div></pre></div>
<h3><span class="mw-headline" id="Installing_software">Installing software</span></h3>
<p>When a software title has been found, then the installation is just one <code>emerge</code> command away. For instance, to install gnumeric:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-office/gnumeric</code></div></div> 
<p>Since many applications depend on each other, any attempt to install a certain software package might result in the installation of several dependencies as well. Don't worry, portage handles dependencies well. To find out what portage would install, add the <code>--pretend</code> switch. For instance:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --pretend gnumeric</code></div></div>
<p>During the installation of a package, portage will download the necessary source code from the Internet (if necessary) and store it by default in <span style="font-family: monospace; font-size: 95%">/usr/portage/distfiles/</span>. After this it will unpack, compile and install the package. To tell portage to only download the sources without installing them, add the <code>--fetchonly</code> option to the emerge command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --fetchonly gnumeric</code></div></div>
<h3><span class="mw-headline" id="Finding_installed_package_documentation">Finding installed package documentation</span></h3>
<p>Many packages come with their own documentation. Sometimes, the <i>doc</i> USE flag determines whether the package documentation should be installed or not. To see if the <i>doc</i> USE flag is used by a package, use <code>emerge -vp PACKAGENAME</code>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge -vp alsa-lib</code></div><pre>
...
[ebuild  N    ] media-libs/alsa-lib-1.0.14_rc1  -debug +doc 698 kB
</pre></div>
<p>The best way of enabling the doc USE flag is doing it on a per-package basis via <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span>, so that only the documentation for the wanted packages is installed. For more information, please read the <a href="../../Working/USE.html" title="Handbook:X86/Working/USE">USE flags chapter</a>.
</p><p>Once the package installed, its documentation is generally found in a subdirectory named after the package under the <span style="font-family: monospace; font-size: 95%">/usr/share/doc/</span> directory. It is also possible to list all installed files with the <code>equery</code> tool which is part of the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>ls -l /usr/share/doc/alsa-lib-1.0.14_rc1</code></div><pre>
total 28
-rw-r--r--  1 root root  669 May 17 21:54 ChangeLog.gz
-rw-r--r--  1 root root 9373 May 17 21:54 COPYING.gz
drwxr-xr-x  2 root root 8560 May 17 21:54 html
-rw-r--r--  1 root root  196 May 17 21:54 TODO.gz
</pre></div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>equery files alsa-lib | less</code></div><pre>
media-libs/alsa-lib-1.0.14_rc1
* Contents of media-libs/alsa-lib-1.0.14_rc1:
/usr
/usr/bin
/usr/bin/alsalisp
...
</pre></div>
<h3><span class="mw-headline" id="Removing_software">Removing software</span></h3>
<p>To remove software from a system, use <code>emerge --unmerge</code>. This will tell Portage to remove all files installed by that package from the system. One exception to this are the configuration files of that application <i>if</i> they have been altered by the user. Leaving the configuration files allows users to continue working with the package without the need for reconfiguration if the packages are installed again later on.
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warnung</strong><br />Portage will not check if the package to remove is required by another package. It will however warn when an important package woud be removed that breaks the system if it is unmerged.</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --unmerge gnumeric</code></div></div>
<p>When a package is removed from the system, the dependencies of that package that were installed automatically when it was installed are still left on the system. To have Portage locate all dependencies that can now be removed, use emerge's <code>--depclean</code> functionality, which is documented later.
</p>
<h3><span class="mw-headline" id="Updating_the_system">Updating the system</span></h3>
<p>To keep the system in perfect shape (and not to mention install the latest security updates) it is necessary to update the system regularly. Since Portage only checks the ebuilds in the portage tree, the first thing to do is to update the Portage tree. When the Portage tree is updated, the system can be updated using <code>emerge --update @world</code>. In the next example, the <code>--ask</code> switch is also used which will tell Portage to display the list of packages it wants to upgrade and ask for confirmation:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --ask @world</code></div></div>
<p>Portage will then search for newer version of the applications that are installed. However, it will only verify the versions for the applications that are explicitly installed (the applications listed in <span style="font-family: monospace; font-size: 95%">/var/lib/portage/world</span>) - it does not thoroughly check their dependencies. To update the dependencies of those packages as well, add the <code>--deep</code> argument:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep @world</code></div></div>
<p>Still, this doesn't mean all packages: some packages on the system are needed during the compile and build process of packages, but once that package is installed, these dependencies are no longer required. Portage calls those <i>build dependencies</i>. To include those in an update cycle, add <code>--with-bdeps=y</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --with-bdeps=y @world</code></div></div>
<p>Since security updates also happen in packages that are not explicitly installed on the system (but that are pulled in as dependencies of other programs), it is recommended to run this command once in a while.
</p><p>If the USE settings of the system have been altered, it is recommended to add <code>--newuse</code> as well. Portage will then verify if the change requires the installation of new packages or recompilation of existing ones:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --with-bdeps=y --newuse @world</code></div></div>
<h3><span class="mw-headline" id="Metapackages">Metapackages</span></h3>
<p>Some packages in the Portage tree don't have any real content but are used to install a collection of packages. For instance, the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/kde-base/kde-meta">kde-base/kde-meta</a> package will install a complete KDE environment on the system by pulling in various KDE-related packages as dependencies.
</p><p>To remove such a package from your system, running <code>emerge --unmerge</code> on the package won't have much effect as the dependencies remain on the system.
</p><p>Portage has the functionality to remove orphaned dependencies as well, but since the availability of software is dynamically dependent it is important to first update the entire system fully, including the new changes applied when changing USE flags. After this one can run <code>emerge --depclean</code> to remove the orphaned dependencies. When this is done, it might be necessary to rebuild the applications that were dynamically linked to the now-removed software titles but don't require them anymore, although recently support for this has been added to portage.
</p><p>All this is handled with the following three commands:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --newuse @world
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --depclean
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>revdep-rebuild</code></div></div>
<p><code>revdep-rebuild</code> is provided by the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package; don't forget to emerge it first:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-portage/gentoolkit</code></div></div> 
<h2><span class="mw-headline" id="Licenses">Licenses</span></h2>
<p>Beginning with Portage version 2.1.7, it is possible to accept or reject software installation based on its license. All packages in the tree contain a LICENSE entry in their ebuilds. Running <code>emerge --search PACKAGENAME</code> will show the package's license.
</p><p>By default, Portage permits all licenses, except <i>End User License Agreements (EULAs)</i> that require reading and signing an acceptance agreement.
</p><p>The variable that controls permitted licenses is called <code>ACCEPT_LICENSE</code>, which can be set in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>. In the next example, this default value is shown:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>The default ACCEPT_LICENSE setting</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">ACCEPT_LICENSE</span><span class="o">=</span><span class="s2">&quot;* -@EULA&quot;</span>
</pre></div></pre>
<p>With this configuration, packages that require interaction during installation to approve their EULA will not be installable. Packages without an EULA will be installable.
</p><p>It is possible to set <code>ACCEPT_LICENSE</code> globally in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>, or to specify it on a per-package basis in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.license</span>.
</p><p>For example, to allow the <span style="font-family: monospace; font-size: 95%">truecrypt-2.7</span> license for <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-crypt/truecrypt">app-crypt/truecrypt</a>, add the following to <span style="font-family: monospace; font-size: 95%">/etc/portage/package.license</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/package.license</code></strong><strong>Accepting the truecrypt-2.7 license for the truecrypt package alone</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>app-crypt/truecrypt truecrypt-2.7
</pre></div></pre>
<p>This permits installation of truecrypt versions that have the <span style="font-family: monospace; font-size: 95%">truecrypt-2.7</span> license, but not versions with the <span style="font-family: monospace; font-size: 95%">truecrypt-2.8</span> license.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Wichtig</strong><br />Licenses are stored in <span style="font-family: monospace; font-size: 95%">/usr/portage/licenses/</span>, and license groups are kept in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/license_groups</span>. The first entry of each line in <i>CAPITAL</i> letters is the name of the license group, and every entry after that is an individual license.</div>
<p>License groups defined in <code>ACCEPT_LICENSE</code> are prefixed with an <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">@</kbd> sign. A commonly requested setting is to only allow the installation of free software and documentation. To accomplish this, remove all currently accepted licenses (using <code>-*</code>) and then only allow the licenses in the FREE group as follows:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Only accept free software and documentation</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">ACCEPT_LICENSE</span><span class="o">=</span><span class="s2">&quot;-* @FREE&quot;</span>
</pre></div></pre>
<p>In this case, "free" is mostly defined by the FSF and OSI. Any package whose license does not meet these requirements will not be installable on the system.
</p>
<h2><span class="mw-headline" id="When_portage_is_complaining">When portage is complaining</span></h2>
<h3><span class="mw-headline" id="Terminology">Terminology</span></h3>
<p>As stated before, portage is extremely powerful and supports many features that other software management tools lack. To understand this, we explain a few aspects of portage without going into too much detail.
</p><p>With portage different versions of a single package can coexist on a system. While other distributions tend to name their package to those versions (like freetype and freetype2) portage uses a technology called <i>SLOT</i>s. An ebuild declares a certain SLOT for its version. Ebuilds with different SLOTs can coexist on the same system. For instance, the freetype package has ebuilds with SLOT="1" and SLOT="2".
</p><p>There are also packages that provide the same functionality but are implemented differently. For instance, metalogd, sysklogd and syslog-ng are all system loggers. Applications that rely on the availability of "a system logger" cannot depend on, for instance, metalogd, as the other system loggers are as good a choice as any. Portage allows for virtuals: each system logger is listed as an "exclusive" dependency of the logging service in the logger virtual package of the virtual category, so that applications can depend on the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/virtual/logger">virtual/logger</a> package. When installed, the package will pull in the first logging package mentioned in the package, unless a logging package was already installed (in which case the virtual is satisfied).
</p><p>Software in the portage tree can reside in different branches. By default the system only accepts packages that Gentoo deems stable. Most new software titles, when committed, are added to the testing branch, meaning more testing needs to be done before it is marked as stable. Although the ebuilds for those software are in the portage tree, portage will not update them before they are placed in the stable branch.
</p><p>Some softwares are only available for a few architectures. Or the software doesn't work on the other architectures, or it needs more testing, or the developer that committed the software to the portage tree is unable to verify if the package works on different architectures.
</p><p>Each Gentoo installation also adheres to a certain profile which contains, amongst other information, the list of packages that are required for a system to function normally.
</p>
<h3><span class="mw-headline" id="Blocked_packages">Blocked packages</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about blocked packages (with --pretend)</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[blocks B     ] mail-mta/ssmtp (is blocking mail-mta/postfix-2.2.2-r1)
</pre></div></pre></div>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about blocked packages (without --pretend)</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Error: the mail-mta/postfix package conflicts with another package.
!!!        both can&#39;t be installed on the same system together.
!!!        Please use &#39;emerge --pretend&#39; to determine blockers.
</pre></div></pre></div>
<p>Ebuilds contain specific fields that inform Portage about its dependencies. There are two possible dependencies: build dependencies, declared in DEPEND and run-time dependencies, declared in RDEPEND. When one of these dependencies explicitly marks a package or virtual as being not compatible, it triggers a blockage.
</p><p>While recent versions of Portage are smart enough to work around minor blockages without user intervention, occasionally such blockages need to be resolved manually.
</p><p>To fix a blockage, users can choose to not install the package or unmerge the conflicting package first. In the given example, one can opt not to install postfix or to remove ssmtp first.
</p><p>Sometimes there are also blocking packages with specific atoms, such as <code>&lt;media-video/mplayer-1.0_rc1-r2</code>. In this case, updating to a more recent version of the blocking package could remove the block.
</p><p>It is also possible that two packages that are yet to be installed are blocking each other. In this rare case, try to find out why both would need to be installed. In most cases it is sufficient to do with one of the packages alone. If not, please file a bug on Gentoo's bugtracking system.
</p>
<h3><span class="mw-headline" id="Masked_packages">Masked packages</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about masked packages</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! all ebuilds that could satisfy &quot;bootsplash&quot; have been masked.
</pre></div></pre></div>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about masked packages - reason</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! possible candidates are:
  
- gnome-base/gnome-2.8.0_pre1 (masked by: ~x86 keyword)
- lm-sensors/lm-sensors-2.8.7 (masked by: -sparc keyword)
- sys-libs/glibc-2.3.4.20040808 (masked by: -* keyword)
- dev-util/cvsd-1.0.2 (masked by: missing keyword)
- games-fps/unreal-tournament-451 (masked by: package.mask)
- sys-libs/glibc-2.3.2-r11 (masked by: profile)
- net-im/skype-2.1.0.81 (masked by: skype-eula license(s))
</pre></div></pre></div>
<p>When trying to install a package that isn't available for the system, this masking error occurs. Users should try installing a different application that is available for the system or wait until the package is marked as available. There is always a reason why a package is masked:
</p>
<dl><dt> ~arch keyword</dt>
<dd> the application is not tested sufficiently to be put in the stable branch. Wait a few days or weeks and try again.</dd>
<dt> -arch keyword or -* keyword</dt>
<dd> the application does not work on your architecture. If you believe the package does work file a bug at our bugzilla website.</dd>
<dt> missing keyword</dt>
<dd> the application has not been tested on your architecture yet. Ask the architecture porting team to test the package or test it for them and report the findings on our bugzilla website.</dd>
<dt> package.mask </dt>
<dd> the package has been found corrupt, unstable or worse and has been deliberately marked as do-not-use.</dd>
<dt> profile</dt>
<dd> the package has been found not suitable for the current profile. The application might break the system if it is installed or is just not compatible with the profile currently in use.</dd>
<dt> license </dt>
<dd> the package's license is not compatible with the ACCEPT_LICENSE setting. Permit its license or the right license group by setting it in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> or in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.license</span></dd></dl>
<h3><span class="mw-headline" id="Necessary_USE_flag_changes">Necessary USE flag changes</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about USE flag change requirement</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>The following USE changes are necessary to proceed:
#required by app-text/happypackage-2.0, required by happypackage (argument)
&gt;=app-text/feelings-1.0.0 test
</pre></div></pre></div>
<p>The error message might also be displayed as follows, if <code>--autounmask</code> isn't set:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage error about USE flag change requirement</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>emerge: there are no ebuilds built with USE flags to satisfy &quot;app-text/feelings[test]&quot;.
!!! One of the following packages is required to complete your request:
- app-text/feelings-1.0.0 (Change USE: +test)
(dependency required by &quot;app-text/happypackage-2.0&quot; [ebuild])
(dependency required by &quot;happypackage&quot; [argument])
</pre></div></pre></div>
<p>Such warning or error occurs when a package is requested for installation which not only depends on another package, but also requires that that package is built with a particular USE flag (or set of USE flags). In the given example, the package app-text/feelings needs to be built with USE="test", but this USE flag is not set on the system.
</p><p>To resolve this, either add the requested USE flag to the global USE flags in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>, or set it for the specific package in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span>.
</p>
<h3><span class="mw-headline" id="Missing_dependencies">Missing dependencies</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about missing dependency</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>emerge: there are no ebuilds to satisfy &quot;&gt;=sys-devel/gcc-3.4.2-r4&quot;.
  
!!! Problem with ebuild sys-devel/gcc-3.4.2-r2
!!! Possibly a DEPEND/*DEPEND problem.
</pre></div></pre></div>
<p>The application to install depends on another package that is not available for the system. Please check bugzilla if the issue is known and if not, please report it. Unless the system is configured to mix branches, this should not occur and is therefore a bug.
</p>
<h3><span class="mw-headline" id="Ambiguous_ebuild_name">Ambiguous ebuild name</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about ambiguous ebuild names</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[ Results for search key : listen ]
[ Applications found : 2 ]
  
*  dev-tinyos/listen [ Masked ]
      Latest version available: 1.1.15
      Latest version installed: [ Not Installed ]
      Size of files: 10,032 kB
      Homepage:      http://www.tinyos.net/
      Description:   Raw listen for TinyOS
      License:       BSD
  
*  media-sound/listen [ Masked ]
      Latest version available: 0.6.3
      Latest version installed: [ Not Installed ]
      Size of files: 859 kB
      Homepage:      http://www.listen-project.org
      Description:   A Music player and management for GNOME
      License:       GPL-2
  
!!! The short ebuild name &quot;listen&quot; is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.
</pre></div></pre></div>
<p>The application that is selected for installation has a name that corresponds with more than one package. Supply the category name as well to resolve this. Portage will inform the user about possible matches to choose from.
</p>
<h3><span class="mw-headline" id="Circular_dependencies">Circular dependencies</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about circular dependencies</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Error: circular dependencies: 
  
ebuild / net-print/cups-1.1.15-r2 depends on ebuild / app-text/ghostscript-7.05.3-r1
ebuild / app-text/ghostscript-7.05.3-r1 depends on ebuild / net-print/cups-1.1.15-r2
</pre></div></pre></div>
<p>Two (or more) packages to install depend on each other and can therefore not be installed. This is most likely a bug in one of the packages in the portage tree. Please resync after a while and try again. It might also be beneficial to check bugzilla to see if the issue is known and if not, report it.
</p>
<h3><span class="mw-headline" id="Fetch_failed">Fetch failed</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about fetch failed</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Fetch failed for sys-libs/ncurses-5.4-r5, continuing...
(...)
!!! Some fetch errors were encountered.  Please see above for details.
</pre></div></pre></div>
<p>Portage was unable to download the sources for the given application and will try to continue installing the other applications (if applicable). This failure can be due to a mirror that has not synchronised correctly or because the ebuild points to an incorrect location. The server where the sources reside can also be down for some reason.
</p><p>Retry after one hour to see if the issue still persists.
</p>
<h3><span class="mw-headline" id="System_profile_protection">System profile protection</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage warning about profile-protected package</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Trying to unmerge package(s) in system profile. &#39;sys-apps/portage&#39;
!!! This could be damaging to your system.
</pre></div></pre></div>
<p>The user has asked to remove a package that is part of the system's core packages. It is listed in the profile as required and should therefore not be removed from the system.
</p>
<h3><span class="mw-headline" id="Digest_verification_failure">Digest verification failure</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Digest verification failure</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>&gt;&gt;&gt; checking ebuild checksums
!!! Digest verification failed:
</pre></div></pre></div>
<p>This is a sign that something is wrong with the portage tree -- often, it is because a developer may have made a mistake when committing a package to the tree.
</p><p>When the digest verification fails, do not try to re-digest the package personally. Running <code>ebuild foo manifest</code> will not fix the problem; it will almost certainly make it worse!
</p><p>Instead, wait an hour or two for the tree to settle down. It's likely that the error was noticed right away, but it can take a little time for the fix to trickle down the portage tree. Check Bugzilla and see if anyone has reported the problem yet or ask around on #gentoo (IRC). If not, go ahead and file a bug for the broken package.
</p><p>Once the bug has been fixed, re-sync the portage tree to pick up the fixed digest.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Wichtig</strong><br />This does not mean that re-synchronization of the tree several times in a short time period! As stated in the rsync policy (as well as when running <code>emerge --sync</code>), users who sync too often will be banned! In fact, it's better to just wait until the next scheduled sync, so that resynchronization doesn't overload the rsync servers.</div>
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Finalizing/de.html" title="Previous part" class="btn btn-default">&#8592; Abschluss der Installation</a> <a href="../../de.html" title="Handbook:X86/de" class="btn btn-default">Anfang</a> <a href="../../Working/USE/de.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">Deutsch</span> • ‎<a href="../Working.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Trabajando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:X86/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:X86/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Trabalhando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #aaaaaa; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:left;">
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About/de.html" title="Handbook:X86/Installation/About/de">Über die Installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/de.html" title="Handbook:X86/Installation/Media/de">Auswählen des Mediums</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/de.html" title="Handbook:X86/Installation/Networking/de">Konfiguration des Netzwerks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/de.html" title="Handbook:X86/Installation/Disks/de">Vorbereiten der Festplatte(n)</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/de.html" title="Handbook:X86/Installation/Stage/de">Installation der stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/de.html" title="Handbook:X86/Installation/Base/de">Installation des Basissystems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/de.html" title="Handbook:X86/Installation/Kernel/de">Konfiguration des Kernels</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/de.html" title="Handbook:X86/Installation/System/de">Konfiguration des Systems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/de.html" title="Handbook:X86/Installation/Tools/de">Installation der Tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/de.html" title="Handbook:X86/Installation/Bootloader/de">Konfiguration des Bootloaders</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/de.html" title="Handbook:X86/Installation/Finalizing/de">Abschluss</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/de.html" title="Handbook:X86/Working/Portage/de">Portage-Einführung</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/de.html" title="Handbook:X86/Working/USE/de">USE-Flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/de.html" title="Handbook:X86/Working/Features/de">Portage-Features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/de.html" title="Handbook:X86/Working/Initscripts/de">Initskript-System</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/de.html" title="Handbook:X86/Working/EnvVar/de">Umgebungsvariablen</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/de.html" title="Handbook:X86/Portage/Files/de">Dateien und Verzeichnisse</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/de.html" title="Handbook:X86/Portage/Variables/de">Variablen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/de.html" title="Handbook:X86/Portage/Branches/de">Mischen von Softwarezweigen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/de.html" title="Handbook:X86/Portage/Tools/de">Zusätzliche Tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/de.html" title="Handbook:X86/Portage/CustomTree/de">Eigener Portage-Tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/de.html" title="Handbook:X86/Portage/Advanced/de">Erweiterte Portage-Features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Netzwerkkonfiguration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/de.html" title="Handbook:X86/Networking/Introduction/de">Zu Beginn</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/de.html" title="Handbook:X86/Networking/Advanced/de">Fortgeschrittene Konfiguration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/de.html" title="Handbook:X86/Networking/Modular/de">Modulare Vernetzung</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/de.html" title="Handbook:X86/Networking/Wireless/de">Drahtlose Netzwerke</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/de.html" title="Handbook:X86/Networking/Extending/de">Funktionalität hinzufügen</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/de.html" title="Handbook:X86/Networking/Dynamic/de">Dynamisches Netzwerkmanagement</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Was_sind_USE-Flags">Was sind USE-Flags</span></h2>
<h3><span class="mw-headline" id="Die_Idee_hinter_USE-Flags">Die Idee hinter USE-Flags</span></h3>
<p>When installing Gentoo (or any other distribution, or even operating system for that matter) users make choices depending on the environment they are working with. A setup for a server differs from a setup for a workstation. A gaming workstation differs from a 3D rendering workstation.
</p><p>This is not only true for choosing what packages to install, but also what features a certain package should support. If there is no need for OpenGL, why would someone bother to install and maintain OpenGL and build OpenGL support in most of the packages? If someone doesn't want to use KDE, why would they bother compiling packages with KDE support if those packages work flawlessly without?
</p><p>To help users in deciding what to install/activate and what not, Gentoo wanted the user to specify his/her environment in an easy way. This forces the user into deciding what they really want and eases the process for portage to make useful decisions.
</p>
<h3><span class="mw-headline" id="Definition_of_a_USE_flag">Definition of a USE flag</span></h3>
<p>Enter the USE flags. Such a flag is a keyword that embodies support and dependency-information for a certain concept. If someone defines a certain USE flag, Portage will know that they want support for the chosen keyword. Of course this also alters the dependency information for a package.
</p><p>Take a look at a specific example: the kde keyword. If this keyword is not in the USE variable, all packages that have optional KDE support will be compiled <i>without</i> KDE support. All packages that have an optional KDE dependency will be installed <i>without</i> installing the KDE libraries (as dependency). When the kde keyword is defined, then those packages will be compiled <i>with</i> KDE support, and the KDE libraries <i>will</i> be installed as dependency.
</p><p>By correctly defining the keywords the system will be tailored specifically to the user's needs.
</p>
<h3><span class="mw-headline" id="What_USE_flags_exist">What USE flags exist</span></h3>
<p>There are two types of USE flags: global and local USE flags.
</p>
<ul><li> A <i>global USE flag</i> is used by several packages, system-wide. This is what most people see as USE flags.</li>
<li> A <i>local USE flag</i> is used by a single package to make package-specific decisions.</li></ul>
<p>A list of available global USE flags can be found <a rel="nofollow" class="external text" href="https://www.gentoo.org/dyn/use-index.xml#doc_chap1">online</a> or locally in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/use.desc</span>.
</p><p>A list of available local USE flags can be found <a rel="nofollow" class="external text" href="https://www.gentoo.org/dyn/use-index.xml#doc_chap2">online</a> or locally in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/use.local.desc</span>.
</p>
<h2><span class="mw-headline" id="Using_USE_flags">Using USE flags</span></h2>
<h3><span class="mw-headline" id="Declare_permanent_USE_flags">Declare permanent USE flags</span></h3>
<p>As previously mentioned, all USE flags are declared inside the USE variable. To make it easy for users to search and pick USE flags, we already provide a default USE setting. This setting is a collection of USE flags we think are commonly used by the Gentoo users. This default setting is declared in the <span style="font-family: monospace; font-size: 95%">make.defaults</span> files that are part of the selected profile.
</p><p>The profile the system listens to is pointed to by the <span style="font-family: monospace; font-size: 95%">/etc/portage/make.profile</span> symlink. Each profile works on top of other profiles, and the end result is therefore the sum of all profiles. The top profile is the base profile (<span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/base</span>).
</p><p>To view the currently active USE flags (completely), use <code>emerge --info</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --info | grep ^USE</code></div><pre>
USE=&quot;a52 aac acpi alsa branding cairo cdr dbus dts ...&quot;
</pre></div>
<p>As can be seen, this variable already contains quite a lot of keywords. Do not alter any <span style="font-family: monospace; font-size: 95%">make.defaults</span> file to tailor the USE variable to personal needs though: changes in these file will be undone when the portage tree is updated!
</p><p>To change this default setting, add or remove keywords to/from the USE variable. This is done globally by defining the USE variable in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>. In this variable one can add the extra USE flags required, or remove the USE flags that are no longer needed. This latter is done by prefixing the keyword with the minus-sign (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">-</kbd>).
</p><p>For instance, to remove support for KDE and QT but add support for ldap, the following USE can be defined in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Updating USE in make.conf</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-kde -qt4 ldap&quot;</span>
</pre></div></pre>
<h3><span class="mw-headline" id="Declaring_USE_flags_for_individual_packages">Declaring USE flags for individual packages</span></h3>
<p>Sometimes users want to declare a certain USE flag for one (or a couple) of applications but not system-wide. To accomplish this, edit <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span>. This is usually a single file, but can also be a directory; see <code>man portage</code> for more information. The following examples assume <span style="font-family: monospace; font-size: 95%">package.use</span> is a single file.
</p><p>For instance, to only have berkdb support for mysql:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/package.use</code></strong><strong>Enabling berkdb support for MySQL</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>dev-db/mysql berkdb
</pre></div></pre>
<p>Similarly it is possible to explicitly disable USE flags for a certain application. For instance, to disable java support in PHP (but have it for all other packages through the USE flag declaration in <span style="font-family: monospace; font-size: 95%">make.conf</span>):
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/package.use</code></strong><strong>Disable java support in PHP</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>dev-php/php -java
</pre></div></pre>
<h3><span class="mw-headline" id="Declaring_temporary_USE_flags">Declaring temporary USE flags</span></h3>
<p>Sometimes users need to set a USE flag for a brief moment. Instead of editing <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> twice (to do and undo the USE changes) just declare the USE variable as an environment variable. Remember that this setting only applies for the command entered - re-emerging or updating this application (either explicitly or as part of a system update) will undo the changes that were triggered through the (temporary) USE flag definition.
</p><p>The following example temporarily removes java from the USE setting during the installation of seamonkey:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>USE="-java" emerge seamonkey</code></div></div>
<h3><span class="mw-headline" id="Precedence">Precedence</span></h3>
<p>Of course there is a certain precedence on what setting has priority over the USE setting. The precedence for the USE setting is, ordered by priority (first has lowest priority):
</p>
<ol><li> Default USE setting declared in the <span style="font-family: monospace; font-size: 95%">make.defaults</span> files part of your profile</li>
<li> User-defined USE setting in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span></li>
<li> User-defined USE setting in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span></li>
<li> User-defined USE setting as environment variable</li></ol>
<p>To view the final USE setting as seen by Portage, run <code>emerge --info</code>. This will list all relevant variables (including the USE variable) with their current definition as known to portage.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --info</code></div></div>
<h3><span class="mw-headline" id="Adapting_the_entire_system_to_the_new_USE_flags">Adapting the entire system to the new USE flags</span></h3>
<p>After having altered USE flags, the system should be updated to reflect the necessary changes. To do so, use the <code>--newuse</code> option with <code>emerge</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --newuse @world</code></div></div>
<p>Next, run portage's depclean to remove the conditional dependencies that were emerged on the "old" system but that have been obsoleted by the new USE flags.
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warnung</strong><br />Running <code>emerge --depclean</code> is a dangerous operation and should be handled with care. Double-check the provided list of "obsoleted" packages to make sure it doesn't remove packages that are needed. In the following example we add the <code>-p</code> switch to have depclean only list the packages without removing them.
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge -p --depclean</code></div></div>
</div>
<p>When depclean has finished, run <code>revdep-rebuild</code> to rebuild the applications that are dynamically linked against shared objects provided by possibly removed packages. <code>revdep-rebuild</code> is part of the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package; don't forget to emerge it first.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>revdep-rebuild</code></div></div>
<p>When all this is accomplished, the system is using the new USE flag settings.
</p>
<h2><span class="mw-headline" id="Package_specific_USE_flags">Package specific USE flags</span></h2>
<h3><span class="mw-headline" id="Viewing_available_USE_flags">Viewing available USE flags</span></h3>
<p>Let's take the example of seamonkey: what USE flags does it listen to? To find out, we use <code>emerge</code> with the <code>--pretend</code> and <code>--verbose</code> options:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --pretend --verbose seamonkey</code></div><pre>
These are the packages that I would merge, in order:
  
Calculating dependencies ...done!
[ebuild   R   ] www-client/seamonkey-1.0.7  USE=&quot;crypt gnome java -debug -ipv6
-ldap -mozcalendar -mozdevelop -moznocompose -moznoirc -moznomail -moznopango
-moznoroaming -postgres -xinerama -xprint&quot; 0 kB
</pre></div>
<p><code>emerge</code> isn't the only tool for this job. In fact, there is a tool dedicated to package information called <code>equery</code> which resides in the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-portage/gentoolkit</code></div></div> 
<p>Now run equery with the <i>uses</i> argument to view the USE flags of a certain package. For instance, for the gnumeric package:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>equery --nocolor uses =gnumeric-1.6.3 -a</code></div><pre>
[ Searching for packages matching =gnumeric-1.6.3... ]
[ Colour Code&#160;: set unset ]
[ Legend&#160;: Left column  (U) - USE flags from make.conf              ]
[       &#160;: Right column (I) - USE flags packages was installed with ]
[ Found these USE variables for app-office/gnumeric-1.6.3 ]
 U I
 - - debug &#160;: Enable extra debug codepaths, like asserts and extra output.
              If you want to get meaningful backtraces see
              http://www.gentoo.org/proj/en/qa/backtraces.xml .
 + + gnome &#160;: Adds GNOME support
 + + python&#160;: Adds support/bindings for the Python language
 - - static&#160;:&#160;!!do not set this during bootstrap!! Causes binaries to be
              statically linked instead of dynamically
</pre></div>
<h2><span class="mw-headline" id="Satisfying_REQUIRED_USE_conditions">Satisfying REQUIRED_USE conditions</span></h2>
<p>Some ebuilds require or forbid certain combinations of USE flags in order to work properly. This is expressed via a <code>REQUIRED_USE</code> condition. This condition ensures that all features and dependencies are complete, the build will succeed and perform as expected. If any of these are not met, emerge will alert you and ask you to fix the issue.
</p><p>Some example conditions are given below.
</p>
<table class="table">

<tr style="vertical-align: top; white-space: nowrap;">
<th> Example
</th>
<th> Description
</th></tr>
<tr>
<td> <code>REQUIRED_USE="foo? ( bar )"</code>
</td>
<td> If <code>foo</code> is set, <code>bar</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="foo? (&#160;!bar )"</code>
</td>
<td> If <code>foo</code> is set, <code>bar</code> must not be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="foo? ( || ( bar baz ) )"</code>
</td>
<td> If <code>foo</code> is set, <code>bar</code> or <code>baz</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="^^ ( foo bar baz )"</code>
</td>
<td> Exactly one of <code>foo</code> <code>bar</code> or <code>baz</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="|| ( foo bar baz )"</code>
</td>
<td> At least one of <code>foo</code> <code>bar</code> or <code>baz</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="?? ( foo bar baz )"</code>
</td>
<td> No more than one of <code>foo</code> <code>bar</code> or <code>baz</code> may be set
</td></tr></table>
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Working/Portage/de.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../de.html" title="Handbook:X86/de" class="btn btn-default">Anfang</a> <a href="../../Working/Features/de.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">Deutsch</span> • ‎<a href="../Working.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Trabajando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:X86/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:X86/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Trabalhando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #aaaaaa; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:left;">
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About/de.html" title="Handbook:X86/Installation/About/de">Über die Installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/de.html" title="Handbook:X86/Installation/Media/de">Auswählen des Mediums</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/de.html" title="Handbook:X86/Installation/Networking/de">Konfiguration des Netzwerks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/de.html" title="Handbook:X86/Installation/Disks/de">Vorbereiten der Festplatte(n)</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/de.html" title="Handbook:X86/Installation/Stage/de">Installation der stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/de.html" title="Handbook:X86/Installation/Base/de">Installation des Basissystems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/de.html" title="Handbook:X86/Installation/Kernel/de">Konfiguration des Kernels</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/de.html" title="Handbook:X86/Installation/System/de">Konfiguration des Systems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/de.html" title="Handbook:X86/Installation/Tools/de">Installation der Tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/de.html" title="Handbook:X86/Installation/Bootloader/de">Konfiguration des Bootloaders</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/de.html" title="Handbook:X86/Installation/Finalizing/de">Abschluss</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/de.html" title="Handbook:X86/Working/Portage/de">Portage-Einführung</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/de.html" title="Handbook:X86/Working/USE/de">USE-Flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/de.html" title="Handbook:X86/Working/Features/de">Portage-Features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/de.html" title="Handbook:X86/Working/Initscripts/de">Initskript-System</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/de.html" title="Handbook:X86/Working/EnvVar/de">Umgebungsvariablen</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/de.html" title="Handbook:X86/Portage/Files/de">Dateien und Verzeichnisse</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/de.html" title="Handbook:X86/Portage/Variables/de">Variablen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/de.html" title="Handbook:X86/Portage/Branches/de">Mischen von Softwarezweigen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/de.html" title="Handbook:X86/Portage/Tools/de">Zusätzliche Tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/de.html" title="Handbook:X86/Portage/CustomTree/de">Eigener Portage-Tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/de.html" title="Handbook:X86/Portage/Advanced/de">Erweiterte Portage-Features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Netzwerkkonfiguration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/de.html" title="Handbook:X86/Networking/Introduction/de">Zu Beginn</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/de.html" title="Handbook:X86/Networking/Advanced/de">Fortgeschrittene Konfiguration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/de.html" title="Handbook:X86/Networking/Modular/de">Modulare Vernetzung</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/de.html" title="Handbook:X86/Networking/Wireless/de">Drahtlose Netzwerke</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/de.html" title="Handbook:X86/Networking/Extending/de">Funktionalität hinzufügen</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/de.html" title="Handbook:X86/Networking/Dynamic/de">Dynamisches Netzwerkmanagement</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Portage_features">Portage features</span></h2>
<p>Portage has several additional features that makes the Gentoo experience even better. Many of these features rely on certain software tools that improve performance, reliability, security, ...
</p><p>To enable or disable certain Portage features, edit <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> and update or set the <var>FEATURES</var> variable which contains the various feature keywords, separated by white space. In several cases it will also be necessary to install the additional tool on which the feature relies.
</p><p>Not all features that Portage supports are listed here. For a full overview, please consult the <span style="font-family: monospace; font-size: 95%">make.conf</span> man page:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>man make.conf</code></div></div>
<p>To find out what <var>FEATURES</var> are set by default, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --info</span> and search for the <var>FEATURES</var> variable or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grep</span> it out:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>emerge --info | grep ^FEATURES=</code></div></div>
<h2><span class="mw-headline" id="Distributed_compiling">Distributed compiling</span></h2>
<h3><span class="mw-headline" id="Using_distcc">Using distcc</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">distcc</span> is a program to distribute compilations across several, not necessarily identical, machines on a network. The distcc client sends all necessary information to the available distcc servers (running distccd) so they can compile pieces of source code for the client. The net result is a faster compilation time.
</p><p>More information about distcc (and how to have it work with Gentoo) can be found in the <a href="../../../Distcc.html" title="Distcc">Distcc</a> article.
</p>
<h3><span class="mw-headline" id="Installing_distcc">Installing distcc</span></h3>
<p>Distcc ships with a graphical monitor to monitor tasks that the computer is sending away for compilation. This tool is automatically installed if <code>USE=gnome</code> or <code>USE=gtk</code> is set.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-devel/distcc</code></div></div> 
<h3><span class="mw-headline" id="Activating_Portage_distcc_support">Activating Portage distcc support</span></h3>
<p>Add distcc to the <var>FEATURES</var> variable inside <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>. Next, edit the <var>MAKEOPTS</var> variable and increase the number of parallel build jobs that the system allows. A known guideline is to fill in "-jX" with X the number of CPUs that run distccd (including the current host) plus one, but that is just a guideline.
</p><p>Now run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">distcc-config</span> and enter the list of available distcc servers. For a simple example assume that the available DistCC servers are 192.168.1.102 (the current host), 192.168.1.103 and 192.168.1.104 (two "remote" hosts):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>distcc-config --set-hosts "192.168.1.102 192.168.1.103 192.168.1.104"</code></div></div>
<p>Don't forget to run the distccd daemon as well:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add distccd default
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/distccd start</code></div></div>
<h2><span class="mw-headline" id="Caching_compilation_objects">Caching compilation objects</span></h2>
<h3><span class="mw-headline" id="About_ccache">About ccache</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">ccache</span> is a fast compiler cache. Whenever an application is compiled, it will cache intermediate results so that, whenever the same program is recompiled, the compilation time is greatly reduced. The first time ccache is run, it will be much slower than a normal compilation. Subsequent recompiles however should be faster. ccache is only helpful if the same application will be recompiled many times (or upgrades of the same application are happening frequently); thus it's mostly only useful for software developers.
</p><p>For more information about ccache, please visit its <a rel="nofollow" class="external text" href="http://ccache.samba.org/">homepage</a>.
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warnung</strong><br />ccache is known to cause numerous compilation failures. Sometimes ccache will retain stale code objects or corrupted files, which can lead to packages that cannot be emerged. If this happens (errors like "File not recognized: File truncated" come up in build logs), try recompiling the application with ccache disabled (<code>FEATURES="-ccache"</code> in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>) before reporting a bug.</div>
<h3><span class="mw-headline" id="Installing_ccache">Installing ccache</span></h3>
<p>To install ccache run the following command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask dev-util/ccache</code></div></div> 
<h3><span class="mw-headline" id="Activating_Portage_ccache_support">Activating Portage ccache support</span></h3>
<p>Open <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> and add <code>ccache</code> to the <var>FEATURES</var> variable. Next, add a new variable called <var>CCACHE_SIZE</var> and set it to <code>2G</code>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Enabling Portage ccache support</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">FEATURES</span><span class="o">=</span><span class="s2">&quot;... ccache ...&quot;</span>
<span class="nv">CCACHE_SIZE</span><span class="o">=</span><span class="s2">&quot;2G&quot;</span>
</pre></div></pre>
<p>To check if ccache functions, ask ccache to provide its statistics. Because Portage uses a different ccache home directory, it is necessary to temporarily set the <var>CCACHE_DIR</var> variable:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>CCACHE_DIR="/var/tmp/ccache" ccache -s</code></div></div>
<p>The <span style="font-family: monospace; font-size: 95%">/var/tmp/ccache/</span> location is Portage' default ccache home directory; it can be changed by setting the <var>CCACHE_DIR</var> variable in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>.
</p><p>When running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ccache</span> standalone, it would use the default location of <span style="font-family: monospace; font-size: 95%">${HOME}/.ccache/</span>, which is why the <var>CCACHE_DIR</var> variable needs to be set when asking for the (Portage) ccache statistics.
</p>
<h3><span class="mw-headline" id="Using_ccache_outside_Portage">Using ccache outside Portage</span></h3>
<p>To use ccache for non-Portage compilations, add <span style="font-family: monospace; font-size: 95%">/usr/lib/ccache/bin/</span> to the beginning of the <var>PATH</var> variable (before <span style="font-family: monospace; font-size: 95%">/usr/bin</span>). This can be accomplished by editing <span style="font-family: monospace; font-size: 95%">~/.bash_profile</span> in the user's home directory. Using <span style="font-family: monospace; font-size: 95%">~/.bash_profile</span> is one way to define <var>PATH</var> variables.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">~/.bash_profile</code></strong><strong>Setting the ccache location before any other PATH</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/lib/ccache/bin:/opt/bin:</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div></pre>
<h2><span class="mw-headline" id="Binary_package_support">Binary package support</span></h2>
<h3><span class="mw-headline" id="Creating_prebuilt_packages">Creating prebuilt packages</span></h3>
<p>Portage supports the installation of prebuilt packages. Even though Gentoo does not provide prebuilt packages by itself Portage can be made fully aware of prebuilt packages.
</p><p>To create a prebuilt package use <code>quickpkg</code> if the package is already installed on the system, or emerge with the <code>--buildpkg</code> or <code>--buildpkgonly</code> options.
</p><p>To have Portage create prebuilt packages of every single package that gets installed, add <code>buildpkg</code> to the <var>FEATURES</var> variable.
</p><p>More extended support for creating prebuilt package sets can be obtained with catalyst. For more information on catalyst please read the <a href="../../../Project_Catalyst/FAQ.html" title="Project:Catalyst/FAQ">Catalyst FAQ</a>.
</p>
<h3><span class="mw-headline" id="Installing_prebuilt_packages">Installing prebuilt packages</span></h3>
<p>Although Gentoo doesn't provide one, it is possible to create a central repository where prebuilt packages are stored. In order to use this repository, it is necessary to make Portage aware of it by having the <var>PORTAGE_BINHOST</var> variable point to it. For instance, if the prebuilt packages are on <a rel="nofollow" class="external free" href="ftp://buildhost/gentoo">ftp://buildhost/gentoo</a>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Add PORTAGE_BINHOST location</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">PORTAGE_BINHOST</span><span class="o">=</span><span class="s2">&quot;ftp://buildhost/gentoo&quot;</span>
</pre></div></pre>
<p>To install a prebuilt package, add the <code>--getbinpkg</code> option to the emerge command alongside of the <code>--usepkg</code> option. The former tells emerge to download the prebuilt package from the previously defined server while the latter asks emerge to try to install the prebuilt package first before fetching the sources and compiling it.
</p><p>For instance, to install gnumeric with prebuilt packages:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --usepkg --getbinpkg gnumeric</code></div></div>
<p>More information about emerge's prebuilt package options can be found in the emerge man page:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>man emerge</code></div></div>
<h3><span class="mw-headline" id="Distributing_prebuilt_packages_to_others">Distributing prebuilt packages to others</span></h3>
<p>If prebuilt packages are to be distributed to others, then make sure that this is permitted. Check the distribution terms of the upstream package for this. For example, for a package released under the GNU GPL, sources must be made available along with the binaries.
</p><p>Ebuilds may define a <code>bindist</code> restriction in their <var>RESTRICT</var> variable if built binaries are not distributable. Sometimes this restriction is conditional on one or more USE flags.
</p><p>By default, Portage will not mask any packages because of restrictions. This can be changed globally by setting the <var>ACCEPT_RESTRICT</var> variable in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>. For example, to mask packages that have a <code>bindist</code> restriction, add the following line to <span style="font-family: monospace; font-size: 95%">make.conf</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Only accept binary distributable packages</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">ACCEPT_RESTRICT</span><span class="o">=</span><span class="s2">&quot;* -bindist&quot;</span>
</pre></div></pre>
<p>It is also possible to override the <var>ACCEPT_RESTRICT</var> variable by passing the <code>--accept-restrict</code> option to the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge</span> command. For example, <code>--accept-restrict=-bindist</code> will temporarily mask packages with a <code>bindist</code> restriction.
</p><p>Also consider setting the <var>ACCEPT_LICENSE</var> variable when distributing packages. See the <a href="../../Working/Portage.html#Licenses" title="Handbook:X86/Working/Portage">Licenses section</a> for this.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Wichtig</strong><br />It is entirely the responsibility of the user to comply with packages' license terms and with his country's laws. Metadata variables defined by ebuilds like <var>RESTRICT</var> or <var>LICENSE</var> can only give some guidance when distribution of binaries would not be allowed. They are <i>not</i> a legal statement, so don't rely on them.</div>
<h2><span class="mw-headline" id="Fetching_files">Fetching files</span></h2>
<h3><span class="mw-headline" id="Userfetch">Userfetch</span></h3>
<p>When Portage is run as root, <code>FEATURES="userfetch"</code> will allow Portage to drop root privileges while fetching package sources. This is a small security improvement.
</p>
<h2><span class="mw-headline" id="Pulling_validated_Gentoo_ebuild_tree_snapshots">Pulling validated Gentoo ebuild tree snapshots</span></h2>
<p>Administrators can opt to update the local Gentoo ebuild tree with a cryptographically validated tree snapshot as released by the Gentoo infrastructure. This ensures that no rogue rsync mirror is adding unwanted code or packages to the tree the system is downloading.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Notiz</strong><br />The following is an updated method for setting up and using the emerge-webrsync sync method.</div>
<p>The Gentoo release media OpenPGP keys are now available as a binary keyring, installed via the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-crypt/gentoo-keys">app-crypt/gentoo-keys</a> package.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-crypt/gentoo-keys</code></div></div> 
<p>This will install the keyring to the <span style="font-family: monospace; font-size: 95%">/var/lib/gentoo/gkeys/keyrings/gentoo/release</span> location.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Enabling GPG support in Portage</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">FEATURES</span><span class="o">=</span><span class="s2">&quot;webrsync-gpg&quot;</span>
<span class="nv">PORTAGE_GPG_DIR</span><span class="o">=</span><span class="s2">&quot;/var/lib/gentoo/gkeys/keyrings/gentoo/release&quot;</span>
</pre></div></pre>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/repos.conf/gentoo.conf</code></strong><strong>Clear the sync-uri variable</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="k">[DEFAULT]</span>
<span class="na">main-repo</span> <span class="o">=</span> <span class="s">gentoo</span>
 
<span class="k">[gentoo]</span>
<span class="c1"># Disable synchronization by clearing the values or setting auto-sync = no</span>
<span class="c1"># Do not set value of the variables in this configuration file using quotes (&#39;&#39; or &quot;&quot;)!</span>
<span class="c1"># For portage-2.2.18 use &#39;websync&#39;</span>
<span class="c1"># For portage-2.2.19 and greater use &#39;webrsync&#39; (websync was renamed to webrsync)</span>
<span class="na">sync-type</span> <span class="o">=</span> <span class="s">websync</span>
<span class="na">sync-uri</span> <span class="o">=</span> 
<span class="na">auto-sync</span> <span class="o">=</span> <span class="s">yes</span>
</pre></div></pre>
<p>Make sure that <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-crypt/gnupg">app-crypt/gnupg</a> package is installed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-crypt/gnupg</code></div></div> 
<p>Use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gpg</span> to verify that the keys in the keyring are the correct keys:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>gpg --homedir /var/lib/gentoo/gkeys/keyrings/gentoo/release --with-fingerprint --list-keys</code></div></div>
<p>Verify the fingerprints of the key(s) against those listed here: <a href="../../../Project_RelEng.html#Release_security_and_signing" title="Project:RelEng">Project:RelEng#Release_security_and_signing</a><br />
Repeat the following command for each key you wish to trust. (Substitute the keyid '0x...' for the desired key you wish to trust.)
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>gpg --homedir /var/lib/gentoo/gkeys/keyrings/gentoo/release --edit-key 0xDB6B8C1F96D8BF6D trust</code></div></div>
<p>The system is now set-up to sync using only OpenPGP/gpg verified snapshots.<br />
Several command options are available to perform the sync.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Notiz</strong><br />Only one of the following commands is needed to sync. See the <a href="../../../Project_Portage/Sync.html" title="Project:Portage/Sync">Portage's sync wiki article</a> for more details.</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emaint sync -a</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emaint sync --repo gentoo</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge-webrsync</code></div></div>
<p><b>Original install and configuration instructions</b>
</p><p>To configure Portage to validate the snapshots, first create a truststore in which the keys of the Gentoo Infrastructure responsible for signing the Portage tree snapshots are stored. Of course, this OpenPGP key can be validated as per the <a href="../../../GnuPG.html#Importing_keys" title="GnuPG">proper guidelines</a> (like checking the key fingerprint). The list of OpenPGP keys used by the release engineering team is available on their <a href="../../../Project_RelEng.html" title="Project:RelEng">project page</a>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir -p /etc/portage/gpg
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>chmod 0700 /etc/portage/gpg</code></div></div>
<p>Make sure that <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-crypt/gnupg">app-crypt/gnupg</a> is installed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-crypt/gnupg</code></div></div> 
<p>In the next set of commands, substitute the keys with those mentioned on the release engineering site:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>gpg --homedir /etc/portage/gpg --keyserver subkeys.pgp.net --recv-keys 0xDB6B8C1F96D8BF6D
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>gpg --homedir /etc/portage/gpg --edit-key 0xDB6B8C1F96D8BF6D trust</code></div></div>
<p>Next, edit <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> and enable support for validating the signed Portage tree snapshots (using <code>FEATURES="webrsync-gpg"</code>) and disabling updating the Portage tree using the regular <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --sync</span> method.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Enabling GPG support in Portage</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">FEATURES</span><span class="o">=</span><span class="s2">&quot;webrsync-gpg&quot;</span>
<span class="nv">PORTAGE_GPG_DIR</span><span class="o">=</span><span class="s2">&quot;/etc/portage/gpg&quot;</span>
</pre></div></pre>
<p>In the <span style="font-family: monospace; font-size: 95%">/etc/portage/repos.conf/gentoo.conf</span> file, clear the <var>sync-type</var> and <var>sync-uri</var> variables so that <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --sync</span> no longer works (and thus no longer pulls in ebuilds that come from a potentially non-validated source):
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/repos.conf/gentoo.conf</code></strong><strong>Clear the sync-type and sync-uri variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="k">[DEFAULT]</span>
<span class="na">main-repo</span> <span class="o">=</span> <span class="s">gentoo</span>
 
<span class="k">[gentoo]</span>
<span class="c1"># Disable synchronization by clearing the values</span>
<span class="c1"># Do not set value of the variables in this configuration file using quotes (&#39;&#39; or &quot;&quot;)!</span>
<span class="na">sync-type</span> <span class="o">=</span> 
<span class="na">sync-uri</span> <span class="o">=</span>
</pre></div></pre>
<p>That is it. Next time <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span> is ran, only the snapshots with a valid signature will be expanded on the filesystem.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Working/USE.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Working/Initscripts.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">Deutsch</span> • ‎<a href="../Working.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Trabajando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:X86/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:X86/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Trabalhando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #aaaaaa; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:left;">
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About/de.html" title="Handbook:X86/Installation/About/de">Über die Installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/de.html" title="Handbook:X86/Installation/Media/de">Auswählen des Mediums</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/de.html" title="Handbook:X86/Installation/Networking/de">Konfiguration des Netzwerks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/de.html" title="Handbook:X86/Installation/Disks/de">Vorbereiten der Festplatte(n)</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/de.html" title="Handbook:X86/Installation/Stage/de">Installation der stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/de.html" title="Handbook:X86/Installation/Base/de">Installation des Basissystems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/de.html" title="Handbook:X86/Installation/Kernel/de">Konfiguration des Kernels</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/de.html" title="Handbook:X86/Installation/System/de">Konfiguration des Systems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/de.html" title="Handbook:X86/Installation/Tools/de">Installation der Tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/de.html" title="Handbook:X86/Installation/Bootloader/de">Konfiguration des Bootloaders</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/de.html" title="Handbook:X86/Installation/Finalizing/de">Abschluss</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/de.html" title="Handbook:X86/Working/Portage/de">Portage-Einführung</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/de.html" title="Handbook:X86/Working/USE/de">USE-Flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/de.html" title="Handbook:X86/Working/Features/de">Portage-Features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/de.html" title="Handbook:X86/Working/Initscripts/de">Initskript-System</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/de.html" title="Handbook:X86/Working/EnvVar/de">Umgebungsvariablen</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/de.html" title="Handbook:X86/Portage/Files/de">Dateien und Verzeichnisse</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/de.html" title="Handbook:X86/Portage/Variables/de">Variablen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/de.html" title="Handbook:X86/Portage/Branches/de">Mischen von Softwarezweigen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/de.html" title="Handbook:X86/Portage/Tools/de">Zusätzliche Tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/de.html" title="Handbook:X86/Portage/CustomTree/de">Eigener Portage-Tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/de.html" title="Handbook:X86/Portage/Advanced/de">Erweiterte Portage-Features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Netzwerkkonfiguration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/de.html" title="Handbook:X86/Networking/Introduction/de">Zu Beginn</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/de.html" title="Handbook:X86/Networking/Advanced/de">Fortgeschrittene Konfiguration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/de.html" title="Handbook:X86/Networking/Modular/de">Modulare Vernetzung</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/de.html" title="Handbook:X86/Networking/Wireless/de">Drahtlose Netzwerke</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/de.html" title="Handbook:X86/Networking/Extending/de">Funktionalität hinzufügen</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/de.html" title="Handbook:X86/Networking/Dynamic/de">Dynamisches Netzwerkmanagement</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Runlevels">Runlevels</span></h2>
<h3><span class="mw-headline" id="Booting_the_system">Booting the system</span></h3>
<p>When the system is booted, lots of text floats by. When paying close attention, one will notice this text is (usually) the same every time the system is rebooted. The sequence of all these actions is called the boot sequence and is (more or less) statically defined.
</p><p>First, the boot loader will load the kernel image that is defined in the boot loader configuration. Then, the boot loader instructs the CPU to run execute kernel. When the kernel is loaded and run, it initializes all kernel-specific structures and tasks and starts the init process.
</p><p>This process then makes sure that all filesystems (defined in <span style="font-family: monospace; font-size: 95%">/etc/fstab</span>) are mounted and ready to be used. Then it executes several scripts located in <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span>, which will start the services needed in order to have a successfully booted system.
</p><p>Finally, when all scripts are executed, init activates the terminals (in most cases just the virtual consoles which are hidden beneath <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd>, etc.) attaching a special process called <span style="font-family: monospace; font-size: 95%; font-weight: bold;">agetty</span> to it. This process will then make sure users are able to log on through these terminals by running login.
</p>
<h3><span class="mw-headline" id="Initscripts">Initscripts</span></h3>
<p>Now init doesn't just execute the scripts in <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span> randomly. Even more, it doesn't run all scripts in <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span>, only the scripts it is told to execute. It decides which scripts to execute by looking into <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span>.
</p><p>First, init runs all scripts from <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span> that have symbolic links inside <span style="font-family: monospace; font-size: 95%">/etc/runlevels/boot/</span>. Usually, it will start the scripts in alphabetical order, but some scripts have dependency information in them, telling the system that another script must be run before they can be started.
</p><p>When all <span style="font-family: monospace; font-size: 95%">/etc/runlevels/boot/</span> referenced scripts are executed, init continues with running the scripts that have a symbolic link to them in <span style="font-family: monospace; font-size: 95%">/etc/runlevels/default/</span>. Again, it will use the alphabetical order to decide what script to run first, unless a script has dependency information in it, in which case the order is changed to provide a valid start-up sequence. The latter is also the reason why commands used during the installation of Gentoo Linux used <code>default</code>, as in <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update add sshd default</span>.
</p>
<h3><span class="mw-headline" id="How_init_works">How init works</span></h3>
<p>Of course init doesn't decide all that by itself. It needs a configuration file that specifies what actions need to be taken. This configuration file is <span style="font-family: monospace; font-size: 95%">/etc/inittab</span>.
</p><p>Remember the boot sequence that was just described - init's first action is to mount all file systems. This is defined in the following line from <span style="font-family: monospace; font-size: 95%">/etc/inittab</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Initialization command</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>si::sysinit:/sbin/rc sysinit
</pre></div></pre>
<p>This line tells init that it must run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">/sbin/rc sysinit</span> to initialize the system. The <span style="font-family: monospace; font-size: 95%">/sbin/rc</span> script takes care of the initialization, so one might say that init doesn't do much - it delegates the task of initializing the system to another process.
</p><p>Second, init executed all scripts that had symbolic links in <span style="font-family: monospace; font-size: 95%">/etc/runlevels/boot/</span>. This is defined in the following line:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Boot command invocation</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>rc::bootwait:/sbin/rc boot
</pre></div></pre>
<p>Again the rc script performs the necessary tasks. Note that the option given to rc (boot) is the same as the subdirectory of <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span> that is used.
</p><p>Now init checks its configuration file to see what runlevel it should run. To decide this, it reads the following line from <span style="font-family: monospace; font-size: 95%">/etc/inittab</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Default runlevel selection</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>id:3:initdefault:
</pre></div></pre>
<p>In this case (which the majority of Gentoo users will use), the runlevel id is 3. Using this information, init checks what it must run to start runlevel 3:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Runlevel definitions</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>l0:0:wait:/sbin/rc shutdown
l1:S1:wait:/sbin/rc single
l2:2:wait:/sbin/rc nonetwork
l3:3:wait:/sbin/rc default
l4:4:wait:/sbin/rc default
l5:5:wait:/sbin/rc default
l6:6:wait:/sbin/rc reboot
</pre></div></pre>
<p>The line that defines level 3, again, uses the rc script to start the services (now with argument <code>default</code>). Again note that the argument of rc is the same as the subdirectory from <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span>.
</p><p>When rc has finished, init decides what virtual consoles it should activate and what commands need to be run at each console:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Terminal definitions</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>c1:12345:respawn:/sbin/agetty 38400 tty1 linux
c2:12345:respawn:/sbin/agetty 38400 tty2 linux
c3:12345:respawn:/sbin/agetty 38400 tty3 linux
c4:12345:respawn:/sbin/agetty 38400 tty4 linux
c5:12345:respawn:/sbin/agetty 38400 tty5 linux
c6:12345:respawn:/sbin/agetty 38400 tty6 linux
</pre></div></pre>
<h3><span class="mw-headline" id="Available_runlevels">Available runlevels</span></h3>
<p>In a previous section, we saw that init uses a numbering scheme to decide what runlevel it should activate. A runlevel is a state in which the system is running and contains a collection of scripts (runlevel scripts or initscripts) that must be executed when entering or leaving a runlevel.
</p><p>In Gentoo, there are seven runlevels defined: three internal runlevels, and four user-defined runlevels. The internal runlevels are called <i>sysinit</i>, <i>shutdown</i> and <i>reboot</i> and do exactly what their names imply: initialize the system, powering off the system, and rebooting the system.
</p><p>The user-defined runlevels are those with an accompanying <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span> subdirectory: <i>boot</i>, <i>default</i>, <i>nonetwork</i> and <i>single</i>. The boot runlevel starts all system-necessary services which all other runlevels use. The remaining three runlevels differ in what services they start: default is used for day-to-day operations, nonetwork is used in case no network connectivity is required, and single is used when the system needs to be fixed.
</p>
<h3><span class="mw-headline" id="Working_with_initscripts">Working with initscripts</span></h3>
<p>The scripts that the rc process starts are called init scripts. Each script in <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span> can be executed with the arguments <code>start</code>, <code>stop</code>, <code>restart</code>, <code>zap</code>, <code>status</code>, <code>ineed</code>, <code>iuse</code>, <code>needsme</code>, <code>usesme</code>, or <code>broken</code>.
</p><p>To start, stop, or restart a service (and all depending services), the <code>start</code>, <code>stop</code>, and <code>restart</code> arguments should be used:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix start</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Notiz</strong><br />Only the services that need the given service are stopped or restarted. The other depending services (those that use the service but don't need it) are left untouched.</div>
<p>To stop a service, but not the services that depend on it, use the <code>--nodeps</code> option together with the <code>stop</code> argument:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix --nodeps stop</code></div></div>
<p>To see what status a service has (started, stopped, ...) use the <code>status</code> argument:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix status</code></div></div>
<p>If the status information shows that the service is running, but in reality it is not, then reset the status information to "stopped" with the <code>zap</code> argument:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix zap</code></div></div>
<p>To also ask what dependencies the service has, use <code>iuse</code> or <code>ineed</code>. With <code>ineed</code> it is possible to see the services that are really necessary for the correct functioning of the service. <code>iuse</code> on the other hand shows the services that can be used by the service, but are not necessary for the correct functioning.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix ineed</code></div></div>
<p>Similarly, it is possible to ask what services require the service (<code>needsme</code>) or can use it (<code>usesme</code>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix needsme</code></div></div>
<p>Finally, to ask what dependencies the service requires that are missing:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix broken</code></div></div>
<h2><span class="mw-headline" id="Updating_runlevels">Updating runlevels</span></h2>
<h3><span class="mw-headline" id="rc-update">rc-update</span></h3>
<p>Gentoo's init system uses a dependency-tree to decide what service needs to be started first. As this is a tedious task that we wouldn't want our users to have to do manually, we have created tools that ease the administration of the runlevels and init scripts.
</p><p>With <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span> it is possible to add and remove init scripts to a runlevel. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span> tool will then automatically ask the <span style="font-family: monospace; font-size: 95%">depscan.sh</span> script to rebuild the dependency tree.
</p>
<h3><span class="mw-headline" id="Adding_and_removing_services">Adding and removing services</span></h3>
<p>In earlier instructions, init scripts have already been added to the "default" runlevel. What "default" means has been explained earlier in this document. Next to the runlevel, the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span> script requires a second argument that defines the action: <code>add</code>, <code>del</code>, or <code>show</code>.
</p><p>To add or remove an init script, just give <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span> the <code>add</code> or <code>del</code> argument, followed by the init script and the runlevel. For instance:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update del postfix default</code></div></div>
<p>The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update -v show</span> command will show all the available init scripts and list at which runlevels they will execute:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update -v show</code></div></div>
<p>It is also possible to run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update show</span> (without <code>-v</code>) to just view enabled init scripts and their runlevels.
</p>
<h2><span class="mw-headline" id="Configuring_services">Configuring services</span></h2>
<h3><span class="mw-headline" id="Why_additional_configuration_is_needed">Why additional configuration is needed</span></h3>
<p>Init scripts can be quite complex. It is therefore not really desirable to have the users edit the init script directly, as it would make it more error-prone. It is however important to be able to configure such a service. For instance, users might want to give more options to the service itself.
</p><p>A second reason to have this configuration outside the init script is to be able to update the init scripts without the fear that the user's configuration changes will be undone.
</p>
<h3><span class="mw-headline" id="conf.d_directory">conf.d directory</span></h3>
<p>Gentoo provides an easy way to configure such a service: every init script that can be configured has a file in <span style="font-family: monospace; font-size: 95%">/etc/conf.d/</span>. For instance, the <span style="font-family: monospace; font-size: 95%">apache2</span> initscript (called <span style="font-family: monospace; font-size: 95%">/etc/init.d/apache2</span>) has a configuration file called <span style="font-family: monospace; font-size: 95%">/etc/conf.d/apache2</span>, which can contain the options to give to the Apache 2 server when it is started:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/conf.d/apache2</code></strong><strong>Example options for apache2 init script</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">APACHE2_OPTS</span><span class="o">=</span><span class="s2">&quot;-D PHP5&quot;</span>
</pre></div></pre>
<p>Such a configuration file contains <i>only</i> variables (just like <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> does), making it very easy to configure services. It also allows us to provide more information about the variables (as comments).
</p>
<h2><span class="mw-headline" id="Writing_initscripts">Writing initscripts</span></h2>
<h3><span class="mw-headline" id="Is_it_necessary">Is it necessary</span></h3>
<p>No, writing an init script is usually not necessary as Gentoo provides ready-to-use init scripts for all provided services. However, some users might have installed a service without using portage, in which case they will most likely have to create an init script.
</p><p>Do not use the init script provided by the service if it isn't explicitly written for Gentoo: Gentoo's init scripts are not compatible with the init scripts used by other distributions!
</p>
<h3><span class="mw-headline" id="Layout">Layout</span></h3>
<p>The basic layout of an init script is shown below.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example initscript layout</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c">#!/sbin/runscript</span>
  
depend<span class="o">()</span> <span class="o">{</span>
  <span class="o">(</span>Dependency information<span class="o">)</span>
<span class="o">}</span>
  
start<span class="o">()</span> <span class="o">{</span>
  <span class="o">(</span>Commands necessary to start the service<span class="o">)</span>
<span class="o">}</span>
  
stop<span class="o">()</span> <span class="o">{</span>
  <span class="o">(</span>Commands necessary to stop the service<span class="o">)</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>Every init script requires the start() function to be defined. All other sections are optional.
</p>
<h3><span class="mw-headline" id="Dependencies">Dependencies</span></h3>
<p>There are two dependency-alike settings that can be defined which influence the start-up or sequencing of init scripts: <i>use</i> and <i>need</i>. Next to these two, there are also two order-influencing methods called <i>before</i> and <i>after</i>. These last two are no dependencies per se - they do not make the original init script fail if the selected one isn't scheduled to start (or fails to start).
</p>
<ul><li> The <i>use</i> settings informs the init system that this script uses functionality offered by the selected script, but does not directly depend on it. A good example would be <i>use logger</i> or <i>use dns</i>. If those services are available, they will be put in good use, but if the system does not have a logger or DNS server the services will still work. If the services exist, then they are started before the script that uses them.</li>
<li> The <i>need</i> setting is a hard dependency. It means that the script that is needing another script will not start before the other script is launched successfully. Also, if that other script is restarted, then this one will be restarted as well.</li>
<li> When using <i>before</i>, then the given script is launched before the selected one if the selected one is part of the init level. So an init script xdm that defines <i>before alsasound</i> will start before the alsasound script, but only if alsasound is scheduled to start as well in the same init level. If alsasound is not scheduled to start too, then this particular setting has no effect and xdm will be started when the init system deems it most appropriate.</li>
<li> Similarly, <i>after</i> informs the init system that the given script should be launched after the selected one if the selected one is part of the init level. If not, then the setting has no effect and the script will be launched by the init system when it deems it most appropriate.</li></ul>
<p>It should be clear from the above that <i>need</i> is the only "true" dependency setting as it affects if the script will be started or not. All the others are merely pointers towards the init system to clarify in which order scripts can be (or should be) launched.
</p><p>Now, look at many of Gentoo's available init scripts and notice that some have dependencies on things that are no init scripts. These "things" we call virtuals.
</p><p>A <i>virtual dependency</i> is a dependency that a service provides, but that is not provided solely by that service. An init script can depend on a system logger, but there are many system loggers available (metalogd, syslog-ng, sysklogd, ...). As the script cannot need every single one of them (no sensible system has all these system loggers installed and running) we made sure that all these services provide a virtual dependency.
</p><p>For instance, take a look at the postfix dependency information:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/init.d/postfix</code></strong><strong>Dependency information of the postfix service</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  need net
  use logger dns
  provide mta
<span class="o">}</span>
</pre></div></pre>
<p>As can be seen, the postfix service:
</p>
<ul><li> Requires the (virtual) net dependency (which is provided by, for instance, <span style="font-family: monospace; font-size: 95%">/etc/init.d/net.eth0</span>).</li>
<li> Uses the (virtual) logger dependency (which is provided by, for instance, <span style="font-family: monospace; font-size: 95%">/etc/init.d/syslog-ng</span>).</li>
<li> Uses the (virtual) dns dependency (which is provided by, for instance, <span style="font-family: monospace; font-size: 95%">/etc/init.d/named</span>).</li>
<li> Provides the (virtual) mta dependency (which is common for all mail servers).</li></ul>
<h3><span class="mw-headline" id="Controlling_the_order">Controlling the order</span></h3>
<p>As described in the previous section, it is possible to tell the init system what order it should use for starting (or stopping) scripts. This ordering is handled both through the dependency settings use and need, but also through the order settings before and after. As we have described these earlier already, let's take a look at the portmap service as an example of such init script.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/init.d/portmap</code></strong><strong>Dependency information of the portmap service</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  need net
  before inetd
  before xinetd
<span class="o">}</span>
</pre></div></pre>
<p>It is possible to use the "*" glob to catch all services in the same runlevel, although this isn't advisable.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Using the * glob</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  before *
<span class="o">}</span>
</pre></div></pre></div>
<p>If the service must write to local disks, it should need localmount. If it places anything in <span style="font-family: monospace; font-size: 95%">/var/run/</span> such as a pidfile, then it should start after bootmisc:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Dependency setting with needing localmount and after bootmisc</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  need localmount
  after bootmisc
<span class="o">}</span>
</pre></div></pre></div>
<h3><span class="mw-headline" id="Standard_functions">Standard functions</span></h3>
<p>Next to the <code>depend()</code> functionality, it is also necessary to define the <code>start()</code> function. This one contains all the commands necessary to initialize the service. It is advisable to use the <code>ebegin</code> and <code>eend</code> functions to inform the user about what is happening:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example start() function</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>start<span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">RC_CMD</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;restart&quot;</span> <span class="o">]</span><span class="p">;</span>
  <span class="k">then</span>
    <span class="c"># Do something in case a restart requires more than stop, start</span>
  <span class="k">fi</span>
  
  ebegin <span class="s2">&quot;Starting my_service&quot;</span>
  start-stop-daemon --start --exec /path/to/my_service <span class="se">\</span>
    --pidfile /path/to/my_pidfile
  eend <span class="nv">$?</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>Both <code>--exec</code> and <code>--pidfile</code> should be used in start and stop functions. If the service does not create a pidfile, then use <code>--make-pidfile</code> if possible, though it is recommended to test this to be sure. Otherwise, don't use pidfiles. It is also possible to add <code>--quiet</code> to the start-stop-daemon options, but this is not recommended unless the service is extremely verbose. Using <code>--quiet</code> may hinder debugging if the service fails to start.
</p><p>Another notable setting used in the above example is to check the contents of the <var>RC_CMD</var> variable. Unlike the previous init script system, the newer openrc system does not support script-specific restart functionality. Instead, the script needs to check the contents of the <var>RC_CMD</var> variable to see if a function (be it <code>start()</code> or <code>stop()</code>) is called as part of a restart or not.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Notiz</strong><br />Make sure that <code>--exec</code> actually calls a service and not just a shell script that launches services and exits - that's what the init script is supposed to do.</div>
<p>For more examples of the <code>start()</code> function, please read the source code of the available init scripts in the <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span> directory.
</p><p>Another function that can (but does not have to) be defined is <code>stop()</code>. The init system is intelligent enough to fill in this function by itself if start-stop-daemon is used.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example stop() function</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>stop<span class="o">()</span> <span class="o">{</span>
  ebegin <span class="s2">&quot;Stopping my_service&quot;</span>
  start-stop-daemon --stop --exec /path/to/my_service <span class="se">\</span>
    --pidfile /path/to/my_pidfile
  eend <span class="nv">$?</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>If the service runs some other script (for example, Bash, Python, or Perl), and this script later changes names (for example, <span style="font-family: monospace; font-size: 95%">foo.py</span> to foo), then it is necessary to add <code>--name</code> to start-stop-daemon. This must specify the name that the script will be changed to. In this example, a service starts <span style="font-family: monospace; font-size: 95%">foo.py</span>, which changes names to foo:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example definition for a service that starts the foo script</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>start<span class="o">()</span> <span class="o">{</span>
  ebegin <span class="s2">&quot;Starting my_script&quot;</span>
  start-stop-daemon --start --exec /path/to/my_script <span class="se">\</span>
    --pidfile /path/to/my_pidfile --name foo
  eend <span class="nv">$?</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>start-stop-daemon has an excellent man page available if more information is needed:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>man start-stop-daemon</code></div></div>
<p>Gentoo's init script syntax is based on the POSIX Shell so people are free to use sh-compatible constructs inside their init scripts. Keep other constructs, like bash-specific ones, out of the init scripts to ensure that the scripts remain functional regardless of the change Gentoo might do on its init system.
</p>
<h3><span class="mw-headline" id="Adding_custom_options">Adding custom options</span></h3>
<p>If the initscript needs to support more options than the ones we have already encountered, then add the option to the extra_commands variable, and create a function with the same name as the option. For instance, to support an option called restartdelay:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example definition of restartdelay method</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">extra_commands</span><span class="o">=</span><span class="s2">&quot;restartdelay&quot;</span>
  
restartdelay<span class="o">()</span> <span class="o">{</span>
  stop
  sleep <span class="m">3</span>    <span class="c"># Wait 3 seconds before starting again</span>
  start
<span class="o">}</span>
</pre></div></pre></div>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Wichtig</strong><br />The function restart() cannot be overridden in openrc!</div>
<h3><span class="mw-headline" id="Service_configuration_variables">Service configuration variables</span></h3>
<p>In order to support configuration files in <span style="font-family: monospace; font-size: 95%">/etc/conf.d/</span>, no specifics need to be impleneted: when the init script is executed, the following files are automatically sourced (i.e. the variables are available to use):
</p>
<ul><li> <span style="font-family: monospace; font-size: 95%">/etc/conf.d/YOUR_INIT_SCRIPT</span></li>
<li> <span style="font-family: monospace; font-size: 95%">/etc/conf.d/basic</span></li>
<li> <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span></li></ul>
<p>Also, if the init script provides a virtual dependency (such as net), the file associated with that dependency (such as <span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>) will be sourced too.
</p>
<h2><span class="mw-headline" id="Changing_runlevel_behavior">Changing runlevel behavior</span></h2>
<h3><span class="mw-headline" id="Who_might_benefit_from_this">Who might benefit from this</span></h3>
<p>Many laptop users know the situation: at home they need to start net.eth0, but they don't want to start net.eth0 while on the road (as there is no network available). With Gentoo the runlevel behaviour can be altered at will.
</p><p>For instance, a second "default" runlevel can be created which can be booted that has other init scripts assigned to it. At boottime, the user can then select what default runlevel to use.
</p>
<h3><span class="mw-headline" id="Using_softlevel">Using softlevel</span></h3>
<p>First of all, create the runlevel directory for the second "default" runlevel. As an example we create the <i>offline</i> runlevel:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir /etc/runlevels/offline</code></div></div>
<p>Add the necessary init scripts to the newly created runlevel. For instance, to have an exact copy of the current default runlevel but without net.eth0:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /etc/runlevels/default
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>for service in *; do rc-update add $service offline; done
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update del net.eth0 offline
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update show offline</code></div><pre>
(Partial sample Output)
               acpid | offline
          domainname | offline
               local | offline
            net.eth0 |
</pre></div>
<p>Even though net.eth0 has been removed from the offline runlevel, udev might want to attempt to start any devices it detects and launch the appropriate services, a functionality that is called hotplugging. By default, Gentoo does not enable hotplugging.
</p><p>To enable hotplugging, but only for a selected set of scripts, use the <var>rc_hotplug</var> variable in <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/rc.conf</code></strong><strong>Enable hotplugging of the WLAN interface</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">rc_hotplug</span><span class="o">=</span><span class="s2">&quot;net.wlan !net.*&quot;</span>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Notiz</strong><br />For more information on device initiated services, please see the comments inside <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span>.</div>
<p>Edit the bootloader configuration and add a new entry for the offline runlevel. In that entry, add <code>softlevel=offline</code> as a boot parameter.
</p>
<h3><span class="mw-headline" id="Using_bootlevel">Using bootlevel</span></h3>
<p>Using bootlevel is completely analogous to softlevel. The only difference here is that a second "boot" runlevel is defined instead of a second "default" runlevel.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Working/Features/de.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../de.html" title="Handbook:X86/de" class="btn btn-default">Anfang</a> <a href="../../Working/EnvVar/de.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">Deutsch</span> • ‎<a href="../Working.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Trabajando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:X86/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:X86/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Trabalhando (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #aaaaaa; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:left;">
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About/de.html" title="Handbook:X86/Installation/About/de">Über die Installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/de.html" title="Handbook:X86/Installation/Media/de">Auswählen des Mediums</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/de.html" title="Handbook:X86/Installation/Networking/de">Konfiguration des Netzwerks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/de.html" title="Handbook:X86/Installation/Disks/de">Vorbereiten der Festplatte(n)</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/de.html" title="Handbook:X86/Installation/Stage/de">Installation der stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/de.html" title="Handbook:X86/Installation/Base/de">Installation des Basissystems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/de.html" title="Handbook:X86/Installation/Kernel/de">Konfiguration des Kernels</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/de.html" title="Handbook:X86/Installation/System/de">Konfiguration des Systems</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/de.html" title="Handbook:X86/Installation/Tools/de">Installation der Tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/de.html" title="Handbook:X86/Installation/Bootloader/de">Konfiguration des Bootloaders</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/de.html" title="Handbook:X86/Installation/Finalizing/de">Abschluss</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/de.html" title="Handbook:X86/Working/Portage/de">Portage-Einführung</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/de.html" title="Handbook:X86/Working/USE/de">USE-Flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/de.html" title="Handbook:X86/Working/Features/de">Portage-Features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/de.html" title="Handbook:X86/Working/Initscripts/de">Initskript-System</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/de.html" title="Handbook:X86/Working/EnvVar/de">Umgebungsvariablen</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Arbeiten mit Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/de.html" title="Handbook:X86/Portage/Files/de">Dateien und Verzeichnisse</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/de.html" title="Handbook:X86/Portage/Variables/de">Variablen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/de.html" title="Handbook:X86/Portage/Branches/de">Mischen von Softwarezweigen</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/de.html" title="Handbook:X86/Portage/Tools/de">Zusätzliche Tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/de.html" title="Handbook:X86/Portage/CustomTree/de">Eigener Portage-Tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/de.html" title="Handbook:X86/Portage/Advanced/de">Erweiterte Portage-Features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#6E56AF; color: white;"> Netzwerkkonfiguration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/de.html" title="Handbook:X86/Networking/Introduction/de">Zu Beginn</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/de.html" title="Handbook:X86/Networking/Advanced/de">Fortgeschrittene Konfiguration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/de.html" title="Handbook:X86/Networking/Modular/de">Modulare Vernetzung</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/de.html" title="Handbook:X86/Networking/Wireless/de">Drahtlose Netzwerke</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/de.html" title="Handbook:X86/Networking/Extending/de">Funktionalität hinzufügen</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/de.html" title="Handbook:X86/Networking/Dynamic/de">Dynamisches Netzwerkmanagement</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Environment_variables">Environment variables</span></h2>
<h3><span class="mw-headline" id="Introduction">Introduction</span></h3>
<p>An environment variable is a named object that contains information used by one or more applications. Many users (and especially those new to Linux) find this a bit weird or unmanageable. However, this is a mistake: by using environment variables one can easily change a configuration setting for one or more applications.
</p>
<h3><span class="mw-headline" id="Important_examples">Important examples</span></h3>
<p>The following table lists a number of variables used by a Linux system and describes their use. Example values are presented after the table.
</p>
<table class="table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col width=15%"> Variable
</th>
<th> Description
</th></tr>
<tr>
<td> <var>PATH</var>
</td>
<td> This variable contains a colon-separated list of directories in which the system looks for executable files. If a name is entered of an executable (such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ls</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span>, or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge</span>) but this executable is not located in a listed directory, then the system will not execute it (unless the full path is entered as the command, such as <span style="font-family: monospace; font-size: 95%">/bin/ls</span>).
</td></tr>
<tr>
<td> <var>ROOTPATH</var>
</td>
<td> This variable has the same function as <var>PATH</var>, but this one only lists the directories that should be checked when the root-user enters a command.
</td></tr>
<tr>
<td> <var>LDPATH</var>
</td>
<td> This variable contains a colon-separated list of directories in which the dynamical linker searches through to find a library.
</td></tr>
<tr>
<td> <var>MANPATH</var>
</td>
<td> This variable contains a colon-separated list of directories in which the man command searches for the man pages.
</td></tr>
<tr>
<td> <var>INFODIR</var>
</td>
<td> This variable contains a colon-separated list of directories in which the info command searches for the info pages.
</td></tr>
<tr>
<td> <var>PAGER</var>
</td>
<td> This variable contains the path to the program used to list the contents of files through (such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">less</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">more</span>).
</td></tr>
<tr>
<td> <var>EDITOR</var>
</td>
<td> This variable contains the path to the program used to change the contents of files with (such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">nano</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">vi</span>).
</td></tr>
<tr>
<td> <var>KDEDIRS</var>
</td>
<td> This variable contains a colon-separated list of directories which contain KDE-specific material.
</td></tr>
<tr>
<td> <var>CONFIG_PROTECT</var>
</td>
<td> This variable contains a space-delimited list of directories which should be protected by Portage during updates.
</td></tr>
<tr>
<td> <var>CONFIG_PROTECT_MASK</var>
</td>
<td> This variable contains a space-delimited list of directories which should not be protected by Portage during updates.
</td></tr></table>
<p>Below is an example definition of all these variables:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example settings for the mentioned variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/bin:/usr/bin:/usr/local/bin:/opt/bin:/usr/games/bin&quot;</span>
<span class="nv">ROOTPATH</span><span class="o">=</span><span class="s2">&quot;/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin&quot;</span>
<span class="nv">LDPATH</span><span class="o">=</span><span class="s2">&quot;/lib:/usr/lib:/usr/local/lib:/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.3&quot;</span>
<span class="nv">MANPATH</span><span class="o">=</span><span class="s2">&quot;/usr/share/man:/usr/local/share/man&quot;</span>
<span class="nv">INFODIR</span><span class="o">=</span><span class="s2">&quot;/usr/share/info:/usr/local/share/info&quot;</span>
<span class="nv">PAGER</span><span class="o">=</span><span class="s2">&quot;/usr/bin/less&quot;</span>
<span class="nv">EDITOR</span><span class="o">=</span><span class="s2">&quot;/usr/bin/vim&quot;</span>
<span class="nv">KDEDIRS</span><span class="o">=</span><span class="s2">&quot;/usr&quot;</span>
<span class="nv">CONFIG_PROTECT</span><span class="o">=</span><span class="s2">&quot;/usr/X11R6/lib/X11/xkb /opt/tomcat/conf \</span>
<span class="s2">                /usr/kde/3.1/share/config /usr/share/texmf/tex/generic/config/ \</span>
<span class="s2">                /usr/share/texmf/tex/platex/config/ /usr/share/config&quot;</span>
<span class="nv">CONFIG_PROTECT_MASK</span><span class="o">=</span><span class="s2">&quot;/etc/gconf&quot;</span>
</pre></div></pre></div>
<h2><span class="mw-headline" id="Defining_variables_globally">Defining variables globally</span></h2>
<h3><span class="mw-headline" id="The_env.d_directory">The env.d directory</span></h3>
<p>To centralize the definitions of these variables, Gentoo introduced the <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> directory. Inside this directory a number of files are available, such as <span style="font-family: monospace; font-size: 95%">00basic</span>, <span style="font-family: monospace; font-size: 95%">05gcc</span>, etc. which contain the variables needed by the application mentioned in their name.
</p><p>For instance, when <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gcc</span> is installed, a file called <span style="font-family: monospace; font-size: 95%">05gcc</span> was created by the ebuild which contains the definitions of the following variables:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/env.d/05gcc</code></strong><strong>Default gcc enabled environment variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/i686-pc-linux-gnu/gcc-bin/3.2&quot;</span>
<span class="nv">ROOTPATH</span><span class="o">=</span><span class="s2">&quot;/usr/i686-pc-linux-gnu/gcc-bin/3.2&quot;</span>
<span class="nv">MANPATH</span><span class="o">=</span><span class="s2">&quot;/usr/share/gcc-data/i686-pc-linux-gnu/3.2/man&quot;</span>
<span class="nv">INFOPATH</span><span class="o">=</span><span class="s2">&quot;/usr/share/gcc-data/i686-pc-linux-gnu/3.2/info&quot;</span>
<span class="nv">CC</span><span class="o">=</span><span class="s2">&quot;gcc&quot;</span>
<span class="nv">CXX</span><span class="o">=</span><span class="s2">&quot;g++&quot;</span>
<span class="nv">LDPATH</span><span class="o">=</span><span class="s2">&quot;/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.3&quot;</span>
</pre></div></pre>
<p>Other distributions might tell their users to change or add such environment variable definitions in <span style="font-family: monospace; font-size: 95%">/etc/profile</span> or other locations. Gentoo on the other hand makes it easy for the user (and for Portage) to maintain and manage the environment variables without having to pay attention to the numerous files that can contain environment variables.
</p><p>For instance, when <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gcc</span> is updated, the <span style="font-family: monospace; font-size: 95%">/etc/env.d/05gcc</span> file is updated too without requesting any user-interaction.
</p><p>This not only benefits Portage, but also the user. Occasionally users might be asked to set a certain environment variable system-wide. As an example we take the <var>http_proxy</var> variable. Instead of messing about with <span style="font-family: monospace; font-size: 95%">/etc/profile</span>, users can now just create a file (say <span style="font-family: monospace; font-size: 95%">/etc/env.d/99local</span>) and enter the definition(s) in it:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/env.d/99local</code></strong><strong>Setting a global variable</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">http_proxy</span><span class="o">=</span><span class="s2">&quot;proxy.server.com:8080&quot;</span>
</pre></div></pre>
<p>By using the same file for all self-managed variables, users have a quick overview on the variables they have defined themselves.
</p>
<h3><span class="mw-headline" id="env-update">env-update</span></h3>
<p>Several files in <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> define the PATH variable. This is not a mistake: when <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span> is executed, it will append the several definitions before it updates the environment variables, thereby making it easy for packages (or users) to add their own environment variable settings without interfering with the already existing values.
</p><p>The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span> script will append the values in the alphabetical order of the <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> files. The file names must begin with two decimal digits.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Update order used by env-update</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>00basic        99kde-env       99local
     +-------------+----------------+-------------+
PATH=&quot;/bin:/usr/bin:/usr/kde/3.2/bin:/usr/local/bin&quot;
</pre></div></pre></div>
<p>The concatenation of variables does not always happen, only with the following variables: <var>ADA_INCLUDE_PATH</var>, <var>ADA_OBJECTS_PATH</var>, <var>CLASSPATH</var>, <var>KDEDIRS</var>, <var>PATH</var>, <var>LDPATH</var>, <var>MANPATH</var>, <var>INFODIR</var>, <var>INFOPATH</var>, <var>ROOTPATH</var>, <var>CONFIG_PROTECT</var>, <var>CONFIG_PROTECT_MASK</var>, <var>PRELINK_PATH</var>, <var>PRELINK_PATH_MASK</var>, <var>PKG_CONFIG_PATH</var>, and <var>PYTHONPATH</var>. For all other variables the latest defined value (in alphabetical order of the files in <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span>) is used.
</p><p>It is possible to add more variables into this list of concatenate-variables by adding the variable name to either <var>COLON_SEPARATED</var> or <var>SPACE_SEPARATED</var> variables (also inside an <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> file).
</p><p>When executing <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span>, the script will create all environment variables and place them in <span style="font-family: monospace; font-size: 95%">/etc/profile.env</span> (which is used by <span style="font-family: monospace; font-size: 95%">/etc/profile</span>). It will also extract the information from the <var>LDPATH</var> variable and use that to create <span style="font-family: monospace; font-size: 95%">/etc/ld.so.conf</span>. After this, it will run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ldconfig</span> to recreate the <span style="font-family: monospace; font-size: 95%">/etc/ld.so.cache</span> file used by the dynamical linker.
</p><p>To notice the effect of <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span> immediately after running it, execute the following command to update the environment. Users who have installed Gentoo themselves will probably remember this from the installation instructions:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>env-update &amp;&amp; source /etc/profile</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Notiz</strong><br />The above command only updates the variables in the current terminal, new consoles, and their children. Thus, if the user is working in X11, he needs to either type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">source /etc/profile</span> in every new terminal opened or restart X so that all new terminals source the new variables. If a login manager is used, it is necessary to become root and restart the <span style="font-family: monospace; font-size: 95%">/etc/init.d/xdm</span> service. </div>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Wichtig</strong><br />It is not possible to use shell variables when defining other variables. This means things like FOO="$BAR" (where $BAR is another variable) are forbidden.</div>
<h2><span class="mw-headline" id="Defining_variables_locally">Defining variables locally</span></h2>
<h3><span class="mw-headline" id="User_specific">User specific</span></h3>
<p>It might not be necessary to define an environment variable globally. For instance, one might want to add <span style="font-family: monospace; font-size: 95%">/home/my_user/bin</span> and the current working directory (the directory the user is in) to the <var>PATH</var> variable but do not want all other users on the system to have that in their <var>PATH</var> too. To define an environment variable locally, use <span style="font-family: monospace; font-size: 95%">~/.bashrc</span> or <span style="font-family: monospace; font-size: 95%">~/.bash_profile</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">DATEI</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">~/.bashrc</code></strong><strong>Extending PATH for local usage</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c"># A colon followed by no directory is treated as the current working directory</span>
<span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:/home/my_user/bin:&quot;</span>
</pre></div></pre>
<p>After logout/login, the <var>PATH</var> variable will be updated.
</p>
<h3><span class="mw-headline" id="Session_specific">Session specific</span></h3>
<p>Sometimes even stricter definitions are requested. For instance, a user might want to be able to use binaries from a temporary directory created without using the path to the binaries themselves or editing <span style="font-family: monospace; font-size: 95%">~/.bashrc</span> for the short time necessary.
</p><p>In this case, just define the <var>PATH</var> variable in the current session by using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">export</span> command. As long as the user does not log out, the <var>PATH</var> variable will be using the temporary settings.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export PATH="${PATH}:/home/my_user/tmp/usr/bin"</code></div></div>
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Working/Initscripts/de.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../de.html" title="Handbook:X86/de" class="btn btn-default">Anfang</a> <a href="../../Portage/Files/de.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
<span class="error"><strong>Warning:</strong> Display title "Gentoo Linux x86 Handbuch: Arbeiten mit Gentoo" overrides earlier display title "Handbuch:X86/Komplett/Arbeiten".</span>
</p><p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20160112143619
Cache expiry: 86400
Dynamic content: false
CPU time usage: 1.988 seconds
Real time usage: 2.136 seconds
Preprocessor visited node count: 10391/1000000
Preprocessor generated node count: 7710/1000000
Post‐expand include size: 539792/2097152 bytes
Template argument size: 48115/2097152 bytes
Highest expansion depth: 17/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00% 1502.833      1 - Handbook:Parts/Full/Working/de
100.00% 1502.833      1 - -total
 35.96%  540.443      1 - Handbook:X86/Working/Portage/de
 35.75%  537.286      1 - Handbook:Parts/Working/Portage/de
 26.28%  395.005     51 - Template:RootCmd
 25.65%  385.409      5 - Handbook:Parts/TOC/de
 25.03%  376.122     61 - Template:GenericCmd
 21.74%  326.744      1 - Handbook:X86/Working/Features/de
 21.52%  323.468      1 - Handbook:Parts/Working/Features/de
 19.11%  287.242      1 - Handbook:X86/Working/Initscripts/de
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:88580-0!*!0!!en!*!* and timestamp 20160112143617 and revision id 217366
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Working/de&amp;oldid=217366">http://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Working/de&amp;oldid=217366</a>"</div>
															<div id='catlinks' class='catlinks catlinks-allhidden'></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 2 January 2015, at 13:19.</li>
																															<li id="privacy"><a href="../../../Gentoo_Wiki_Privacy_policy.html" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="../../../Gentoo_Wiki_About.html" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="../../../Gentoo_Wiki_General_disclaimer.html" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "Handbook:X86/Full/Working/de"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="http://piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":2351});
} );</script></body>
<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Full/Working/de by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:28 GMT -->
</html>