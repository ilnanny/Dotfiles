<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Full/Installation/ja by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Gentoo Linux x86 ハンドブック: Gentoo をインストールする - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"Handbook","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":560,"wgPageName":"Handbook:X86/Full/Installation/ja","wgTitle":"X86/Full/Installation/ja","wgCurRevisionId":374838,"wgRevisionId":374838,"wgArticleId":91426,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages using duplicate arguments in template calls"],"wgBreakFrames":!1,"wgPageContentLanguage":"ja","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"ja","wgMonthNames":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgMonthNamesShort":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgRelevantPageName":"Handbook:X86/Full/Installation/ja","wgRelevantArticleId":91426,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],
"sfgAutocompleteValues":[],"sfgAutocompleteOnAllChars":!1,"sfgFieldProperties":[],"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en","*"],"wgULSCurrentAutonym":"English","wgTranslatePageTranslation":"translation"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.translate","ext.smw.style","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.css" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="Handbook:X86/Full/Installation/ja" href="https://wiki.gentoo.org/index.php?title=Special:ExportRDF/Handbook:X86/Full/Installation/ja&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="https://wiki.gentoo.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.gentoo.org/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="https://wiki.gentoo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-560 ns-subject page-Handbook_X86_Full_Installation_ja skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="https://wiki.gentoo.org/" title="Back to the homepage" class="site-logo"><object data="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.svg" type="image/svg+xml">
							<img src="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="../../../Special_MyLanguage/Help_Contents.html" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Gentoo.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="../../../Project_Gentoo.html">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Documentation.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="../../../Handbook_Main_Page.html">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="../../../FAQ.html">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="../../../Project_Documentation/Overview.html">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="../../../Category_Core_system.html">Core system</a></li><li id="n-Hardware"><a href="../../../Category_Hardware.html">Hardware</a></li><li id="n-Software"><a href="../../../Category_Software.html">Software</a></li><li id="n-Desktop"><a href="../../../Category_Desktop.html">Desktop</a></li><li id="n-Server-.26-Security"><a href="../../../Category_Server_and_Security.html">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="../../../Category_Project_and_Community.html">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="../../../Special_WhatLinksHere/Handbook_X86/Full/Installation/ja.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../../Special_RecentChangesLinked/Handbook_X86/Full/Installation/ja.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Installation/ja&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Installation/ja&amp;oldid=374838" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Installation/ja&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="../../../Special_Browse/Handbook_X86-2FFull-2FInstallation-2Fja.html" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FFull%2FInstallation%2Fja&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AX86%2FFull%2FInstallation%2Fja" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-handbook" class="selected active"><a href="ja.html">Handbook</a></li><li id="ca-talk" class="new"><a href="https://wiki.gentoo.org/index.php?title=Handbook_Talk:X86/Full/Installation/ja&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="https://wiki.gentoo.org/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Installation/ja&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="https://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Installation/ja&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="ja">
							<span dir="auto">Gentoo Linux x86 ハンドブック: Gentoo をインストールする</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages"><a href="../../../Special_MyLanguage/Handbook_X86.html" title="Special:MyLanguage/Handbook:X86">Handbook:X86</a> | <a href="../../../Special_MyLanguage/Handbook_X86/Full.html" title="Special:MyLanguage/Handbook:X86/Full">Full</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="ja" dir="ltr" class="mw-content-ltr"><div class="mw-translate-page-info" lang="en" dir="ltr">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.gentoo.org/index.php?title=Special:Translate&amp;group=page-Handbook%3AX86%2FFull%2FInstallation&amp;action=page&amp;filter=&amp;language=ja">translated version</a></span> of the page <a href="../Installation.html" title="Handbook:X86/Full/Installation">Handbook:X86/Full/Installation</a> and the translation is 100% complete.</div>
<hr /><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#.E3.81.AF.E3.81.98.E3.82.81.E3.81.AB"><span class="tocnumber">1</span> <span class="toctext">はじめに</span></a>
<ul>
<li class="toclevel-2"><a href="#.E3.82.88.E3.81.86.E3.81.93.E3.81.9D"><span class="tocnumber">1.1</span> <span class="toctext">ようこそ</span></a></li>
<li class="toclevel-2"><a href="#.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E4.BD.9C.E6.A5.AD.E3.81.AE.E9.A0.86.E5.BA.8F"><span class="tocnumber">1.2</span> <span class="toctext">インストール作業の順序</span></a></li>
<li class="toclevel-2"><a href="#.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E3.81.AE.E9.81.B8.E6.8A.9E.E8.82.A2.E3.81.AB.E3.81.A4.E3.81.84.E3.81.A6"><span class="tocnumber">1.3</span> <span class="toctext">インストールの選択肢について</span></a></li>
<li class="toclevel-2"><a href="#.E3.83.88.E3.83.A9.E3.83.96.E3.83.AB.E3.81.8C.E3.81.82.E3.81.A3.E3.81.9F.E3.81.A8.E3.81.8D.E3.81.AF"><span class="tocnumber">1.4</span> <span class="toctext">トラブルがあったときは</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E3.83.8F.E3.83.BC.E3.83.89.E3.82.A6.E3.82.A7.E3.82.A2.E8.A6.81.E4.BB.B6"><span class="tocnumber">2</span> <span class="toctext">ハードウェア要件</span></a></li>
<li class="toclevel-1"><a href="#Gentoo_Linux.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.ABCD"><span class="tocnumber">3</span> <span class="toctext">Gentoo LinuxインストールCD</span></a>
<ul>
<li class="toclevel-2"><a href="#Minimal.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.ABCD"><span class="tocnumber">3.1</span> <span class="toctext">MinimalインストールCD</span></a></li>
<li class="toclevel-2"><a href="#.E5.BF.85.E8.A6.81.E3.81.AA.E3.81.A8.E3.81.8D.E3.81.AB.E4.BD.BF.E3.81.86Gentoo_LiveDVD"><span class="tocnumber">3.2</span> <span class="toctext">必要なときに使うGentoo LiveDVD</span></a></li>
<li class="toclevel-2"><a href="#.E6.AC.A1.E3.81.AB.E3.81.99.E3.82.8B.E3.81.93.E3.81.A8.E3.81.AF.3F"><span class="tocnumber">3.3</span> <span class="toctext">次にすることは?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#CD.E3.81.AE.E3.83.80.E3.82.A6.E3.83.B3.E3.83.AD.E3.83.BC.E3.83.89.E3.81.A8.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF"><span class="tocnumber">4</span> <span class="toctext">CDのダウンロードと書き込み</span></a>
<ul>
<li class="toclevel-2"><a href="#.E3.83.A1.E3.83.87.E3.82.A3.E3.82.A2.E3.81.AE.E3.83.80.E3.82.A6.E3.83.B3.E3.83.AD.E3.83.BC.E3.83.89"><span class="tocnumber">4.1</span> <span class="toctext">メディアのダウンロード</span></a></li>
<li class="toclevel-2"><a href="#.E3.83.80.E3.82.A6.E3.83.B3.E3.83.AD.E3.83.BC.E3.83.89.E3.81.97.E3.81.9F.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.92.E6.A4.9C.E8.A8.BC.E3.81.99.E3.82.8B"><span class="tocnumber">4.2</span> <span class="toctext">ダウンロードしたファイルを検証する</span></a>
<ul>
<li class="toclevel-3"><a href="#Microsoft_Windows.E4.B8.8A.E3.81.A7.E3.81.AE.E6.A4.9C.E8.A8.BC"><span class="tocnumber">4.2.1</span> <span class="toctext">Microsoft Windows上での検証</span></a></li>
<li class="toclevel-3"><a href="#Linux.E4.B8.8A.E3.81.A7.E3.81.AE.E6.A4.9C.E8.A8.BC"><span class="tocnumber">4.2.2</span> <span class="toctext">Linux上での検証</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF"><span class="tocnumber">4.3</span> <span class="toctext">書き込み</span></a>
<ul>
<li class="toclevel-3"><a href="#Microsoft_Windows.E3.81.A7.E3.81.AE.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF"><span class="tocnumber">4.3.1</span> <span class="toctext">Microsoft Windowsでの書き込み</span></a></li>
<li class="toclevel-3"><a href="#Linux.E3.81.A7.E3.81.AE.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF"><span class="tocnumber">4.3.2</span> <span class="toctext">Linuxでの書き込み</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#CD.E3.82.92.E8.B5.B7.E5.8B.95.E3.81.99.E3.82.8B"><span class="tocnumber">5</span> <span class="toctext">CDを起動する</span></a>
<ul>
<li class="toclevel-2"><a href="#Booting_the_installation_CD"><span class="tocnumber">5.1</span> <span class="toctext">Booting the installation CD</span></a></li>
<li class="toclevel-2"><a href="#.E4.BE.8B.E5.A4.96.E7.9A.84.E3.81.AA.E3.83.8F.E3.83.BC.E3.83.89.E3.82.A6.E3.82.A7.E3.82.A2.E6.A7.8B.E6.88.90"><span class="tocnumber">5.2</span> <span class="toctext">例外的なハードウェア構成</span></a></li>
<li class="toclevel-2"><a href="#.E8.BF.BD.E5.8A.A0.E5.8F.AF.E8.83.BD:_.E3.83.A6.E3.83.BC.E3.82.B6.E3.82.A2.E3.82.AB.E3.82.A6.E3.83.B3.E3.83.88"><span class="tocnumber">5.3</span> <span class="toctext">追加可能: ユーザアカウント</span></a></li>
<li class="toclevel-2"><a href="#.E8.BF.BD.E5.8A.A0.E5.8F.AF.E8.83.BD.EF.BC.9A.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E4.B8.AD.E3.81.AE.E3.83.89.E3.82.AD.E3.83.A5.E3.83.A1.E3.83.B3.E3.83.88.E9.96.B2.E8.A6.A7"><span class="tocnumber">5.4</span> <span class="toctext">追加可能：インストール中のドキュメント閲覧</span></a></li>
<li class="toclevel-2"><a href="#.E8.BF.BD.E5.8A.A0.E5.8F.AF.E8.83.BD.EF.BC.9ASSH.E3.83.87.E3.83.BC.E3.83.A2.E3.83.B3.E3.81.AE.E9.96.8B.E5.A7.8B"><span class="tocnumber">5.5</span> <span class="toctext">追加可能：SSHデーモンの開始</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Automatic_network_detection"><span class="tocnumber">6</span> <span class="toctext">Automatic network detection</span></a>
<ul>
<li class="toclevel-2"><a href="#Optional:_Configure_any_proxies"><span class="tocnumber">6.1</span> <span class="toctext">Optional: Configure any proxies</span></a></li>
<li class="toclevel-2"><a href="#Testing_the_network"><span class="tocnumber">6.2</span> <span class="toctext">Testing the network</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Automatic_network_configuration"><span class="tocnumber">7</span> <span class="toctext">Automatic network configuration</span></a>
<ul>
<li class="toclevel-2"><a href="#Default:_Using_net-setup"><span class="tocnumber">7.1</span> <span class="toctext">Default: Using net-setup</span></a></li>
<li class="toclevel-2"><a href="#Alternative:_Using_PPP"><span class="tocnumber">7.2</span> <span class="toctext">Alternative: Using PPP</span></a></li>
<li class="toclevel-2"><a href="#Alternative:_Using_PPTP"><span class="tocnumber">7.3</span> <span class="toctext">Alternative: Using PPTP</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Manual_network_configuration"><span class="tocnumber">8</span> <span class="toctext">Manual network configuration</span></a>
<ul>
<li class="toclevel-2"><a href="#Loading_the_appropriate_network_modules"><span class="tocnumber">8.1</span> <span class="toctext">Loading the appropriate network modules</span></a></li>
<li class="toclevel-2"><a href="#Using_DHCP"><span class="tocnumber">8.2</span> <span class="toctext">Using DHCP</span></a></li>
<li class="toclevel-2"><a href="#Preparing_for_wireless_access"><span class="tocnumber">8.3</span> <span class="toctext">Preparing for wireless access</span></a></li>
<li class="toclevel-2"><a href="#Understanding_network_terminology"><span class="tocnumber">8.4</span> <span class="toctext">Understanding network terminology</span></a></li>
<li class="toclevel-2"><a href="#Using_ifconfig_and_route"><span class="tocnumber">8.5</span> <span class="toctext">Using ifconfig and route</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Introduction_to_block_devices"><span class="tocnumber">9</span> <span class="toctext">Introduction to block devices</span></a>
<ul>
<li class="toclevel-2"><a href="#Block_devices"><span class="tocnumber">9.1</span> <span class="toctext">Block devices</span></a></li>
<li class="toclevel-2"><a href="#Partitions"><span class="tocnumber">9.2</span> <span class="toctext">Partitions</span></a>
<ul>
<li class="toclevel-3"><a href="#MBR"><span class="tocnumber">9.2.1</span> <span class="toctext">MBR</span></a></li>
<li class="toclevel-3"><a href="#GPT"><span class="tocnumber">9.2.2</span> <span class="toctext">GPT</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#GPT_or_MBR"><span class="tocnumber">9.3</span> <span class="toctext">GPT or MBR</span></a></li>
<li class="toclevel-2"><a href="#Using_UEFI"><span class="tocnumber">9.4</span> <span class="toctext">Using UEFI</span></a></li>
<li class="toclevel-2"><a href="#Advanced_storage"><span class="tocnumber">9.5</span> <span class="toctext">Advanced storage</span></a></li>
<li class="toclevel-2"><a href="#Default_partitioning_scheme"><span class="tocnumber">9.6</span> <span class="toctext">Default partitioning scheme</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Designing_a_partition_scheme"><span class="tocnumber">10</span> <span class="toctext">Designing a partition scheme</span></a>
<ul>
<li class="toclevel-2"><a href="#How_many_and_how_big.3F"><span class="tocnumber">10.1</span> <span class="toctext">How many and how big?</span></a></li>
<li class="toclevel-2"><a href="#What_about_swap_space.3F"><span class="tocnumber">10.2</span> <span class="toctext">What about swap space?</span></a></li>
<li class="toclevel-2"><a href="#What_is_the_BIOS_boot_partition.3F"><span class="tocnumber">10.3</span> <span class="toctext">What is the BIOS boot partition?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Default:_Using_parted_to_partition_the_disk"><span class="tocnumber">11</span> <span class="toctext">Default: Using parted to partition the disk</span></a>
<ul>
<li class="toclevel-2"><a href="#Viewing_the_current_partition_layout_with_parted"><span class="tocnumber">11.1</span> <span class="toctext">Viewing the current partition layout with parted</span></a></li>
<li class="toclevel-2"><a href="#Setting_the_GPT_label"><span class="tocnumber">11.2</span> <span class="toctext">Setting the GPT label</span></a></li>
<li class="toclevel-2"><a href="#Removing_all_partitions_with_parted"><span class="tocnumber">11.3</span> <span class="toctext">Removing all partitions with parted</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_partitions"><span class="tocnumber">11.4</span> <span class="toctext">Creating the partitions</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Alternative:_Using_fdisk_to_partition_the_disk"><span class="tocnumber">12</span> <span class="toctext">Alternative: Using fdisk to partition the disk</span></a>
<ul>
<li class="toclevel-2"><a href="#Viewing_the_current_partition_layout"><span class="tocnumber">12.1</span> <span class="toctext">Viewing the current partition layout</span></a></li>
<li class="toclevel-2"><a href="#Removing_all_partitions_with_fdisk"><span class="tocnumber">12.2</span> <span class="toctext">Removing all partitions with fdisk</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_BIOS_boot_partition"><span class="tocnumber">12.3</span> <span class="toctext">Creating the BIOS boot partition</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_boot_partition"><span class="tocnumber">12.4</span> <span class="toctext">Creating the boot partition</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_swap_partition"><span class="tocnumber">12.5</span> <span class="toctext">Creating the swap partition</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_root_partition"><span class="tocnumber">12.6</span> <span class="toctext">Creating the root partition</span></a></li>
<li class="toclevel-2"><a href="#Saving_the_partition_layout"><span class="tocnumber">12.7</span> <span class="toctext">Saving the partition layout</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Creating_file_systems"><span class="tocnumber">13</span> <span class="toctext">Creating file systems</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction"><span class="tocnumber">13.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#Filesystems"><span class="tocnumber">13.2</span> <span class="toctext">Filesystems</span></a></li>
<li class="toclevel-2"><a href="#Applying_a_filesystem_to_a_partition"><span class="tocnumber">13.3</span> <span class="toctext">Applying a filesystem to a partition</span></a></li>
<li class="toclevel-2"><a href="#Activating_the_swap_partition"><span class="tocnumber">13.4</span> <span class="toctext">Activating the swap partition</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Mounting"><span class="tocnumber">14</span> <span class="toctext">Mounting</span></a></li>
<li class="toclevel-1"><a href="#Installing_a_stage_tarball"><span class="tocnumber">15</span> <span class="toctext">Installing a stage tarball</span></a>
<ul>
<li class="toclevel-2"><a href="#Setting_the_date_and_time"><span class="tocnumber">15.1</span> <span class="toctext">Setting the date and time</span></a></li>
<li class="toclevel-2"><a href="#Downloading_the_stage_tarball"><span class="tocnumber">15.2</span> <span class="toctext">Downloading the stage tarball</span></a></li>
<li class="toclevel-2"><a href="#Unpacking_the_stage_tarball"><span class="tocnumber">15.3</span> <span class="toctext">Unpacking the stage tarball</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Configuring_compile_options"><span class="tocnumber">16</span> <span class="toctext">Configuring compile options</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction_2"><span class="tocnumber">16.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#CFLAGS_and_CXXFLAGS"><span class="tocnumber">16.2</span> <span class="toctext">CFLAGS and CXXFLAGS</span></a></li>
<li class="toclevel-2"><a href="#MAKEOPTS"><span class="tocnumber">16.3</span> <span class="toctext">MAKEOPTS</span></a></li>
<li class="toclevel-2"><a href="#Ready.2C_set.2C_go"><span class="tocnumber">16.4</span> <span class="toctext">Ready, set, go</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Chrooting"><span class="tocnumber">17</span> <span class="toctext">Chrooting</span></a>
<ul>
<li class="toclevel-2"><a href="#Optional:_Selecting_mirrors"><span class="tocnumber">17.1</span> <span class="toctext">Optional: Selecting mirrors</span></a></li>
<li class="toclevel-2"><a href="#Copy_DNS_info"><span class="tocnumber">17.2</span> <span class="toctext">Copy DNS info</span></a></li>
<li class="toclevel-2"><a href="#Mounting_the_necessary_filesystems"><span class="tocnumber">17.3</span> <span class="toctext">Mounting the necessary filesystems</span></a></li>
<li class="toclevel-2"><a href="#Entering_the_new_environment"><span class="tocnumber">17.4</span> <span class="toctext">Entering the new environment</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Configuring_Portage"><span class="tocnumber">18</span> <span class="toctext">Configuring Portage</span></a>
<ul>
<li class="toclevel-2"><a href="#Installing_a_Portage_snapshot"><span class="tocnumber">18.1</span> <span class="toctext">Installing a Portage snapshot</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Updating_the_Portage_tree"><span class="tocnumber">18.2</span> <span class="toctext">Optional: Updating the Portage tree</span></a></li>
<li class="toclevel-2"><a href="#Reading_news_items"><span class="tocnumber">18.3</span> <span class="toctext">Reading news items</span></a></li>
<li class="toclevel-2"><a href="#Choosing_the_right_profile"><span class="tocnumber">18.4</span> <span class="toctext">Choosing the right profile</span></a></li>
<li class="toclevel-2"><a href="#Configuring_the_USE_variable"><span class="tocnumber">18.5</span> <span class="toctext">Configuring the USE variable</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Optional:_Using_systemd"><span class="tocnumber">19</span> <span class="toctext">Optional: Using systemd</span></a></li>
<li class="toclevel-1"><a href="#Timezone"><span class="tocnumber">20</span> <span class="toctext">Timezone</span></a></li>
<li class="toclevel-1"><a href="#Configure_locales"><span class="tocnumber">21</span> <span class="toctext">Configure locales</span></a></li>
<li class="toclevel-1"><a href="#.E3.82.AB.E3.83.BC.E3.83.8D.E3.83.AB.E3.82.BD.E3.83.BC.E3.82.B9.E3.81.AE.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB"><span class="tocnumber">22</span> <span class="toctext">カーネルソースのインストール</span></a></li>
<li class="toclevel-1"><a href="#.E3.83.87.E3.83.95.E3.82.A9.E3.83.AB.E3.83.88:_.E3.83.9E.E3.83.8B.E3.83.A5.E3.82.A2.E3.83.AB.E8.A8.AD.E5.AE.9A"><span class="tocnumber">23</span> <span class="toctext">デフォルト: マニュアル設定</span></a>
<ul>
<li class="toclevel-2"><a href="#.E3.81.AF.E3.81.98.E3.82.81.E3.81.AB_2"><span class="tocnumber">23.1</span> <span class="toctext">はじめに</span></a></li>
<li class="toclevel-2"><a href="#.E5.BF.85.E9.A0.88.E3.82.AA.E3.83.97.E3.82.B7.E3.83.A7.E3.83.B3.E3.82.92.E6.9C.89.E5.8A.B9.E3.81.AB.E3.81.99.E3.82.8B"><span class="tocnumber">23.2</span> <span class="toctext">必須オプションを有効にする</span></a></li>
<li class="toclevel-2"><a href="#Architecture_specific_kernel_configuration"><span class="tocnumber">23.3</span> <span class="toctext">Architecture specific kernel configuration</span></a></li>
<li class="toclevel-2"><a href="#Compiling_and_installing"><span class="tocnumber">23.4</span> <span class="toctext">Compiling and installing</span></a></li>
<li class="toclevel-2"><a href="#.E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_initramfs.E3.81.AE.E3.83.93.E3.83.AB.E3.83.89"><span class="tocnumber">23.5</span> <span class="toctext">任意自由選択: initramfsのビルド</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E5.88.A5.E3.81.AE.E6.96.B9.E6.B3.95:_genkernel.E3.82.92.E4.BD.BF.E7.94.A8.E3.81.99.E3.82.8B"><span class="tocnumber">24</span> <span class="toctext">別の方法: genkernelを使用する</span></a></li>
<li class="toclevel-1"><a href="#.E3.82.AB.E3.83.BC.E3.83.8D.E3.83.AB.E3.83.A2.E3.82.B8.E3.83.A5.E3.83.BC.E3.83.AB"><span class="tocnumber">25</span> <span class="toctext">カーネルモジュール</span></a>
<ul>
<li class="toclevel-2"><a href="#.E3.83.A2.E3.82.B8.E3.83.A5.E3.83.BC.E3.83.AB.E3.81.AE.E8.A8.AD.E5.AE.9A"><span class="tocnumber">25.1</span> <span class="toctext">モジュールの設定</span></a></li>
<li class="toclevel-2"><a href="#.E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_.E3.83.95.E3.82.A1.E3.83.BC.E3.83.A0.E3.82.A6.E3.82.A7.E3.82.A2.E3.81.AE.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB"><span class="tocnumber">25.2</span> <span class="toctext">任意自由選択: ファームウェアのインストール</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.81.AE.E6.83.85.E5.A0.B1"><span class="tocnumber">26</span> <span class="toctext">ファイルシステムの情報</span></a>
<ul>
<li class="toclevel-2"><a href="#fstab.E3.81.AB.E3.81.A4.E3.81.84.E3.81.A6"><span class="tocnumber">26.1</span> <span class="toctext">fstabについて</span></a></li>
<li class="toclevel-2"><a href="#fstab.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.92.E4.BD.9C.E6.88.90.E3.81.99.E3.82.8B"><span class="tocnumber">26.2</span> <span class="toctext">fstabファイルを作成する</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E6.8E.A5.E7.B6.9A.E3.81.AE.E3.81.9F.E3.82.81.E3.81.AE.E6.83.85.E5.A0.B1"><span class="tocnumber">27</span> <span class="toctext">ネットワーク接続のための情報</span></a>
<ul>
<li class="toclevel-2"><a href="#.E3.83.9B.E3.82.B9.E3.83.88.E3.81.A8.E3.83.89.E3.83.A1.E3.82.A4.E3.83.B3.E3.81.AE.E3.81.9F.E3.82.81.E3.81.AE.E6.83.85.E5.A0.B1"><span class="tocnumber">27.1</span> <span class="toctext">ホストとドメインのための情報</span></a></li>
<li class="toclevel-2"><a href="#.E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E3.82.92.E8.A8.AD.E5.AE.9A.E3.81.99.E3.82.8B"><span class="tocnumber">27.2</span> <span class="toctext">ネットワークを設定する</span></a></li>
<li class="toclevel-2"><a href="#.E8.B5.B7.E5.8B.95.E6.99.82.E3.81.AB.E8.87.AA.E5.8B.95.E3.81.A7.E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E6.8E.A5.E7.B6.9A.E3.81.99.E3.82.8B"><span class="tocnumber">27.3</span> <span class="toctext">起動時に自動でネットワーク接続する</span></a></li>
<li class="toclevel-2"><a href="#hosts.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB"><span class="tocnumber">27.4</span> <span class="toctext">hostsファイル</span></a></li>
<li class="toclevel-2"><a href="#.E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_PCMCIA.E3.82.92.E6.A9.9F.E8.83.BD.E3.81.95.E3.81.9B.E3.82.8B"><span class="tocnumber">27.5</span> <span class="toctext">任意自由選択: PCMCIAを機能させる</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E6.83.85.E5.A0.B1"><span class="tocnumber">28</span> <span class="toctext">システム情報</span></a>
<ul>
<li class="toclevel-2"><a href="#root.E3.83.91.E3.82.B9.E3.83.AF.E3.83.BC.E3.83.89"><span class="tocnumber">28.1</span> <span class="toctext">rootパスワード</span></a></li>
<li class="toclevel-2"><a href="#init.E3.81.A8boot.E8.A8.AD.E5.AE.9A"><span class="tocnumber">28.2</span> <span class="toctext">initとboot設定</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.83.AD.E3.82.AC.E3.83.BC"><span class="tocnumber">29</span> <span class="toctext">システムロガー</span></a></li>
<li class="toclevel-1"><a href="#.E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_cron.E3.83.87.E3.83.BC.E3.83.A2.E3.83.B3"><span class="tocnumber">30</span> <span class="toctext">任意自由選択: cronデーモン</span></a></li>
<li class="toclevel-1"><a href="#.E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.81.AE.E3.82.A4.E3.83.B3.E3.83.87.E3.83.83.E3.82.AF.E3.82.B9.E3.82.92.E4.BD.9C.E6.88.90"><span class="tocnumber">31</span> <span class="toctext">任意自由選択: ファイルのインデックスを作成</span></a></li>
<li class="toclevel-1"><a href="#.E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_.E3.83.AA.E3.83.A2.E3.83.BC.E3.83.88.E3.82.A2.E3.82.AF.E3.82.BB.E3.82.B9"><span class="tocnumber">32</span> <span class="toctext">任意自由選択: リモートアクセス</span></a></li>
<li class="toclevel-1"><a href="#.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.83.84.E3.83.BC.E3.83.AB"><span class="tocnumber">33</span> <span class="toctext">ファイルシステムツール</span></a>
<ul>
<li class="toclevel-2"><a href="#.E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E3.83.84.E3.83.BC.E3.83.AB"><span class="tocnumber">33.1</span> <span class="toctext">ネットワークツール</span></a></li>
<li class="toclevel-2"><a href="#DHCP.E3.82.AF.E3.83.A9.E3.82.A4.E3.82.A2.E3.83.B3.E3.83.88.E3.82.92.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E3.81.99.E3.82.8B"><span class="tocnumber">33.2</span> <span class="toctext">DHCPクライアントをインストールする</span></a></li>
<li class="toclevel-2"><a href="#.E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_PPPoE.E3.82.AF.E3.83.A9.E3.82.A4.E3.82.A2.E3.83.B3.E3.83.88.E3.81.AE.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB"><span class="tocnumber">33.3</span> <span class="toctext">任意自由選択: PPPoEクライアントのインストール</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Selecting_a_boot_loader"><span class="tocnumber">34</span> <span class="toctext">Selecting a boot loader</span></a></li>
<li class="toclevel-1"><a href="#Default:_Using_GRUB2"><span class="tocnumber">35</span> <span class="toctext">Default: Using GRUB2</span></a>
<ul>
<li class="toclevel-2"><a href="#Installing_GRUB2"><span class="tocnumber">35.1</span> <span class="toctext">Installing GRUB2</span></a></li>
<li class="toclevel-2"><a href="#Configuring_GRUB2"><span class="tocnumber">35.2</span> <span class="toctext">Configuring GRUB2</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Alternative:_Using_LILO"><span class="tocnumber">36</span> <span class="toctext">Alternative: Using LILO</span></a>
<ul>
<li class="toclevel-2"><a href="#Installing_LILO"><span class="tocnumber">36.1</span> <span class="toctext">Installing LILO</span></a></li>
<li class="toclevel-2"><a href="#Configuring_LILO"><span class="tocnumber">36.2</span> <span class="toctext">Configuring LILO</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Alternative:_Using_efibootmgr"><span class="tocnumber">37</span> <span class="toctext">Alternative: Using efibootmgr</span></a></li>
<li class="toclevel-1"><a href="#.E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.81.AE.E3.83.AA.E3.83.96.E3.83.BC.E3.83.88"><span class="tocnumber">38</span> <span class="toctext">システムのリブート</span></a></li>
<li class="toclevel-1"><a href="#.E3.83.A6.E3.83.BC.E3.82.B6.E3.83.BC.E7.AE.A1.E7.90.86"><span class="tocnumber">39</span> <span class="toctext">ユーザー管理</span></a>
<ul>
<li class="toclevel-2"><a href="#.E6.AF.8E.E6.97.A5.E4.BD.BF.E7.94.A8.E3.81.99.E3.82.8B.E3.81.9F.E3.82.81.E3.81.AE.E3.83.A6.E3.83.BC.E3.82.B6.E3.82.92.E8.BF.BD.E5.8A.A0.E3.81.97.E3.81.BE.E3.81.99"><span class="tocnumber">39.1</span> <span class="toctext">毎日使用するためのユーザを追加します</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E3.83.87.E3.82.A3.E3.82.B9.E3.82.AF.E3.81.AE.E3.82.AF.E3.83.AA.E3.83.BC.E3.83.B3.E3.82.A2.E3.83.83.E3.83.97"><span class="tocnumber">40</span> <span class="toctext">ディスクのクリーンアップ</span></a>
<ul>
<li class="toclevel-2"><a href="#tar.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.81.AE.E5.89.8A.E9.99.A4"><span class="tocnumber">40.1</span> <span class="toctext">tarファイルの削除</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E6.AC.A1.E3.81.AB.E3.81.99.E3.82.8B.E3.81.93.E3.81.A8.E3.81.AF.EF.BC.9F"><span class="tocnumber">41</span> <span class="toctext">次にすることは？</span></a>
<ul>
<li class="toclevel-2"><a href="#.E3.83.89.E3.82.AD.E3.83.A5.E3.83.A1.E3.83.B3.E3.83.88"><span class="tocnumber">41.1</span> <span class="toctext">ドキュメント</span></a></li>
<li class="toclevel-2"><a href="#Gentoo.E3.82.AA.E3.83.B3.E3.83.A9.E3.82.A4.E3.83.B3"><span class="tocnumber">41.2</span> <span class="toctext">Gentooオンライン</span></a></li>
</ul>
</li>
</ul>
</div>

<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> インストール
</th></tr>
<tr>
<td> <a href="../../Installation/About/ja.html" title="Handbook:X86/Installation/About/ja">インストールについて</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ja.html" title="Handbook:X86/Installation/Media/ja">メディアの選択</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ja.html" title="Handbook:X86/Installation/Networking/ja">ネットワーク設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ja.html" title="Handbook:X86/Installation/Disks/ja">ディスクの準備</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ja.html" title="Handbook:X86/Installation/Stage/ja">stage3のインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ja.html" title="Handbook:X86/Installation/Base/ja">基本システムのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ja.html" title="Handbook:X86/Installation/Kernel/ja">カーネルの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ja.html" title="Handbook:X86/Installation/Tools/ja">ツールのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">締めくくり</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Gentooの操作
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portageについて</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ja.html" title="Handbook:X86/Working/USE/ja">USEフラグ</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ja.html" title="Handbook:X86/Working/Features/ja">Portageの機能</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ja.html" title="Handbook:X86/Working/Initscripts/ja">Initスクリプトシステム</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ja.html" title="Handbook:X86/Working/EnvVar/ja">環境変数</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Portageの操作
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ja.html" title="Handbook:X86/Portage/Files/ja">ファイルとディレクトリ</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ja.html" title="Handbook:X86/Portage/Variables/ja">変数</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ja.html" title="Handbook:X86/Portage/Branches/ja">ソフトウェアブランチの併用</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ja.html" title="Handbook:X86/Portage/Tools/ja">追加ツール</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ja.html" title="Handbook:X86/Portage/CustomTree/ja">カスタムPortageツリー</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ja.html" title="Handbook:X86/Portage/Advanced/ja">高度な機能</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> ネットワーク設定
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ja.html" title="Handbook:X86/Networking/Introduction/ja">はじめに</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ja.html" title="Handbook:X86/Networking/Advanced/ja">高度な設定</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ja.html" title="Handbook:X86/Networking/Modular/ja">モジュール式ネットワーク</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ja.html" title="Handbook:X86/Networking/Wireless/ja">無線</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ja.html" title="Handbook:X86/Networking/Extending/ja">機能の追加</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ja.html" title="Handbook:X86/Networking/Dynamic/ja">動的な管理</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".E3.81.AF.E3.81.98.E3.82.81.E3.81.AB">はじめに</span></h2>
<h3><span class="mw-headline" id=".E3.82.88.E3.81.86.E3.81.93.E3.81.9D">ようこそ</span></h3>
<p>まずはじめに、Gentooへようこそ。あなたは、選択と性能の世界に入ろうとしています。Gentooでは、全てが選択です。そのことは、インストールするときにもたびたび明らかになります。コンパイルを何回やらせたいか、Gentooをどのようにインストールしたいか、システムのロギングツールに何を使用したいかなどなど、ユーザに選択権があります。
</p><p>Gentooは、高速で現代的なメタディストリビューションで、整理された柔軟なデザインになっています。Gentooは、フリーソフトウェアで造られており、内部をユーザに隠匿することがありません。Gentooで用いるパッケージ管理システムであるPortageはPythonで書かれていますので、ソースコードを容易に閲覧したり改変したりすることができます。Gentooで採用しているパッケージ化の手法は、（コンパイル済パッケージにも対応していますが、）ソースコードを用いるものです。Gentooの設定は、一般的なテキストファイルで行います。つまり言い換えれば、Gentooは、全てをユーザーに開放しています。
</p><p>Gentooに実行させることの選択肢を全員が理解していることは、きわめて重要です。望まざることをユーザーに強いないよう、我々は努めています。もしかりにこれに反するようなことがあったならば、<a rel="nofollow" class="external text" href="https://bugs.gentoo.org/">バグリポート</a>を送ってください。
</p>
<h3><span class="mw-headline" id=".E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E4.BD.9C.E6.A5.AD.E3.81.AE.E9.A0.86.E5.BA.8F">インストール作業の順序</span></h3>
<p>Gentoo のインストール作業工程は、次章以降で説明する10のステップに分けられます。それぞれの段階を適切に完了させましょう。
</p>
<table class="table-condensed table-striped">

<tr>
<th scope="col" width="15%"> ステップ </th>
<th> 結果
</th></tr>
<tr>
<td> 1 </td>
<td> Gentoo をインストール可能な作業環境にします。
</td></tr>
<tr>
<td> 2 </td>
<td> Gentoo をインストールするためのインターネット接続の準備が完了します。
</td></tr>
<tr>
<td> 3 </td>
<td> インストールする Gentoo をホストするハードディスクを初期化します。
</td></tr>
<tr>
<td> 4 </td>
<td> インストールする環境を準備し、新たな環境にユーザーが chroot 可能にします。
</td></tr>
<tr>
<td> 5 </td>
<td> Gentoo をインストールする全ての場合に共通する中核的なパッケージをインストールします。
</td></tr>
<tr>
<td> 6 </td>
<td> Linux カーネルをインストールします。
</td></tr>
<tr>
<td> 7 </td>
<td> Gentoo システムの主な設定ファイルを完成させます。
</td></tr>
<tr>
<td> 8 </td>
<td> 必要なシステムツールをインストールします。
</td></tr>
<tr>
<td> 9 </td>
<td> 適切なブートローダーもインストールし設定します。
</td></tr>
<tr>
<td> 10 </td>
<td> インストールしたての Gentoo Linux 環境に繰り出す準備が完了します。
</td></tr></table>
<p>このハンドブックでは、一定の選択肢を提示したときには必ず、賛否両論の併記に努めます。デフォルトの選択肢で進める記載をした際にも（見出しに「デフォルト:」と記載）、他に取りうる選択肢も記載します（見出しに「代替案:」と記載）。決して、「デフォルトは Gentoo のお勧めだ」と考えないでください。デフォルトはあくまでも、多くのユーザーが利用すると思われる選択肢にすぎません。
</p><p>ときには、追加可能な手順が続くことがあります。そのような手順は「追加可能:」と記載します。つまりこの手順は、Gentoo のインストール自体には必須ではありません。とはいえ、以前にした決断によっては必須になる追加手順もあります。その際には、その追加手順の説明の直前に、この旨を明記するとともに、原因となった決断をした時期も記載します。
</p>
<h3><span class="mw-headline" id=".E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E3.81.AE.E9.81.B8.E6.8A.9E.E8.82.A2.E3.81.AB.E3.81.A4.E3.81.84.E3.81.A6">インストールの選択肢について</span></h3>
<p>Gentoo は、さまざまな方法でインストールすることができます。ダウンロードしてインストールすることも、一枚のインストールCDからインストールすることも、インストール済の異なるディストリビューション環境を用いてインストールすることも、（例えば Knoppix のような）Gentoo 以外のブータブルCD環境からインストールすることも、ネットワークブート環境からのインストールも、レスキューフロッピーディスク環境からのインストールなども可能です。
</p><p>この文書が扱っているのは、Gentoo インストールCDを用いる方法と、場合によってはネットワークブートによる方法です。
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />Gentoo 以外のCDを用いる場合などの、ほかのインストール方法については、<a href="../../../Installation_alternatives/ja.html" title="Installation alternatives/ja">『Alternative installation guide』</a>を読んでください。</div>
<p>また、我々が提供している<a href="../../../Gentoo_installation_tips_and_tricks/ja.html" title="Gentoo installation tips and tricks/ja">『Gentoo Installation tips and Tricks』</a> という文書も役にたつかもしれません。
</p>
<h3><span class="mw-headline" id=".E3.83.88.E3.83.A9.E3.83.96.E3.83.AB.E3.81.8C.E3.81.82.E3.81.A3.E3.81.9F.E3.81.A8.E3.81.8D.E3.81.AF">トラブルがあったときは</span></h3>
<p>インストール中に (またはインストール文書に) 何か問題を見つけたら、<a rel="nofollow" class="external text" href="https://bugs.gentoo.org/">バグトラッキングシステム</a>で既知のバグとして報告されていないかどうか、確認してみてください。 もし無いようであれば、私たちが対応できるように、その問題をバグ報告してください。 その (あなたが報告した) バグを担当する開発者たちを恐れないでください。取って喰われるようなことは (滅多に) ありませんから。
</p><p>あなたが今読んでいる文書は、特定のアーキテクチャ向けということになっていますが、 他のアーキテクチャの情報も、その中に紛れ込んでしまっているかもしれない、ということを一応、先に言っておきます。これはGentooハンドブックの多くの部分が、全てのアーキテクチャに共通のソースコードを使用していることに因ります (重複作業を減らして開発リソースを節約するため)。混乱しないように、このような部分は最小限に抑えていきたいと思っています。
</p><p>その問題が、ユーザーの問題 (文書をよく読んだにもかかわらず起きたあなたのミス) なのか、ソフトウェアの問題 (インストール/文書をよくテストしたにもかかわらず起きた私たちのミス) なのか、はっきりしないときには、irc.freenode.netの<span style="font-family: monospace; font-size: 95%;"><a rel="nofollow" class="external text" href="irc://irc.gentoo.org/gentoo">#gentoo</a></span>に気軽に参加してみてください。そんなときじゃなくても全然かまわないんですけどね。
</p><p>そういえば、Gentooについて何か分からないことがあったら、<a href="../../../Main_Page.html" title="Main Page">Wiki</a>から利用できる<a href="../../../FAQ/ja.html" title="FAQ/ja">よくある質問</a>を見てみてください。<a rel="nofollow" class="external text" href="https://forums.gentoo.org/">Gentoo Forums</a>上にある<a rel="nofollow" class="external text" href="https://forums.gentoo.org/viewforum.php?f=40">FAQs</a>もあります。
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../ja.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Media/ja.html" title="Next part" class="btn btn-default">メディアの選択 &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> インストール
</th></tr>
<tr>
<td> <a href="../../Installation/About/ja.html" title="Handbook:X86/Installation/About/ja">インストールについて</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ja.html" title="Handbook:X86/Installation/Media/ja">メディアの選択</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ja.html" title="Handbook:X86/Installation/Networking/ja">ネットワーク設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ja.html" title="Handbook:X86/Installation/Disks/ja">ディスクの準備</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ja.html" title="Handbook:X86/Installation/Stage/ja">stage3のインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ja.html" title="Handbook:X86/Installation/Base/ja">基本システムのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ja.html" title="Handbook:X86/Installation/Kernel/ja">カーネルの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ja.html" title="Handbook:X86/Installation/Tools/ja">ツールのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">締めくくり</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Gentooの操作
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portageについて</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ja.html" title="Handbook:X86/Working/USE/ja">USEフラグ</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ja.html" title="Handbook:X86/Working/Features/ja">Portageの機能</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ja.html" title="Handbook:X86/Working/Initscripts/ja">Initスクリプトシステム</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ja.html" title="Handbook:X86/Working/EnvVar/ja">環境変数</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Portageの操作
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ja.html" title="Handbook:X86/Portage/Files/ja">ファイルとディレクトリ</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ja.html" title="Handbook:X86/Portage/Variables/ja">変数</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ja.html" title="Handbook:X86/Portage/Branches/ja">ソフトウェアブランチの併用</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ja.html" title="Handbook:X86/Portage/Tools/ja">追加ツール</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ja.html" title="Handbook:X86/Portage/CustomTree/ja">カスタムPortageツリー</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ja.html" title="Handbook:X86/Portage/Advanced/ja">高度な機能</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> ネットワーク設定
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ja.html" title="Handbook:X86/Networking/Introduction/ja">はじめに</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ja.html" title="Handbook:X86/Networking/Advanced/ja">高度な設定</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ja.html" title="Handbook:X86/Networking/Modular/ja">モジュール式ネットワーク</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ja.html" title="Handbook:X86/Networking/Wireless/ja">無線</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ja.html" title="Handbook:X86/Networking/Extending/ja">機能の追加</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ja.html" title="Handbook:X86/Networking/Dynamic/ja">動的な管理</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".E3.83.8F.E3.83.BC.E3.83.89.E3.82.A6.E3.82.A7.E3.82.A2.E8.A6.81.E4.BB.B6">ハードウェア要件</span></h2>
<p>始める前に、x86の機械に首尾よくGentooをインストールするために必要なハードウェアの条件を示します。
</p><p><br />
</p>
<table class="wikitable" style="text-align: left;">

<tr>
<td>
</td>
<th> Minimal CD
</th>
<th> LiveDVD
</th></tr>
<tr>
<th> CPU
</th>
<td> i486 or later
</td>
<td> <b>i686</b> or later
</td></tr>
<tr>
<th> Memory
</th>
<td> 256 MB
</td>
<td> 512 MB
</td></tr>
<tr>
<th> Diskspace
</th>
<td colspan="2">2.5 GB (excluding swap space)
</td></tr>
<tr>
<th> Swapspace
</th>
<td colspan="2">At least 256 MB
</td></tr></table>
<p><a rel="nofollow" class="external text" href="https://www.gentoo.org/proj/en/base/amd64/">Gentoo AMD64 project site</a> （英語） は、Gentoo の AMD64 対応についての詳細を知るのに良い場所です。
</p><p><br />
</p>
<h2><span class="mw-headline" id="Gentoo_Linux.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.ABCD">Gentoo LinuxインストールCD</span></h2>
<h3><span class="mw-headline" id="Minimal.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.ABCD">MinimalインストールCD</span></h3>
<p>Gentoo MinimalインストールCDは、独立したGentoo環境を含むブート可能CDです。このCDを使うとLinuxをCDから起動することができます。起動時、接続されたハードウェアが検出されて適切なドライバが読み込まれます。 これらのCDは、Gentooの開発者によってメンテナンスされるもので、インターネット接続さえできれば誰でもGentooをインストールできるようにします。
</p><p>MinimalインストールCDは、<span style="font-family: monospace; font-size: 95%">install-x86-minimal-&lt;release&gt;.iso</span>と呼ばれます。
</p>
<h3><span class="mw-headline" id=".E5.BF.85.E8.A6.81.E3.81.AA.E3.81.A8.E3.81.8D.E3.81.AB.E4.BD.BF.E3.81.86Gentoo_LiveDVD">必要なときに使うGentoo LiveDVD</span></h3>
<p>必要な場合に使う、Gentooをインストール用の特別なDVDがGentoo Tenプロジェクトによって作成されています。この章以降で説明する方法は、MinimalインストールCDをターゲットにしているので、少々の差異があるかもしれません。しかしLiveDVD (または他の起動可能なLinux環境) は、ターミナル上で単純に<span style="font-family: monospace; font-size: 95%; font-weight: bold;">sudo su -</span>または<span style="font-family: monospace; font-size: 95%; font-weight: bold;">sudo -i</span>を実行するだけで、rootプロンプトの取得を行えます。
</p>
<h3><span class="mw-headline" id=".E6.AC.A1.E3.81.AB.E3.81.99.E3.82.8B.E3.81.93.E3.81.A8.E3.81.AF.3F">次にすることは?</span></h3>
<p>stage3 tarballは最小限のGentoo環境を含んだアーカイブで、このマニュアルに従ってインストールを進めるのに適しています。以前は、Gentooハンドブックでは3つのstage tarballから1つを選ぶインストール方法を説明していました。現在でもstage1とstage2 tarballを提供していますが、公式なインストール手順ではstage3 tarballを使用します。もしstage1またはstage2 tarballからインストールしたいのであれば、Gentoo FAQ内の<a href="../../../FAQ/ja.html#Gentoo.E3.82.92stage1.E3.82.84stage2.E3.81.AE.E3.82.A2.E3.83.BC.E3.82.AB.E3.82.A4.E3.83.96.E3.81.8B.E3.82.89.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E3.81.99.E3.82.8B.E3.81.AB.E3.81.AF.EF.BC.9F" title="FAQ/ja">Gentooをstage1やstage2のアーカイブからインストールするには？</a>を読んでください。
</p><p>stage3 tarballは、<a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/mirrors/">公式Gentooミラー</a>のいずれか
の<span style="font-family: monospace; font-size: 95%">releases/x86/autobuilds/</span>からダウンロードできます。 インストールCDの中には含まれていません。
</p>
<h2><span class="mw-headline" id="CD.E3.81.AE.E3.83.80.E3.82.A6.E3.83.B3.E3.83.AD.E3.83.BC.E3.83.89.E3.81.A8.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF">CDのダウンロードと書き込み</span></h2>
<h3><span class="mw-headline" id=".E3.83.A1.E3.83.87.E3.82.A3.E3.82.A2.E3.81.AE.E3.83.80.E3.82.A6.E3.83.B3.E3.83.AD.E3.83.BC.E3.83.89">メディアのダウンロード</span></h3>
<p>Gentoo Linuxが使う既定のインストールメディアは、「MinimalインストールCD」です。このCDは起動可能で、Gentoo Linuxをインストールするために最適なツールを含んだとても小さなGentoo Linux環境を格納しています。このCDのイメージは、たくさんの <a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/mirrors/">ミラーサイト</a> のいずれかからダウンロード可能です。
</p><p>上記のミラーでは、以下の場所でMinimalインストールCDを見つけられます:
</p>
<ol><li> <span style="font-family: monospace; font-size: 95%">releases/</span>ディレクトリに行く</li>
<li> 適切なアーキテクチャを選択します。例えば<span style="font-family: monospace; font-size: 95%">x86/</span></li>
<li> <span style="font-family: monospace; font-size: 95%">autobuilds/</span>ディレクトリを選択</li>
<li> <span style="font-family: monospace; font-size: 95%">current-iso/</span>ディレクトリを選択</li></ol>
<p>この場所の中では、インストールCDファイルは<span style="font-family: monospace; font-size: 95%">.iso</span>という接尾辞 (拡張子) を持ちます。例えば、以下の一覧を見てみてください。
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>releases/x86/autobuilds/current-iso/におけるダウンロード可能なファイルの一覧の例</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[DIR] hardened/                                          05-Dec-2014 01:42    -   
[   ] install-x86-minimal-20141204.iso                 04-Dec-2014 21:04  208M  
[   ] install-x86-minimal-20141204.iso.CONTENTS        04-Dec-2014 21:04  3.0K  
[   ] install-x86-minimal-20141204.iso.DIGESTS         04-Dec-2014 21:04  740   
[TXT] install-x86-minimal-20141204.iso.DIGESTS.asc     05-Dec-2014 01:42  1.6K  
[   ] stage3-x86-20141204.tar.bz2                      04-Dec-2014 21:04  198M  
[   ] stage3-x86-20141204.tar.bz2.CONTENTS             04-Dec-2014 21:04  4.6M  
[   ] stage3-x86-20141204.tar.bz2.DIGESTS              04-Dec-2014 21:04  720   
[TXT] stage3-x86-20141204.tar.bz2.DIGESTS.asc          05-Dec-2014 01:42  1.5K
</pre></div></pre></div>
<p>上記の例では、<span style="font-family: monospace; font-size: 95%">install-x86-minimal-20141204.iso</span>というファイルがMinimalインストールCDそのものです。
しかし見て分かりますが、他の関係ファイルも存在しています:
</p>
<ul><li> <span style="font-family: monospace; font-size: 95%">.CONTENTS</span>ファイルは、インストールCDで利用可能な全てのファイルの一覧を含むテキストファイルです。このファイルは、インストールCDをダウンロードする前に、特定のファームウェアまたはドライバが含まれているかどうか調べるために使えます。</li>
<li> <span style="font-family: monospace; font-size: 95%">.DIGESTS</span>ファイルは、様々なハッシュ形式とアルゴリズムで計算したISOファイルのハッシュ値を含んでいます。このファイルは、ダウンロードしたISOファイルが破損しているか否かを調べるために使われます。</li>
<li> <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルは、(<span style="font-family: monospace; font-size: 95%">.DIGESTS</span>のような) ISOファイルのハッシュ値だけではなく、ファイルのデジタル署名を含みます。これは両方ともダウンロードしたファイルが破損しているか否かを調べるために使われますが、同様にダウンロードしたものがGentooリリースエンジニアリングチームによって実際に提供されたものであり、改竄されていないかを調べるためにも用います。</li></ul>
<p>今のところ、この場所で利用可能な他のファイルは無視してください。インストールがもっと進んだ後に再登場しますので。<span style="font-family: monospace; font-size: 95%">.ISO</span>ファイルをダウンロードし、もしダウンロードの検証が必要であれば、ISOファイル用の<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルも同じようにダウンロードします。
<span style="font-family: monospace; font-size: 95%">.CONTENTS</span>ファイルはダウンロードする必要はありません。これからのインストール手順ではもう参照しないからです。<span style="font-family: monospace; font-size: 95%">.DIGESTS</span>ファイルと<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>は、後者が署名されていることを除いて、同じ情報が含まれています。
</p>
<h3><span class="mw-headline" id=".E3.83.80.E3.82.A6.E3.83.B3.E3.83.AD.E3.83.BC.E3.83.89.E3.81.97.E3.81.9F.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.92.E6.A4.9C.E8.A8.BC.E3.81.99.E3.82.8B">ダウンロードしたファイルを検証する</span></h3>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />これは任意自由選択なステップで、Gentoo Linuxをインストールするために必須なものではありません。しかしながら、ダウンロードしたファイルが破損していないことを確かめ、Gentooインフラストラクチャ チームから実際に提供されていることを保証するため、推奨されます。</div>
<p><span style="font-family: monospace; font-size: 95%">.DIGESTS</span>と<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルを通じ、ISOファイルの妥当性は、適切なツール群を用いて確認できます。この検証は通常、2つのステップで行われます。
</p>
<ol><li> まず、デジタル署名を検証します。これは、インストール·ファイルがGentooリリースエンジニアリングチームによって提供されていることを確認するためです。</li>
<li> デジタル署名が正しければ、ダウンロードされたファイル自体が破損していないかを確かめるため、チェックサムを検証します。</li></ol>
<h4><span class="mw-headline" id="Microsoft_Windows.E4.B8.8A.E3.81.A7.E3.81.AE.E6.A4.9C.E8.A8.BC">Microsoft Windows上での検証</span></h4>
<p>Microsoft Windowsシステムでは、チェックサムとデジタル署名を検証するための適切なツール群が普通にある見込みはまずありません。
</p><p>まずデジタル署名を検証するには、例えば<a rel="nofollow" class="external text" href="http://www.gpg4win.org/">GPG4Win</a>のようなツールを利用できます。インストール後、Gentooリリースエンジニアリングチームの公開鍵をインポートする必要があります。鍵の一覧は<a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/signatures/">署名のページ</a>で提供されています。インポート後、ユーザは<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルの署名を検証できるようになります。
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> 重要</strong><br />これは<span style="font-family: monospace; font-size: 95%">.DIGESTS</span>ファイルが正しいことを検証しません。<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>が正しいことだけを検証します。このことはまた、チェックサムが<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルに含まれる値を用いて検証されるべきであることを意味します。そのため、上記の手順では<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルのみダウンロードするようになっています。</div>
<p>チェックサム自体は、<a rel="nofollow" class="external text" href="http://www.sinf.gr/en/hashcalc.html">Hashcalcアプリケーション</a>を使って検証できますが、多数の代替も同様に存在します。ほとんどの場合、これらのツールはユーザに対して計算されたチェックサムを表示しますので、ユーザはこのチェックサムを<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルの中にある値で検証する必要があります。
</p>
<h4><span class="mw-headline" id="Linux.E4.B8.8A.E3.81.A7.E3.81.AE.E6.A4.9C.E8.A8.BC">Linux上での検証</span></h4>
<p>Linuxシステムでは、デジタル署名を検証する最も一般的な方法は<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-crypt/gnupg">app-crypt/gnupg</a>ソフトウェアを使うことです。このパッケージがインストールされていると、<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルのデジタル署名を検証するために以下のコマンドが使えます。
</p><p>まず、適切な鍵を利用できるようにするため、<a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/signatures/">署名のページ</a>よりダウンロードします:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>gpg --recv-keys 0xBB572E0E2D182910</code></div><pre>
gpg: requesting key 0xBB572E0E2D182910 from hkp server pool.sks-keyservers.net
gpg: key 0xBB572E0E2D182910: &quot;Gentoo Linux Release Engineering (Automated Weekly Release Key) &lt;releng@gentoo.org&gt;&quot; 1 new signature
gpg: 3 marginal(s) needed, 1 complete(s) needed, classic trust model
gpg: depth: 0  valid:   3  signed:  20  trust: 0-, 0q, 0n, 0m, 0f, 3u
gpg: depth: 1  valid:  20  signed:  12  trust: 9-, 0q, 0n, 9m, 2f, 0u
gpg: next trustdb check due at 2018-09-15
gpg: Total number processed: 1
gpg:         new signatures: 1
</pre></div>
<p>次に<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルのデジタル署名を検証します:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>gpg --verify install-x86-minimal-20141204.iso.DIGESTS.asc</code></div><pre>
gpg: Signature made Fri 05 Dec 2014 02:42:44 AM CET
gpg:                using RSA key 0xBB572E0E2D182910
gpg: Good signature from &quot;Gentoo Linux Release Engineering (Automated Weekly Release Key) &lt;releng@gentoo.org&gt;&quot; [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 13EB BDBE DE7A 1277 5DFD  B1BA BB57 2E0E 2D18 2910
</pre></div>
<p>すべてが確実であることを完全に確かめるために、表示された指紋が<a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/signatures/">Gentooの署名のページ</a>上にある指紋かどうかを調べます。
</p><p>デジタル署名が検証されれば、次にチェックサムを確認します。これは、ダウンロードしたISOファイルが破損していないことを確認するためです。
<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>ファイルには、複数のハッシュアルゴリズムが含まれています。そのため、適切なものを検証するための1つの方法としては、<span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span>に登録された先頭のチェックサムを見てください。
例えば、SHA512チェックサムを取得します:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>grep -A 1 -i sha512 install-x86-minimal-20141204.iso.DIGESTS.asc</code></div><pre>
# SHA512 HASH
364d32c4f8420605f8a9fa3a0fc55864d5b0d1af11aa62b7a4d4699a427e5144b2d918225dfb7c5dec8d3f0fe2cddb7cc306da6f0cef4f01abec33eec74f3024  install-x86-minimal-20141204.iso
--
# SHA512 HASH
0719a8954dc7432750de2e3076c8b843a2c79f5e60defe43fcca8c32ab26681dfb9898b102e211174a895ff4c8c41ddd9e9a00ad6434d36c68d74bd02f19b57f  install-x86-minimal-20141204.iso.CONTENTS
</pre></div>
<p>上記の出力では、2つのSHA512チェックサムが表示されます。1つは<span style="font-family: monospace; font-size: 95%">install-x86-minimal-20141204.iso</span>ファイルのもので、1つはそれに付随する<span style="font-family: monospace; font-size: 95%">.CONTENTS</span>ファイルです。最初のチェックサムだけが重要で、その
比較対象となるSHA512チェックサムは、以下のように生成することができます:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>sha512sum install-x86-minimal-20141204.iso</code></div><pre>
364d32c4f8420605f8a9fa3a0fc55864d5b0d1af11aa62b7a4d4699a427e5144b2d918225dfb7c5dec8d3f0fe2cddb7cc306da6f0cef4f01abec33eec74f3024  install-x86-minimal-20141204.iso
</pre></div>
<p>双方のチェックサムが同一であれば、ファイルは破損していません。インストールを続行できます。
</p>
<h3><span class="mw-headline" id=".E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF">書き込み</span></h3>
<p>もちろん、ISOファイルをダウンロードしただけでは、Gentoo Linuxのインストールは始められません。ISOファイルはブートCDに書き込む必要があり、しかもISOファイルそのものではなく、ISOファイルの<i>中身</i>を書き込む必要があります。以下にいくつかのよく使われる方法を示します--より詳細な情報が知りたい場合は<a href="../../../FAQ/ja.html#ISO.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.92.E3.83.87.E3.82.A3.E3.82.B9.E3.82.AF.E3.81.AB.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.82.80.E3.81.AB.E3.81.AF.EF.BC.9F" title="FAQ/ja">ISOファイルの書き込みについてのわたしたちのFAQ</a>を見てください。
</p>
<h4><span class="mw-headline" id="Microsoft_Windows.E3.81.A7.E3.81.AE.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF">Microsoft Windowsでの書き込み</span></h4>
<p>Microsoft Windowsでは、ISOファイルのCD書き込みをサポートする多数のツールが存在します。
</p>
<ul><li> EasyCD Creatorを使う場合は、<span style="font-family: monospace; font-size: 95%">File</span>、<span style="font-family: monospace; font-size: 95%">Record CD from CD image</span>の順に選択してください。次に、<span style="font-family: monospace; font-size: 95%">Files of type</span>を<b>ISO image file</b>に変更してください。それから、ISOファイルの場所を見つけて<span style="font-family: monospace; font-size: 95%">Open</span>をクリックしてください。<span style="font-family: monospace; font-size: 95%">Start recording</span>をクリックすると、CD-RにISOイメージが正しく書き込まれます。</li>
<li> Nero Burning ROMを使う場合は、自動的にポップアップするウィザードを中止して、<span style="font-family: monospace; font-size: 95%">File</span>メニューから<span style="font-family: monospace; font-size: 95%">Burn Image</span>を選択してください。書き込むイメージを選択して、<span style="font-family: monospace; font-size: 95%">Open</span>をクリックしてください。<span style="font-family: monospace; font-size: 95%">Burn</span>ボタンを押して、ほやほやのCDが焼きあがるのを待ちましょう。</li></ul>
<h4><span class="mw-headline" id="Linux.E3.81.A7.E3.81.AE.E6.9B.B8.E3.81.8D.E8.BE.BC.E3.81.BF">Linuxでの書き込み</span></h4>
<p>Linuxでは、ISOファイルのCD書き込みに<span style="font-family: monospace; font-size: 95%; font-weight: bold;">cdrecord</span>コマンドが利用可能です。これは<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-cdr/cdrtools">app-cdr/cdrtools</a>パッケージに含まれます。
</p><p>例えば、<span style="font-family: monospace; font-size: 95%">/dev/sr0</span>デバイス（これはシステム上の1番目のCDデバイスです。必要ならば正しいデバイスに置き換えてください）のCDにISOファイルを書き込むには：
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>cdrecord dev=/dev/sr0 install--minimal-20141204.iso</code></div></div>
<p>Users that prefer a graphical user interface can use K3B, part of the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-cdr/k3b">app-cdr/k3b</a> package. In K3B, go to <span style="font-family: monospace; font-size: 95%">Tools</span> and use <span style="font-family: monospace; font-size: 95%">Burn CD Image</span>. Then follow the instructions provided by K3B.
</p>
<h2><span class="mw-headline" id="CD.E3.82.92.E8.B5.B7.E5.8B.95.E3.81.99.E3.82.8B">CDを起動する</span></h2>
<h3><span class="mw-headline" id="Booting_the_installation_CD">Booting the installation CD</span></h3>
<p>Once the installation CD is burned, it is time to boot it. Remove all CDs from the CD drives, reboot the system and enter the BIOS or UEFI. This is usually done by hitting <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">DEL</kbd>, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd> or <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">ESC</kbd>, which is highly depending on the system and motherboard used. Inside the BIOS or UEFI menu, change the boot order so that the CD-ROM is tried before the hard disk. Without this change, the system will just reboot from the hard disk, ignoring the CD-ROM.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Important</strong><br />When installing Gentoo with the purpose of using the UEFI interface instead of BIOS, it is recommended to boot with UEFI immediately. If not, then it might be necessary to create a bootable UEFI USB stick (or other medium) once before finalizing the Gentoo Linux installation.</div>
<p>Now place the installation CD in the CD-ROM drive and reboot. A boot prompt should be shown. At this screen, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd> will begin the boot process with the default boot options. To boot the installation CD with custom boot options, specify a kernel followed by boot options and then hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>.
</p><p>At the boot prompt, users get the option of displaying the available kernels (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>) and boot options (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd>). If no choice is made within 15 seconds (either displaying information or using a kernel) then the installation CD will fall back to booting from disk. This allows installations to reboot and try out their installed environment without the need to remove the CD from the tray (something well appreciated for remote installations).
</p><p>We mentioned specifying a kernel. On the installation CD, several kernels are provided. The default one is called <i>gentoo</i>. Other kernels are for specific hardware needs and the <i>-nofb</i> variants disable framebuffer support.
</p><p>The next table gives a short overview of the available kernels.
</p>
<table class="table table-striped table-condensed" style="text-align: left;">

<tr>
<th> Kernel
</th>
<th> Description
</th></tr>
<tr>
<td> gentoo
</td>
<td> Default kernel with support for K8 CPUs (including NUMA support) and EM64T CPUs
</td></tr>
<tr>
<td> gentoo-nofb
</td>
<td> Same as <i>gentoo</i> but without framebuffer support
</td></tr>
<tr>
<td> memtest86
</td>
<td> Test the local RAM for errors
</td></tr></table>
<p>Alongside the kernel, boot options help in tuning the boot process further. 
</p>
<table class="table table-striped table-condensed" style="text-align: left;">

<tr>
<th colspan="2"> Hardware options
</th></tr>
<tr>
<td> acpi=on
</td>
<td> This loads support for ACPI and also causes the acpid daemon to be started by the CD on boot. This is only needed if the system requires ACPI to function properly. This is not required for Hyperthreading support.
</td></tr>
<tr>
<td> acpi=off
</td>
<td> Completely disables ACPI. This is useful on some older systems and is also a requirement for using APM. This will disable any Hyperthreading support of your processor.
</td></tr>
<tr>
<td> console=X
</td>
<td> This sets up serial console access for the CD. The first option is the device, usually ttyS0 on x86, followed by any connection options, which are comma separated. The default options are 9600,8,n,1.
</td></tr>
<tr>
<td> dmraid=X
</td>
<td> This allows for passing options to the device-mapper RAID subsystem. Options should be encapsulated in quotes.
</td></tr>
<tr>
<td> doapm
</td>
<td> This loads APM driver support. This also requires that <code>acpi=off</code>.
</td></tr>
<tr>
<td> dopcmcia
</td>
<td> This loads support for PCMCIA and Cardbus hardware and also causes the pcmcia cardmgr to be started by the CD on boot. This is only required when booting from PCMCIA/Cardbus devices.
</td></tr>
<tr>
<td> doscsi
</td>
<td> This loads support for most SCSI controllers. This is also a requirement for booting most USB devices, as they use the SCSI subsystem of the kernel.
</td></tr>
<tr>
<td> sda=stroke
</td>
<td> This allows the user to partition the whole hard disk even when the BIOS is unable to handle large disks. This option is only used on machines with an older BIOS. Replace sda with the device that requires this option.
</td></tr>
<tr>
<td> ide=nodma
</td>
<td> This forces the disabling of DMA in the kernel and is required by some IDE chipsets and also by some CDROM drives. If the system is having trouble reading from the IDE CDROM, try this option. This also disables the default hdparm settings from being executed.
</td></tr>
<tr>
<td> noapic
</td>
<td> This disables the Advanced Programmable Interrupt Controller that is present on newer motherboards. It has been known to cause some problems on older hardware.
</td></tr>
<tr>
<td> nodetect
</td>
<td> This disables all of the autodetection done by the CD, including device autodetection and DHCP probing. This is useful for doing debugging of a failing CD or driver.
</td></tr>
<tr>
<td> nodhcp
</td>
<td> This disables DHCP probing on detected network cards. This is useful on networks with only static addresses.
</td></tr>
<tr>
<td> nodmraid
</td>
<td> Disables support for device-mapper RAID, such as that used for on-board IDE/SATA RAID controllers.
</td></tr>
<tr>
<td> nofirewire
</td>
<td> This disables the loading of Firewire modules. This should only be necessary if your Firewire hardware is causing a problem with booting the CD.
</td></tr>
<tr>
<td> nogpm
</td>
<td> This disables gpm console mouse support.
</td></tr>
<tr>
<td> nohotplug
</td>
<td> This disables the loading of the hotplug and coldplug init scripts at boot. This is useful for doing debugging of a failing CD or driver.
</td></tr>
<tr>
<td> nokeymap
</td>
<td> This disables the keymap selection used to select non-US keyboard layouts.
</td></tr>
<tr>
<td> nolapic
</td>
<td> This disables the local APIC on Uniprocessor kernels.
</td></tr>
<tr>
<td> nosata
</td>
<td> This disables the loading of Serial ATA modules. This is used if the system is having problems with the SATA subsystem.
</td></tr>
<tr>
<td> nosmp
</td>
<td> This disables SMP, or Symmetric Multiprocessing, on SMP-enabled kernels. This is useful for debugging SMP-related issues with certain drivers and motherboards.
</td></tr>
<tr>
<td> nosound
</td>
<td> This disables sound support and volume setting. This is useful for systems where sound support causes problems.
</td></tr>
<tr>
<td> nousb
</td>
<td> This disables the autoloading of USB modules. This is useful for debugging USB issues.
</td></tr>
<tr>
<td> slowusb
</td>
<td> This adds some extra pauses into the boot process for slow USB CDROMs, like in the IBM BladeCenter.
</td></tr>
<tr>
<th colspan="2"> Logical volume/device management
</th></tr>
<tr>
<td> dolvm
</td>
<td> This enables support for Linux's Logical Volume Management.
</td></tr>
<tr>
<th colspan="2"> Other options
</th></tr>
<tr>
<td> debug
</td>
<td> Enables debugging code. This might get messy, as it displays a lot of data to the screen.
</td></tr>
<tr>
<td> docache
</td>
<td> This caches the entire runtime portion of the CD into RAM, which allows the user to umount <span style="font-family: monospace; font-size: 95%">/mnt/cdrom</span> and mount another CDROM. This option requires that there is at least twice as much available RAM as the size of the CD.
</td></tr>
<tr>
<td> doload=X
</td>
<td> This causes the initial ramdisk to load any module listed, as well as dependencies. Replace X with the module name. Multiple modules can be specified by a comma-separated list.
</td></tr>
<tr>
<td> dosshd
</td>
<td> Starts sshd on boot, which is useful for unattended installs.
</td></tr>
<tr>
<td> passwd=foo
</td>
<td> Sets whatever follows the equals as the root password, which is required for <i>dosshd</i> since the root password is by default scrambled.
</td></tr>
<tr>
<td> noload=X
</td>
<td> This causes the initial ramdisk to skip the loading of a specific module that may be causing a problem. Syntax matches that of doload.
</td></tr>
<tr>
<td> nonfs
</td>
<td> Disables the starting of portmap/nfsmount on boot.
</td></tr>
<tr>
<td> nox
</td>
<td> This causes an X-enabled LiveCD to not automatically start X, but rather, to drop to the command line instead.
</td></tr>
<tr>
<td> scandelay
</td>
<td> This causes the CD to pause for 10 seconds during certain portions the boot process to allow for devices that are slow to initialize to be ready for use.
</td></tr>
<tr>
<td> scandelay=X
</td>
<td> This allows the user to specify a given delay, in seconds, to be added to certain portions of the boot process to allow for devices that are slow to initialize to be ready for use. Replace X with the number of seconds to pause.
</td></tr></table>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The CD will check for <code>no*</code> options before <code>do*</code> options, so that options can be overriden in the exact order specified.</div>
<p>Now boot the CD, select a kernel (if the default <code>gentoo</code> kernel does not suffice) and boot options. As an example, we boot the <code>gentoo</code> kernel, with <code>dopcmcia</code> as a kernel parameter:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">boot:</code><span class="tripleclick-separator"></span><code>gentoo dopcmcia</code></div></div>
<p>Next the user will be greeted with a boot screen and progress bar. If the installation is done on a system with a non-US keyboard, make sure to immediately press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd> to switch to verbose mode and follow the prompt. If no selection is made in 10 seconds the default (US keyboard) will be accepted and the boot process will continue. Once the boot process completes, the user is automatically logged in to the "Live" Gentoo Linux environment as the <i>root</i> user, the super user. A root prompt is displayed on the current console, and one can switch to other consoles by pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd>, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F3</kbd> and <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F4</kbd>. Get back to the one started on by pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>.
</p><p><br />
</p><p><br />
</p>
<h3><span class="mw-headline" id=".E4.BE.8B.E5.A4.96.E7.9A.84.E3.81.AA.E3.83.8F.E3.83.BC.E3.83.89.E3.82.A6.E3.82.A7.E3.82.A2.E6.A7.8B.E6.88.90">例外的なハードウェア構成</span></h3>
<p>インストールCDがブートするとき、すべてのハードウェア機器を検出して適切なカーネルモジュールを読み込もうとします。これは非常に多くの場合、とても良い仕事をします。しかしある場合において、システムに必要なカーネルモジュールを自動で読み込まないかもしれません。PCI自動検出機能がシステムのハードウェアを見逃した場合、適切なカーネルモジュールを手動で読み込む必要があります。
</p><p>次の例は、(ある種類のネットワークインタフェイスをサポートする) 8139tooモジュールを読み込みます:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>modprobe 8139too</code></div></div> 
<h3><span class="mw-headline" id=".E8.BF.BD.E5.8A.A0.E5.8F.AF.E8.83.BD:_.E3.83.A6.E3.83.BC.E3.82.B6.E3.82.A2.E3.82.AB.E3.82.A6.E3.83.B3.E3.83.88">追加可能: ユーザアカウント</span></h3>
<p>If other people need access to the installation environment, or there is need to run commands as a non-root user on the installation CD (such as to chat using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">irssi</span> without root privileges for security reasons), then an additional user account needs to be created and the root password set to a strong password.
</p><p>To change the root password, use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">passwd</span> utility:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd</code></div><pre>
New password: (新しいパスワードを入力)
Re-enter password: (もう一度新しいパスワードを入力)
</pre></div>
<p>To create a user account, first enter their credentials, followed by the account's password. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">useradd</span> and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">passwd</span> commands are used for these tasks.
</p><p>In the next example, a user called <i>john</i> is created:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>useradd -m -G users john
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd john</code></div><pre>
New password: (Enter john's password)
Re-enter password: (Re-enter john's password)
</pre></div>
<p>To switch from the (current) <i>root</i> user to the newly created user account, use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">su</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>su - john</code></div></div>
<h3><span class="mw-headline" id=".E8.BF.BD.E5.8A.A0.E5.8F.AF.E8.83.BD.EF.BC.9A.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E4.B8.AD.E3.81.AE.E3.83.89.E3.82.AD.E3.83.A5.E3.83.A1.E3.83.B3.E3.83.88.E9.96.B2.E8.A6.A7">追加可能：インストール中のドキュメント閲覧</span></h3>
<p>Gentooハンドブックをインストール中に見るには、最初に上記の方法でユーザアカウントを作ってください。そして<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd>を押すことで新しい端末を使い始められます。
</p><p>インストール中、 <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>コマンドでGentooハンドブックを閲覧できます。もちろん、インターネット接続が機能し始めた瞬間からですけど。
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>links <a rel="nofollow" class="external free" href="../../ja.html">https://wiki.gentoo.org/wiki/Handbook:X86/ja</a></code></div></div>
<p>元々の端末に戻るには、<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>を押してください。
</p>
<h3><span class="mw-headline" id=".E8.BF.BD.E5.8A.A0.E5.8F.AF.E8.83.BD.EF.BC.9ASSH.E3.83.87.E3.83.BC.E3.83.A2.E3.83.B3.E3.81.AE.E9.96.8B.E5.A7.8B">追加可能：SSHデーモンの開始</span></h3>
<p>To allow other users to access the system during the installation (perhaps to support during an installation, or even do it remotely), a user account needs to be created (as was documented earlier on) and the SSH daemon needs to be started.
</p><p>To fire up the SSH daemon, execute the following command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/sshd start</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If users log on to the system, they will get a message that the host key for this system needs to be confirmed (through what is called a fingerprint). This is to be expected as it is the first time people log on to the system. However, later when the system is set up and someone logs on to the newly created system, the SSH client will warn that the host key has been changed. This is because the user now log on to - for SSH - a different server (namely the freshly installed Gentoo system rather than the live environment that the installation is currently using). Follow the instructions given on the screen then to replace the host key on the client system.</div>
<p>To be able to use sshd, the network needs to function properly. Continue with the chapter on <a href="../../Installation/Networking.html" title="Handbook:X86/Installation/Networking">Configuring the network</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/About/ja.html" title="Previous part" class="btn btn-default">&#8592; インストールについて</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Networking/ja.html" title="Next part" class="btn btn-default">Configuring the network &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:X86/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:X86/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:X86/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:X86/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:X86/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:X86/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:X86/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:X86/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:X86/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:X86/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:X86/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:X86/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:X86/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:X86/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:X86/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:X86/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:X86/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:X86/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:X86/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:X86/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:X86/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:X86/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:X86/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:X86/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:X86/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:X86/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:X86/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Automatic_network_detection">Automatic network detection</span></h2>
<p>Maybe it just works?
</p><p>If the system is plugged into an Ethernet network with a DHCP server, it is very likely that the networking configuration has already been set up automatically. If so, then the many included network-aware commands on the installation CD such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ssh</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">scp</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ping</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">irssi</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">wget</span>, and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, among others, will work immediately.
</p><p>If networking has been configured, the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span> command should list some network interfaces besides lo, such as <span style="font-family: monospace; font-size: 95%">eth0</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig</code></div><pre>
(...)
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11 Base address:0xe800 
</pre></div>
<p>The interface name on the system can be quite different from <span style="font-family: monospace; font-size: 95%">eth0</span>. Recent installation media might show regular network interfaces names like <span style="font-family: monospace; font-size: 95%">eno0</span>, <span style="font-family: monospace; font-size: 95%">ens1</span>, or <span style="font-family: monospace; font-size: 95%">enp5s0</span>. Just seek the interface in the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span> output that has an IP address related to the local network.
</p><p>In the remainder of this document, we will assume that the interface is called <span style="font-family: monospace; font-size: 95%">eth0</span>.
</p>
<h3><span class="mw-headline" id="Optional:_Configure_any_proxies">Optional: Configure any proxies</span></h3>
<p>If the Internet is accessed through a proxy, then it is necessary to set up proxy information during the installation. It is very easy to define a proxy: just define a variable which contains the proxy server information.
</p><p>In most cases, it is sufficient to define the variables using the server hostname. As an example, we assume the proxy is called proxy.gentoo.org and the port is 8080.
</p><p>To set up an HTTP proxy (for HTTP and HTTPS traffic):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export http_proxy="<a rel="nofollow" class="external free" href="http://proxy.gentoo.org:8080/">http://proxy.gentoo.org:8080</a>"</code></div></div>
<p>To set up an FTP proxy:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export ftp_proxy="<a rel="nofollow" class="external free" href="ftp://proxy.gentoo.org:8080/">ftp://proxy.gentoo.org:8080</a>"</code></div></div>
<p>To set up an RSYNC proxy:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export RSYNC_PROXY="proxy.gentoo.org:8080"</code></div></div>
<p>If the proxy requires a username and password, use the following syntax for the variable:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Adding username/password to the proxy variable</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>http://username:password@proxy.gentoo.org:8080
</pre></div></pre></div>
<h3><span class="mw-headline" id="Testing_the_network">Testing the network</span></h3>
<p>Try pinging your ISP's DNS server (found in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>) and a web site of choice. This ensures that the network is functioning properly and that the network packets are reaching the net, DNS name resolution is working correctly, etc.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ping -c 3 www.gentoo.org</code></div></div>
<p>If this all works, then the remainder of this chapter can be skipped to jump right to the next step of the installation instructions (<a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>).
</p>
<h2><span class="mw-headline" id="Automatic_network_configuration">Automatic network configuration</span></h2>
<p>If the network doesn't work immediately, some installation media allow the user to use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> (for regular or wireless networks), <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> (for ADSL users) or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pptp</span> (for PPTP users).
</p><p>If the installation medium does not contain any of these tools, continue with the <a href="#Manual_network_configuration">Manual network configuration</a>.
</p>
<ul><li> Regular Ethernet users should continue with <a href="#Default:_Using_net-setup">Default: Using net-setup</a></li>
<li> ADSL users should continue with <a href="#Alternative:_Using_PPP">Alternative: Using PPP</a></li>
<li> PPTP users should continue with <a href="#Alternative:_Using_PPTP">Alternative: Using PPTP</a></li></ul>
<h3><span class="mw-headline" id="Default:_Using_net-setup">Default: Using net-setup</span></h3>
<p>The simplest way to set up networking if it didn't get configured automatically is to run the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> script:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>net-setup eth0</code></div></div>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> will ask some questions about the network environment. When all is done, the network connection should work. Test the network connection as stated before. If the tests are positive, congratulations! Skip the rest of this section and continue with <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>.
</p><p>If the network still doesn't work, continue with <a href="#Manual_network_configuration">Manual network configuration</a>.
</p>
<h3><span class="mw-headline" id="Alternative:_Using_PPP">Alternative: Using PPP</span></h3>
<p>Assuming PPPoE is needed to connect to the Internet, the installation CD (any version) has made things easier by including ppp. Use the provided <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> script to configure the connection. During the setup the Ethernet device that is connected to your ADSL modem, the username and password, the IPs of the DNS servers and if a basic firewall is needed or not will be asked.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>pppoe-setup
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>pppoe-start</code></div></div>
<p>If something goes wrong, double-check that the username and password are correct by looking at <span style="font-family: monospace; font-size: 95%">etc/ppp/pap-secrets</span> or <span style="font-family: monospace; font-size: 95%">/etc/ppp/chap-secrets</span> and make sure to use the right Ethernet device. If the Ethernet device does not exist, the appropriate network modules need to be loaded. In that case continue with <a href="#Manual_network_configuration">Manual network configuration</a> as it will explain how to load the appropriate network modules there.
</p><p>If everything worked, continue with <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>.
</p>
<h3><span class="mw-headline" id="Alternative:_Using_PPTP">Alternative: Using PPTP</span></h3>
<p>If PPTP support is needed, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pptpclient</span> which is provided by the installation CDs. But first make sure that the configuration is correct. Edit <span style="font-family: monospace; font-size: 95%">/etc/ppp/pap-secrets</span> or <span style="font-family: monospace; font-size: 95%">/etc/ppp/chap-secrets</span> so it contains the correct username/password combination:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/ppp/chap-secrets</code></div></div>
<p>Then adjust <span style="font-family: monospace; font-size: 95%">/etc/ppp/options.pptp</span> if necessary:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/ppp/options.pptp</code></div></div>
<p>When all that is done, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pptp</span> (along with the options that couldn't be set in <span style="font-family: monospace; font-size: 95%">options.pptp</span>) to connect the server:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>pptp &lt;server ip&gt;</code></div></div>
<p>Now continue with <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>.
</p>
<h2><span class="mw-headline" id="Manual_network_configuration">Manual network configuration</span></h2>
<h3><span class="mw-headline" id="Loading_the_appropriate_network_modules">Loading the appropriate network modules</span></h3>
<p>When the Installation CD boots, it tries to detect all the hardware devices and loads the appropriate kernel modules (drivers) to support the hardware. In the vast majority of cases, it does a very good job. However, in some cases, it may not auto-load the kernel modules needed.
</p><p>If <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> failed, then it is possible that the network card wasn't found immediately. This means users may have to load the appropriate kernel modules manually.
</p><p>To find out what kernel modules are provided for networking, use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ls</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /lib/modules/`uname -r`/kernel/drivers/net</code></div></div>
<p>If a driver is found for the network device, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">modprobe</span> to load the kernel module. For instance, to load the <span style="font-family: monospace; font-size: 95%">pcnet32</span> module:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>modprobe pcnet32</code></div></div>
<p>To check if the network card is now detected, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span>. A detected network card would result in something like this (again, <span style="font-family: monospace; font-size: 95%">eth0</span> here is just an example):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig eth0</code></div><pre>
eth0      Link encap:Ethernet  HWaddr FE:FD:00:00:00:00  
          BROADCAST NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
</pre></div>
<p>If however the following error is shown, the network card is not detected:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig eth0</code></div><pre>
eth0: error fetching interface information: Device not found
</pre></div>
<p>The available network interface names on the system can be listed through the <span style="font-family: monospace; font-size: 95%">/sys</span> file system:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /sys/class/net</code></div><pre>
dummy0  eth0  lo  sit0  tap0  wlan0
</pre></div>
<p>In the above example, 6 interfaces are found. The <span style="font-family: monospace; font-size: 95%">eth0</span> one is most likely the (wired) Ethernet adapter whereas wlan0 is the wireless one.
</p><p>Assuming that the network card is now detected, retry <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> again (which should work now), but for the hardcore people we explain how to configure the network manually as well.
</p><p>Select one of the following sections based on your network setup:
</p>
<ul><li> <a href="#Using_DHCP">Using DHCP</a> for automatic IP retrieval</li>
<li> <a href="#Preparing_for_wireless_access">Preparing for wireless access</a> if a wireless network is used</li>
<li> <a href="#Understanding_network_terminology">Understanding network terminology</a> explains the basics about networking</li>
<li> <a href="#Using_ifconfig_and_route">Using ifconfig and route</a> explains how to set up networking manually</li></ul>
<h3><span class="mw-headline" id="Using_DHCP">Using DHCP</span></h3>
<p>DHCP (Dynamic Host Configuration Protocol) makes it possible to automatically receive networking information (IP address, netmask, broadcast address, gateway, nameservers etc.). This only works if a DHCP server is in the network (or if the ISP provider provides a DHCP service). To have a network interface receive this information automatically, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">dhcpcd</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>dhcpcd eth0</code></div></div>
<p>Some network administrators require that the hostname and domainname provided by the DHCP server is used by the system. In that case, use:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>dhcpcd -HD eth0</code></div></div>
<p>If this works (try pinging some Internet server, like Google), then everything is set and ready to continue. Skip the rest of this section and continue with <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>.
</p>
<h3><span class="mw-headline" id="Preparing_for_wireless_access">Preparing for wireless access</span></h3>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Support for the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> command might be architecture-specific. If the command is not available see if the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-wireless/wireless-tools">net-wireless/wireless-tools</a> package is available for the current architecture. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> command will be unavailable unless the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-wireless/wireless-tools">net-wireless/wireless-tools</a> package has been installed.</div>
<p>When using a wireless (802.11) card, the wireless settings need to be configured before going any further. To see the current wireless settings on the card, one can use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span>. Running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> might show something like:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0</code></div><pre>
eth0      IEEE 802.11-DS  ESSID:&quot;GentooNode&quot;                                   
          Mode:Managed  Frequency:2.442GHz  Access Point: 00:09:5B:11:CC:F2    
          Bit Rate:11Mb/s   Tx-Power=20 dBm   Sensitivity=0/65535               
          Retry limit:16   RTS thr:off   Fragment thr:off                       
          Power Management:off                                                  
          Link Quality:25/10  Signal level:-51 dBm  Noise level:-102 dBm        
          Rx invalid nwid:5901 Rx invalid crypt:0 Rx invalid frag:0 Tx          
          excessive retries:237 Invalid misc:350282 Missed beacon:84            
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Some wireless cards may have a device name of <span style="font-family: monospace; font-size: 95%">wlan0</span> or <span style="font-family: monospace; font-size: 95%">ra0</span> instead of <span style="font-family: monospace; font-size: 95%">eth0</span>. Run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> without any command-line parameters to determine the correct device name.</div>
<p>For most users, there are only two settings that might be important to change, the ESSID (aka wireless network name) or the WEP key. If the ESSID and Access Point address listed are already those of the environment's access point and the environment is not not using WEP, then the wireless configuration is already working.
</p><p>To change the ESSID, or add a WEP key, issue the following commands.
</p>
<ul><li> To set the network name to <i>GentooNode</i>:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0 essid GentooNode</code></div></div></dd></dl>
<ul><li> To set a hex WEP key:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0 key 1234123412341234abcd</code></div></div></dd></dl>
<ul><li> To set an ASCII WEP key, prefix the key with <code>s:</code>:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0 key s:some-password</code></div></div></dd></dl>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If the wireless network is set up with WPA or WPA2, then <span style="font-family: monospace; font-size: 95%; font-weight: bold;">wpa_supplicant</span> needs to be used. For more information on configuring wireless networking in Gentoo Linux, please read the <a href="../../Networking/Wireless.html" title="Handbook:X86/Networking/Wireless">Wireless networking chapter</a> in the Gentoo Handbook.</div>
<p>Confirm the wireless settings again by using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span>. Once wireless is working,continue configuring the IP level networking options as described in the next section (<a href="#Understanding_network_terminology">Understanding network terminology</a>) or use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> tool as described previously.
</p>
<h3><span class="mw-headline" id="Understanding_network_terminology">Understanding network terminology</span></h3>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If the IP address, broadcast address, netmask and nameservers are known, then skip this subsection and continue with <a href="#Using_ifconfig_and_route">Using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span> and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">route</span></a>.</div>
<p>If all of the above fails, the network will need to be configured manually. This is not difficult at all. However, some knowledge of network terminology and basic concepts might be necessary. After reading this section, users will know what a gateway is, what a netmask serves for, how a broadcast address is formed and why systems need nameservers.
</p><p>In a network, hosts are identified by their IP address (Internet Protocol address). Such an address is perceived as a combination of four numbers between 0 and 255. Well, at least when using IPv4 (IP version 4). In reality, such an IPv4 address consists of 32 bits (ones and zeros). Let's view an example:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example of an IPv4 address</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>IP Address (numbers):   192.168.0.2
IP Address (bits):      11000000 10101000 00000000 00000010
                        -------- -------- -------- --------
                           192      168       0        2
</pre></div></pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The successor of IPv4, IPv6, uses 128 bits (ones and zeros). In this section, the focus is on IPv4 addresses.</div>
<p>Such an IP address is unique to a host as far as all accessible networks are concerned (i.e. every host that one wants to be able to reach must have a unique IP address). In order to distinguish between hosts inside and outside a network, the IP address is divided in two parts: the network part and the host part.
</p><p>The separation is written down with the netmask, a collection of ones followed by a collection of zeros. The part of the IP that can be mapped on the ones is the network-part, the other one is the host-part. As usual, the netmask can be written down as an IP address.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example of network/host separation</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>IP address:    192      168      0         2
            11000000 10101000 00000000 00000010
Netmask:    11111111 11111111 11111111 00000000
               255      255     255        0
           +--------------------------+--------+
                    Network              Host
</pre></div></pre></div>
<p>In other words, 192.168.0.14 is part of the example network, but 192.168.1.2 is not.
</p><p>The broadcast address is an IP address with the same network-part as the network, but with only ones as host-part. Every host on the network listens to this IP address. It is truly meant for broadcasting packets.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Broadcast address</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>IP address:    192      168      0         2
            11000000 10101000 00000000 00000010
Broadcast:  11000000 10101000 00000000 11111111
               192      168      0        255
           +--------------------------+--------+
                     Network             Host
</pre></div></pre></div>
<p>To be able to surf on the Internet, each computer in the network must know which host shares the Internet connection. This host is called the gateway. Since it is a regular host, it has a regular IP address (for instance 192.168.0.1).
</p><p>Previously we stated that every host has its own IP address. To be able to reach this host by a name (instead of an IP address) we need a service that translates a name (such as dev.gentoo.org) to an IP address (such as 64.5.62.82). Such a service is called a <i>name service</i>. To use such a service, the necessary name servers need to be defined in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>.
</p><p>In some cases, the gateway also serves as a nameserver. Otherwise the nameservers provided by the ISP need to be entered in this file.
</p><p>To summarize, the following information is needed before continuing:
</p>
<table class="table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col" width="15%"> Network item
</th>
<th> Example
</th></tr>
<tr>
<td> The system IP address
</td>
<td> 192.168.0.2
</td></tr>
<tr>
<td> Netmask
</td>
<td> 255.255.255.0
</td></tr>
<tr>
<td> Broadcast
</td>
<td> 192.168.0.255
</td></tr>
<tr>
<td> Gateway
</td>
<td> 192.168.0.1
</td></tr>
<tr>
<td> Nameserver(s)
</td>
<td> 195.130.130.5, 195.130.130.133
</td></tr></table>
<h3><span class="mw-headline" id="Using_ifconfig_and_route">Using ifconfig and route</span></h3>
<p>Setting up the network consists of three steps:
</p>
<ol><li> Assign an IP address using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span></li>
<li> Set up routing to the gateway using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">route</span></li>
<li> Finish up by placing the nameserver IPs in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span></li></ol>
<p>To assign an IP address, the IP address, broadcast address and netmask are needed. Then execute the following command, substituting <var>${IP_ADDR}</var> with the right IP address, <var>${BROADCAST}</var> with the right broadcast address and <var>${NETMASK}</var> with the right netmask:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig eth0 ${IP_ADDR} broadcast ${BROADCAST} netmask ${NETMASK} up</code></div></div>
<p>Set up routing using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">route</span>. Substitute <var>${GATEWAY}</var> with the right gateway IP address:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>route add default gw ${GATEWAY}</code></div></div>
<p>Now open <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/resolv.conf</code></div></div>
<p>Fill in the nameserver(s) using the following as a template. Make sure to substitute <var>${NAMESERVER1}</var> and <var>${NAMESERVER2}</var> with the appropriate nameserver addresses:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Default template to use for /etc/resolv.conf</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>nameserver ${NAMESERVER1}
nameserver ${NAMESERVER2}
</pre></div></pre></div>
<p>That's it. Now test the network by pinging some Internet server (like Google). If this works, congratulations then. Continue with <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Media.html" title="Previous part" class="btn btn-default">&#8592; Choosing the media</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Disks.html" title="Next part" class="btn btn-default">Preparing the disks &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:X86/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:X86/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:X86/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:X86/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:X86/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:X86/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:X86/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:X86/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:X86/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:X86/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:X86/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:X86/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:X86/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:X86/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:X86/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:X86/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:X86/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:X86/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:X86/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:X86/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:X86/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:X86/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:X86/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:X86/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:X86/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:X86/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:X86/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Introduction_to_block_devices">Introduction to block devices</span></h2>
<h3><span class="mw-headline" id="Block_devices">Block devices</span></h3>
<p>Let's take a good look at disk-oriented aspects of Gentoo Linux and Linux in general, including Linux filesystems, partitions and block devices. Once the ins and outs of disks and filesystems are understood, we will set up partitions and filesystems for the Gentoo Linux installation.
</p><p>To begin, let's look at block devices. The most famous block device is probably the one that represents the first drive in a Linux system, namely <span style="font-family: monospace; font-size: 95%">/dev/sda</span>. SCSI and Serial ATA drives are both labeled <span style="font-family: monospace; font-size: 95%">/dev/sd*</span>; even IDE drives are labeled <span style="font-family: monospace; font-size: 95%">/dev/sd*</span> with the new libata framework in the kernel. When using the old device framework, then the first IDE drive is <span style="font-family: monospace; font-size: 95%">/dev/hda</span>.
</p><p>The block devices above represent an abstract interface to the disk. User programs can use these block devices to interact with your disk without worrying about whether the drives are IDE, SCSI or something else. The program can simply address the storage on the disk as a bunch of contiguous, randomly-accessible 512-byte blocks.
</p><p><br />
</p><p><br />
</p>
<h3><span class="mw-headline" id="Partitions">Partitions</span></h3>
<p>Although it is theoretically possible to use a full disk to house a Linux system, this is almost never done in practice. Instead, full disk block devices are split up in smaller, more manageable block devices. On x86 systems, these are called partitions. There are currently two standard partitioning technologies in use: MBR and GPT.
</p>
<h4><span class="mw-headline" id="MBR">MBR</span></h4>
<p>The <i>MBR (Master Boot Record)</i> setup uses 32-bit identifiers for the start sector and length of the partitions, and supports three partition types: primary, extended and logical. Primary partitions have their information stored in the master boot record itself - a very small (usually 512 bytes) location at the very beginning of a disk. Due to this small space, only four primary partitions are supported (for instance, <span style="font-family: monospace; font-size: 95%">/dev/sda1</span> to <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>).
</p><p>To support more partitions, one of the primary partitions can be marked as an extended partition. This partition can then contain logical partitions (partitions within a partition).
</p><p>Each partition is limited to 2 TB in size (due to the 32-bit identifiers). Also, the MBR setup does not provide any backup-MBR, so if an application or user overwrites the MBR, all partition information is lost.
</p>
<h4><span class="mw-headline" id="GPT">GPT</span></h4>
<p>The <i>GPT (GUID Partition table)</i> setup uses 64-bit identifiers for the partitions. The location in which it stores the partition information is also much bigger than the 512 bytes of an MBR, and there is no limit on the amount of partitions. Also the size of a partition is bounded by a much greater limit (almost 8 ZB - yes, zettabytes).
</p><p>When a system's software interface between the operating system and firmware is UEFI (instead of BIOS), GPT is almost mandatory as compatibility issues will arise with MBR here.
</p><p>GPT also has the advantage that it has a backup GPT at the end of the disk, which can be used to recover damage of the primary GPT at the beginning. GPT also carries CRC32 checksums to detect errors in the header and partition tables.
</p>
<h3><span class="mw-headline" id="GPT_or_MBR">GPT or MBR</span></h3>
<p>From the description above, one might think that using GPT should always be the recommended approach. But there are a few caveats with this.
</p><p>Using GPT on a BIOS-based computer works, but then one cannot dual-boot with a Microsoft Windows operating system. The reason is that Microsoft Windows will boot in EFI mode if it detects a GPT partition label.
</p><p>Some buggy BIOSes or EFIs configured to boot in BIOS/CSM/legacy mode might also have problems with booting from GPT labeled disks. If that is the case, it might be possible to work around the problem by adding the boot/active flag on the protective MBR partition which has to be done through <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> with the <code>-t dos</code> option to force it to read the partition table using the MBR format.
</p><p>In this case, launch <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> and toggle the flag using the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">a</kbd> key. Press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">1</kbd> to select the first partition, then press the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">w</kbd> key to write the changes to the disk and exit the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> application:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>fdisk -t dos /dev/sda</code></div><pre>
Welcome to fdisk (util-linux 2.24.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.
  
Command (m for help): a
Partition number (1-4): 1
  
Command (m for help): w
</pre></div>
<h3><span class="mw-headline" id="Using_UEFI">Using UEFI</span></h3>
<p>When installing Gentoo on a system that uses UEFI to boot the operating system (instead of BIOS), then it is important that an EFI system partition is created. The instructions for <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> below contain the necessary pointers for this.
</p><p>The EFI system partition also needs to be a FAT32 partition (or <i>vfat</i> as it is shown on Linux systems). The instructions at the end of this chapter use <i>ext2</i> as the example file system for the <span style="font-family: monospace; font-size: 95%">/boot/</span> partition. Make sure to use <i>vfat</i>, like so:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.vfat /dev/sda2</code></div></div>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />If the boot partition is not using the FAT32 (vfat) file system, then the systems UEFI firmware will not be able to find the Linux kernel and boot the system!</div>
<h3><span class="mw-headline" id="Advanced_storage">Advanced storage</span></h3>
<p>The x86 Installation CDs provide support for LVM2. LVM2 increases the flexibility offered by the partitioning setup. During the installation instructions, we will focus on "regular" partitions, but it is still good to know LVM2 is supported as well.
</p>
<h3><span class="mw-headline" id="Default_partitioning_scheme">Default partitioning scheme</span></h3>
<p>Throughout the remainder of the handbook, the following partitioning scheme is used. If this suffices, then the reader can immediately jump to <a href="#Default:_Using_parted_to_partition_the_disk">Default: Using parted to partition the disk</a> or <a href="#Alternative:_Using_fdisk_to_partition_the_disk">Alternative: Using fdisk to partition the disk</a>. Both are partitioning tools, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> is well known and stable and recommended for the MBR partition layout, while <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> is more recent and recommended for GPT layouts.
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> Partition
</th>
<th> Filesystem
</th>
<th> Size
</th>
<th> Description
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> (bootloader)
</td>
<td> 2M
</td>
<td> BIOS boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> ext2 (or vfat)
</td>
<td> 128M
</td>
<td> Boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> (swap)
</td>
<td> 512M or higher
</td>
<td> Swap partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> ext4
</td>
<td> Rest of the disk
</td>
<td> Root partition
</td></tr></table>
<p>Before going to the creation instructions, the first set of sections will describe in more detail how partitioning schemes can be created and what the common pitfalls are.
</p>
<h2><span class="mw-headline" id="Designing_a_partition_scheme">Designing a partition scheme</span></h2>
<h3><span class="mw-headline" id="How_many_and_how_big.3F">How many and how big?</span></h3>
<p>The number of partitions is highly dependent on the environment. For instance, if there are lots of users, then it is advised to have <span style="font-family: monospace; font-size: 95%">/home/</span> separate as it increases security and makes backups easier. If Gentoo is being installed to perform as a mail server, then <span style="font-family: monospace; font-size: 95%">/var/</span> should be separate as all mails are stored inside <span style="font-family: monospace; font-size: 95%">/var/</span>. A good choice of filesystem will then maximize the performance. Game servers will have a separate <span style="font-family: monospace; font-size: 95%">/opt/</span> as most gaming servers are installed there. The reason is similar for <span style="font-family: monospace; font-size: 95%">/home/</span>: security and backups. In most situations, <span style="font-family: monospace; font-size: 95%">/usr/</span> is to be kept big: not only will it contain the majority of applications, the Portage tree alone takes around 500 MBs excluding the various sources that are stored in it.
</p><p>As can be seen, it very much depends on what the administrator wants to achieve. Separate partitions or volumes have the following advantages:
</p>
<ul><li> Choose the best performing filesystem for each partition or volume.</li>
<li> The entire system cannot run out of free space if one defunct tool is continuously writing files to a partition or volume.</li>
<li> If necessary, file system checks are reduced in time, as multiple checks can be done in parallel (although this advantage is more with multiple disks than it is with multiple partitions).</li>
<li> Security can be enhanced by mounting some partitions or volumes read-only, <code>nosuid</code> (setuid bits are ignored), <code>noexec</code> (executable bits are ignored) etc.</li></ul>
<p>However, multiple partitions have disadvantages as well. If not configured properly, the system might have lots of free space on one partition and none on another. Another nuisance is that separate partitions - especially for important mount points like <span style="font-family: monospace; font-size: 95%">/usr/</span> or <span style="font-family: monospace; font-size: 95%">/var/</span> - often require the administrator to boot with an initramfs to mount the partition before other boot scripts start. This isn't always the case though, so results may vary.
</p><p>There is also a 15-partition limit for SCSI and SATA unless the disk uses GPT labels.
</p>
<h3><span class="mw-headline" id="What_about_swap_space.3F">What about swap space?</span></h3>
<p>There is no perfect value for the swap partition. The purpose of swap space is to provide disk storage to the kernel when internal memory (RAM) is under pressure. A swap space allows for the kernel to move memory pages that are not likely to be accessed soon to disk (swap or page-out), freeing memory. Of course, if that memory is suddenly needed, these pages need to be put back in memory (page-in) which will take a while (as disks are very slow compared to internal memory).
</p><p>When the system is not going to run memory intensive applications or the system has lots of memory available, then it probably does not need much swap space. However, swap space is also used to store the entire memory in case of hibernation. If the system is going to need hibernation, then a bigger swap space necessary, often at least the amount of memory installed in the system.
</p><p><br />
</p>
<h3><span class="mw-headline" id="What_is_the_BIOS_boot_partition.3F">What is the BIOS boot partition?</span></h3>
<p>A BIOS boot partition is a very small (1 to 2 MB) partition in which boot loaders like GRUB2 can put additional data that doesn't fit in the allocated storage (a few hundred bytes in case of MBR) and cannot be placed elsewhere.
</p><p>Such partitions are not always necessary, but considering the low space consumption and the difficulties we have with documenting the plethora of partitioning differences otherwise, it is recommended to create it in either case.
</p><p>For completeness, the BIOS boot partition is needed when GPT partition layout is used with GRUB2, or when the MBR partition layout is used with GRUB2 when the first partition starts earlier than the 1 MB location on the disk.
</p>
<h2><span class="mw-headline" id="Default:_Using_parted_to_partition_the_disk">Default: Using parted to partition the disk</span></h2>
<p>In this chapter, the example partition layout mentioned earlier in the instructions will be used:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> Partition
</th>
<th> Description
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> BIOS boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> Boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> Swap partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> Root partition
</td></tr></table>
<p>Change the partition layout according to personal preference. 
</p>
<h3><span class="mw-headline" id="Viewing_the_current_partition_layout_with_parted">Viewing the current partition layout with parted</span></h3>
<p>The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> application offers a simple interface for partitioning the disks and supports very large partitions (more than 2 TB). Fire up <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> against the disk (in our example, we use <span style="font-family: monospace; font-size: 95%">/dev/sda</span>). It is recommended to ask <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> to use optimal partition alignment:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>parted -a optimal /dev/sda</code></div><pre>
GNU Parted 2.3
Using /dev/sda
Welcome to GNU Parted! Type 'help' to view a list of commands.
</pre></div>
<p>Alignment means that partitions are started on well-known boundaries within the disk, ensuring that operations on the disk from the operating system level (retrieve pages from the disk) use the least amount of internal disk operations. Misaligned partitions might require the disk to fetch two pages instead of one even if the operating system asked for a single page.
</p><p>To find out about all options supported by parted, type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">help</span> and press return.
</p>
<h3><span class="mw-headline" id="Setting_the_GPT_label">Setting the GPT label</span></h3>
<p>Most disks on the <b><span style="font-family: monospace; font-size: 95%; color: #54487a">x86</span></b> or <b><span style="font-family: monospace; font-size: 95%; color: #54487a">amd64</span></b> architectures are prepared using an <i>msdos</i> label. Using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span>, the command to put a GPT label on the disk is <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel gpt</span>:
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />Changing the partition type will remove all partitions from the disk. All data on the disk will be lost.</div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mklabel gpt</code></div></div>
<p>To have the disk with MBR layout, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel msdos</span>.
</p>
<h3><span class="mw-headline" id="Removing_all_partitions_with_parted">Removing all partitions with parted</span></h3>
<p>If this isn't done yet (for instance through the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel</span> operation earlier, or because the disk is a freshly formatted one), first remove all existing partitions from the disk. Type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">print</span> to view the current partitions, and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rm NUMBER</span> where NUMBER is the partition to remove.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>rm 2</code></div></div>
<p>Do the same for all other partitions that aren't needed. However, make sure to not make any mistakes here - parted executes the changes immediately (unlike <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> which stages them, allowing a user to "undo" his changes before saving or exiting fdisk).
</p>
<h3><span class="mw-headline" id="Creating_the_partitions">Creating the partitions</span></h3>
<p>Now create the partitions. Creating partitions with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> isn't very difficult - all we need to do is inform parted about the following settings:
</p>
<ul><li> The partition type to use. This usually is <i>primary</i>. If the msdos partition label is used, keep in mind that there can be no more than 4 primary partitions. If more than 4 partitions are needed, make one of the first four partitions extended and create logical partitions inside it.</li>
<li> The start location of a partition (which can be expressed in MB, GB, ...)</li>
<li> The end location of the partition (which can be expressed in MB, GB, ...)</li></ul>
<p>First, tell parted that the size unit we work with is megabytes (actually mebibytes, abbreviated as MiB which is the "standard" notation, but we will use MB in the text throughout as it is much more common):
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>unit mib</code></div></div>
<p>Now create a 2 MB partition that will be used by the GRUB2 boot loader later. Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkpart</span> command for this, and inform <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> to start from 1 MB and end at 3 MB (creating a partition of 2 MB in size).
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 1 3
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 1 grub
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>set 1 bios_grub on
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>print</code></div><pre>
Model: Virtio Block Device (virtblk)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
  
Number   Start      End      Size     File system  Name   Flags
 1       1.00MiB    3.00MiB  2.00MiB               grub   bios_grub
</pre></div>
<p>Do the same for the boot partition (128 MB), swap partition (in the example, 512 MB) and the root partition that spans the remaining disk (for which the end location is marked as -1, meaning the end of the disk minus one MB, which is the farthest a partition can go).
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 3 131
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 2 boot
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 131 643
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 3 swap
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 643 -1
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 4 rootfs</code></div></div>
<p>When using the UEFI interface to boot the system (instead of BIOS), mark the boot partition as the EFI System Partition. Parted does this automatically when the <i>boot</i> option is set on the partition:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>set 2 boot on</code></div></div>
<p>The end result looks like so:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>print</code></div><pre>
Model: Virtio Block Device (virtblk)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
  
Number   Start      End      Size     File system  Name   Flags
 1       1.00MiB    3.00MiB  2.00MiB               grub   bios_grub
 2       3.00MiB    131MiB   128MiB                boot   boot
 3       131MiB     643MiB   512MiB                swap
 4       643MiB     20479MiB 19836MiB              rootfs
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />On an UEFI installation, the boot flag will show up on the boot partition.</div>
<p>Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">quit</span> command to exit parted.
</p>
<h2><span class="mw-headline" id="Alternative:_Using_fdisk_to_partition_the_disk">Alternative: Using fdisk to partition the disk</span></h2>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Although recent <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> should support GPT, it has still shown to have some issues with it. The instructions given below assume that the partition layout being used is MBR.</div>
<p>The following parts explain how to create the example partition layout using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span>. The example partition layout was mentioned earlier:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> Partition
</th>
<th> Description
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> BIOS boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> Boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> Swap partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> Root partition
</td></tr></table>
<p>Change the partition layout according to personal preference. 
</p>
<h3><span class="mw-headline" id="Viewing_the_current_partition_layout">Viewing the current partition layout</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> is a popular and powerful tool to split a disk into partitions. Fire up <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> against the disk (in our example, we use <span style="font-family: monospace; font-size: 95%">/dev/sda</span>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>fdisk /dev/sda</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />To use GPT support, add <code>-t gpt</code>. It is recommended to closely investigate the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> output in case more recent developments in <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> change its default behavior of defaulting to MBR. The remainder of the instructions assume an MBR layout.</div>
<p>Use the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> key to display the disk's current partition configuration:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 240 heads, 63 sectors, 2184 cylinders
Units = cylinders of 15120 * 512 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1   *         1        14    105808+  83  Linux
/dev/sda2            15        49    264600   82  Linux swap
/dev/sda3            50        70    158760   83  Linux
/dev/sda4            71      2184  15981840    5  Extended
/dev/sda5            71       209   1050808+  83  Linux
/dev/sda6           210       348   1050808+  83  Linux
/dev/sda7           349       626   2101648+  83  Linux
/dev/sda8           627       904   2101648+  83  Linux
/dev/sda9           905      2184   9676768+  83  Linux
</pre></div>
<p>This particular disk is configured to house seven Linux filesystems (each with a corresponding partition listed as "Linux") as well as a swap partition (listed as "Linux swap").
</p>
<h3><span class="mw-headline" id="Removing_all_partitions_with_fdisk">Removing all partitions with fdisk</span></h3>
<p>First remove all existing partitions from the disk. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">d</kbd> to delete a partition. For instance, to delete an existing <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>d</code></div><pre>
Partition number (1-4): 1
</pre></div>
<p>The partition has now been scheduled for deletion. It will no longer show up when printing the list of partitions (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd>, but it will not be erased until the changes have been saved. This allows users to abort the operation if a mistake was made - in that case, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">q</kbd> immediately and hit enter and the partition will not be deleted.
</p><p>Repeatedly type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to print out a partition listing and then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">d</kbd> and the number of the partition to delete it. Eventually, the partition table will be empty:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
Device Boot    Start       End    Blocks   Id  System
</pre></div>
<p>Now that the in-memory partition table is empty, we're ready to create the partitions.
</p>
<h3><span class="mw-headline" id="Creating_the_BIOS_boot_partition">Creating the BIOS boot partition</span></h3>
<p>First create a very small BIOS boot partition. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to select a primary partition, followed by <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">1</kbd> to select the first primary partition. When prompted for the first sector, make sure it starts from 2048 (which is needed for the boot loader) and hit enter. When prompted for the last sector, type +2M to create a partition 2 Mbyte in size:
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The start from sector 2048 is a fail-safe in case the boot loader does not detect this partition as being available for its use.</div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>n</code></div><pre>
Command action
  e   extended
  p   primary partition (1-4)
p
Partition number (1-4): 1
First sector (64-10486533532, default 64): 2048
Last sector, +sectors +size{M,K,G} (4096-10486533532, default 10486533532): +2M
</pre></div>
<p>Mark the partition for EFI purposes:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>t</code></div><pre>
Selected partition 1
Hex code (type L to list codes): 4
Changed system type of partition 1 to 4 (BIOS boot)
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Using EFI with MBR partition layout is discouraged. If an EFI capable system is used, please use GPT layout.</div>
<h3><span class="mw-headline" id="Creating_the_boot_partition">Creating the boot partition</span></h3>
<p>Now create a small boot partition. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to select a primary partition, followed by <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">2</kbd> to select the second primary partition. When prompted for the first sector, accept the default by hitting <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, type +128M to create a partition 128 Mbyte in size:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>n</code></div><pre>
Command action
  e   extended
  p   primary partition (1-4)
p
Partition number (1-4): 2
First sector (5198-10486533532, default 5198): (Hit enter)
Last sector, +sectors +size{M,K,G} (4096-10486533532, default 10486533532): +128M
</pre></div>
<p>Now, when pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd>, the following partition printout is displayed:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1             1         3      5198+  ef  EFI (FAT-12/16/32)
/dev/sda2             3        14    105808+  83  Linux
</pre></div>
<p>Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">a</kbd> to toggle the bootable flag on a partition and select <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">2</kbd>. After pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> again, notice that an * is placed in the "Boot" column.
</p>
<h3><span class="mw-headline" id="Creating_the_swap_partition">Creating the swap partition</span></h3>
<p>To create the swap partition, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to tell fdisk to create a primary partition. Then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">3</kbd> to create the third primary partition, <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>. When prompted for the first sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, type +512M (or any other size needed for the swap space) to create a partition 512MB in size.
</p><p>After all this is done, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">t</kbd> to set the partition type, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">3</kbd> to select the partition just created and then type in <i>82</i> to set the partition type to "Linux Swap".
</p>
<h3><span class="mw-headline" id="Creating_the_root_partition">Creating the root partition</span></h3>
<p>Finally, to create the root partition, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to tell <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> to create a primary partition. Then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">4</kbd> to create the fourth primary partition, <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>. When prompted for the first sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd> to create a partition that takes up the rest of the remaining space on the disk. After completing these steps, typing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> should display a partition table that looks similar to this:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1             1         3      5198+  ef  EFI (FAT-12/16/32)
/dev/sda2   *         3        14    105808+  83  Linux
/dev/sda3            15        81    506520   82  Linux swap
/dev/sda4            82      3876  28690200   83  Linux
</pre></div>
<h3><span class="mw-headline" id="Saving_the_partition_layout">Saving the partition layout</span></h3>
<p>To save the partition layout and exit <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span>, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">w</kbd>.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>w</code></div></div>
<p>With the partitions created, it is now time to put filesystems on them.
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="Creating_file_systems">Creating file systems</span></h2>
<h3><span class="mw-headline" id="Introduction">Introduction</span></h3>
<p>Now that the partitions are created, it is time to place a filesystem on them. In the next section the various file systems that Linux supports are described. Readers that already know which filesystem to use can continue with <a href="#Applying_a_filesystem_to_a_partition">Applying a filesystem to a partition</a>. The others should read on to learn about the available filesystems...
</p>
<h3><span class="mw-headline" id="Filesystems">Filesystems</span></h3>
<p>Several filesystems are available. Some of them are found stable on the x86 architecture - it is advised to read up on the filesystems and their support state before selecting a more experimental one for important partitions.
</p>
<dl><dt> btrfs</dt>
<dd> A next generation filesystem that provides many advanced features such as snapshotting, self-healing through checksums, transparent compression, subvolumes and integrated RAID. A few distributions have begun to ship it as an out-of-the-box option, but it is not production ready. Reports of filesystem corruption are common. Its developers urge people to run the latest kernel version for safety because the older ones have known problems. This has been the case for years and it is too early to tell if things have changed. Fixes for corruption issues are rarely backported to older kernels. Proceed with caution when using this filesystem!</dd>
<dt> ext2</dt>
<dd> This is the tried and true Linux filesystem but doesn't have metadata journaling, which means that routine ext2 filesystem checks at startup time can be quite time-consuming. There is now quite a selection of newer-generation journaled filesystems that can be checked for consistency very quickly and are thus generally preferred over their non-journaled counterparts. Journaled filesystems prevent long delays when the system is booted and the filesystem happens to be in an inconsistent state.</dd>
<dt> ext3</dt>
<dd> The journaled version of the ext2 filesystem, providing metadata journaling for fast recovery in addition to other enhanced journaling modes like full data and ordered data journaling. It uses an HTree index that enables high performance in almost all situations. In short, ext3 is a very good and reliable filesystem.</dd>
<dt> ext4 </dt>
<dd> Initially created as a fork of ext3, ext4 brings new features, performance improvements, and removal of size limits with moderate changes to the on-disk format. It can span volumes up to 1 EB and with maximum file size of 16TB. Instead of the classic ext2/3 bitmap block allocation ext4 uses extents, which improve large file performance and reduce fragmentation. Ext4 also provides more sophisticated block allocation algorithms (delayed allocation and multiblock allocation) giving the filesystem driver more ways to optimize the layout of data on the disk. Ext4 is the recommended all-purpose all-platform filesystem.</dd>
<dt> JFS</dt>
<dd> IBM's high-performance journaling filesystem. JFS is a light, fast and reliable B+tree-based filesystem with good performance in various conditions.</dd>
<dt> ReiserFS</dt>
<dd> A B+tree-based journaled filesystem that has good overall performance, especially when dealing with many tiny files at the cost of more CPU cycles. ReiserFS appears to be less maintained than other filesystems.</dd>
<dt> XFS </dt>
<dd> A filesystem with metadata journaling which comes with a robust feature-set and is optimized for scalability. XFS seems to be less forgiving to various hardware problems.</dd>
<dt> vfat</dt>
<dd> Also known as FAT32, is supported by Linux but does not support any permission settings. It is mostly used for interoperability with other operating systems (mainly Microsoft Windows) but is also a necessity for some system firmware (like UEFI).</dd></dl>
<p>When using ext2, ext3 or ext4 on a small partition (less than 8GB), then the file system must be created with the proper options to reserve enough inodes. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mke2fs</span> application uses the "bytes-per-inode" setting to calculate how many inodes a file system should have. On smaller partitions, it is advised to increase the calculated number of inodes.
</p><p>On ext2, this can be done using the following command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -T small /dev/&lt;device&gt;</code></div></div>
<p>On ext3 and ext4, add the <code>-j</code> option to enable journaling:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -j -T small /dev/&lt;device&gt;</code></div></div>
<p>This will generally quadruple the number of inodes for a given file system as its "bytes-per-inode" reduces from one every 16kB to one every 4kB. This can be tuned even further by providing the ratio:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -i &lt;ratio&gt; /dev/&lt;device&gt;</code></div></div>
<h3><span class="mw-headline" id="Applying_a_filesystem_to_a_partition">Applying a filesystem to a partition</span></h3>
<p>To create a filesystem on a partition or volume, there are user space utilities available for each possible filesystem. Click the filesystem's name in the table below for additional information on each filesystem:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col" width="15%"> Filesystem
</th>
<th> Creation command
</th></tr>
<tr>
<td> <a href="../../../Btrfs.html" title="Btrfs">btrfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.btrfs</span>
</td></tr>
<tr>
<td> <a href="../../../Ext2.html" title="Ext2">ext2</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext2</span>
</td></tr>
<tr>
<td> <a href="../../../Ext3.html" title="Ext3">ext3</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext3</span>
</td></tr>
<tr>
<td> <a href="../../../Ext4.html" title="Ext4">ext4</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext4</span>
</td></tr>
<tr>
<td> <a href="../../../JFS.html" title="JFS">jfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.jfs</span>
</td></tr>
<tr>
<td> <a href="https://wiki.gentoo.org/index.php?title=Reiserfs&amp;action=edit&amp;redlink=1" class="new" title="Reiserfs (page does not exist)">reiserfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkreiserfs</span>
</td></tr>
<tr>
<td> <a href="../../../XFS.html" title="XFS">xfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.xfs</span>
</td></tr>
<tr>
<td> <a href="../../../FAT.html" title="FAT">vfat</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.vfat</span>
</td></tr></table>
<p>For instance, to have the boot partition (<span style="font-family: monospace; font-size: 95%">/dev/sda2</span>) in ext2 and the root partition (<span style="font-family: monospace; font-size: 95%">/dev/sda4</span>) in ext4 as used in the example partition structure, the following commands would be used:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.ext2 /dev/sda2</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.ext4 /dev/sda4</code></div></div>
<p>Now create the filesystems on the newly created partitions (or logical volumes).
</p>
<h3><span class="mw-headline" id="Activating_the_swap_partition">Activating the swap partition</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkswap</span> is the command that is used to initialize swap partitions:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkswap /dev/sda3</code></div></div>
<p>To activate the swap partition, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">swapon</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>swapon /dev/sda3</code></div></div>
<p>Create and activate the swap with the commands mentioned above.
</p>
<h2><span class="mw-headline" id="Mounting">Mounting</span></h2>
<p>Now that the partitions are initialized and are housing a filesystem, it is time to mount those partitions. Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mount</span> command, but don't forget to create the necessary mount directories for every partition created. As an example we mount the root and boot partition:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount /dev/sda4 /mnt/gentoo</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir /mnt/gentoo/boot</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount /dev/sda2 /mnt/gentoo/boot</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If <span style="font-family: monospace; font-size: 95%">/tmp/</span> needs to reside on a separate partition, be sure to change its permissions after mounting:
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>chmod 1777 /mnt/gentoo/tmp</code></div></div>
This also holds for <span style="font-family: monospace; font-size: 95%">/var/tmp</span>.</div>
<p>Later in the instructions the proc filesystem (a virtual interface with the kernel) as well as other kernel psuedo-filesystems will be mounted. But first we <a href="../../Installation/Stage.html" title="Handbook:X86/Installation/Stage">install the Gentoo installation files</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Networking.html" title="Previous part" class="btn btn-default">&#8592; Configuring the network</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Stage.html" title="Next part" class="btn btn-default">Installing Stage3 &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:X86/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:X86/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:X86/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:X86/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:X86/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:X86/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:X86/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:X86/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:X86/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:X86/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:X86/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:X86/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:X86/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:X86/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:X86/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:X86/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:X86/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:X86/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:X86/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:X86/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:X86/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:X86/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:X86/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:X86/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:X86/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:X86/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:X86/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Installing_a_stage_tarball">Installing a stage tarball</span></h2>
<h3><span class="mw-headline" id="Setting_the_date_and_time">Setting the date and time</span></h3>
<p>Before installing Gentoo, make sure that the date and time are set correctly. A mis-configured clock may lead to strange results in the future!
</p><p>To verify the current date and time, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">date</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>date</code></div><pre>
Fri Mar 29 16:21:18 UTC 2005
</pre></div>
<p>If the date/time displayed is wrong, update it using the <code>MMDDhhmmYYYY</code> syntax (Month, Day, hour, minute and Year). At this stage, it is recommended to use UTC time. Later on during the installation, the timezone will be defined.
</p><p>For instance, to set the date to March 29th, 16:21 in the year 2014:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>date 032916212014</code></div></div>
<h3><span class="mw-headline" id="Downloading_the_stage_tarball">Downloading the stage tarball</span></h3>
<p>Go to the Gentoo mount point where the root file system is mounted (most likely <span style="font-family: monospace; font-size: 95%">/mnt/gentoo</span>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /mnt/gentoo</code></div></div>
<p>Depending on the installation medium, there are a couple of tools available to download a stage. One of these tools is <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, a non-graphical, menu-driven browser. To download a stage, surf to the Gentoo mirror list like so:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>links <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>To use an HTTP proxy with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, pass on the URL with the <code>-http-proxy</code> option:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>links -http-proxy proxy.server.com:8080 <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>Next to <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span> there is also the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">lynx</span> browser. Like <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span> it is a non-graphical browser but it is not menu-driven.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>lynx <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>If a proxy needs to be defined, export the <var>http_proxy</var> and/or <var>ftp_proxy</var> variables:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export http_proxy="<a rel="nofollow" class="external free" href="http://proxy.server.com:port/">http://proxy.server.com:port</a>"
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export ftp_proxy="<a rel="nofollow" class="external free" href="http://proxy.server.com:port/">http://proxy.server.com:port</a>"</code></div></div>
<p>On the mirror list, select a mirror close by. Usually HTTP mirrors suffice, but other protocols are available as well. Move to the <span style="font-family: monospace; font-size: 95%">releases/x86/autobuilds/</span> directory. There all available stage files are displayed (they might be stored within subdirectories named after the individual sub-architectures). Select one and press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">D</kbd> to download.
</p><p>Like with the minimal installation CDs, additional downloads are available:
</p>
<ul><li> A <span style="font-family: monospace; font-size: 95%">.CONTENTS</span> file that contains a list of all files inside the stage tarball</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file that contains checksums of the stage file, in different algorithms</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file that, like the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file, contains checksums of the stage file in different algorithms, but is also cryptographically signed to ensure it is provided by the Gentoo project</li></ul>
<p>When finished, press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Q</kbd> to quit the browser.
</p><p>After downloading the stage file, it is possible to verify the integrity of the downloaded stage tarball. Use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">openssl</span> and compare the output with the checksums provided by the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> or <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file.
</p><p>For instance, to validate the SHA512 checksum:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>openssl dgst -r -sha512 stage3-x86-&lt;release&gt;.tar.bz2</code></div></div>
<p>Another way is to use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">sha512sum</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>sha512sum stage3-x86-&lt;release&gt;.tar.bz2</code></div></div>
<p>To validate the Whirlpool checksum:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>openssl dgst -r -whirlpool stage3-x86-&lt;release&gt;.tar.bz2</code></div></div>
<p>Compare the output of these commands with the value registered in the <span style="font-family: monospace; font-size: 95%">.DIGESTS(.asc)</span> files. The values need to match, otherwise the downloaded file might be corrupt (or the digests file is).
</p><p>Just like with the ISO file, it is also possible to verify the cryptographic signature of the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gpg</span> to make sure the checksums have not been tampered with:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>gpg --verify stage3-x86-&lt;release&gt;.tar.bz2.DIGESTS.asc</code></div></div>
<h3><span class="mw-headline" id="Unpacking_the_stage_tarball">Unpacking the stage tarball</span></h3>
<p>Now unpack the downloaded stage onto the system. We use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">tar</span> to proceed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>tar xvjpf stage3-*.tar.bz2 --xattrs</code></div></div>
<p>Make sure that the same options (<code>xvjpf</code> and <code>--xattrs</code>) are used. The x stands for Extract, the v for Verbose to see what happens during the extraction process (optional), the j for Decompress with bzip2, the p for Preserve permissions and the f to denote that we want to extract a File, not standard input. Finally, the <code>--xattrs</code> is to include the extended attributes stored in the archive as well.
</p><p>Now that the stage is installed, continue with <a href="#Configuring_the_compile_options">Configuring the compile options</a>.
</p>
<h2><span class="mw-headline" id="Configuring_compile_options">Configuring compile options</span></h2>
<h3><span class="mw-headline" id="Introduction_2">Introduction</span></h3>
<p>To optimize Gentoo, it is possible to set a couple of variables which impacts the behavior of Portage, Gentoo's officially supported package manager. All those variables can be set as environment variables (using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">export</span>) but that isn't permanent. To keep the settings, Portage reads in the <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> file, a configuration file for Portage.
</p><p>There is currently only one officially supported package manager for Gentoo, however alternatives to Portage do exist! <a href="../../../Paludis.html" title="Paludis">Paludis</a> is a semi-popular alternative package manager found in the main Gentoo repository. From here on out the Handbook will presume Portage will be used as the system's package manager.
</p>
<div class="alert alert-success gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong>Tip</strong><br />A <a href="../../../Paludis/Guide.html" title="Paludis/Guide">Paludis guide</a> has been written for users who are interested in configuring their system to use Paludis instead of Portage. Just remember: if things do not work out as expected Gentoo help channels will not provide support for non-official package managers!</div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />A commented listing of all possible variables can be found in <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/usr/share/portage/config/make.conf.example</span>. For a successful Gentoo installation only the variables that are mentioned below need to be set.</div>
<p>Fire up an editor (in this guide we use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">nano</span>) to alter the optimization variables we will discuss hereafter.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>From the <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file it is obvious how the file should be structured: commented lines start with "#", other lines define variables using the VARIABLE="content" syntax. Several of those variables are discussed next.
</p>
<h3><span class="mw-headline" id="CFLAGS_and_CXXFLAGS">CFLAGS and CXXFLAGS</span></h3>
<p>The <var>CFLAGS</var> and <var>CXXFLAGS</var> variables define the optimization flags for the GCC C and C++ compiler respectively. Although those are defined generally here, for maximum performance one would need to optimize these flags for each program separately. The reason for this is because every program is different. However, this is not manageable, hence the definition of these flags in the <span style="font-family: monospace; font-size: 95%">make.conf</span> file.
</p><p>In <span style="font-family: monospace; font-size: 95%">make.conf</span> one should define the optimization flags that will make the system the most responsive generally. Don't place experimental settings in this variable; too much optimization can make programs behave bad (crash, or even worse, malfunction).
</p><p>We will not explain all possible optimization options. To understand them all, read the <a rel="nofollow" class="external text" href="http://gcc.gnu.org/onlinedocs/">GNU Online Manual(s)</a> or the gcc info page (<span style="font-family: monospace; font-size: 95%; font-weight: bold;">info gcc</span> - only works on a working Linux system). The <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file itself also contains lots of examples and information; don't forget to read it too.
</p><p>A first setting is the <code>-march=</code> or <code>-mtune=</code> flag, which specifies the name of the target architecture. Possible options are described in the <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file (as comments). A commonly used value is <i>native</i> as that tells the compiler to select the target architecture of the current system (the one users are installing Gentoo on).
</p><p>A second one is the <code>-O</code> flag (that is a capital O, not a zero), which specifies the gcc optimization class flag. Possible classes are s (for size-optimized), 0 (zero - for no optimizations), 1, 2 or even 3 for more speed-optimization flags (every class has the same flags as the one before, plus some extras). <code>-O2</code> is the recommended default. <code>-O3</code> is known to cause problems when used system-wide, so we recommend to stick to <code>-O2</code>.
</p><p>Another popular optimization flag is <code>-pipe</code> (use pipes rather than temporary files for communication between the various stages of compilation). It has no impact on the generated code, but uses more memory. On systems with low memory, gcc might get killed. In that case, do not use this flag.
</p><p>Using <code>-fomit-frame-pointer</code> (which doesn't keep the frame pointer in a register for functions that don't need one) might have serious repercussions on the debugging of applications.
</p><p>When the <var>CFLAGS</var> and <var>CXXFLAGS</var> variables are defined, combine the several optimization flags in one string. The default values contained in the stage3 archive that is unpacked should be good enough. The following one is just an example:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example CFLAGS and CXXFLAGS variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-march=native -O2 -pipe&quot;</span>
<span class="c"># Use the same settings for both variables</span>
<span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CFLAGS</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div></pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The <a href="../../../GCC_optimization.html" title="GCC optimization">GCC optimization guide</a> has more information on how the various compilation options can affect a system.</div>
<h3><span class="mw-headline" id="MAKEOPTS">MAKEOPTS</span></h3>
<p>The <var>MAKEOPTS</var> variable defines how many parallel compilations should occur when installing a package. A good choice is the number of CPUs (or CPU cores) in the system plus one, but this guideline isn't always perfect.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example MAKEOPTS declaration in make.conf</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">MAKEOPTS</span><span class="o">=</span><span class="s2">&quot;-j2&quot;</span>
</pre></div></pre></div>
<h3><span class="mw-headline" id="Ready.2C_set.2C_go">Ready, set, go</span></h3>
<p>Update the <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/etc/portage/make.conf</span> file to match personal preference and save (nano users would hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Ctrl</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">X</kbd>). 
</p><p>Then continue with <a href="../../Installation/Base.html" title="Handbook:X86/Installation/Base">Installing the Gentoo base system</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Disks.html" title="Previous part" class="btn btn-default">&#8592; Preparing the disks</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Base.html" title="Next part" class="btn btn-default">Installing base system &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:X86/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:X86/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:X86/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:X86/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:X86/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:X86/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:X86/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:X86/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:X86/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:X86/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:X86/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:X86/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:X86/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:X86/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:X86/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:X86/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:X86/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:X86/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:X86/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:X86/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:X86/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:X86/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:X86/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:X86/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:X86/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:X86/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:X86/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:X86/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Chrooting">Chrooting</span></h2>
<h3><span class="mw-headline" id="Optional:_Selecting_mirrors">Optional: Selecting mirrors</span></h3>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />The <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/mirrorselect">app-portage/mirrorselect</a> program has not been updated to handle modifying the target chroots <span style="font-family: monospace; font-size: 95%">repos.conf/gentoo.conf</span> file yet. Also, the <var>SYNC</var> variable in <span style="font-family: monospace; font-size: 95%">make.conf</span> is deprecated and no longer used by Portage. This section needs to be updated, please skip for the time being...</div>
<p>In order to download source code quickly it is recommended to select a fast mirror. Portage will look in the <span style="font-family: monospace; font-size: 95%">make.conf</span> file for the <var>GENTOO_MIRRORS</var> variable and use the mirrors listed therein. It is possible to surf to the Gentoo mirror list and search for a mirror (or mirrors) that is close to the system's physical location (as those are most frequently the fastest ones). However, we provide a nice tool called <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span> which provides users with a nice interface to select the mirrors needed. Just navigate to the mirrors of choice and press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Spacebar</kbd> to select one or more mirrors.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>A second important setting is the <var>SYNC</var> setting in <span style="font-family: monospace; font-size: 95%">make.conf</span>. This variable contains the rsync server to use when updating the Portage tree (the collection of ebuilds and related files containing all the information Portage needs to download and install software). Again, it is possible to manually enter a <var>SYNC</var> server, but <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span> can ease that operation considerably:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mirrorselect -i -r -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>After running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span> it is advisable to double-check the settings in <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/etc/portage/make.conf</span>&#160;!
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />When manually selecting a <var>SYNC</var> server in <span style="font-family: monospace; font-size: 95%">make.conf</span>, check out the community mirrors list for the mirrors closest to you. It is recommended to choose a rotation link, such as rsync.us.gentoo.org, rather than choosing a single mirror. This helps spread out the load and provides a fail safe in case a specific mirror is offline.</div>
<h3><span class="mw-headline" id="Copy_DNS_info">Copy DNS info</span></h3>
<p>One thing still remains to be done before entering the new environment and that is copying over the DNS information in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>. This needs to be done to ensure that networking still works even after entering the new environment. <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span> contains the name servers for the network.
</p><p>To copy this information, it is recommended to use the <code>-L</code> option to the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">cp</span> command. This ensures that, if <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span> is a symbolic link, that the link's target file is copied instead of the symbolic link itself. Otherwise in the new environment the symbolic link would point to a non-existing file (as the link's target is most likely not available inside the new environment).
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cp -L /etc/resolv.conf /mnt/gentoo/etc/</code></div></div>
<h3><span class="mw-headline" id="Mounting_the_necessary_filesystems">Mounting the necessary filesystems</span></h3>
<p>In a few moments, the Linux root will be changed towards the new location. To make sure that the new environment works properly, certain filesystems need to be made available there as well.
</p><p>The filesystems that need to be made available are:
</p>
<ul><li> <span style="font-family: monospace; font-size: 95%">/proc/</span> which is a pseudo-filesystem (it looks like regular files, but is actually generated on-the-fly) from which the Linux kernel exposes information to the environment</li>
<li> <span style="font-family: monospace; font-size: 95%">/sys/</span> which is a pseudo-filesystem, like <span style="font-family: monospace; font-size: 95%">/proc/</span> which it was once meant to replace, and is more structured than <span style="font-family: monospace; font-size: 95%">/proc/</span></li>
<li> <span style="font-family: monospace; font-size: 95%">/dev/</span> is a regular file system, partially managed by the Linux device manager (usually <span style="font-family: monospace; font-size: 95%; font-weight: bold;">udev</span>), which contains all device files</li></ul>
<p>The <span style="font-family: monospace; font-size: 95%">/proc/</span> location will be mounted on <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/proc/</span> whereas the other two are bind-mounted. The latter means that, for instance, <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/sys/</span> will actually <i>be</i> <span style="font-family: monospace; font-size: 95%">/sys/</span> (it is just a second entry point to the same filesystem) whereas <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/proc/</span> is a new mount (instance so to speak) of the filesystem.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount -t proc proc /mnt/gentoo/proc
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --rbind /sys /mnt/gentoo/sys
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --make-rslave /mnt/gentoo/sys
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --rbind /dev /mnt/gentoo/dev
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --make-rslave /mnt/gentoo/dev</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The <code>--make-rslave</code> operations are needed for systemd support later in the installation.</div>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />When using non-Gentoo installation media, this might not be sufficient. Some distributions make <span style="font-family: monospace; font-size: 95%">/dev/shm</span> a symbolic link to <span style="font-family: monospace; font-size: 95%">/run/shm/</span> which, after the chroot, becomes invalid. Making <span style="font-family: monospace; font-size: 95%">/dev/shm/</span> a proper tmpfs mount up front can fix this:
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rm /dev/shm &amp;&amp; mkdir /dev/shm
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount -t tmpfs -o nosuid,nodev,noexec shm /dev/shm</code></div></div>
<p>Also ensure that mode 1777 is set
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code> chmod 1777 /dev/shm</code></div></div>
</div>
<h3><span class="mw-headline" id="Entering_the_new_environment">Entering the new environment</span></h3>
<p>Now that all partitions are initialized and the base environment installed, it is time to enter the new installation environment by chrooting into it. This means that the session will change its root (most top-level location that can be accessed) from the current installation environment (installation CD or other installation medium) to the installation system (namely the initialized partitions). Hence the name, <i>change root</i> or <i>chroot</i>.
</p><p>This chrooting is done in three steps:
</p>
<ol><li> The root location is changed from <span style="font-family: monospace; font-size: 95%">/</span> (on the installation medium) to <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/</span> (on the partitions) using chroot</li>
<li> Some settings (those in <span style="font-family: monospace; font-size: 95%">/etc/profile</span>) are reloaded in memory using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">source</span> command</li>
<li> The primary prompt is changed to help us remember that this session is inside a chroot environment.</li></ol>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>chroot /mnt/gentoo /bin/bash
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>source /etc/profile
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export PS1="(chroot) $PS1"</code></div></div>
<p>From this point, all actions performed are immediately on the new Gentoo Linux environment. Of course it is far from finished, which is why the installation still has some sections left&#160;:-)
</p>
<h2><span class="mw-headline" id="Configuring_Portage">Configuring Portage</span></h2>
<h3><span class="mw-headline" id="Installing_a_Portage_snapshot">Installing a Portage snapshot</span></h3>
<p>Next step is to install a Portage snapshot, a collection of files that inform Portage what software titles are available to install, which profiles the administrator can select, etc.
</p><p>The use of <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span> is recommended. This will fetch the latest Portage snapshot (which Gentoo releases on a daily basis) from one of Gentoo's mirrors and install it onto the system.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge-webrsync</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />During this operation, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span> might complain about a missing <span style="font-family: monospace; font-size: 95%">/usr/portage/</span> location. This is to be expected and nothing to worry about - the tool will create the location.</div>
<p>From this point onward, Portage might mention that certain updates are recommended to be executed. This is because certain system packages installed through the stage3 file might have newer versions available, and Portage is now aware of this because a new Portage snapshot is installed. This can be safely ignored for now; the updates can be triggered after the Gentoo installation has finished.
</p>
<h3><span class="mw-headline" id="Optional:_Updating_the_Portage_tree">Optional: Updating the Portage tree</span></h3>
<p>It is possible to update the Portage tree to the latest version. The previous <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span> command will have installed a very recent Portage snapshot (usually recent up to 24h) so this step is definitely optional.
</p><p>Suppose there is a need for the last package updates (up to 1 hour), then use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --sync</span>. This command will use the rsync protocol to update the Portage tree (which was fetched earlier on through <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span>) to the latest state.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync</code></div></div>
<p>On slow terminals, like some framebuffers or serial consoles, it is recommended to use the <code>--quiet</code> option to speed up the process:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync --quiet</code></div></div>
<h3><span class="mw-headline" id="Reading_news_items">Reading news items</span></h3>
<p>When a Portage tree is synchronized to the system, it might warn the user with a message similar to the following:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage informing the user about news items</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre> * IMPORTANT: 2 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.
</pre></div></pre></div>
<p>Portage news items were created to provide a communication medium to push critical messages to users via the rsync tree. To manage them, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect news</span>. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span> application is a Gentoo application that allows for a common management interface towards system changes and operations. In this case, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span> is asked to use its <code>news</code> module.
</p><p>For the <code>news</code> module, three operations are most used:
</p>
<ul><li> With <code>list</code> an overview of the available news items is displayed.</li>
<li> With <code>read</code> the news items can be read.</li>
<li> With <code>purge</code> news items can be removed once they have been read and will not be reread anymore.</li></ul>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect news list
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect news read</code></div></div>
<p>More information about the newsreader is available through its manual page: 
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>man news.eselect</code></div></div>
<h3><span class="mw-headline" id="Choosing_the_right_profile">Choosing the right profile</span></h3>
<p>A <i>profile</i> is a building block for any Gentoo system. Not only does it specify default values for <var>USE</var>, <var>CFLAGS</var>, and other important variables, it also locks the system to a certain range of package versions. This is all maintained by the Gentoo developers.
</p><p>You can see what profile the system is currently using with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span>, now using the <code>profile</code> module:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile list</code></div><pre>
Available profile symlink targets:
  [1]   default/linux/x86/13.0 *
  [2]   default/linux/x86/13.0/desktop
  [3]   default/linux/x86/13.0/desktop/gnome
  [4]   default/linux/x86/13.0/desktop/kde
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The output of the command is just an example and evolves over time.</div>
<p>As can be seen, there are also desktop subprofiles available for some architectures.
</p><p>After viewing the available profiles for the x86 architecture, users can select a different profile to use:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile set 2</code></div></div>
<p>
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The developer subprofile is specifically for Gentoo Linux development and is not meant to be used by regular users.</div>
<h3><span class="mw-headline" id="Configuring_the_USE_variable">Configuring the USE variable</span></h3>
<p><var>USE</var> is one of the most powerful variables Gentoo provides to its users. Several programs can be compiled with or without optional support for certain items. For instance, some programs can be compiled with gtk-support, or with qt-support. Others can be compiled with or without SSL support. Some programs can even be compiled with framebuffer support (svgalib) instead of X11 support (X-server).
</p><p>Most distributions compile their packages with support for as much as possible, increasing the size of the programs and startup time, not to mention an enormous amount of dependencies. With Gentoo users can define what options a package should be compiled with. This is where <var>USE</var> comes into play.
</p><p>In the <var>USE</var> variable users define keywords which are mapped onto compile-options. For instance, <code>ssl</code> will compile ssl-support in the programs that support it. <code>-X</code> will remove X-server support (note the minus sign in front). <code>gnome gtk -kde -qt4</code> will compile programs with GNOME (and GTK) support, and not with KDE (and Qt) support, making the system fully tweaked for GNOME (if the architecture supports it).
</p><p>The default USE settings are placed in the <span style="font-family: monospace; font-size: 95%">make.defaults</span> files of the Gentoo profile used by the system. Gentoo uses a (complex) inheritance system for its profiles, which we will not dive into at this stage. The easiest way to check the currently active <var>USE</var> settings is to run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --info</span> and select the line that starts with USE:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --info | grep ^USE</code></div><pre>
USE=&quot;X acl alsa amd64 berkdb bindist bzip2 cli cracklib crypt cxx dri ...&quot;
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The above example is truncated, the actual list of <var>USE</var> values is much, much larger.</div>
<p>A full description on the available USE flags can be found on the system in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/use.desc</span>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>less /usr/portage/profiles/use.desc</code></div></div>
<p>Inside the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">less</span> command, scrolling can be done using the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">↑</kbd> and <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">↓</kbd> keys, and exited by pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">q</kbd>.
</p><p>As an example we show a USE setting for a KDE-based system with DVD, ALSA and CD Recording support:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/portage/make.conf</code></div></div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Enabling USE for a KDE-based system with DVD, ALSA and CD recording support</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-gtk -gnome qt4 kde dvd alsa cdr&quot;</span>
</pre></div></pre>
<p>When <var>USE</var> is defined in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> it is <i>added</i> (or <i>removed</i> if the USE flag starts with the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">-</kbd> sign) from that default list. Users who want to ignore any default USE settings and manage it completely themselves should start the <var>USE</var> definition in <span style="font-family: monospace; font-size: 95%">make.conf</span> with <code>-*</code>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Ignoring default USE flags</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-* X acl alsa ...&quot;</span>
</pre></div></pre>
<h2><span class="mw-headline" id="Optional:_Using_systemd">Optional: Using systemd</span></h2>
<p>The remainder of the Gentoo Handbook focuses on OpenRC as the default init support system. If systemd is wanted instead, or you are planning to use Gnome 3.8 and later (which requires systemd), please consult the <a href="../../../Systemd.html" title="Systemd">systemd</a> page as it elaborates on the different configuration settings and methods.
</p><p>The Gentoo handbook can then be followed with that page in mind.
</p>
<h2><span class="mw-headline" id="Timezone">Timezone</span></h2>
<p>Select the timezone for the system. Look for the available timezones in <span style="font-family: monospace; font-size: 95%">/usr/share/zoneinfo/</span>, then write it in the <span style="font-family: monospace; font-size: 95%">/etc/timezone</span> file.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /usr/share/zoneinfo</code></div></div>
<p>Suppose the timezone of choice is <i>Europe/Brussels</i>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>echo "Europe/Brussels" &gt; /etc/timezone</code></div></div>
<p>Please avoid the <span style="font-family: monospace; font-size: 95%">/usr/share/zoneinfo/Etc/GMT*</span> timezones as their names do not indicate the expected zones. For instance, <span style="font-family: monospace; font-size: 95%">GMT-8</span> is in fact <span style="font-family: monospace; font-size: 95%">GMT+8</span>.
</p><p>Next, reconfigure the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-libs/timezone-data">sys-libs/timezone-data</a> package, which will update the <span style="font-family: monospace; font-size: 95%">/etc/localtime</span> file for us, based on the <span style="font-family: monospace; font-size: 95%">/etc/timezone</span> entry. The <span style="font-family: monospace; font-size: 95%">/etc/localtime</span> file is used by the system C library to know the timezone the system is in.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --config sys-libs/timezone-data</code></div></div>
<h2><span class="mw-headline" id="Configure_locales">Configure locales</span></h2>
<p>Most users will want to use only one or two locales on their system.
</p><p>Locales specify not only the language that the system should use to interact with the system, but also what the rules are for sorting strings, displaying dates and times, etc. 
</p><p>The locales that a system should support should be mentioned in <span style="font-family: monospace; font-size: 95%">/etc/locale.gen</span>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/locale.gen</code></div></div>
<p>The following locales are an example to get both English (United States) and German (Germany) with the accompanying character formats (like UTF-8).
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/locale.gen</code></strong><strong>Enabling US and DE locales with the appropriate character formats</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>en_US ISO-8859-1
en_US.UTF-8 UTF-8
de_DE ISO-8859-1
de_DE@euro ISO-8859-15
</pre></div></pre>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />We strongly suggest to use at least one UTF-8 locale because some applications may require it.</div>
<p>The next step is to run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">locale-gen</span>. It will generate all the locales specified in the <span style="font-family: monospace; font-size: 95%">/etc/locale.gen</span> file.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>locale-gen</code></div></div>
<p>To verify that the selected locales are now available, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">locale -a</span>.
</p><p>Once done, it is now time to set the system-wide locale settings. Again we use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span> for this, now with the <code>locale</code> module.
</p><p>With <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect locale list</span>, the available targets are displayed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect locale list</code></div><pre>
Available targets for the LANG variable:
  [1] C
  [2] POSIX
  [3] en_US
  [4] en_US.iso88591
  [5] en_US.utf8
  [6] de_DE
  [7] de_DE.iso88591
  [8] de_DE.iso885915
  [9] de_DE.utf8
  [ ] (free form)
</pre></div>
<p>With <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect locale set VALUE</span> the correct locale can be set:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect locale set 9</code></div></div>
<p>Manually, this can still be accomplished through the <span style="font-family: monospace; font-size: 95%">/etc/env.d/02locale</span> file:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/env.d/02locale</code></strong><strong>Manually setting system locale definitions</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">LANG</span><span class="o">=</span><span class="s2">&quot;de_DE.UTF-8&quot;</span>
<span class="nv">LC_COLLATE</span><span class="o">=</span><span class="s2">&quot;C&quot;</span>
</pre></div></pre>
<p>Make sure a locale is set, as the system would otherwise display warnings and errors during kernel builds and other software deployments later in the installation.
</p><p>Now reload the environment:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>env-update &amp;&amp; source /etc/profile</code></div></div>
<p>We made a full <a href="../../../Localization/Guide.html" title="Localization/Guide">Localization guide</a> to help the user guide through this process. Another interesting article is the <a href="../../../UTF-8.html" title="UTF-8">UTF-8</a> guide for very specific information to enable UTF-8 on the system.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Stage.html" title="Previous part" class="btn btn-default">&#8592; Installing Stage3</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Kernel.html" title="Next part" class="btn btn-default">Configuring the kernel &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> インストール
</th></tr>
<tr>
<td> <a href="../../Installation/About/ja.html" title="Handbook:X86/Installation/About/ja">インストールについて</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ja.html" title="Handbook:X86/Installation/Media/ja">メディアの選択</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ja.html" title="Handbook:X86/Installation/Networking/ja">ネットワーク設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ja.html" title="Handbook:X86/Installation/Disks/ja">ディスクの準備</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ja.html" title="Handbook:X86/Installation/Stage/ja">stage3のインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ja.html" title="Handbook:X86/Installation/Base/ja">基本システムのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ja.html" title="Handbook:X86/Installation/Kernel/ja">カーネルの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ja.html" title="Handbook:X86/Installation/Tools/ja">ツールのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">締めくくり</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Gentooの操作
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portageについて</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ja.html" title="Handbook:X86/Working/USE/ja">USEフラグ</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ja.html" title="Handbook:X86/Working/Features/ja">Portageの機能</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ja.html" title="Handbook:X86/Working/Initscripts/ja">Initスクリプトシステム</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ja.html" title="Handbook:X86/Working/EnvVar/ja">環境変数</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Portageの操作
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ja.html" title="Handbook:X86/Portage/Files/ja">ファイルとディレクトリ</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ja.html" title="Handbook:X86/Portage/Variables/ja">変数</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ja.html" title="Handbook:X86/Portage/Branches/ja">ソフトウェアブランチの併用</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ja.html" title="Handbook:X86/Portage/Tools/ja">追加ツール</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ja.html" title="Handbook:X86/Portage/CustomTree/ja">カスタムPortageツリー</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ja.html" title="Handbook:X86/Portage/Advanced/ja">高度な機能</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> ネットワーク設定
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ja.html" title="Handbook:X86/Networking/Introduction/ja">はじめに</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ja.html" title="Handbook:X86/Networking/Advanced/ja">高度な設定</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ja.html" title="Handbook:X86/Networking/Modular/ja">モジュール式ネットワーク</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ja.html" title="Handbook:X86/Networking/Wireless/ja">無線</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ja.html" title="Handbook:X86/Networking/Extending/ja">機能の追加</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ja.html" title="Handbook:X86/Networking/Dynamic/ja">動的な管理</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".E3.82.AB.E3.83.BC.E3.83.8D.E3.83.AB.E3.82.BD.E3.83.BC.E3.82.B9.E3.81.AE.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB">カーネルソースのインストール</span></h2>
<p>すべてのディストリビューションが構築されるその中心にあるのがLinuxカーネルです。カーネルレイヤーはユーザープログラムとハードウェアの間に存在します。Gentooではカーネルソースについて複数の選択肢があります。説明付きのすべてのカーネルソースのリストは、<a href="../../../Kernel/Overview/ja.html" title="Kernel/Overview/ja">Kernel overview page</a>で見ることができます。
</p><p>x86ベースのシステムのために、Gentooは<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/gentoo-sources"> sys-kernel/gentoo-sources</a>パッケージを推奨しています。
</p><p>適切なカーネルソースを選択して、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge</span>でインストールします。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-kernel/gentoo-sources</code></div></div> 
<p>このコマンドはカーネルソースを<span style="font-family: monospace; font-size: 95%">/usr/src/</span>にインストールします。このディレクトリにある<span style="font-family: monospace; font-size: 95%">linux</span>がインストールされたカーネルソースへのシンボリックリンクとなります。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls -l /usr/src/linux</code></div><pre>
lrwxrwxrwx    1 root   root    12 Oct 13 11:04 /usr/src/linux -&gt; linux-3.16.5-gentoo
</pre></div>
<p>これで、カーネルソースを設定、コンパイルする準備が整いました。この設定およびコンパイルには二つのアプローチがあります。
</p>
<ol><li> カーネルをマニュアルで設定およびビルドする。</li>
<li> Linuxカーネルを自動的にビルド・インストールする<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>を使用する。</li></ol>
<p>ここでは、環境を最適化するのに最も適した"マニュアル設定"をデフォルトとして説明します。
</p>
<h2><span class="mw-headline" id=".E3.83.87.E3.83.95.E3.82.A9.E3.83.AB.E3.83.88:_.E3.83.9E.E3.83.8B.E3.83.A5.E3.82.A2.E3.83.AB.E8.A8.AD.E5.AE.9A">デフォルト: マニュアル設定</span></h2>
<h3><span class="mw-headline" id=".E3.81.AF.E3.81.98.E3.82.81.E3.81.AB_2">はじめに</span></h3>
<p>カーネルのマニュアル設定は、しばしばLinuxユーザーがしなければならない最も難しい手続きと考えられます。これは真実ではありません。カーネルを数回設定してみれば、それが難しいと言われていたことなど忘れてしまうでしょう。
</p><p>しかし、一つだけ真実があります。カーネルをマニュアルで設定する時、ハードウェア情報を知ることはとても役に立ちます。ほとんどの情報は、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">lspci</span>コマンドを含む<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-apps/pciutils">sys-apps/pciutils</a>をインストールすることで得られます。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-apps/pciutils</code></div></div> 
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />chroot環境では、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">lspci</span>が出力していると思われる(<i>pcilib: cannot open /sys/bus/pci/devices</i>のような)pcilibの警告は、無視しても構いません。</div>
<p>システム情報を得るための別の方法は、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">lsmod</span>を使ってインストールCDが使っているカーネルモジュールを把握することです。その情報は何を有効にすべきかとてもよいヒントを与えてくれるでしょう。
</p><p>では、カーネルソースがあるディレクトリに移動して、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">make menuconfig</span>を実行しましょう。このコマンドはメニューベースの設定画面を起動します。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /usr/src/linux
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>make menuconfig</code></div></div>
<p>Linuxカーネルの設定はとても多くのセクションを持っています。まず最初にいくつかの必須オプションを述べましょう（そうでない場合、Gentooは動作しない、もしくは追加の処置なしには正しく動作しません）。
Gentoo wikiの<a href="../../../Kernel/Gentoo_Kernel_Configuration_Guide/ja.html" title="Kernel/Gentoo Kernel Configuration Guide/ja">Gentoo カーネルコンフィグレーションガイド</a>には、さらに役立つ記述があるでしょう。
</p>
<h3><span class="mw-headline" id=".E5.BF.85.E9.A0.88.E3.82.AA.E3.83.97.E3.82.B7.E3.83.A7.E3.83.B3.E3.82.92.E6.9C.89.E5.8A.B9.E3.81.AB.E3.81.99.E3.82.8B">必須オプションを有効にする</span></h3>
<p>システムのブートに必須となるドライバ（SCSIコントローラ等）は、モジュールではなく、カーネルの一部としてコンパイルしなければなりません。そうでないと、システムは全くブートできないでしょう。
</p><p>次に正確なプロセッサタイプを選択します。このとき、もし使えるのであればMCE機能を有効にすることが推奨されます。これによりハードウェアの異常が通知されるようになるでしょう。いくつかのアーキテクチャ（x86_64）で、これらのエラーはdmesgでは確認できませんが、<span style="font-family: monospace; font-size: 95%">/dev/mcelog</span>にログが残ります。この機能を有効にするために<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/mcelog">app-admin/mcelog</a>パッケージが必要になります。 
</p><p>また、<i>Maintain a devtmpfs file system to mount at /dev</i>を選択することで、必須となるデバイスファイルがブートプロセスの初期段階で使えるようになります。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>devtmpfsサポートを有効にする</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Device Drivers ---&gt;
  Generic Driver Options ---&gt;
    [*] Maintain a devtmpfs filesystem to mount at /dev
    [ ]   Automount devtmpfs at /dev, after the kernel mounted the rootfs
</pre>
</pre></div></pre>
<p>次に<i>File Systems</i>で、使用するファイルシステムに必要なサポートを選択しましょう。ルートファイルシステムに使われるファイルシステムをモジュールとしてコンパイルしてはいけません。モジュールにした場合、Gentooシステムはパーティションをマウントできないでしょう。また、ここで<i>Virtual memory</i>と<i>/proc file system</i>を選択してください。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>必要なファイルシステムを選択する</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
File systems ---&gt;
(Select one or more of the following options as needed by your system)
  &lt;*&gt; Second extended fs support
  &lt;*&gt; Ext3 journalling file system support
  &lt;*&gt; The Extended 4 (ext4) filesystem
  &lt;*&gt; Reiserfs support
  &lt;*&gt; JFS filesystem support
  &lt;*&gt; XFS filesystem support
  ...
  Pseudo Filesystems ---&gt;
    [*] /proc file system support
    [*] Virtual memory file system support (former shm fs)
</pre>
</pre></div></pre>
<p>もしインターネットに接続するために、PPPoEもしくはダイヤルアップモデムを使う場合、次のオプションを有効にしてください。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>PPPoEに必要なドライバを選択する</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Device Drivers ---&gt;
  Network device support ---&gt;
    &lt;*&gt; PPP (point-to-point protocol) support
    &lt;*&gt;   PPP support for async serial ports
    &lt;*&gt;   PPP support for sync tty ports
</pre>
</pre></div></pre>
<p>2つの圧縮オプションは選択しても差し支えありませんが、必須というわけでもありません。PPP over Ethernetオプションも同様です。これはカーネルモードのPPPoEをするために設定された時だけにpppによって使用されるものです。
</p><p>カーネルにネットワークカード（イーサネットもしくはワイヤレス）のサポートを組み込むことを忘れてはいけません。
</p><p>多くのシステムではマルチコアを使用できます。<i>Symmetric multi-processing support</i>を有効にすることは重要です。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>SMPサポートを有効にする</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Processor type and features  ---&gt;
  [*] Symmetric multi-processing support
</pre>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />マルチコアシステムでは、それぞれのコアが１プロセッサとカウントされます。</div>
<p>USB接続の入力装置（キーボードやマウス）を使用している場合、以下を必ず有効にしてください。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>入力装置のためにUSBサポートを有効にする</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Device Drivers ---&gt;
  [*] HID Devices  ---&gt;
    &lt;*&gt;   USB Human Interface Device (full HID) support
</pre>
</pre></div></pre>
<p><br />
</p><p><br />
</p>
<h3><span class="mw-headline" id="Architecture_specific_kernel_configuration">Architecture specific kernel configuration</span></h3>
<p>Make sure to select IA32 Emulation if 32-bit programs should be supported (multilib). Gentoo will install a multilib system (mixed 32-bit/64-bit computing) by default, so unless a <span style="font-family: monospace; font-size: 95%">no-multilib</span> profile is used, this option is required.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Selecting processor types and features</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Processor type and features  ---&gt;
   [ ] Machine Check / overheating reporting 
   [ ]   Intel MCE Features
   [ ]   AMD MCE Features
  Processor family (AMD-Opteron/Athlon64)  ---&gt;
    ( ) Opteron/Athlon64/Hammer/K8
    ( ) Intel P4 / older Netburst based Xeon
    ( ) Core 2/newer Xeon
    ( ) Intel Atom
    ( ) Generic-x86-64
Executable file formats / Emulations  ---&gt;
   [*] IA32 Emulation
</pre>
</pre></div></pre>
<p>Enable GPT partition label support if that was used previously when partitioning the disk:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Enable support for GPT</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
-*- Enable the block layer ---&gt;
    ...
    Partition Types ---&gt;
    [*] Advanced partition selection
      ...
      [*] EFI GUID Partition support
</pre>
</pre></div></pre>
<p>Enable EFI stub support and EFI variables in the Linux kernel if UEFI is used to boot the system:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Enable support for UEFI</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Processor type and features  ---&gt;
    [*] EFI runtime service support 
    [*]   EFI stub support
  
Firmware Drivers  ---&gt;
    &lt;*&gt; EFI Variable Support via sysfs
</pre>
</pre></div></pre>
<h3><span class="mw-headline" id="Compiling_and_installing">Compiling and installing</span></h3>
<p>With the configuration now done, it is time to compile and install the kernel. Exit the configuration and start the compilation process:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>make &amp;&amp; make modules_install</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />It is possible to enable parallel builds using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">make -jX</span> with <code>X</code> being an integer number of parallel tasks that the build process is allowed to launch. This is similar to the instructions about <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> earlier, with the <var>MAKEOPTS</var> variable.</div>
<p>When the kernel has finished compiling, copy the kernel image to <span style="font-family: monospace; font-size: 95%">/boot/</span>. This is handled by the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">make install</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>make install</code></div></div>
<p>This will copy the kernel image into <span style="font-family: monospace; font-size: 95%">/boot/</span> together with the <span style="font-family: monospace; font-size: 95%">System.map</span> file and the kernel configuration file.
</p><p>With UEFI systems, create the <span style="font-family: monospace; font-size: 95%">/boot/efi/boot/</span> location, and then copy the kernel into this location, calling it <span style="font-family: monospace; font-size: 95%">bootx64.efi</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir -p /boot/efi/boot
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cp /boot/vmlinuz-* /boot/efi/boot/bootx64.efi
</code></div></div>
<p><br />
</p><p><br />
</p>
<h3><span class="mw-headline" id=".E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_initramfs.E3.81.AE.E3.83.93.E3.83.AB.E3.83.89">任意自由選択: initramfsのビルド</span></h3>
<p>いくつかの特別なケースでinitramfs（起動時のRAMベースのファイルシステム）のビルドが必要になります。最もよくある理由は、重要なディレクトリ（<span style="font-family: monospace; font-size: 95%">/usr/</span>、<span style="font-family: monospace; font-size: 95%">/var/</span>等）が別パーティションにある場合です。initramfsがあれば、initramfsの中にあるツールを使うことで、これらのパーティションをマウントすることができます。
</p><p>initramfsがないケースで、ファイルシステムをマウントするツールがそのファイルシステムの中にある情報を必要としている場合、大きなリスクを負うことになります。initramfsはカーネルブートの直後かつ制御がinitツールに移る前に必要なファイルをアーカイブに引き込みます。initramfsのスクリプトはシステムがブートを継続するために必要なパーティションを正しくマウントすることを保証します。
</p><p>initramfsをインストールするために、最初に<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/genkernel">sys-kernel/genkernel</a>をインストールしましょう。そしてinitramfsを生成します。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge genkernel</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>genkernel --install initramfs</code></div></div>
<p>lvmやraid等の特別なサポートをinitramfsで有効にするために、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>に適切なオプションを与えてください。詳しい情報については、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel --help</span>を参照してください。次の例では、LVMとソフトウェアRAID (mdadm)を有効にしています。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>genkernel --lvm --mdadm --install initramfs</code></div></div>
<p>initramfsは<span style="font-family: monospace; font-size: 95%">/boot/</span>に保存されます。生成されるファイルは単純に<i>initramfs</i>で始まります。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /boot/initramfs*</code></div></div>
<p>次は<a href="#.E3.82.AB.E3.83.BC.E3.83.8D.E3.83.AB.E3.83.A2.E3.82.B8.E3.83.A5.E3.83.BC.E3.83.AB">カーネルモジュール</a>です。
</p>
<h2><span class="mw-headline" id=".E5.88.A5.E3.81.AE.E6.96.B9.E6.B3.95:_genkernel.E3.82.92.E4.BD.BF.E7.94.A8.E3.81.99.E3.82.8B">別の方法: genkernelを使用する</span></h2>
<p>もしマニュアル設定に気後れしてしまった場合、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>がお薦めです。<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>は自動的にカーネルを設定、ビルドします。
</p><p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>はインストールCDのカーネルが自動的に設定されるのとほぼ同じ方法でカーネルを設定します。これはカーネルのビルドに<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>を使った場合、インストールCDと同じようにブート時にすべてのハードウェアを検出することを意味します。<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>はいかなるカーネルのマニュアル設定も要求しないため、ユーザー自身のカーネルをコンパイルすることを好まないユーザには理想的なソリューションです。
</p><p>では、genkernelの使い方を見てみましょう。最初に<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/genkernel">sys-kernel/genkernel</a>をemergeします。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-kernel/genkernel</code></div></div> 
<p>次に、<span style="font-family: monospace; font-size: 95%">/etc/fstab</span>ファイルを編集します。2番目のフィールドに<span style="font-family: monospace; font-size: 95%">/boot/</span>を含む行は、その1番目のフィールドで正しいデバイス指定します。もしハンドブックのパーティショニング例の通りであれば、このデバイスはほぼ間違いなくext2ファイルシステムを持つ/dev/sda2でしょう。この場合、エントリは次のようになります。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/fstab</code></div></div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/fstab</code></strong><strong>/bootマウントポイントを設定する</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
/dev/sda2	/boot	ext2	defaults	0 2
</pre>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />Gentooインストールでは、<span style="font-family: monospace; font-size: 95%">/etc/fstab</span>はさらにもう一回編集されますが、<span style="font-family: monospace; font-size: 95%">/boot</span>の設定は<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>アプリケーションがそれを読み込むために今必要です</div>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel all</span>を実行してカーネルソースをコンパイルしましょう。ただ、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>はほとんどすべてのハードウェアをサポートするカーネルを生成するため、コンパイルが完了するまでにかなりの時間が必要になることに注意しましょう。
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />もしブートパーティションがファイルシステムとしてext2もext3も使用していない場合、おそらく、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel --menuconfig all</span>を使ってマニュアルでカーネルを設定し、カーネルにこの特別なファイルシステムを（モジュールではなく）組み込む必要があるでしょう。また、LVM2のユーザーはおそらく引数に<code>--lvm</code>を加えることになるでしょう。</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>genkernel all</code></div></div>
<p>genkernel完了後、カーネル、モジュール群、初期RAMディスク（initramfs）が生成されるでしょう。このドキュメントの後半でブートローダーを設定する際、このカーネルとinitrdを使うことになります。ブートローダーの設定に必要になるため、カーネルとinitrdの名前をメモしておきましょう。"真の"システムが起動する前に（インストールCDがするように）ハードウェアを自動的に検出しなければならないため、initrdはブート後すぐに起動します。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /boot/kernel* /boot/initramfs*</code></div></div>
<h2><span class="mw-headline" id=".E3.82.AB.E3.83.BC.E3.83.8D.E3.83.AB.E3.83.A2.E3.82.B8.E3.83.A5.E3.83.BC.E3.83.AB">カーネルモジュール</span></h2>
<h3><span class="mw-headline" id=".E3.83.A2.E3.82.B8.E3.83.A5.E3.83.BC.E3.83.AB.E3.81.AE.E8.A8.AD.E5.AE.9A">モジュールの設定</span></h3>
<p><span style="font-family: monospace; font-size: 95%">/etc/conf.d/modules</span>に自動的にロードしなければならないモジュールを記載してください。必要であれば、モジュールに追加のオプションを与えることもできます。
</p><p>すべての利用可能なモジュールを把握するためには、次の<span style="font-family: monospace; font-size: 95%; font-weight: bold;">find</span>コマンドを実行してください。"&lt;kernel version&gt;"をたった今コンパイルしたカーネルのバージョンで置き換えることを忘れないでください。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>find /lib/modules/&lt;kernel version&gt;/ -type f -iname '*.o' -or -iname '*.ko' | less</code></div></div>
<p>たとえば、<span style="font-family: monospace; font-size: 95%">3c59x.ko</span>モジュール（特定の3Comネットワークカード）を自動的にロードするためには、<span style="font-family: monospace; font-size: 95%">/etc/conf.d/modules</span>にモジュール名を記載してください。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/modules</code></div><pre>
modules=&quot;3c59x&quot;
</pre></div>
<p>では、<a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>に進み、インストールを続けましょう。
</p>
<h3><span class="mw-headline" id=".E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_.E3.83.95.E3.82.A1.E3.83.BC.E3.83.A0.E3.82.A6.E3.82.A7.E3.82.A2.E3.81.AE.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB">任意自由選択: ファームウェアのインストール</span></h3>
<p>いくつかのドライバは、動作可能にするために追加のファームウェアのインストールを必要とします。これはしばしばネットワークインターフェース、特に無線ネットワークで必要になります。ファームウェアの多くは<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/linux-firmware">sys-kernel/linux-firmware</a>にパッケージされています。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-kernel/linux-firmware</code></div></div> 
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Base/ja.html" title="Previous part" class="btn btn-default">&#8592; Installing base system</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/System/ja.html" title="Next part" class="btn btn-default">システムの設定 &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> インストール
</th></tr>
<tr>
<td> <a href="../../Installation/About/ja.html" title="Handbook:X86/Installation/About/ja">インストールについて</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ja.html" title="Handbook:X86/Installation/Media/ja">メディアの選択</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ja.html" title="Handbook:X86/Installation/Networking/ja">ネットワーク設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ja.html" title="Handbook:X86/Installation/Disks/ja">ディスクの準備</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ja.html" title="Handbook:X86/Installation/Stage/ja">stage3のインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ja.html" title="Handbook:X86/Installation/Base/ja">基本システムのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ja.html" title="Handbook:X86/Installation/Kernel/ja">カーネルの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ja.html" title="Handbook:X86/Installation/Tools/ja">ツールのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">締めくくり</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Gentooの操作
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portageについて</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ja.html" title="Handbook:X86/Working/USE/ja">USEフラグ</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ja.html" title="Handbook:X86/Working/Features/ja">Portageの機能</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ja.html" title="Handbook:X86/Working/Initscripts/ja">Initスクリプトシステム</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ja.html" title="Handbook:X86/Working/EnvVar/ja">環境変数</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Portageの操作
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ja.html" title="Handbook:X86/Portage/Files/ja">ファイルとディレクトリ</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ja.html" title="Handbook:X86/Portage/Variables/ja">変数</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ja.html" title="Handbook:X86/Portage/Branches/ja">ソフトウェアブランチの併用</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ja.html" title="Handbook:X86/Portage/Tools/ja">追加ツール</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ja.html" title="Handbook:X86/Portage/CustomTree/ja">カスタムPortageツリー</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ja.html" title="Handbook:X86/Portage/Advanced/ja">高度な機能</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> ネットワーク設定
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ja.html" title="Handbook:X86/Networking/Introduction/ja">はじめに</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ja.html" title="Handbook:X86/Networking/Advanced/ja">高度な設定</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ja.html" title="Handbook:X86/Networking/Modular/ja">モジュール式ネットワーク</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ja.html" title="Handbook:X86/Networking/Wireless/ja">無線</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ja.html" title="Handbook:X86/Networking/Extending/ja">機能の追加</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ja.html" title="Handbook:X86/Networking/Dynamic/ja">動的な管理</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.81.AE.E6.83.85.E5.A0.B1">ファイルシステムの情報</span></h2>
<h3><span class="mw-headline" id="fstab.E3.81.AB.E3.81.A4.E3.81.84.E3.81.A6">fstabについて</span></h3>
<p>Linuxでは、システムで使用するすべてのパーティションは<span style="font-family: monospace; font-size: 95%">/etc/fstab</span>に記載されていなければなりません。このファイルは、これらパーティションのマウントポイント（これらはファイルシステムに存在しなければなりません）、どのようにマウントされるべきか、また特別なオプション（自動マウントかそうでないか、ユーザー権限でマウントできるかどうか等）を定義します。
</p>
<h3><span class="mw-headline" id="fstab.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.92.E4.BD.9C.E6.88.90.E3.81.99.E3.82.8B">fstabファイルを作成する</span></h3>
<p><span style="font-family: monospace; font-size: 95%">/etc/fstab</span>ファイルは表のように記述します。それぞれの行はスペース（一つまたは複数のスペース、タブ、もしくはその組み合わせ）で区切られる６つのフィールドを持ちます。それぞれのフィールドの意味は以下の通りです。
</p>
<ol><li> 最初のフィールドは使用するパーティションを示します。（デバイスファイルのパス）</li>
<li> 2番目のフィールドはそのパーティションがマウントされるマウントポイントを示します。</li>
<li> 3番目のフィールドはそのパーティションのファイルシステムを示します。</li>
<li> 4番目のフィールドは、そのパーティションをマウントする<span style="font-family: monospace; font-size: 95%; font-weight: bold;">mount</span>コマンドが使用するオプションを示します。すべてのファイルシステムは、固有のマウントオプションを持っています。ユーザーはマウントコマンドのmanページ(<span style="font-family: monospace; font-size: 95%; font-weight: bold;">man mount</span>)を参照することですべてのオプションを確認できます。複数のマウントオプションを記述する場合はカンマで区切ります。</li>
<li> 5番目のフィールドはそのパーティションをdumpでダンプするかどうかを示しています。このフィールドは通常0（ゼロ）のままにしておいてかまいません。</li>
<li> 6番目のフィールドは、直前のシャットダウンが正常に完了しなかったときに、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">fsck</span>が各パーティションをどの順番でチェックするか示しています。ルートファイルシステムは1であるべきです。残りのファイルシステムは2（ファイルシステムチェックが不要であれば0）に設定しましょう。</li></ol>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> 重要</strong><br />Gentooが提供するデフォルトの<span style="font-family: monospace; font-size: 95%">/etc/fstab</span>ファイルは適切な記述ではありません。テンプレートとしてのみ使用してください</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/fstab</code></div></div>
<p>これ以降、パーティションとして、デフォルトのブロックデバイスファイルである<span style="font-family: monospace; font-size: 95%">/dev/sd*</span>を使いますが、<span style="font-family: monospace; font-size: 95%">/dev/disk/by-id/</span>もしくは<span style="font-family: monospace; font-size: 95%">/dev/disk/by-uuid/</span>にあるシボリックリンクを使用することもできます。これらシンボリックリンクの名前は、デフォルトのブロックデバイスの名前がいくつかの要因（ディスクがどのように、どんな順番で接続されているか）に依存することに対して、ほとんど変わることはないでしょう。しかし、ディスクの順番をむやみに変更しない限り、デフォルトのブロックデバイスは安全に使用できます。
</p><p>では、<span style="font-family: monospace; font-size: 95%">/boot/</span>パーティションをどのように記述すればよいか見てみましょう。これは一つの例です。実際はインストール手順の最初に決めたパーティション通りに修正しなければなりません。x86 のパーティションの例では、<span style="font-family: monospace; font-size: 95%">/boot/</span>は通常、ファイルシステムをext2として<span style="font-family: monospace; font-size: 95%">/dev/sda2</span>となります。このパーティションはブート中にチェックされなければなりません。fstabは以下のようになるでしょう。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/fstab</code></strong><strong>/etc/fstabの/boot行の例</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
/dev/sda2   /boot     ext2    defaults        0 2
</pre>
</pre></div></pre>
<p>あるユーザーはセキュリティを向上させるために<span style="font-family: monospace; font-size: 95%">/boot/</span>パーティションを自動的にマウントしたくないかもしれません。その場合は<i>defaults</i>を<i>noauto</i>で置き換えてください。これは、そのパーティションを使いたいときは都度手動でマウントしなければならないことを意味します。
</p><p>実際のパーティション構成にあわせたルールや、CD-ROMドライブのためのルールを追加してください。他にパーティションやドライブがあれば、それも忘れずに追加しておきましょう。
</p><p>以下は、より詳細な<span style="font-family: monospace; font-size: 95%">/etc/fstab</span>の例です。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/fstab</code></strong><strong>完全な/etc/fstabの例</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
/dev/sda2   /boot        ext2    defaults,noatime     0 2
/dev/sda3   none         swap    sw                   0 0
/dev/sda4   /            ext4    noatime              0 1
  
/dev/cdrom  /mnt/cdrom   auto    noauto,user          0 0
</pre>
</pre></div></pre>
<p>3番目のフィールドで<code>auto</code>を使う場合、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">mount</span>コマンドはそのパーティションのファイルシステムが何かを推測します。これは様々なファイルシステムを使う可能性があるリムーバルメディアで推奨されます。4番目の<code>user</code>オプションで、ルート権限を持たないユーザーがCDをマウントできるようになります。
</p><p>パフォーマンスを改善するために、多くのユーザーはマウントオプションとして<code>noatime</code>オプションを付け加えたいと考えるでしょう。アクセス時間が記録されないので、結果としてより高速なシステムになります(一般的にこの記録はほとんど必要ありません)。<code>TRIM</code>コマンドが動くように<code>discard</code>オプション(現時点ではext4とbtrfsのみ)を使ってSSDをマウントする場合も、<code>noatime</code>オプションを付けるとよいでしょう。
</p><p>再度<span style="font-family: monospace; font-size: 95%">/etc/fstab</span>を確認して、保存、エディタを終了します。
</p>
<h2><span class="mw-headline" id=".E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E6.8E.A5.E7.B6.9A.E3.81.AE.E3.81.9F.E3.82.81.E3.81.AE.E6.83.85.E5.A0.B1">ネットワーク接続のための情報</span></h2>
<h3><span class="mw-headline" id=".E3.83.9B.E3.82.B9.E3.83.88.E3.81.A8.E3.83.89.E3.83.A1.E3.82.A4.E3.83.B3.E3.81.AE.E3.81.9F.E3.82.81.E3.81.AE.E6.83.85.E5.A0.B1">ホストとドメインのための情報</span></h3>
<p>さて、PCには名前をつけなければいけません。至極簡単に思えますが多くのユーザーはPCに名前を付けるのに苦労しています。事を早く進めるために、選んだ名前は後で変更できることを知っておいてください。判りやすいように、ここでは単にマシンを<i>tux</i>、ドメイン名を<i>homenetwork</i>と呼ぶことにします。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/hostname</code></div><pre>
# hostname変数にホスト名を設定する。
hostname=&quot;tux&quot;
</pre></div>
<p>次に、もしドメイン名が必要なら、<span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>に設定します。ISPやネットワーク管理者からそう言われているか、DNSサーバがありDHCPサーバがない場合には、ドメイン名が必要になります。もし、ダイナミックIPアドレスやネットワーク設定のためにDHCPを使っている場合は、DNSやドメイン名は気にしなくても構いません。
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />デフォルトで<span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>が無い場合、新規作成する必要があります。</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/net</code></div><pre>
# dns_domain_lo変数にドメイン名を設定する。
dns_domain_lo=&quot;homenetwork&quot;
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />もしドメイン名を設定しない場合、ログイン画面に"This is hostname.(none)"というメッセージが現れるでしょう。これは<span style="font-family: monospace; font-size: 95%">/etc/issue</span>を編集して、<code>.\O</code>を消去することで対策できます。</div>
<p>もし、NISドメインが必要であれば（それが何かを知らないユーザは必要ありません）、以下のように定義してください。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/net</code></div><pre>
# nis_domain_lo変数にNISドメイン名を設定。
nis_domain_lo=&quot;my-nisdomain&quot;
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />DNSとNISの設定詳細については、<span style="font-family: monospace; font-size: 95%">/usr/share/doc/netifrc-*/net.example.bz2</span>にある例を参照してください。このファイルは<span style="font-family: monospace; font-size: 95%; font-weight: bold;">bzless</span>で読むことができます。また、DNS/NIS設定を管理する場合、<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-dns/openresolv">net-dns/openresolv</a>をインストールすることは興味深いでしょう。</div>
<h3><span class="mw-headline" id=".E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E3.82.92.E8.A8.AD.E5.AE.9A.E3.81.99.E3.82.8B">ネットワークを設定する</span></h3>
<p>Gentoo Linuxをインストールしている間、ネットワークが使えるように設定されています。しかし、それはインストールCDのためのネットワーク設定であり、インストールされた環境のためのものではありません。では、インストールされたGentoo Linuxのネットワークを設定しましょう。
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />bonding、ブリッジ、802.1Q VLAN、無線ネットワークに間するより詳細な情報は、Gentoo Network Configurationセクションを参照してください。</div>
<p>すべてのネットワーク設定は<span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>にあります。直接的ではありますが、おそらく直感で理解できる構文ではありません。しかし恐れることはありません。すべては以下で説明されます。<span style="font-family: monospace; font-size: 95%">/usr/share/doc/netifrc-*/net.example.bz2</span>に、多くの異なる設定に対して完全にコメントが付与された例が記載されています。
</p><p>最初に <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-misc/netifrc">net-misc/netifrc</a> をインストールします。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask&#160;--noreplace net-misc/netifrc</code></div></div> 
<p>DHCPはデフォルトで使用されます。DHCPを動かすために、DHCPクライアントをインストールしなければなりません。これは Installing Necessary System Toolsで説明されます。
</p><p>もし、特別なDHCPのオプションを設定している、もしくはDHCPをまったく使いたくない等の理由で、ネットワーク接続をしなければならないときは、<span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>を編集します。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/net</code></div></div>
<p>IPアドレスとルーティングを設定するのは<var>config_eth0</var>と<var>routes_eth0</var>です。
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 注意</strong><br />ここではネットワークインターフェイスがeth0であると仮定していますが、これはシステムによって違います。もし、最近のインストールメディアから起動しているのであれば、インストール時と同じインターフェイス名が使われると思ってよいでしょう。より詳しい情報はNetwork Interface Namingを参照してください。</div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/conf.d/net</code></strong><strong></strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">config_eth0</span><span class="o">=</span><span class="s2">&quot;192.168.0.2 netmask 255.255.255.0 brd 192.168.0.255&quot;</span>
<span class="nv">routes_eth0</span><span class="o">=</span><span class="s2">&quot;default via 192.168.0.1&quot;</span>
</pre></div></pre>
<p>DHCPを使う場合は、<var>config_eth0</var>を設定してください。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/conf.d/net</code></strong><strong>DHCPの定義</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">config_eth0</span><span class="o">=</span><span class="s2">&quot;dhcp&quot;</span>
</pre></div></pre>
<p>使用可能なオプションのリストについては、<span style="font-family: monospace; font-size: 95%">/usr/share/doc/netifrc-*/net.example.bz2</span>を参照してください。もし特定のDHCPを設定しなければならないときは、DHCPクライアントのmanページも必ず読みましょう。
</p><p>もし、システムが複数のネットワークインターフェースを持っている場合は、<var>config_eth1</var>、<var>config_eth2</var>、…に対して上記の手順を繰り返してください。
</p><p>設定を保存し、エディタを終了しましょう。
</p>
<h3><span class="mw-headline" id=".E8.B5.B7.E5.8B.95.E6.99.82.E3.81.AB.E8.87.AA.E5.8B.95.E3.81.A7.E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E6.8E.A5.E7.B6.9A.E3.81.99.E3.82.8B">起動時に自動でネットワーク接続する</span></h3>
<p>ブート時にネットワークインターフェースを有効にする場合は、デフォルトランレベルにそれらを追加する必要があります。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /etc/init.d
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ln -s net.lo net.eth0
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add net.eth0 default</code></div></div>
<p>もし、複数のネットワークインターフェースがある場合は、<span style="font-family: monospace; font-size: 95%">net.eth0</span>と同じ方法で、適切な<span style="font-family: monospace; font-size: 95%">net.*</span>ファイルを作成しなければなりません。
</p><p>もし、ブート後、ネットワークインターフェース名（現在、このドキュメントでは<code>eth0</code>と記述）が間違っていた場合、次の手順で修正してください。
</p>
<ol><li> 正しいインターフェース名で<span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>ファイルを更新します。（例えば<code>eth0</code>を<code>enp3s0</code>と修正）</li>
<li> 新しいシンボリックリンクを作成。（例えば<span style="font-family: monospace; font-size: 95%">/etc/init.d/net.enp3s0</span>）</li>
<li> 古いシンボリックリンクを消去。（<span style="font-family: monospace; font-size: 95%; font-weight: bold;">rm /etc/init.d/net.eth0</span>）</li>
<li> 新しいスクリプトをデフォルトランレベルに追加。</li>
<li> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update del net.eth0 default</span>で古いスクリプトを消去。</li></ol>
<h3><span class="mw-headline" id="hosts.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB">hostsファイル</span></h3>
<p>次に、ネットワーク環境をLinuxに伝えます。これは<span style="font-family: monospace; font-size: 95%">/etc/hosts</span>に定義され、ネームサーバでは解決できないホストについて、ホスト名からIPアドレスを決められるようになります。 
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/hosts</code></div></div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/hosts</code></strong><strong>ネットワーク情報の記述</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre># 以下は本システムの定義です。必ず設定されなければなりません。
127.0.0.1     tux.homenetwork tux localhost
  
# ネットワーク上にあるその他のホストの定義です。任意設定です。
192.168.0.5   jenny.homenetwork jenny
192.168.0.6   benny.homenetwork benny
</pre></div></pre>
<p>設定をセーブし、エディタを終了しましょう。
</p>
<h3><span class="mw-headline" id=".E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_PCMCIA.E3.82.92.E6.A9.9F.E8.83.BD.E3.81.95.E3.81.9B.E3.82.8B">任意自由選択: PCMCIAを機能させる</span></h3>
<p>PCMCIAユーザーは、<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-apps/pcmciautils">sys-apps/pcmciautils</a>パッケージをインストールする必要があります。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-apps/pcmciautils</code></div></div> 
<h2><span class="mw-headline" id=".E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E6.83.85.E5.A0.B1">システム情報</span></h2>
<h3><span class="mw-headline" id="root.E3.83.91.E3.82.B9.E3.83.AF.E3.83.BC.E3.83.89">rootパスワード</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">passwd</span>コマンドでルートのパスワードを設定します。 
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd</code></div></div>
<p>ルートアカウントはとてもパワフルなアカウントなので、強いパスワードを与えてください。後で、日常の作業のための一般ユーザーアカウントを作成します。
</p>
<h3><span class="mw-headline" id="init.E3.81.A8boot.E8.A8.AD.E5.AE.9A">initとboot設定</span></h3>
<p>（少なくともOpenRCを使っているときは）Gentooは、システムのサービス、スタートアップ、シャットダウンの設定に<span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span>を使います。<span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span>を開いて、ファイル中のすべてのコメントを楽しみましょう。設定をレビューして、必要な箇所を変更してください。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/rc.conf</code></div></div>
<p>次に、キーボードを設定するために<span style="font-family: monospace; font-size: 95%">/etc/conf.d/keymaps</span>を開いて、正しいキーボードを選択、設定します。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/keymaps</code></div></div>
<p><var>keymap</var>変数に特に注意してください。もしキーマップを間違えた場合、キーボードを叩くたびに、奇妙な現象が起こるでしょう。
</p><p>最後に、クロック設定をするために<span style="font-family: monospace; font-size: 95%">/etc/conf.d/hwclock</span>を編集します。個々の好みに合わせて設定できます。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/hwclock</code></div></div>
<p>もし、ハードウェアクロックがUTCになっていない場合、このファイルに<code>clock="local"</code>を記述しなければなりません。そうでない場合、クロックスキューが発生するでしょう。
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Kernel/ja.html" title="Previous part" class="btn btn-default">&#8592; カーネルの設定</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Tools/ja.html" title="Next part" class="btn btn-default">ツールのインストール &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> インストール
</th></tr>
<tr>
<td> <a href="../../Installation/About/ja.html" title="Handbook:X86/Installation/About/ja">インストールについて</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ja.html" title="Handbook:X86/Installation/Media/ja">メディアの選択</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ja.html" title="Handbook:X86/Installation/Networking/ja">ネットワーク設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ja.html" title="Handbook:X86/Installation/Disks/ja">ディスクの準備</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ja.html" title="Handbook:X86/Installation/Stage/ja">stage3のインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ja.html" title="Handbook:X86/Installation/Base/ja">基本システムのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ja.html" title="Handbook:X86/Installation/Kernel/ja">カーネルの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ja.html" title="Handbook:X86/Installation/Tools/ja">ツールのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">締めくくり</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Gentooの操作
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portageについて</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ja.html" title="Handbook:X86/Working/USE/ja">USEフラグ</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ja.html" title="Handbook:X86/Working/Features/ja">Portageの機能</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ja.html" title="Handbook:X86/Working/Initscripts/ja">Initスクリプトシステム</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ja.html" title="Handbook:X86/Working/EnvVar/ja">環境変数</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Portageの操作
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ja.html" title="Handbook:X86/Portage/Files/ja">ファイルとディレクトリ</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ja.html" title="Handbook:X86/Portage/Variables/ja">変数</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ja.html" title="Handbook:X86/Portage/Branches/ja">ソフトウェアブランチの併用</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ja.html" title="Handbook:X86/Portage/Tools/ja">追加ツール</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ja.html" title="Handbook:X86/Portage/CustomTree/ja">カスタムPortageツリー</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ja.html" title="Handbook:X86/Portage/Advanced/ja">高度な機能</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> ネットワーク設定
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ja.html" title="Handbook:X86/Networking/Introduction/ja">はじめに</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ja.html" title="Handbook:X86/Networking/Advanced/ja">高度な設定</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ja.html" title="Handbook:X86/Networking/Modular/ja">モジュール式ネットワーク</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ja.html" title="Handbook:X86/Networking/Wireless/ja">無線</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ja.html" title="Handbook:X86/Networking/Extending/ja">機能の追加</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ja.html" title="Handbook:X86/Networking/Dynamic/ja">動的な管理</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.83.AD.E3.82.AC.E3.83.BC">システムロガー</span></h2>
<p>同じ機能が複数のパッケージによって提供されるツールがいくつかあります。そういったツールはstage3アーカイブには含まれていません。どのパッケージをインストールしたいのかをあなた次第で選んでください。
</p><p>まずシステムにロギング機能を提供するツールを決定しましょう。UnixとLinuxでは歴史をかけて素晴らしいログ機能を発展させてきました -- お望みならログファイルにシステムで起こった全てを記録できます。これはシステムロガーを使って行ないます。
</p><p>Gentooでは複数のシステムロガーから使いたいものを選択することができます。このうちのいくつかを紹介します。
</p>
<ul><li> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/sysklogd">app-admin/sysklogd</a>は、システムのログを取得するための伝統的なデーモンを集めたものです。</li>
<li> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/syslog-ng">app-admin/syslog-ng</a>は、進化したシステムロガーです。ログを開始するために追加の設定が必要です。</li>
<li> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/metalog">app-admin/metalog</a>は、高度な設定ができるシステムロガーです。</li></ul>
<p>Portageツリーにはまだまだ他の選択肢があることでしょう。日毎にPortageツリーのパッケージは増えていますから。
</p><p>もしsysklogdかsyslog-ngを使おうと思っているなら、これらのシステムログツールにはログファイルをローテーションする機構が無いので、後で<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/logrotate">app-admin/logrotate</a>をインストールしましょう。
</p><p>選択したシステムログツールをインストールするには、それをemergeして、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span>を使ってデフォルトのランレベルにスクリプトを追加してください。次の例では<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/syslog-ng">app-admin/syslog-ng</a>をインストールします。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-admin/syslog-ng</code></div></div> 
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add syslog-ng default</code></div></div>
<h2><span class="mw-headline" id=".E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_cron.E3.83.87.E3.83.BC.E3.83.A2.E3.83.B3">任意自由選択: cronデーモン</span></h2>
<p>次はcronデーモンです。cronデーモンは入れても入れなくてもよく、システムに必須ではありませんが、インストールしておくのが賢明でしょう。
</p><p>cronデーモンは予定されたコマンドを実行します。定期的(例えば日毎、週毎、月毎)にあるコマンドを実行する必要があるならとても重宝します。
</p><p>Gentooではいくつものcronデーモンを提供しています。例をあげると <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/bcron">sys-process/bcron</a>、<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/dcron">sys-process/dcron</a>、<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/fcron">sys-process/fcron</a>、そして<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/cronie">sys-process/cronie</a>です。その内の1つをインストールするのはシステムロガーをインストールするのに似ています。次の例は<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/cronie">sys-process/cronie</a>をインストールします。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-process/cronie</code></div></div> 
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add cronie default</code></div></div>
<p>dcronかfcronを使う場合、初期設定のための追加コマンドが必要です。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>crontab /etc/crontab</code></div></div>
<h2><span class="mw-headline" id=".E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.81.AE.E3.82.A4.E3.83.B3.E3.83.87.E3.83.83.E3.82.AF.E3.82.B9.E3.82.92.E4.BD.9C.E6.88.90">任意自由選択: ファイルのインデックスを作成</span></h2>
<p>より高速なファイル検索のためにファイルシステム中の各ファイルのインデックスを作成するときは、<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-apps/mlocate">sys-apps/mlocate</a>をインストールしてください。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-apps/mlocate</code></div></div> 
<h2><span class="mw-headline" id=".E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_.E3.83.AA.E3.83.A2.E3.83.BC.E3.83.88.E3.82.A2.E3.82.AF.E3.82.BB.E3.82.B9">任意自由選択: リモートアクセス</span></h2>
<p>インストール後、システムにリモートからアクセスできるようにするためには、<span style="font-family: monospace; font-size: 95%">sshd</span>をデフォルトのランレベルに追加してください。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add sshd default</code></div></div>
<p>(たとえばリモートサーバで)シリアルコンソールからアクセスしなければならない場合、<span style="font-family: monospace; font-size: 95%">/etc/inittab</span>のシリアルコンソールの部分のコメントを外します。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/inittab</code></div><pre>
# SERIAL CONSOLES
s0:12345:respawn:/sbin/agetty 9600 ttyS0 vt100
s1:12345:respawn:/sbin/agetty 9600 ttyS1 vt100
</pre></div>
<h2><span class="mw-headline" id=".E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.83.84.E3.83.BC.E3.83.AB">ファイルシステムツール</span></h2>
<p>使っているファイルシステムよって、(ファイルシステムの整合性をチェックしたり、追加のファイルシステムを作成する等のために)必須のファイルシステムツールをインストールする必要があります。ext2/ext3/ext4ファイルシステムを管理するためのツール(e2fsprogs)はシステムの一部としてインストール済みであることに注意してください。
</p><p>次の表は、ファイルシステム毎にどのツールをインストールすべきかを示します。
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col" width="20%"> ファイルシステム
</th>
<th> パッケージ
</th></tr>
<tr>
<td> XFS
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/xfsprogs">sys-fs/xfsprogs</a>
</td></tr>
<tr>
<td> ReiserFS
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/reiserfsprogs">sys-fs/reiserfsprogs</a>
</td></tr>
<tr>
<td> JFS
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/jfsutils">sys-fs/jfsutils</a>
</td></tr>
<tr>
<td> VFAT (FAT32, ...)
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/dosfstools">sys-fs/dosfstools</a>
</td></tr>
<tr>
<td> Btrfs
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/btrfs-progs">sys-fs/btrfs-progs</a>
</td></tr></table>
<h3><span class="mw-headline" id=".E3.83.8D.E3.83.83.E3.83.88.E3.83.AF.E3.83.BC.E3.82.AF.E3.83.84.E3.83.BC.E3.83.AB">ネットワークツール</span></h3>
<p>もし、追加のネットワークツールを必要としない場合、<a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダー</a>に進みましょう。
</p>
<h3><span class="mw-headline" id="DHCP.E3.82.AF.E3.83.A9.E3.82.A4.E3.82.A2.E3.83.B3.E3.83.88.E3.82.92.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB.E3.81.99.E3.82.8B">DHCPクライアントをインストールする</span></h3>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> 重要</strong><br />DHCPはあくまで任意選択ですが、多くのユーザはネットワークに接続するためにDHCPクライアントが必要になるでしょう。この機会にDHCPクライアントをインストールしましょう。もしこの設定を忘れた場合、ネットワークに接続できないことになり、これによりDHCPクライアントがダウンロードできなくなってしまいます。</div>
<p>netifrcスクリプトを使用して、一つ以上のネットワークに自動的にIPアドレスを付与するときは、DHCPクライアントをインストールする必要があります。Portageツリーには多くのDHCPクライアントがありますが、<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-misc/dhcpcd">net-misc/dhcpcd</a>がお薦めです。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask net-misc/dhcpcd</code></div></div> 
<p><a href="../../../Dhcpcd.html" title="Dhcpcd">dhcpcd article</a>に<span style="font-family: monospace; font-size: 95%; font-weight: bold;">dhcpcd</span>に関するより多くの情報があります。
</p>
<h3><span class="mw-headline" id=".E4.BB.BB.E6.84.8F.E8.87.AA.E7.94.B1.E9.81.B8.E6.8A.9E:_PPPoE.E3.82.AF.E3.83.A9.E3.82.A4.E3.82.A2.E3.83.B3.E3.83.88.E3.81.AE.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB">任意自由選択: PPPoEクライアントのインストール</span></h3>
<p>もしインターネットに接続するためにPPPを使うのであれば、<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-dialup/ppp">net-dialup/ppp</a>パッケージをインストールします。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask net-dialup/ppp</code></div></div> 
<p>次は<a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダー</a>です。
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/System/ja.html" title="Previous part" class="btn btn-default">&#8592; システムの設定</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Bootloader/ja.html" title="Next part" class="btn btn-default">ブートローダーの設定 &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> インストール
</th></tr>
<tr>
<td> <a href="../../Installation/About/ja.html" title="Handbook:X86/Installation/About/ja">インストールについて</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ja.html" title="Handbook:X86/Installation/Media/ja">メディアの選択</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ja.html" title="Handbook:X86/Installation/Networking/ja">ネットワーク設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ja.html" title="Handbook:X86/Installation/Disks/ja">ディスクの準備</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ja.html" title="Handbook:X86/Installation/Stage/ja">stage3のインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ja.html" title="Handbook:X86/Installation/Base/ja">基本システムのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ja.html" title="Handbook:X86/Installation/Kernel/ja">カーネルの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ja.html" title="Handbook:X86/Installation/Tools/ja">ツールのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">締めくくり</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Gentooの操作
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portageについて</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ja.html" title="Handbook:X86/Working/USE/ja">USEフラグ</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ja.html" title="Handbook:X86/Working/Features/ja">Portageの機能</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ja.html" title="Handbook:X86/Working/Initscripts/ja">Initスクリプトシステム</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ja.html" title="Handbook:X86/Working/EnvVar/ja">環境変数</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Portageの操作
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ja.html" title="Handbook:X86/Portage/Files/ja">ファイルとディレクトリ</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ja.html" title="Handbook:X86/Portage/Variables/ja">変数</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ja.html" title="Handbook:X86/Portage/Branches/ja">ソフトウェアブランチの併用</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ja.html" title="Handbook:X86/Portage/Tools/ja">追加ツール</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ja.html" title="Handbook:X86/Portage/CustomTree/ja">カスタムPortageツリー</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ja.html" title="Handbook:X86/Portage/Advanced/ja">高度な機能</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> ネットワーク設定
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ja.html" title="Handbook:X86/Networking/Introduction/ja">はじめに</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ja.html" title="Handbook:X86/Networking/Advanced/ja">高度な設定</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ja.html" title="Handbook:X86/Networking/Modular/ja">モジュール式ネットワーク</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ja.html" title="Handbook:X86/Networking/Wireless/ja">無線</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ja.html" title="Handbook:X86/Networking/Extending/ja">機能の追加</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ja.html" title="Handbook:X86/Networking/Dynamic/ja">動的な管理</a>
</td></tr></table>
<p><br />
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="Selecting_a_boot_loader">Selecting a boot loader</span></h2>
<p>With the Linux kernel configured, system tools installed and configuration files edited, it is time to install the last important piece of a Linux installation: the boot loader.
</p><p>The boot loader is responsible for firing up the Linux kernel upon boot - without it, the system would not know how to proceed when the power button has been pressed.
</p><p>For <b><span style="font-family: monospace; font-size: 95%; color: #54487a">x86</span></b>, we document how to configure either <a href="#Default:_Using_GRUB2">GRUB2</a> or <a href="#Alternative:_Using_LILO">LILO</a> for BIOS based systems, and <a href="#Default:_Using_GRUB2">GRUB2</a> or <a href="#Alternative:_Using_efibootmgr">efibootmgr</a> for UEFI systems.
</p>
<h2><span class="mw-headline" id="Default:_Using_GRUB2">Default: Using GRUB2</span></h2>
<p>Previously, Gentoo Linux used what is now called <i>GRUB Legacy</i> as the recommended boot loader. As the name implies, the older GRUB package is no longer actively maintained and has been superseded by GRUB2. For more information about the legacy GRUB, please refer to its <a href="../../../GRUB.html" title="GRUB">GRUB</a> article on the Gentoo Wiki.
</p>
<h3><span class="mw-headline" id="Installing_GRUB2">Installing GRUB2</span></h3>
<p>GRUB2 is provided through the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-boot/grub">sys-boot/grub</a> package.
</p>
<ul><li> When using BIOS:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/grub</code></div></div> </dd></dl>
<ul><li> When using UEFI, users will need to add <code>GRUB_PLATFORMS="efi-64"</code> to <span style="font-family: monospace; font-size: 95%">make.conf</span> <i>before</i> emerging GRUB2 so that the package will be built with EFI functionality:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>echo GRUB_PLATFORMS="efi-64" &gt;&gt; /etc/portage/make.conf</code></div></div></dd></dl>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/grub</code></div></div> </dd></dl>
<dl><dd> If GRUB2 was somehow emerged without first adding <code>GRUB_PLATFORMS="efi-64"</code> to <span style="font-family: monospace; font-size: 95%">make.conf</span> the line (as shown above) can be added then and dependencies for the <a href="../../../World_set_(Portage).html" title="World set (Portage)">world package set</a> re-calculated by passing the <code>--newuse --deep</code> options to <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge</span>:</dd></dl>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask&#160;--newuse --deep @world</code></div></div> </dd></dl>
<p>The GRUB2 software is now installed on the system, but not activated yet.
</p>
<h3><span class="mw-headline" id="Configuring_GRUB2">Configuring GRUB2</span></h3>
<p>Next, install the necessary GRUB2 files to the <span style="font-family: monospace; font-size: 95%">/boot/grub/</span> directory via the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-install</span> command. Presuming the first disk (the one where the system boots from) is <span style="font-family: monospace; font-size: 95%">/dev/sda</span>, one of the following commands will do:
</p>
<ul><li> When using BIOS:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>grub2-install /dev/sda</code></div></div></dd></dl>
<ul><li> When using UEFI:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>grub2-install --target=x86_64-efi --efi-directory=/boot</code></div></div></dd></dl>
<dl><dd> <div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Modify the efi-directory setting to the root of the vfat EFI System Partition. This necessary if the <span style="font-family: monospace; font-size: 95%">/boot</span> partition was not formatting as vfat.</div></dd></dl>
<dl><dd> <div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Important</strong><br />Make sure the EFI system partition has been mounted <i>before</i> running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-install</span>. It is possible for <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-install</span> to install the GRUB EFI file (<span style="font-family: monospace; font-size: 95%">grubx64.efi</span>) into the wrong directory <i>without</i> providing indication the wrong directory was used.</div></dd></dl>
<p>Next, generate the GRUB2 configuration based on the user configuration specified in the <span style="font-family: monospace; font-size: 95%">/etc/default/grub</span> file and <span style="font-family: monospace; font-size: 95%">/etc/grub.d</span> scripts. In most cases, no configuration is needed by users as GRUB2 will automatically detect which kernel to boot (the highest one available in <span style="font-family: monospace; font-size: 95%">/boot/</span>) and what the root file system is.
</p><p>To generate the final GRUB2 configuration, run the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-mkconfig</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>grub2-mkconfig -o /boot/grub/grub.cfg</code></div><pre>
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.16.5-gentoo
Found initrd image: /boot/initramfs-genkernel-x86-3.16.5-gentoo
done
</pre></div>
<p>The output of the command must mention that at least one Linux image is found, as those are needed to boot the system. If an initramfs is used or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> was used to build the kernel, the correct initrd image should be detected as well. If this is not the case, go to <span style="font-family: monospace; font-size: 95%">/boot/</span> and check the contents using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ls</span> command. If the files are indeed missing, go back to the kernel configuration and installation instructions.
</p>
<h2><span class="mw-headline" id="Alternative:_Using_LILO">Alternative: Using LILO</span></h2>
<h3><span class="mw-headline" id="Installing_LILO">Installing LILO</span></h3>
<p>LILO, the LInuxLOader, is the tried and true workhorse of Linux boot loaders. However, it lacks some features that GRUB has. The reason why LILO is still used is that, on some systems, GRUB doesn't work and LILO does. Of course, it is also used because some people know LILO and want to stick with it. Either way, Gentoo supports both.
</p><p>Installing LILO is a breeze; just use emerge.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/lilo</code></div></div> 
<h3><span class="mw-headline" id="Configuring_LILO">Configuring LILO</span></h3>
<p>To configure LILO, first create <span style="font-family: monospace; font-size: 95%">/etc/lilo.conf</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/lilo.conf</code></div></div>
<p>In the configuration file, sections are used to refer to the bootable kernel. Make sure that the kernel files (with kernel version) and initramfs files are known, as they need to be referred to in this configuration file.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If the root filesystem is JFS, add an <code>append="ro"</code> line after each boot item since JFS needs to replay its log before it allows read-write mounting.</div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/lilo.conf</code></strong><strong>Example LILO configuration</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
boot=/dev/sda             # Install LILO in the MBR
prompt                    # Give the user the chance to select another section
timeout=50                # Wait 5 (five) seconds before booting the default section
default=gentoo            # When the timeout has passed, boot the &quot;gentoo&quot; section
  
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo            # Name we give to this section
  read-only               # Start with a read-only root. Do not alter!
  root=/dev/sda4          # Location of the root filesystem
  
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo.rescue     # Name we give to this section
  read-only               # Start with a read-only root. Do not alter!
  root=/dev/sda4         # Location of the root filesystem
  append=&quot;init=/bin/bb&quot;   # Launch the Gentoo static rescue shell
  
# The next two lines are for dual booting with a Windows system.
# In this example, Windows is hosted on /dev/sda6.
other=/dev/sda6
  label=windows
</pre>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If a different partitioning scheme and/or kernel image is used, adjust accordingly.</div>
<p>If an initramfs is necessary, then change the configuration by referring to this initramfs file and telling the initramfs where the root device is located:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/lilo.conf</code></strong><strong>Adding initramfs information to a boot entry</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo
  read-only
  append=&quot;root=/dev/sda4&quot;
  initrd=/boot/initramfs-genkernel-x86-3.16.5-gentoo
</pre>
</pre></div></pre>
<p>If additional options need to be passed to the kernel, use an <code>append</code> statement. For instance, to add the <code>video</code> statement to enable framebuffer:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/lilo.conf</code></strong><strong>Adding video parameter to the boot options</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo
  read-only
  root=/dev/sda4
  append=&quot;video=uvesafb:mtrr,ywrap,1024x768-32@85&quot;
</pre>
</pre></div></pre>
<p>Users that used <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> should know that their kernels use the same boot options as is used for the installation CD. For instance, if SCSI device support needs to be enabled, add <code>doscsi</code> as kernel option.
</p><p>Now save the file and exit.
</p><p>To finish up, run <span style="font-family: monospace; font-size: 95%">/sbin/lilo</span> so LILO can apply the <span style="font-family: monospace; font-size: 95%">/etc/lilo.conf</span> settings to the system (I.E. install itself on the disk). Keep in mind that <span style="font-family: monospace; font-size: 95%">/sbin/lilo</span> must be executed each time a new kernel is installed or a change has been made to the <span style="font-family: monospace; font-size: 95%">lilo.conf</span> file in order for the system to boot if the filename of the kernel has changed.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/sbin/lilo</code></div></div>
<h2><span class="mw-headline" id="Alternative:_Using_efibootmgr">Alternative: Using efibootmgr</span></h2>
<p>On UEFI based systems, the boot loader itself is the UEFI firmware of the system. Such systems do not need additional boot loaders to help boot the system, although EFI-based bootloaders do exist to extend the functionality of UEFI systems during boot.
</p><p>The <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-boot/efibootmgr">sys-boot/efibootmgr</a> application is not a boot loader, but a tool to interact with the UEFI firmware and update its settings, so that the Linux kernel that was previously installed can be booted with additional options (if necessary), or to allow multiple boot entries. This interaction is done through the EFI variables (hence the need for the support of EFI vars in the past).
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />efibootmgr is <i>not</i> a requirement to boot from an UEFI system. The Linux kernel itself can (and will) be booted immediately, and additional boot options can be made part of the Linux kernel itself (there is a kernel configuration that allows the user to specify the boot parameters). Even an initramfs can be made part of the kernel itself.</div>
<p>First install the software:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/efibootmgr</code></div></div> 
<p>Next, tell the UEFI firmware that a boot entry called "Gentoo" is to be created, which has the freshly installed Linux kernel booted:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>efibootmgr --create --disk /dev/sda --part 2 --label "Gentoo" --loader "\efi\boot\bootx64.efi"</code></div></div>
<p>If an initial ram file system (initramfs) is used, add the proper boot option to it:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi" initrd='\initramfs-genkernel-x86-3.16.5-gentoo'</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The use of <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">\</kbd> as directory separator is mandatory when using EFI definitions.</div>
<p>With these changes done, when the system reboots, a boot entry called "Gentoo" will be available.
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id=".E3.82.B7.E3.82.B9.E3.83.86.E3.83.A0.E3.81.AE.E3.83.AA.E3.83.96.E3.83.BC.E3.83.88">システムのリブート</span></h2>
<p>chroot環境を出て、全てのパーティションをアンマウントします。次に、最終かつ真のテストを実行するためのマジカルコマンド<span style="font-family: monospace; font-size: 95%; font-weight: bold;">reboot</span>を入力しましょう。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>exit</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>cd
</code></div><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>umount -l /mnt/gentoo/dev{/shm,/pts,}
</code></div><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>umount /mnt/gentoo{/boot,/sys,/proc,}
</code></div><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>reboot</code></div></div>
<p>もちろん、ブートCDを取り出しておいてください。そうしないと新しいGentooではなく、再度CDをブートしてしまいます。
</p><p>新規にインストールされたGentooをリブートした後は、最終章<a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">インストールの締めくくり</a>に進みましょう。
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Tools/ja.html" title="Previous part" class="btn btn-default">&#8592; ツールのインストール</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Installation/Finalizing/ja.html" title="Next part" class="btn btn-default">インストールの締めくくり &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:X86/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Manual de Gentoo: X86/Todo/Instalación (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">日本語</span> • ‎<a href="ko.html" title="Handbook:X86/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:X86/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:X86/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：X86/全部/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> インストール
</th></tr>
<tr>
<td> <a href="../../Installation/About/ja.html" title="Handbook:X86/Installation/About/ja">インストールについて</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ja.html" title="Handbook:X86/Installation/Media/ja">メディアの選択</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ja.html" title="Handbook:X86/Installation/Networking/ja">ネットワーク設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ja.html" title="Handbook:X86/Installation/Disks/ja">ディスクの準備</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ja.html" title="Handbook:X86/Installation/Stage/ja">stage3のインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ja.html" title="Handbook:X86/Installation/Base/ja">基本システムのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ja.html" title="Handbook:X86/Installation/Kernel/ja">カーネルの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ja.html" title="Handbook:X86/Installation/System/ja">システムの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ja.html" title="Handbook:X86/Installation/Tools/ja">ツールのインストール</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ja.html" title="Handbook:X86/Installation/Bootloader/ja">ブートローダの設定</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ja.html" title="Handbook:X86/Installation/Finalizing/ja">締めくくり</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Gentooの操作
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portageについて</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ja.html" title="Handbook:X86/Working/USE/ja">USEフラグ</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ja.html" title="Handbook:X86/Working/Features/ja">Portageの機能</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ja.html" title="Handbook:X86/Working/Initscripts/ja">Initスクリプトシステム</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ja.html" title="Handbook:X86/Working/EnvVar/ja">環境変数</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Portageの操作
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ja.html" title="Handbook:X86/Portage/Files/ja">ファイルとディレクトリ</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ja.html" title="Handbook:X86/Portage/Variables/ja">変数</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ja.html" title="Handbook:X86/Portage/Branches/ja">ソフトウェアブランチの併用</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ja.html" title="Handbook:X86/Portage/Tools/ja">追加ツール</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ja.html" title="Handbook:X86/Portage/CustomTree/ja">カスタムPortageツリー</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ja.html" title="Handbook:X86/Portage/Advanced/ja">高度な機能</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> ネットワーク設定
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ja.html" title="Handbook:X86/Networking/Introduction/ja">はじめに</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ja.html" title="Handbook:X86/Networking/Advanced/ja">高度な設定</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ja.html" title="Handbook:X86/Networking/Modular/ja">モジュール式ネットワーク</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ja.html" title="Handbook:X86/Networking/Wireless/ja">無線</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ja.html" title="Handbook:X86/Networking/Extending/ja">機能の追加</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ja.html" title="Handbook:X86/Networking/Dynamic/ja">動的な管理</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".E3.83.A6.E3.83.BC.E3.82.B6.E3.83.BC.E7.AE.A1.E7.90.86">ユーザー管理</span></h2>
<h3><span class="mw-headline" id=".E6.AF.8E.E6.97.A5.E4.BD.BF.E7.94.A8.E3.81.99.E3.82.8B.E3.81.9F.E3.82.81.E3.81.AE.E3.83.A6.E3.83.BC.E3.82.B6.E3.82.92.E8.BF.BD.E5.8A.A0.E3.81.97.E3.81.BE.E3.81.99">毎日使用するためのユーザを追加します</span></h3>
<p>Unix/Linuxシステム上で、rootとして作業するのは危険であり、できるだけ避けるべきです。そのため、日々の使用のためのユーザーを追加することを強くお勧めします。
</p><p>グループは、そのグループに所属するメンバーができることを定義します。次の表はいくつかの重要なグループを示します。
</p>
<table class="table table-condensed table-striped" style="text-align: left; width: auto;">

<tr>
<th scope="col" width="25%"> グループ
</th>
<th scope="col" width="75%"> 説明
</th></tr>
<tr>
<td> audio
</td>
<td> オーディオデバイスにアクセスできます。
</td></tr>
<tr>
<td> cdrom
</td>
<td> 光学デバイスに直接アクセスできます。
</td></tr>
<tr>
<td> floppy
</td>
<td> フロッピーデバイスに直接アクセスできます。
</td></tr>
<tr>
<td> games
</td>
<td> ゲームができます。
</td></tr>
<tr>
<td> portage
</td>
<td> Portageの制限されたリソースにアクセスできます。
</td></tr>
<tr>
<td> usb
</td>
<td> USBデバイスにアクセスできます。
</td></tr>
<tr>
<td> video
</td>
<td> ビデオキャプチャのためのハードウェアにアクセスして、ハードウェアアクセラレーションを有効にできます。
</td></tr>
<tr>
<td> wheel
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">su</span>を使うことができます。
</td></tr></table>
<p>例えば<i>wheel</i>、<i>users</i>、<i>audio</i>の３グループに所属する<a href="../../../User_Larry.html" title="User:Larry">larry</a>というユーザを作成するには、最初にrootとしてログインし（rootだけがユーザを作ることができます）、<span style="font-family: monospace; font-size: 95%; font-weight: bold;">useradd</span>を実行します。
</p>
<div class="cmd-box"><div><code style="color: white; font-weight: bold;">Login:</code><span class="tripleclick-separator"></span><code>root</code></div><pre>
Password: (rootのパスワードを入力してください)
</pre></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>useradd -m -G users,wheel,audio -s /bin/bash larry
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd larry</code></div><pre>
Password: (larryのパスワードを入力してください)
Re-enter password: (確認のためにもう一度パスワードを入力してください)
</pre></div>
<p>もし、rootで何か作業をする場合は、一時的にroot権限を得るために<span style="font-family: monospace; font-size: 95%; font-weight: bold;">su -</span>を使います。別の方法は<a href="../../../Sudo.html" title="Sudo">sudo</a>パッケージを使用することです。これは（正しく設定されれば）とても安全です。
</p>
<h2><span class="mw-headline" id=".E3.83.87.E3.82.A3.E3.82.B9.E3.82.AF.E3.81.AE.E3.82.AF.E3.83.AA.E3.83.BC.E3.83.B3.E3.82.A2.E3.83.83.E3.83.97">ディスクのクリーンアップ</span></h2>
<h3><span class="mw-headline" id="tar.E3.83.95.E3.82.A1.E3.82.A4.E3.83.AB.E3.81.AE.E5.89.8A.E9.99.A4">tarファイルの削除</span></h3>
<p>Gentooのインストールおよびリブート完了後、かつインストールがすべてうまくいった場合、ダウンロードしたステージ3のtarファイルを削除できます。このファイルは<span style="font-family: monospace; font-size: 95%">/</span>ディレクトリにダウンロードされたことを思いだしましょう。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rm /stage3-*.tar.bz2*</code></div></div>
<h2><span class="mw-headline" id=".E6.AC.A1.E3.81.AB.E3.81.99.E3.82.8B.E3.81.93.E3.81.A8.E3.81.AF.EF.BC.9F">次にすることは？</span></h2>
<h3><span class="mw-headline" id=".E3.83.89.E3.82.AD.E3.83.A5.E3.83.A1.E3.83.B3.E3.83.88">ドキュメント</span></h3>
<p>次に何をしますか？どのような選択肢がありますか？どこを探索すればよいでしょう？Gentooには多くの可能性と共にユーザーが存在します。それゆえ多くのドキュメント化された機能を使うことができます（記述量は多くないのですが…）。
</p><p>あきらかに、Gentooハンドブックの<a href="../../Working/Portage/ja.html" title="Handbook:X86/Working/Portage/ja">Portage</a>を読むことは選択肢となります。これはソフトウェアをどのように最新の状態にしておくか、追加のソフトウェアをどのようにインストールするのか、USEフラグとは何か、Gentooのinitシステムはどのように動作するのか、等を説明しています。
</p><p>ハンドブック以外では、コミュニティから追加提供されるドキュメントを見つけるために、Gentoo Wikiの他のコーナーを探索したいと思うでしょう。Gentooドキュメンテーションチームは、<a href="../../../Project_Documentation/Overview.html" title="Project:Documentation/Overview">Documentation overview</a>を提案します。これはWikiの記事のよいセレクションを提供しています。例えば、システムをよりあなたの国に適したものとするためには、<a href="../../../Localization/Guide/ja.html" title="Localization/Guide/ja">ローカライゼーション/ガイド</a>を参照します。
</p>
<h3><span class="mw-headline" id="Gentoo.E3.82.AA.E3.83.B3.E3.83.A9.E3.82.A4.E3.83.B3">Gentooオンライン</span></h3>
<p>もちろん、私たちの<a rel="nofollow" class="external text" href="https://forums.gentoo.org/">Gentoo forums</a>や多くの<a rel="nofollow" class="external text" href="https://www.gentoo.org/get-involved/irc-channels/">Gentoo IRC channels</a>の一つに参加することはウェルカムです。
</p><p>すべてのユーザーに問いかけるために<a rel="nofollow" class="external text" href="https://www.gentoo.org/get-involved/mailing-lists/">several mailing lists</a>もあります。参加のための情報は上記に記載されています。
</p><p>インストールを楽しみましょう！ (^o^)/
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Bootloader/ja.html" title="Previous part" class="btn btn-default">&#8592; ブートローダーの設定</a> <a href="../../../Handbook_X86.html" title="Handbook:X86" class="btn btn-default">Home</a> <a href="../../Working/Portage/ja.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
<span class="error"><strong>Warning:</strong> Display title "Gentoo Linux x86 ハンドブック: Gentoo をインストールする" overrides earlier display title "ハンドブック:X86/フル/インストール".</span>
</p>
<!-- 
NewPP limit report
Cached time: 20160112143943
Cache expiry: 86400
Dynamic content: false
CPU time usage: 5.308 seconds
Real time usage: 5.630 seconds
Preprocessor visited node count: 24390/1000000
Preprocessor generated node count: 17295/1000000
Post‐expand include size: 1328649/2097152 bytes
Template argument size: 86881/2097152 bytes
Highest expansion depth: 17/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00% 3934.226      1 - Handbook:Parts/Full/Installation/ja
100.00% 3934.226      1 - -total
 32.35% 1272.596    137 - Template:RootCmd
 29.84% 1174.043    162 - Template:GenericCmd
 15.04%  591.831      1 - Handbook:X86/Installation/Disks/ja
 14.96%  588.389      1 - Handbook:Parts/Installation/Disks
 13.41%  527.644      7 - Handbook:Parts/TOC/ja
 11.82%  465.063      1 - Handbook:X86/Installation/Base/ja
 11.73%  461.595      1 - Handbook:Parts/Installation/Base
 11.19%  440.184      1 - Handbook:X86/Installation/Media/ja
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:91426-0!*!0!!en!*!* and timestamp 20160112143938 and revision id 374838
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Installation/ja&amp;oldid=374838">http://wiki.gentoo.org/index.php?title=Handbook:X86/Full/Installation/ja&amp;oldid=374838</a>"</div>
															<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../../../Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="https://wiki.gentoo.org/index.php?title=Category:Pages_using_duplicate_arguments_in_template_calls&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using duplicate arguments in template calls (page does not exist)">Pages using duplicate arguments in template calls</a></li></ul></div></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 25 September 2015, at 12:11.</li>
																															<li id="privacy"><a href="../../../Gentoo_Wiki_Privacy_policy.html" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="../../../Gentoo_Wiki_About.html" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="../../../Gentoo_Wiki_General_disclaimer.html" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "Handbook:X86/Full/Installation/ja"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="http://piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":5924});
} );</script></body>
<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:X86/Full/Installation/ja by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:36 GMT -->
</html>