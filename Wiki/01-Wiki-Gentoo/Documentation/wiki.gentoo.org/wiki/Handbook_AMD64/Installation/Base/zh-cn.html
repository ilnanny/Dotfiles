<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Base/zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:43:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Installing the Gentoo base system - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"Handbook","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":560,"wgPageName":"Handbook:AMD64/Installation/Base/zh-cn","wgTitle":"AMD64/Installation/Base/zh-cn","wgCurRevisionId":380244,"wgRevisionId":380244,"wgArticleId":76486,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"zh-cn","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"zh","wgMonthNames":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgMonthNamesShort":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgRelevantPageName":"Handbook:AMD64/Installation/Base/zh-cn","wgRelevantArticleId":76486,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],
"sfgAutocompleteOnAllChars":!1,"sfgFieldProperties":[],"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en","*"],"wgULSCurrentAutonym":"English","wgTranslatePageTranslation":"translation"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.translate","ext.smw.style","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.css" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="Handbook:AMD64/Installation/Base/zh-cn" href="https://wiki.gentoo.org/index.php?title=Special:ExportRDF/Handbook:AMD64/Installation/Base/zh-cn&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="https://wiki.gentoo.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.gentoo.org/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="https://wiki.gentoo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-560 ns-subject page-Handbook_AMD64_Installation_Base_zh-cn skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="https://wiki.gentoo.org/" title="Back to the homepage" class="site-logo"><object data="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.svg" type="image/svg+xml">
							<img src="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="../../../Special_MyLanguage/Help_Contents.html" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Gentoo.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="../../../Project_Gentoo.html">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Documentation.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="../../../Handbook_Main_Page.html">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="../../../FAQ.html">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="../../../Project_Documentation/Overview.html">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="../../../Category_Core_system.html">Core system</a></li><li id="n-Hardware"><a href="../../../Category_Hardware.html">Hardware</a></li><li id="n-Software"><a href="../../../Category_Software.html">Software</a></li><li id="n-Desktop"><a href="../../../Category_Desktop.html">Desktop</a></li><li id="n-Server-.26-Security"><a href="../../../Category_Server_and_Security.html">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="../../../Category_Project_and_Community.html">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="../../../Special_WhatLinksHere/Handbook_AMD64/Installation/Base/zh-cn.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../../Special_RecentChangesLinked/Handbook_AMD64/Installation/Base/zh-cn.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Installation/Base/zh-cn&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Installation/Base/zh-cn&amp;oldid=380244" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Installation/Base/zh-cn&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="../../../Special_Browse/Handbook_AMD64-2FInstallation-2FBase-2Fzh-2Dcn.html" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AAMD64%2FInstallation%2FBase%2Fzh-cn&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AAMD64%2FInstallation%2FBase%2Fzh-cn" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-handbook" class="selected active"><a href="zh-cn.html">Handbook</a></li><li id="ca-talk" class="new"><a href="https://wiki.gentoo.org/index.php?title=Handbook_Talk:AMD64/Installation/Base/zh-cn&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="https://wiki.gentoo.org/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Installation/Base/zh-cn&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Installation/Base/zh-cn&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="zh-CN">
							<span dir="auto">Installing the Gentoo base system</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages"><a href="../../../Special_MyLanguage/Handbook_AMD64.html" title="Special:MyLanguage/Handbook:AMD64">Handbook:AMD64</a> | <a href="../../../Special_MyLanguage/Handbook_AMD64/Installation.html" title="Special:MyLanguage/Handbook:AMD64/Installation">Installation</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="zh-CN" dir="ltr" class="mw-content-ltr"><div class="mw-translate-page-info" lang="en" dir="ltr">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.gentoo.org/index.php?title=Special:Translate&amp;group=page-Handbook%3AAMD64%2FInstallation%2FBase&amp;action=page&amp;filter=&amp;language=zh-cn">translated version</a></span> of the page <a href="../Base.html" title="Handbook:AMD64/Installation/Base">Handbook:AMD64/Installation/Base</a> and the translation is 100% complete.</div>
<hr /><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbook:AMD64/Installation/Base/de (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Base.html" title="Handbook:AMD64/Installation/Base (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Installation/Base/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Installation/Base/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="Handbook:AMD64/Installation/Base/ja (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Installation/Base/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Handbook:AMD64/Installation/Base/pt-br (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Installation/Base/ru (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</span></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 安装
</th></tr>
<tr>
<td> <a href="../About/zh-cn.html" title="Handbook:AMD64/Installation/About/zh-cn">关于安装</a>
</td></tr>
<tr>
<td> <a href="../Media/zh-cn.html" title="Handbook:AMD64/Installation/Media/zh-cn">选择安装媒介</a>
</td></tr>
<tr>
<td> <a href="../Networking/zh-cn.html" title="Handbook:AMD64/Installation/Networking/zh-cn">配置网络</a>
</td></tr>
<tr>
<td> <a href="../Disks/zh-cn.html" title="Handbook:AMD64/Installation/Disks/zh-cn">准备磁盘</a>
</td></tr>
<tr>
<td> <a href="../Stage/zh-cn.html" title="Handbook:AMD64/Installation/Stage/zh-cn">安装stage3</a>
</td></tr>
<tr>
<td> <strong class="selflink">安装基本系统</strong>
</td></tr>
<tr>
<td> <a href="../Kernel/zh-cn.html" title="Handbook:AMD64/Installation/Kernel/zh-cn">配置Linux内核</a>
</td></tr>
<tr>
<td> <a href="../System/zh-cn.html" title="Handbook:AMD64/Installation/System/zh-cn">配置系统</a>
</td></tr>
<tr>
<td> <a href="../Tools/zh-cn.html" title="Handbook:AMD64/Installation/Tools/zh-cn">安装系统工具</a>
</td></tr>
<tr>
<td> <a href="../Bootloader/zh-cn.html" title="Handbook:AMD64/Installation/Bootloader/zh-cn">配置系统引导程序Bootloader</a>
</td></tr>
<tr>
<td> <a href="../Finalizing/zh-cn.html" title="Handbook:AMD64/Installation/Finalizing/zh-cn">收尾安装工作</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 使用Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/zh-cn.html" title="Handbook:AMD64/Working/Portage/zh-cn">Portage介绍</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/zh-cn.html" title="Handbook:AMD64/Working/USE/zh-cn">USE标记</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/zh-cn.html" title="Handbook:AMD64/Working/Features/zh-cn">Portage功能特性</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/zh-cn.html" title="Handbook:AMD64/Working/Initscripts/zh-cn">初始化脚本（Initscript）系统</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/zh-cn.html" title="Handbook:AMD64/Working/EnvVar/zh-cn">环境变量</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 使用Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/zh-cn.html" title="Handbook:AMD64/Portage/Files/zh-cn">文件和目录</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/zh-cn.html" title="Handbook:AMD64/Portage/Variables/zh-cn">变量</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/zh-cn.html" title="Handbook:AMD64/Portage/Branches/zh-cn">混合使用不同的软件分支</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/zh-cn.html" title="Handbook:AMD64/Portage/Tools/zh-cn">额外的工具</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/zh-cn.html" title="Handbook:AMD64/Portage/CustomTree/zh-cn">定制Portage树</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/zh-cn.html" title="Handbook:AMD64/Portage/Advanced/zh-cn">高级特性</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> 网络配置
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/zh-cn.html" title="Handbook:AMD64/Networking/Introduction/zh-cn">入门</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/zh-cn.html" title="Handbook:AMD64/Networking/Advanced/zh-cn">高级配置</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/zh-cn.html" title="Handbook:AMD64/Networking/Modular/zh-cn">模块化网络</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/zh-cn.html" title="Handbook:AMD64/Networking/Wireless/zh-cn">无线</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/zh-cn.html" title="Handbook:AMD64/Networking/Extending/zh-cn">添加功能</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/zh-cn.html" title="Handbook:AMD64/Networking/Dynamic/zh-cn">动态管理</a>
</td></tr></table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Chrooting"><span class="tocnumber">1</span> <span class="toctext">Chrooting</span></a>
<ul>
<li class="toclevel-2"><a href="#.E5.8F.AF.E9.80.89.EF.BC.9A.E9.80.89.E6.8B.A9.E5.A2.83.E5.83.8F.E7.AB.99.E7.82.B9"><span class="tocnumber">1.1</span> <span class="toctext">可选：选择境像站点</span></a></li>
<li class="toclevel-2"><a href="#.E5.A4.8D.E5.88.B6DNS.E4.BF.A1.E6.81.AF"><span class="tocnumber">1.2</span> <span class="toctext">复制DNS信息</span></a></li>
<li class="toclevel-2"><a href="#.E6.8C.82.E8.BD.BD.E5.BF.85.E8.A6.81.E7.9A.84.E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F"><span class="tocnumber">1.3</span> <span class="toctext">挂载必要的文件系统</span></a></li>
<li class="toclevel-2"><a href="#.E8.BF.9B.E5.85.A5.E6.96.B0.E7.8E.AF.E5.A2.83"><span class="tocnumber">1.4</span> <span class="toctext">进入新环境</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E9.85.8D.E7.BD.AEPortage"><span class="tocnumber">2</span> <span class="toctext">配置Portage</span></a>
<ul>
<li class="toclevel-2"><a href="#.E5.AE.89.E8.A3.85Portage.E5.BF.AB.E7.85.A7"><span class="tocnumber">2.1</span> <span class="toctext">安装Portage快照</span></a></li>
<li class="toclevel-2"><a href="#.E5.8F.AF.E9.80.89.EF.BC.9A.E6.9B.B4.E6.96.B0Portage.E6.A0.91"><span class="tocnumber">2.2</span> <span class="toctext">可选：更新Portage树</span></a></li>
<li class="toclevel-2"><a href="#.E9.98.85.E8.AF.BB.E6.96.B0.E9.97.BB.E6.9D.A1.E7.9B.AE"><span class="tocnumber">2.3</span> <span class="toctext">阅读新闻条目</span></a></li>
<li class="toclevel-2"><a href="#.E9.80.89.E6.8B.A9.E6.AD.A3.E7.A1.AE.E7.9A.84.E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6"><span class="tocnumber">2.4</span> <span class="toctext">选择正确的配置文件</span></a></li>
<li class="toclevel-2"><a href="#.E9.85.8D.E7.BD.AEUSE.E5.8F.98.E9.87.8F"><span class="tocnumber">2.5</span> <span class="toctext">配置USE变量</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E5.8F.AF.E9.80.89.EF.BC.9A.E4.BD.BF.E7.94.A8systemd"><span class="tocnumber">3</span> <span class="toctext">可选：使用systemd</span></a></li>
<li class="toclevel-1"><a href="#.E6.97.B6.E5.8C.BA"><span class="tocnumber">4</span> <span class="toctext">时区</span></a></li>
<li class="toclevel-1"><a href="#.E9.85.8D.E7.BD.AE.E5.9C.B0.E5.8C.BA"><span class="tocnumber">5</span> <span class="toctext">配置地区</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Chrooting">Chrooting</span></h2>
<h3><span class="mw-headline" id=".E5.8F.AF.E9.80.89.EF.BC.9A.E9.80.89.E6.8B.A9.E5.A2.83.E5.83.8F.E7.AB.99.E7.82.B9">可选：选择境像站点</span></h3>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> 警告</strong><br /><a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/mirrorselect">app-portage/mirrorselect</a>程序还没有更新到处理修改后的chroot目标文件<span style="font-family: monospace; font-size: 95%">repos.conf/gentoo.conf</span>。同时，<span style="font-family: monospace; font-size: 95%">make.conf</span>中的<var>SYNC</var>变量已过时并且不再用于Portage。这个小节需要更新，请暂时跳过……</div>
<p>为了能更快的下载源代码，这里推荐选择一个快的镜像。Portage将会在<span style="font-family: monospace; font-size: 95%">make.conf</span>文件中查找<var>GENTOO_MIRRORS</var>变量，并使用其中所列的镜像。可以通过浏览Gentoo镜像列表搜索一个（或一组）最接近系统物理位置（往往那是最快的）的镜像。另外，我们提供一个叫作<span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span>的好工具，它为用户选择所需镜像提供了一个很好的交换。只需要移动光标选择镜像并按<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Spacebar</kbd>选择一个或多个镜像。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>第二个重要设置是<span style="font-family: monospace; font-size: 95%">make.conf</span>中设定的<var>SYNC</var>。这个变量包含了用于更新Portage树（ebuilds的集合以及包括所有Portage下载和安装所需要的全部信息的文件）的rsync服务器。再说一次，可以手动输入一个<var>SYNC</var> 服务器，同时<span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span>可以使此操作很容易：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mirrorselect -i -r -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>建议在运行完<span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span>后再检查一遍<span style="font-family: monospace; font-size: 95%">/mnt/gentoo/etc/portage/make.conf</span> 中的设置！
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 附注</strong><br />当在<span style="font-family: monospace; font-size: 95%">make.conf</span>中手动选择一个<var>SYNC</var>服务器时，在社区镜像列表中找到离你最近的镜像。建议选择一个轮询链接，比如rsync.us.gentoo.org而非选择单一镜像。这将帮助分担负载并可以一个特定的镜像离线时实现故障安全。</div>
<h3><span class="mw-headline" id=".E5.A4.8D.E5.88.B6DNS.E4.BF.A1.E6.81.AF">复制DNS信息</span></h3>
<p>在进行新环境之前，还有一件要做的事情就是复制<span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>中的DNS信息。需要完成这个来确保即使进入到新环境后网络仍然可以使用。<span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>包含着当前网络中的DNS服务器。
</p><p>为了复制这个信息，建议使用<span style="font-family: monospace; font-size: 95%; font-weight: bold;">cp</span>命令的<code>-L</code>选项。这可以保障如果<span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>是一个符号链接的话，复制的是那个目标文件而不是这个符号文件自己。否则在新环境中，符号文件将指向一个不存在的文件（因为链接目标非常可能不会在新环境中）。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cp -L /etc/resolv.conf /mnt/gentoo/etc/</code></div></div>
<h3><span class="mw-headline" id=".E6.8C.82.E8.BD.BD.E5.BF.85.E8.A6.81.E7.9A.84.E6.96.87.E4.BB.B6.E7.B3.BB.E7.BB.9F">挂载必要的文件系统</span></h3>
<p>稍等片刻，Linux的根将变更到新的位置。为了确保新环境正常工作，需要确保一些文件系统可以正常使用。
</p><p>需要提供的文件系统是：
</p>
<ul><li> <span style="font-family: monospace; font-size: 95%">/proc/</span> 一个pseudo文件系统（看起来像是常规文件，事实上却是实时生成的），由Linux内核暴露的一些环境信息</li>
<li> <span style="font-family: monospace; font-size: 95%">/sys/</span> 一个pseudo文件系统，像要被取代的<span style="font-family: monospace; font-size: 95%">/proc/</span>一样，比<span style="font-family: monospace; font-size: 95%">/proc/</span>更加有结构</li>
<li> <span style="font-family: monospace; font-size: 95%">/dev/</span> 是一个包含全部设备文件的常规文件系统，一部分由Linux设备管理器（通常是<span style="font-family: monospace; font-size: 95%; font-weight: bold;">udev</span>）管理</li></ul>
<p><span style="font-family: monospace; font-size: 95%">/proc/</span>位置将要挂载到<span style="font-family: monospace; font-size: 95%">/mnt/gentoo/proc/</span>，而其它的两个都是绑定挂载。字面上的意思是，例如<span style="font-family: monospace; font-size: 95%">/mnt/gentoo/sys/</span>事实上<i>就是</i><span style="font-family: monospace; font-size: 95%">/sys/</span>（它只是同一个文件系统的第二个条目点），而<span style="font-family: monospace; font-size: 95%">/mnt/gentoo/proc/</span>是（可以说是）文件系统的一个新的挂载。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount -t proc proc /mnt/gentoo/proc
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --rbind /sys /mnt/gentoo/sys
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --make-rslave /mnt/gentoo/sys
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --rbind /dev /mnt/gentoo/dev
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --make-rslave /mnt/gentoo/dev</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 附注</strong><br /><code>--make-rslave</code>操作是稍后安装systemd支持时所需要的。</div>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> 警告</strong><br />当使用非Gentoo安装媒介时，这时可能还不算完。一些发行版将<span style="font-family: monospace; font-size: 95%">/dev/shm</span>符号链接到<span style="font-family: monospace; font-size: 95%">/run/shm/</span>，在chroot后将变得不可用。为了让<span style="font-family: monospace; font-size: 95%">/dev/shm/</span>是一个正常挂载的tmpfs，可以如此修复：
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rm /dev/shm &amp;&amp; mkdir /dev/shm
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount -t tmpfs -o nosuid,nodev,noexec shm /dev/shm</code></div></div>
<p>同时确保设置了1777模式
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code> chmod 1777 /dev/shm</code></div></div>
</div>
<h3><span class="mw-headline" id=".E8.BF.9B.E5.85.A5.E6.96.B0.E7.8E.AF.E5.A2.83">进入新环境</span></h3>
<p>现在所有的分区已经初始化，并且基础环境已经安装，是时候进入到新的安装环境了。这意思着会话将把根（所能访问到的最顶层位置）从当前的安装环境（安装CD或其他安装媒介）变为安装系统（叫做初始化分区）。因此叫作<i>change root</i>或<i>chroot</i>。
</p><p>完成chroot有三个步骤：
</p>
<ol><li> 使用chroot将根位置从<span style="font-family: monospace; font-size: 95%">/</span>（在安装媒介里）更改成<span style="font-family: monospace; font-size: 95%">/mnt/gentoo/</span>（在分区里）</li>
<li> 使用<span style="font-family: monospace; font-size: 95%; font-weight: bold;">source</span>命令将一些设置（那些在<span style="font-family: monospace; font-size: 95%">/etc/profile</span>中的）重新载入到内存中</li>
<li> 更改主提示符来帮助我们记住当前会话在一个chroot环境里面。</li></ol>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>chroot /mnt/gentoo /bin/bash
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>source /etc/profile
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export PS1="(chroot) $PS1"</code></div></div>
<p>从现在开始，所有的动作将立即在新Gentoo Linux环境里生效。当然这离完成还很远，因为安装还剩下很多章节 ：-）
</p>
<h2><span class="mw-headline" id=".E9.85.8D.E7.BD.AEPortage">配置Portage</span></h2>
<h3><span class="mw-headline" id=".E5.AE.89.E8.A3.85Portage.E5.BF.AB.E7.85.A7">安装Portage快照</span></h3>
<p>接下来，是安装Portage快照，一个用来告诉Portage哪些软件标题可用于安装、哪些配置文件可以由管理员选择等等的文件集合。
</p><p>建议使用<span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span>。这将从Gentoo的一介镜像中得到最新的Portage快照（Gentoo每天发布一个基准）并安装到系统中。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge-webrsync</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 附注</strong><br />在这个操作中，<span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span>可能会报找不到<span style="font-family: monospace; font-size: 95%">/usr/portage/</span>位置。这是预期内的并且不用担心——这个工具将会创建这个位置。</div>
<p>从现在开始，Portage可能会提示建议运行某些更新。这是因为在安装了一个新的Portage快照后，Portage发现了stage3文件中已经安装的某些软件有了更新的版本。现在可以安全的忽略它；当Gentoo安装完成后可以重新触发更新。
</p>
<h3><span class="mw-headline" id=".E5.8F.AF.E9.80.89.EF.BC.9A.E6.9B.B4.E6.96.B0Portage.E6.A0.91">可选：更新Portage树</span></h3>
<p>Portage树可以更新到最新版本。前面的<span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span>命令将安装一个最近的Portage快照（通常是24小时以内），所以这一步是可选的。
</p><p>假设需要最新更新的包（1小时以内），可以使用<span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --sync</span>。这和s命令将使用rsync协议来更新Portage树（之前通过<span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span>获得的）到最新状态。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync</code></div></div>
<p>在慢速的终端上，比如一些framebuffer或者串口控制台，建议使用<code>--quiet</code>选项来加速这个进程：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync --quiet</code></div></div>
<h3><span class="mw-headline" id=".E9.98.85.E8.AF.BB.E6.96.B0.E9.97.BB.E6.9D.A1.E7.9B.AE">阅读新闻条目</span></h3>
<p>当同步Portage树到系统时，它可能警告用户一条类似于下面的信息：
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage通知用户关于新闻条目</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre> * IMPORTANT: 2 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.
</pre></div></pre></div>
<p>Portage新闻条目的创建是为了提供一个通信媒介，通过rsycn树来推送重要的消息给用户。要管理它们，使用<span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect news</span>。<span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span>应用程序是一个Gentoo应用程序，它允许一个通用的管理界面完成对系统的变更和操作。在这里，要用到<span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span>的<code>news</code>模块。
</p><p>对于<code>news</code>模块，最常用的有三个操作：
</p>
<ul><li> 使用<code>list</code>显示一个可用新闻条目的预览。</li>
<li> 使用<code>read</code>来阅读新闻条目。</li>
<li> 使用<code>purge</code>将在新闻条目阅读后删除，并且不能再次阅读。</li></ul>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect news list
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect news read</code></div></div>
<p>更多关于新闻阅读器的信息可以通过其手册页查看: 
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>man news.eselect</code></div></div>
<h3><span class="mw-headline" id=".E9.80.89.E6.8B.A9.E6.AD.A3.E7.A1.AE.E7.9A.84.E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6">选择正确的配置文件</span></h3>
<p><i>配置文件</i>是任何一个Gentoo系统的积木。它不仅指定<var>USE</var>、<var>CFLAGS</var>和其它重要变量的默认值，还会锁定系统的包版本范围。这些全是由Gentoo开发者们来维护。
</p><p>使用<span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span>，你能看到当前系统正在使用什么配置文件，现在来使用<code>profile</code>模块：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile list</code></div><pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0 *
  [2]   default/linux/amd64/13.0/desktop
  [3]   default/linux/amd64/13.0/desktop/gnome
  [4]   default/linux/amd64/13.0/desktop/kde
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 附注</strong><br />命令的这个输出只是一个示例，并会随时间演变。</div>
<p>可以看到，一些架构还会有桌面的子配置文件。
</p><p>在看完amd64框架的可用配置文件之后，用户可以键入以下命令选择一个不同的配置文件来使用：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile set 2</code></div></div>
<p><br />
</p><p>要选择一个没有32位应用程序或类库的纯64位环境，需使用一个非multilib的配置文件：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile list</code></div><pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0 *
  [2]   default/linux/amd64/13.0/desktop
  [3]   default/linux/amd64/13.0/desktop/gnome
  [4]   default/linux/amd64/13.0/desktop/kde
  [5]   default/linux/amd64/13.0/no-multilib
</pre></div>
<p>接下来选择<i>no-multilib</i>配置文件：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile set 5
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile list</code></div><pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/desktop
  [3]   default/linux/amd64/13.0/desktop/gnome
  [4]   default/linux/amd64/13.0/desktop/kde
  [5]   default/linux/amd64/13.0/no-multilib *
</pre></div>
<p><br />
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 附注</strong><br />开发者子配置文件是专用于Gentoo Linux开发，也就是说不是用于常规用户。</div>
<h3><span class="mw-headline" id=".E9.85.8D.E7.BD.AEUSE.E5.8F.98.E9.87.8F">配置USE变量</span></h3>
<p><var>USE</var>是Gentoo为用户提供的最具威力的变量之一。很多程序通过它可以选择编译或者不编译某些可选的支持。例如，一些程序可以在编译时加入对gtk或是对qt的支持。其它的程序可以在编译时加入或不加入对于SLL的支持。有些程序甚至可以在编译时加入对framebuffer的支持（svgalib）以取代X11（X服务器）。
</p><p>大多数的发行版会使用尽可能多的支持特性编译它们的软件包，这既增加了软件的大小也减慢了启动时间，而这些还没有算上可能会涉及到的大量依赖性问题。Gentoo可以让你自己定义软件编译的选项，而这正是<var>USE</var>要做的事。
</p><p>在<var>USE</var>变量里你可以定义关键字，它被用来对应相应的编译选项。例如，<code>ssl</code>将会把ssl支持编译到程序中以支持它。<code>-X</code>会移除其对于X服务器的支持（注意前面的减号）。<code>gnome gtk -kde -qt4</code>将会以支持GNOME（和GTK）但不支持KDE（和Qt）的方式编译软件，使系统为GNOME做完全调整（如果架构支持）。
</p><p>默认的USE设置全放在了系统所使用的Gentoo配置文件的<span style="font-family: monospace; font-size: 95%">make.defaults</span>文件中。Gentoo对它的配置文件们使用了一个（复杂的）继承系统，在这个阶段我们不去深入。最简单的检查当前活动的<var>USE</var>标记的办法是运行<span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --info</span>并选择以USE开头的那一行：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --info | grep ^USE</code></div><pre>
USE=&quot;X acl alsa amd64 berkdb bindist bzip2 cli cracklib crypt cxx dri ...&quot;
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> 附注</strong><br />上面的示例被截断了，实际上的<var>USE</var>列表值是非常非常多的。</div>
<p>可以在系统的<span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/use.desc</span>中找到可用的USE标记的完整描述。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>less /usr/portage/profiles/use.desc</code></div></div>
<p>在<span style="font-family: monospace; font-size: 95%; font-weight: bold;">less</span>命令中，可以通过使用<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">↑</kbd>和<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">↓</kbd>键来滚动，并且可以按<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">q</kbd>退出。
</p><p>作为示例，我们展示一个支持DVD、ALSA以及CD录制的基于KDE系统的USE设置：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/portage/make.conf</code></div></div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>为支持DVD、ALSA和CD录制的基于KDE系统启用USE</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-gtk -gnome qt4 kde dvd alsa cdr&quot;</span>
</pre></div></pre>
<p>当<var>USE</var>在<span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>中定义，会从那个默认列表中<i>添加</i>（或者<i>移除</i>，如果USE标记以<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">-</kbd>号开头的话）。用户想忽略所有默认的USE设置并完全由自己管理的话，应该在<span style="font-family: monospace; font-size: 95%">make.conf</span>中定义<var>USE</var>以<code>-*</code>开头：
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>忽略默认USE标记</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-* X acl alsa ...&quot;</span>
</pre></div></pre>
<h2><span class="mw-headline" id=".E5.8F.AF.E9.80.89.EF.BC.9A.E4.BD.BF.E7.94.A8systemd">可选：使用systemd</span></h2>
<p>Gentoo手册其余的地方专注于OpenRC作为默认的初始支持系统。如果想替换为systemd，或者你计划使用Gnome 3.8及更高版本（必须要systemd）, 请参考<a href="../../../Systemd.html" title="Systemd">systemd</a>页面里面详细阐述了不同的配置设置和方法。
</p><p>Gentoo手册可以参考那个页面继续使用。
</p>
<h2><span class="mw-headline" id=".E6.97.B6.E5.8C.BA">时区</span></h2>
<p>为系统选择时区。在<span style="font-family: monospace; font-size: 95%">/usr/share/zoneinfo/</span>中查找可用的时区，然后写进<span style="font-family: monospace; font-size: 95%">/etc/timezone</span>文件。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /usr/share/zoneinfo</code></div></div>
<p>假设要选择的时区是<i>Asia/Shanghai</i>：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>echo "Asia/Shanghai" &gt; /etc/timezone</code></div></div>
<p>请避免使用<span style="font-family: monospace; font-size: 95%">/usr/share/zoneinfo/Etc/GMT*</span>时区，它们的名字并不意味着想要的时区。例如，<span style="font-family: monospace; font-size: 95%">GMT-8</span>实际上是<span style="font-family: monospace; font-size: 95%">GMT+8</span>。
</p><p>接下来，重新配置<a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-libs/timezone-data">sys-libs/timezone-data</a>包，将会为我们基于<span style="font-family: monospace; font-size: 95%">/etc/timezone</span>条目更新<span style="font-family: monospace; font-size: 95%">/etc/localtime</span>文件。<span style="font-family: monospace; font-size: 95%">/etc/localtime</span>文件用于让系统的C类库知道系统在什么时区。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --config sys-libs/timezone-data</code></div></div>
<h2><span class="mw-headline" id=".E9.85.8D.E7.BD.AE.E5.9C.B0.E5.8C.BA">配置地区</span></h2>
<p>大多数用户只想在他们的系统上使用一或两个地区。
</p><p>地区不只是指定系统应该使用的与系统进行交互的语言，同时也指定了字符串排序，日期和时间的显示等规则。 
</p><p>系统应该支持的地区应该在<span style="font-family: monospace; font-size: 95%">/etc/locale.gen</span>中提到。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/locale.gen</code></div></div>
<p>下面的地区是一个示例，展示了同时使用英语（美国）和中文（中国）及附加字符格式（如UTF-8）。
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/locale.gen</code></strong><strong>启用US和CN地区及附加字符格式</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>en_US ISO-8859-1
en_US.UTF-8 UTF-8
zh_CN GBK
zh_CN.UTF-8 UTF-8
</pre></div></pre>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> 警告</strong><br />我们强烈建议使用至少一个UTF-8格式的地区设置，因为有些应用程序可能需要它。</div>
<p>下一步是运行<span style="font-family: monospace; font-size: 95%; font-weight: bold;">locale-gen</span>。它将生成<span style="font-family: monospace; font-size: 95%">/etc/locale.gen</span>文件中指定的所有地区。
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>locale-gen</code></div></div>
<p>要验证所选择的地区当前可用，运行<span style="font-family: monospace; font-size: 95%; font-weight: bold;">locale -a</span>。
</p><p>等完成后，我们就来设定系统级别的区域设置。我们又一次使用<span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span>来做这件事，现在使用<code>locale</code>模块。
</p><p>通过<span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect locale list</span>可显示可用的目标：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect locale list</code></div><pre>
Available targets for the LANG variable:
  [1]   C
  [2]   en_US
  [3]   en_US.iso88591
  [4]   en_US.utf8
  [5]   POSIX
  [6]   zh_CN
  [7]   zh_CN.gbk
  [8]   zh_CN.utf8
  [ ]   (free form)
</pre></div>
<p>通过<span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect locale set VALUE</span>可以设定正确的地区：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect locale set 8</code></div></div>
<p>这个还可以通过人工编辑<span style="font-family: monospace; font-size: 95%">/etc/env.d/02locale</span>文件来完成：
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/env.d/02locale</code></strong><strong>手动设置系统地区定义</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">LANG</span><span class="o">=</span><span class="s2">&quot;zh_CN.UTF-8&quot;</span>
</pre></div></pre>
<p>确保设定了一个地区，不然系统会在后面安装中的内核编译和部署其他软件时显示警告和错误。
</p><p>现在重新加载环境：
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>env-update &amp;&amp; source /etc/profile</code></div></div>
<p>为了帮助指导用户完成此过程。我们制作了完整的<a href="../../../Localization/Guide.html" title="Localization/Guide">本地化指南</a>。另一个有意思的文章是为系统启用UTF-8的具体信息的<a href="../../../UTF-8.html" title="UTF-8">UTF-8</a>指南。
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../Stage/zh-cn.html" title="Previous part" class="btn btn-default">&#8592; Installing Stage3</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../Kernel/zh-cn.html" title="Next part" class="btn btn-default">Configuring the kernel &#8594;</a></div>
<p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20160112154027
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.692 seconds
Real time usage: 0.739 seconds
Preprocessor visited node count: 3743/1000000
Preprocessor generated node count: 3982/1000000
Post‐expand include size: 97697/2097152 bytes
Template argument size: 14038/2097152 bytes
Highest expansion depth: 15/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  586.509      1 - -total
 97.24%  570.301      1 - Handbook:Parts/Installation/Base/zh-cn
 41.20%  241.649     27 - Template:RootCmd
 35.04%  205.525     27 - Template:GenericCmd
 24.18%  141.833      1 - Handbook:Parts/TOC/zh-cn
  7.07%   41.457     36 - Template:GenericCmd/Line
  6.71%   39.375      3 - Template:Warning/zh-cn
  5.95%   34.919      3 - Template:Warning/core
  3.51%   20.606      5 - Template:PreBox
  3.40%   19.953      1 - Handbook:AMD64/Blocks/ProfileChoice/zh-cn
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:76486-0!*!0!!en!*!* and timestamp 20160112154026 and revision id 380244
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=Handbook:AMD64/Installation/Base/zh-cn&amp;oldid=380244">http://wiki.gentoo.org/index.php?title=Handbook:AMD64/Installation/Base/zh-cn&amp;oldid=380244</a>"</div>
															<div id='catlinks' class='catlinks catlinks-allhidden'></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 3 October 2015, at 05:20.</li>
																															<li id="privacy"><a href="../../../Gentoo_Wiki_Privacy_policy.html" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="../../../Gentoo_Wiki_About.html" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="../../../Gentoo_Wiki_General_disclaimer.html" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "Handbook:AMD64/Installation/Base/zh-cn"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="http://piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":929});
} );</script></body>
<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Base/zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:43:40 GMT -->
</html>