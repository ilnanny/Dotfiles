<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:AMD64/Full/Working/ru by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Настольная книга Gentoo Linux amd64: Работа с Gentoo - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"Handbook","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":560,"wgPageName":"Handbook:AMD64/Full/Working/ru","wgTitle":"AMD64/Full/Working/ru","wgCurRevisionId":191064,"wgRevisionId":191064,"wgArticleId":77406,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"ru","wgPageContentModel":"wikitext","wgSeparatorTransformTable":[",\t."," \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],"wgMonthNamesShort":["","янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],"wgRelevantPageName":"Handbook:AMD64/Full/Working/ru","wgRelevantArticleId":77406,"wgIsProbablyEditable":!1,
"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],"sfgAutocompleteOnAllChars":!1,"sfgFieldProperties":[],"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en","*"],"wgULSCurrentAutonym":"English","wgTranslatePageTranslation":"translation"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.translate","ext.smw.style","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.css" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="Handbook:AMD64/Full/Working/ru" href="https://wiki.gentoo.org/index.php?title=Special:ExportRDF/Handbook:AMD64/Full/Working/ru&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="https://wiki.gentoo.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.gentoo.org/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="https://wiki.gentoo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-560 ns-subject page-Handbook_AMD64_Full_Working_ru skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="https://wiki.gentoo.org/" title="Back to the homepage" class="site-logo"><object data="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.svg" type="image/svg+xml">
							<img src="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="../../../Special_MyLanguage/Help_Contents.html" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Gentoo.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="../../../Project_Gentoo.html">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Documentation.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="../../../Handbook_Main_Page.html">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="../../../FAQ.html">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="../../../Project_Documentation/Overview.html">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="../../../Category_Core_system.html">Core system</a></li><li id="n-Hardware"><a href="../../../Category_Hardware.html">Hardware</a></li><li id="n-Software"><a href="../../../Category_Software.html">Software</a></li><li id="n-Desktop"><a href="../../../Category_Desktop.html">Desktop</a></li><li id="n-Server-.26-Security"><a href="../../../Category_Server_and_Security.html">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="../../../Category_Project_and_Community.html">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="../../../Special_WhatLinksHere/Handbook_AMD64/Full/Working/ru.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../../Special_RecentChangesLinked/Handbook_AMD64/Full/Working/ru.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Working/ru&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Working/ru&amp;oldid=191064" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Working/ru&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="../../../Special_Browse/Handbook_AMD64-2FFull-2FWorking-2Fru.html" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AAMD64%2FFull%2FWorking%2Fru&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AAMD64%2FFull%2FWorking%2Fru" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-handbook" class="selected active"><a href="ru.html">Handbook</a></li><li id="ca-talk" class="new"><a href="https://wiki.gentoo.org/index.php?title=Handbook_Talk:AMD64/Full/Working/ru&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="https://wiki.gentoo.org/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Working/ru&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Working/ru&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="ru">
							<span dir="auto">Настольная книга Gentoo Linux amd64: Работа с Gentoo</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages"><a href="../../../Special_MyLanguage/Handbook_AMD64.html" title="Special:MyLanguage/Handbook:AMD64">Handbook:AMD64</a> | <a href="../../../Special_MyLanguage/Handbook_AMD64/Full.html" title="Special:MyLanguage/Handbook:AMD64/Full">Full</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="ru" dir="ltr" class="mw-content-ltr"><div class="mw-translate-page-info" lang="en" dir="ltr">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.gentoo.org/index.php?title=Special:Translate&amp;group=page-Handbook%3AAMD64%2FFull%2FWorking&amp;action=page&amp;filter=&amp;language=ru">translated version</a></span> of the page <a href="../Working.html" title="Handbook:AMD64/Full/Working">Handbook:AMD64/Full/Working</a> and the translation is 100% complete.</div>
<hr /><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Welcome_to_portage"><span class="tocnumber">1</span> <span class="toctext">Welcome to portage</span></a></li>
<li class="toclevel-1"><a href="#Portage_tree"><span class="tocnumber">2</span> <span class="toctext">Portage tree</span></a>
<ul>
<li class="toclevel-2"><a href="#Ebuilds"><span class="tocnumber">2.1</span> <span class="toctext">Ebuilds</span></a></li>
<li class="toclevel-2"><a href="#Updating_the_portage_tree"><span class="tocnumber">2.2</span> <span class="toctext">Updating the portage tree</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Maintaining_software"><span class="tocnumber">3</span> <span class="toctext">Maintaining software</span></a>
<ul>
<li class="toclevel-2"><a href="#Searching_for_software"><span class="tocnumber">3.1</span> <span class="toctext">Searching for software</span></a></li>
<li class="toclevel-2"><a href="#Installing_software"><span class="tocnumber">3.2</span> <span class="toctext">Installing software</span></a></li>
<li class="toclevel-2"><a href="#Finding_installed_package_documentation"><span class="tocnumber">3.3</span> <span class="toctext">Finding installed package documentation</span></a></li>
<li class="toclevel-2"><a href="#Removing_software"><span class="tocnumber">3.4</span> <span class="toctext">Removing software</span></a></li>
<li class="toclevel-2"><a href="#Updating_the_system"><span class="tocnumber">3.5</span> <span class="toctext">Updating the system</span></a></li>
<li class="toclevel-2"><a href="#Metapackages"><span class="tocnumber">3.6</span> <span class="toctext">Metapackages</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Licenses"><span class="tocnumber">4</span> <span class="toctext">Licenses</span></a></li>
<li class="toclevel-1"><a href="#When_portage_is_complaining"><span class="tocnumber">5</span> <span class="toctext">When portage is complaining</span></a>
<ul>
<li class="toclevel-2"><a href="#Terminology"><span class="tocnumber">5.1</span> <span class="toctext">Terminology</span></a></li>
<li class="toclevel-2"><a href="#Blocked_packages"><span class="tocnumber">5.2</span> <span class="toctext">Blocked packages</span></a></li>
<li class="toclevel-2"><a href="#Masked_packages"><span class="tocnumber">5.3</span> <span class="toctext">Masked packages</span></a></li>
<li class="toclevel-2"><a href="#Necessary_USE_flag_changes"><span class="tocnumber">5.4</span> <span class="toctext">Necessary USE flag changes</span></a></li>
<li class="toclevel-2"><a href="#Missing_dependencies"><span class="tocnumber">5.5</span> <span class="toctext">Missing dependencies</span></a></li>
<li class="toclevel-2"><a href="#Ambiguous_ebuild_name"><span class="tocnumber">5.6</span> <span class="toctext">Ambiguous ebuild name</span></a></li>
<li class="toclevel-2"><a href="#Circular_dependencies"><span class="tocnumber">5.7</span> <span class="toctext">Circular dependencies</span></a></li>
<li class="toclevel-2"><a href="#Fetch_failed"><span class="tocnumber">5.8</span> <span class="toctext">Fetch failed</span></a></li>
<li class="toclevel-2"><a href="#System_profile_protection"><span class="tocnumber">5.9</span> <span class="toctext">System profile protection</span></a></li>
<li class="toclevel-2"><a href="#Digest_verification_failure"><span class="tocnumber">5.10</span> <span class="toctext">Digest verification failure</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#What_are_USE_flags"><span class="tocnumber">6</span> <span class="toctext">What are USE flags</span></a>
<ul>
<li class="toclevel-2"><a href="#The_idea_behind_USE_flags"><span class="tocnumber">6.1</span> <span class="toctext">The idea behind USE flags</span></a></li>
<li class="toclevel-2"><a href="#Definition_of_a_USE_flag"><span class="tocnumber">6.2</span> <span class="toctext">Definition of a USE flag</span></a></li>
<li class="toclevel-2"><a href="#What_USE_flags_exist"><span class="tocnumber">6.3</span> <span class="toctext">What USE flags exist</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Using_USE_flags"><span class="tocnumber">7</span> <span class="toctext">Using USE flags</span></a>
<ul>
<li class="toclevel-2"><a href="#Declare_permanent_USE_flags"><span class="tocnumber">7.1</span> <span class="toctext">Declare permanent USE flags</span></a></li>
<li class="toclevel-2"><a href="#Declaring_USE_flags_for_individual_packages"><span class="tocnumber">7.2</span> <span class="toctext">Declaring USE flags for individual packages</span></a></li>
<li class="toclevel-2"><a href="#Declaring_temporary_USE_flags"><span class="tocnumber">7.3</span> <span class="toctext">Declaring temporary USE flags</span></a></li>
<li class="toclevel-2"><a href="#Precedence"><span class="tocnumber">7.4</span> <span class="toctext">Precedence</span></a></li>
<li class="toclevel-2"><a href="#Adapting_the_entire_system_to_the_new_USE_flags"><span class="tocnumber">7.5</span> <span class="toctext">Adapting the entire system to the new USE flags</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Package_specific_USE_flags"><span class="tocnumber">8</span> <span class="toctext">Package specific USE flags</span></a>
<ul>
<li class="toclevel-2"><a href="#Viewing_available_USE_flags"><span class="tocnumber">8.1</span> <span class="toctext">Viewing available USE flags</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Satisfying_REQUIRED_USE_conditions"><span class="tocnumber">9</span> <span class="toctext">Satisfying REQUIRED_USE conditions</span></a></li>
<li class="toclevel-1"><a href="#.D0.A3.D1.80.D0.BE.D0.B2.D0.BD.D0.B8_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0"><span class="tocnumber">10</span> <span class="toctext">Уровни запуска</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9F.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B"><span class="tocnumber">10.1</span> <span class="toctext">Процесс загрузки системы</span></a></li>
<li class="toclevel-2"><a href="#.D0.A1.D1.86.D0.B5.D0.BD.D0.B0.D1.80.D0.B8.D0.B8_.D0.B8.D0.BD.D0.B8.D1.86.D0.B8.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8"><span class="tocnumber">10.2</span> <span class="toctext">Сценарии инициализации</span></a></li>
<li class="toclevel-2"><a href="#.D0.9A.D0.B0.D0.BA_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_init"><span class="tocnumber">10.3</span> <span class="toctext">Как работает init</span></a></li>
<li class="toclevel-2"><a href="#.D0.A1.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D1.83.D1.8E.D1.89.D0.B8.D0.B5_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D0.B8_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0"><span class="tocnumber">10.4</span> <span class="toctext">Существующие уровни запуска</span></a></li>
<li class="toclevel-2"><a href="#.D0.A0.D0.B0.D0.B1.D0.BE.D1.82.D0.B0_.D1.81.D0.BE_.D1.81.D1.86.D0.B5.D0.BD.D0.B0.D1.80.D0.B8.D1.8F.D0.BC.D0.B8_.D0.B8.D0.BD.D0.B8.D1.86.D0.B8.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8"><span class="tocnumber">10.5</span> <span class="toctext">Работа со сценариями инициализации</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D0.B5.D0.B9_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0"><span class="tocnumber">11</span> <span class="toctext">Обновление уровней запуска</span></a>
<ul>
<li class="toclevel-2"><a href="#rc-update"><span class="tocnumber">11.1</span> <span class="toctext">rc-update</span></a></li>
<li class="toclevel-2"><a href="#.D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8_.D1.83.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.BB.D1.83.D0.B6.D0.B1"><span class="tocnumber">11.2</span> <span class="toctext">Добавление и удаление служб</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D0.BB.D1.83.D0.B6.D0.B1"><span class="tocnumber">12</span> <span class="toctext">Настройка служб</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9F.D0.BE.D1.87.D0.B5.D0.BC.D1.83_.D0.BD.D0.B5.D0.BE.D0.B1.D1.85.D0.BE.D0.B4.D0.B8.D0.BC.D0.B0_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"><span class="tocnumber">12.1</span> <span class="toctext">Почему необходима дополнительная настройка</span></a></li>
<li class="toclevel-2"><a href="#.D0.9A.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3_conf.d"><span class="tocnumber">12.2</span> <span class="toctext">Каталог conf.d</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.9D.D0.B0.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D1.86.D0.B5.D0.BD.D0.B0.D1.80.D0.B8.D0.B5.D0.B2_.D0.B8.D0.BD.D0.B8.D1.86.D0.B8.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8"><span class="tocnumber">13</span> <span class="toctext">Написание сценариев инициализации</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.AD.D1.82.D0.BE_.D0.BD.D0.B5.D0.BE.D0.B1.D1.85.D0.BE.D0.B4.D0.B8.D0.BC.D0.BE.3F"><span class="tocnumber">13.1</span> <span class="toctext">Это необходимо?</span></a></li>
<li class="toclevel-2"><a href="#.D0.A1.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0"><span class="tocnumber">13.2</span> <span class="toctext">Структура</span></a></li>
<li class="toclevel-2"><a href="#.D0.97.D0.B0.D0.B2.D0.B8.D1.81.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B8"><span class="tocnumber">13.3</span> <span class="toctext">Зависимости</span></a></li>
<li class="toclevel-2"><a href="#.D0.9F.D0.BE.D1.80.D1.8F.D0.B4.D0.BE.D0.BA_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0"><span class="tocnumber">13.4</span> <span class="toctext">Порядок запуска</span></a></li>
<li class="toclevel-2"><a href="#.D0.A1.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D1.8B.D0.B5_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8"><span class="tocnumber">13.5</span> <span class="toctext">Стандартные функции</span></a></li>
<li class="toclevel-2"><a href="#.D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D0.BE.D0.B2"><span class="tocnumber">13.6</span> <span class="toctext">Добавление дополнительных параметров</span></a></li>
<li class="toclevel-2"><a href="#.D0.9F.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D0.B5_.D0.B4.D0.BB.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D1.81.D0.BB.D1.83.D0.B6.D0.B1"><span class="tocnumber">13.7</span> <span class="toctext">Переменные для настройки служб</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D1.8F_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D0.B5.D0.B9_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0"><span class="tocnumber">14</span> <span class="toctext">Изменение поведения уровней запуска</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9A.D1.82.D0.BE_.D0.BC.D0.BE.D0.B6.D0.B5.D1.82_.D0.BE.D1.82_.D1.8D.D1.82.D0.BE.D0.B3.D0.BE_.D0.B2.D1.8B.D0.B8.D0.B3.D1.80.D0.B0.D1.82.D1.8C.3F"><span class="tocnumber">14.1</span> <span class="toctext">Кто может от этого выиграть?</span></a></li>
<li class="toclevel-2"><a href="#Using_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.BC.D0.BD.D0.BE.D0.B3.D0.BE_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D1.8F_.28softlevel.29"><span class="tocnumber">14.2</span> <span class="toctext">Using программного уровня (softlevel)</span></a></li>
<li class="toclevel-2"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D0.BE.D0.B3.D0.BE_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D1.8F_.28bootlevel.29"><span class="tocnumber">14.3</span> <span class="toctext">Использование загрузочного уровня (bootlevel)</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Environment_variables"><span class="tocnumber">15</span> <span class="toctext">Environment variables</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">15.1</span> <span class="toctext">Введение</span></a></li>
<li class="toclevel-2"><a href="#Important_examples"><span class="tocnumber">15.2</span> <span class="toctext">Important examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Defining_variables_globally"><span class="tocnumber">16</span> <span class="toctext">Defining variables globally</span></a>
<ul>
<li class="toclevel-2"><a href="#The_env.d_directory"><span class="tocnumber">16.1</span> <span class="toctext">The env.d directory</span></a></li>
<li class="toclevel-2"><a href="#env-update"><span class="tocnumber">16.2</span> <span class="toctext">env-update</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Defining_variables_locally"><span class="tocnumber">17</span> <span class="toctext">Defining variables locally</span></a>
<ul>
<li class="toclevel-2"><a href="#User_specific"><span class="tocnumber">17.1</span> <span class="toctext">User specific</span></a></li>
<li class="toclevel-2"><a href="#Session_specific"><span class="tocnumber">17.2</span> <span class="toctext">Session specific</span></a></li>
</ul>
</li>
</ul>
</div>

<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Working.html" title="Handbook:AMD64/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Working/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">русский</span> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Установка
</th></tr>
<tr>
<td> <a href="../../Installation/About/ru.html" title="Handbook:AMD64/Installation/About/ru">Об установке</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ru.html" title="Handbook:AMD64/Installation/Media/ru">Выбор подходящего источника для установки</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ru.html" title="Handbook:AMD64/Installation/Networking/ru">Настройка сети</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ru.html" title="Handbook:AMD64/Installation/Disks/ru">Подготовка дисков</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ru.html" title="Handbook:AMD64/Installation/Stage/ru">Установка stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ru.html" title="Handbook:AMD64/Installation/Base/ru">Установка базовой системы</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ru.html" title="Handbook:AMD64/Installation/Kernel/ru">Настройка ядра</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ru.html" title="Handbook:AMD64/Installation/System/ru">Настройка системы</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ru.html" title="Handbook:AMD64/Installation/Tools/ru">Установка системных средств</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ru.html" title="Handbook:AMD64/Installation/Bootloader/ru">Настройка начального загрузчика</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ru.html" title="Handbook:AMD64/Installation/Finalizing/ru">Завершение</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Работа с Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ru.html" title="Handbook:AMD64/Working/Portage/ru">Введение в Portage</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ru.html" title="Handbook:AMD64/Working/USE/ru">USE-флаги</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ru.html" title="Handbook:AMD64/Working/Features/ru">Возможности Portage</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ru.html" title="Handbook:AMD64/Working/Initscripts/ru">Сценарии инициализации</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ru.html" title="Handbook:AMD64/Working/EnvVar/ru">Переменные окружения</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Работа с Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ru.html" title="Handbook:AMD64/Portage/Files/ru">Файлы и каталоги</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ru.html" title="Handbook:AMD64/Portage/Variables/ru">Переменные</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ru.html" title="Handbook:AMD64/Portage/Branches/ru">Смешение ветвей программного обеспечения</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ru.html" title="Handbook:AMD64/Portage/Tools/ru">Дополнительные средства</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ru.html" title="Handbook:AMD64/Portage/CustomTree/ru">Отступление от официального дерева</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ru.html" title="Handbook:AMD64/Portage/Advanced/ru">Расширенные возможности</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Настройка сети
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ru.html" title="Handbook:AMD64/Networking/Introduction/ru">Начальная настройка</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ru.html" title="Handbook:AMD64/Networking/Advanced/ru">Расширенная настройка</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ru.html" title="Handbook:AMD64/Networking/Modular/ru">Модульное построение сети</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ru.html" title="Handbook:AMD64/Networking/Wireless/ru">Беспроводная сеть</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ru.html" title="Handbook:AMD64/Networking/Extending/ru">Добавляем функциональность</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ru.html" title="Handbook:AMD64/Networking/Dynamic/ru">Динамическое управление</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Welcome_to_portage">Welcome to portage</span></h2>
<p>Portage is one of Gentoo's most notable innovations in software management. With its high flexibility and enormous amount of features it is frequently seen as the best software management tool available for Linux.
</p><p>Portage is completely written in <a rel="nofollow" class="external text" href="http://www.python.org/">Python</a> and <a rel="nofollow" class="external text" href="http://www.gnu.org/software/bash">Bash</a> and therefore fully visible to the users as both are scripting languages.
</p><p>Most users will work with Portage through the <code>emerge</code> tool. This chapter is not meant to duplicate the information available from the emerge man page. For a complete rundown of emerge's options, please consult the man page:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>man emerge</code></div></div>
<h2><span class="mw-headline" id="Portage_tree">Portage tree</span></h2>
<h3><span class="mw-headline" id="Ebuilds">Ebuilds</span></h3>
<p>When Gentoo's documentation talks about packages, it means software titles that are available to the Gentoo users through the portage tree. The portage tree is a collection of ebuilds, files that contain all information portage needs to maintain software (install, search, query, ...). These ebuilds reside in <span style="font-family: monospace; font-size: 95%">/usr/portage</span> by default.
</p><p>Whenever someone asks portage to perform some action regarding software titles, it will use the ebuilds on the system as a base. It is therefore important to regularly update the ebuilds on the system so portage knows about new software, security updates, etc.
</p>
<h3><span class="mw-headline" id="Updating_the_portage_tree">Updating the portage tree</span></h3>
<p>The portage tree is usually updated with <code>rsync</code>, a fast incremental file transfer utility. Updating is fairly simple as the <code>emerge</code> command provides a front-end for <code>rsync</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync</code></div></div>
<p>Sometimes firewall restrictions apply that prevent <code>rsync</code> from contacting the mirrors. In this case, update the portage tree through Gentoo's daily generated portage tree snapshots. The <code>emerge-webrsync</code> tool automatically fetches and installs the latest snapshot on the system:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge-webrsync</code></div></div>
<p>An additional advantage of using <code>emerge-webrsync</code> is that it allows the administrator to only pull in portage tree snapshots that are signed by the Gentoo release engineering GPG key. More information on this can be found in the Portage Features section on Fetching Validated Portage Tree Snapshots.
</p>
<h2><span class="mw-headline" id="Maintaining_software">Maintaining software</span></h2>
<h3><span class="mw-headline" id="Searching_for_software">Searching for software</span></h3>
<p>There are multiple ways to search through the portage tree for software. One way is through <code>emerge</code> itself. By default, <code>emerge --search</code> returns the names of packages whose title matches (either fully or partially) the given search term.
</p><p>For instance, to search for all packages who have "pdf" in their name:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>emerge --search pdf</code></div></div>
<p>To search through the descriptions as well, use the <code>--searchdesc</code> (or <code>-S</code>) switch:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>emerge --searchdesc pdf</code></div></div>
<p>Notice that the output returns a lot of information. The fields are clearly labelled so we won't go further into their meanings:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Example output for a search command</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>*  net-print/cups-pdf
      Latest version available: 1.5.2
      Latest version installed: [ Not Installed ]
      Size of downloaded files: 15 kB
      Homepage:    http://cip.physik.uni-wuerzburg.de/~vrbehr/cups-pdf/
      Description: Provides a virtual printer for CUPS to produce PDF files.
      License:     GPL-2
</pre></div></pre></div>
<h3><span class="mw-headline" id="Installing_software">Installing software</span></h3>
<p>When a software title has been found, then the installation is just one <code>emerge</code> command away. For instance, to install gnumeric:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-office/gnumeric</code></div></div> 
<p>Since many applications depend on each other, any attempt to install a certain software package might result in the installation of several dependencies as well. Don't worry, portage handles dependencies well. To find out what portage would install, add the <code>--pretend</code> switch. For instance:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --pretend gnumeric</code></div></div>
<p>During the installation of a package, portage will download the necessary source code from the Internet (if necessary) and store it by default in <span style="font-family: monospace; font-size: 95%">/usr/portage/distfiles/</span>. After this it will unpack, compile and install the package. To tell portage to only download the sources without installing them, add the <code>--fetchonly</code> option to the emerge command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --fetchonly gnumeric</code></div></div>
<h3><span class="mw-headline" id="Finding_installed_package_documentation">Finding installed package documentation</span></h3>
<p>Many packages come with their own documentation. Sometimes, the <i>doc</i> USE flag determines whether the package documentation should be installed or not. To see if the <i>doc</i> USE flag is used by a package, use <code>emerge -vp PACKAGENAME</code>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge -vp alsa-lib</code></div><pre>
...
[ebuild  N    ] media-libs/alsa-lib-1.0.14_rc1  -debug +doc 698 kB
</pre></div>
<p>The best way of enabling the doc USE flag is doing it on a per-package basis via <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span>, so that only the documentation for the wanted packages is installed. For more information, please read the <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags chapter</a>.
</p><p>Once the package installed, its documentation is generally found in a subdirectory named after the package under the <span style="font-family: monospace; font-size: 95%">/usr/share/doc/</span> directory. It is also possible to list all installed files with the <code>equery</code> tool which is part of the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>ls -l /usr/share/doc/alsa-lib-1.0.14_rc1</code></div><pre>
total 28
-rw-r--r--  1 root root  669 May 17 21:54 ChangeLog.gz
-rw-r--r--  1 root root 9373 May 17 21:54 COPYING.gz
drwxr-xr-x  2 root root 8560 May 17 21:54 html
-rw-r--r--  1 root root  196 May 17 21:54 TODO.gz
</pre></div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>equery files alsa-lib | less</code></div><pre>
media-libs/alsa-lib-1.0.14_rc1
* Contents of media-libs/alsa-lib-1.0.14_rc1:
/usr
/usr/bin
/usr/bin/alsalisp
...
</pre></div>
<h3><span class="mw-headline" id="Removing_software">Removing software</span></h3>
<p>To remove software from a system, use <code>emerge --unmerge</code>. This will tell Portage to remove all files installed by that package from the system. One exception to this are the configuration files of that application <i>if</i> they have been altered by the user. Leaving the configuration files allows users to continue working with the package without the need for reconfiguration if the packages are installed again later on.
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Предупреждение</strong><br />Portage will not check if the package to remove is required by another package. It will however warn when an important package woud be removed that breaks the system if it is unmerged.</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --unmerge gnumeric</code></div></div>
<p>When a package is removed from the system, the dependencies of that package that were installed automatically when it was installed are still left on the system. To have Portage locate all dependencies that can now be removed, use emerge's <code>--depclean</code> functionality, which is documented later.
</p>
<h3><span class="mw-headline" id="Updating_the_system">Updating the system</span></h3>
<p>To keep the system in perfect shape (and not to mention install the latest security updates) it is necessary to update the system regularly. Since Portage only checks the ebuilds in the portage tree, the first thing to do is to update the Portage tree. When the Portage tree is updated, the system can be updated using <code>emerge --update @world</code>. In the next example, the <code>--ask</code> switch is also used which will tell Portage to display the list of packages it wants to upgrade and ask for confirmation:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --ask @world</code></div></div>
<p>Portage will then search for newer version of the applications that are installed. However, it will only verify the versions for the applications that are explicitly installed (the applications listed in <span style="font-family: monospace; font-size: 95%">/var/lib/portage/world</span>) - it does not thoroughly check their dependencies. To update the dependencies of those packages as well, add the <code>--deep</code> argument:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep @world</code></div></div>
<p>Still, this doesn't mean all packages: some packages on the system are needed during the compile and build process of packages, but once that package is installed, these dependencies are no longer required. Portage calls those <i>build dependencies</i>. To include those in an update cycle, add <code>--with-bdeps=y</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --with-bdeps=y @world</code></div></div>
<p>Since security updates also happen in packages that are not explicitly installed on the system (but that are pulled in as dependencies of other programs), it is recommended to run this command once in a while.
</p><p>If the USE settings of the system have been altered, it is recommended to add <code>--newuse</code> as well. Portage will then verify if the change requires the installation of new packages or recompilation of existing ones:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --with-bdeps=y --newuse @world</code></div></div>
<h3><span class="mw-headline" id="Metapackages">Metapackages</span></h3>
<p>Some packages in the Portage tree don't have any real content but are used to install a collection of packages. For instance, the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/kde-base/kde-meta">kde-base/kde-meta</a> package will install a complete KDE environment on the system by pulling in various KDE-related packages as dependencies.
</p><p>To remove such a package from your system, running <code>emerge --unmerge</code> on the package won't have much effect as the dependencies remain on the system.
</p><p>Portage has the functionality to remove orphaned dependencies as well, but since the availability of software is dynamically dependent it is important to first update the entire system fully, including the new changes applied when changing USE flags. After this one can run <code>emerge --depclean</code> to remove the orphaned dependencies. When this is done, it might be necessary to rebuild the applications that were dynamically linked to the now-removed software titles but don't require them anymore, although recently support for this has been added to portage.
</p><p>All this is handled with the following three commands:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --newuse @world
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --depclean
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>revdep-rebuild</code></div></div>
<p><code>revdep-rebuild</code> is provided by the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package; don't forget to emerge it first:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-portage/gentoolkit</code></div></div> 
<h2><span class="mw-headline" id="Licenses">Licenses</span></h2>
<p>Beginning with Portage version 2.1.7, it is possible to accept or reject software installation based on its license. All packages in the tree contain a LICENSE entry in their ebuilds. Running <code>emerge --search PACKAGENAME</code> will show the package's license.
</p><p>By default, Portage permits all licenses, except <i>End User License Agreements (EULAs)</i> that require reading and signing an acceptance agreement.
</p><p>The variable that controls permitted licenses is called <code>ACCEPT_LICENSE</code>, which can be set in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>. In the next example, this default value is shown:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>The default ACCEPT_LICENSE setting</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">ACCEPT_LICENSE</span><span class="o">=</span><span class="s2">&quot;* -@EULA&quot;</span>
</pre></div></pre>
<p>With this configuration, packages that require interaction during installation to approve their EULA will not be installable. Packages without an EULA will be installable.
</p><p>It is possible to set <code>ACCEPT_LICENSE</code> globally in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>, or to specify it on a per-package basis in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.license</span>.
</p><p>For example, to allow the <span style="font-family: monospace; font-size: 95%">truecrypt-2.7</span> license for <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-crypt/truecrypt">app-crypt/truecrypt</a>, add the following to <span style="font-family: monospace; font-size: 95%">/etc/portage/package.license</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/package.license</code></strong><strong>Accepting the truecrypt-2.7 license for the truecrypt package alone</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>app-crypt/truecrypt truecrypt-2.7
</pre></div></pre>
<p>This permits installation of truecrypt versions that have the <span style="font-family: monospace; font-size: 95%">truecrypt-2.7</span> license, but not versions with the <span style="font-family: monospace; font-size: 95%">truecrypt-2.8</span> license.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Важно</strong><br />Licenses are stored in <span style="font-family: monospace; font-size: 95%">/usr/portage/licenses/</span>, and license groups are kept in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/license_groups</span>. The first entry of each line in <i>CAPITAL</i> letters is the name of the license group, and every entry after that is an individual license.</div>
<p>License groups defined in <code>ACCEPT_LICENSE</code> are prefixed with an <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">@</kbd> sign. A commonly requested setting is to only allow the installation of free software and documentation. To accomplish this, remove all currently accepted licenses (using <code>-*</code>) and then only allow the licenses in the FREE group as follows:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Only accept free software and documentation</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">ACCEPT_LICENSE</span><span class="o">=</span><span class="s2">&quot;-* @FREE&quot;</span>
</pre></div></pre>
<p>In this case, "free" is mostly defined by the FSF and OSI. Any package whose license does not meet these requirements will not be installable on the system.
</p>
<h2><span class="mw-headline" id="When_portage_is_complaining">When portage is complaining</span></h2>
<h3><span class="mw-headline" id="Terminology">Terminology</span></h3>
<p>As stated before, portage is extremely powerful and supports many features that other software management tools lack. To understand this, we explain a few aspects of portage without going into too much detail.
</p><p>With portage different versions of a single package can coexist on a system. While other distributions tend to name their package to those versions (like freetype and freetype2) portage uses a technology called <i>SLOT</i>s. An ebuild declares a certain SLOT for its version. Ebuilds with different SLOTs can coexist on the same system. For instance, the freetype package has ebuilds with SLOT="1" and SLOT="2".
</p><p>There are also packages that provide the same functionality but are implemented differently. For instance, metalogd, sysklogd and syslog-ng are all system loggers. Applications that rely on the availability of "a system logger" cannot depend on, for instance, metalogd, as the other system loggers are as good a choice as any. Portage allows for virtuals: each system logger is listed as an "exclusive" dependency of the logging service in the logger virtual package of the virtual category, so that applications can depend on the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/virtual/logger">virtual/logger</a> package. When installed, the package will pull in the first logging package mentioned in the package, unless a logging package was already installed (in which case the virtual is satisfied).
</p><p>Software in the portage tree can reside in different branches. By default the system only accepts packages that Gentoo deems stable. Most new software titles, when committed, are added to the testing branch, meaning more testing needs to be done before it is marked as stable. Although the ebuilds for those software are in the portage tree, portage will not update them before they are placed in the stable branch.
</p><p>Some softwares are only available for a few architectures. Or the software doesn't work on the other architectures, or it needs more testing, or the developer that committed the software to the portage tree is unable to verify if the package works on different architectures.
</p><p>Each Gentoo installation also adheres to a certain profile which contains, amongst other information, the list of packages that are required for a system to function normally.
</p>
<h3><span class="mw-headline" id="Blocked_packages">Blocked packages</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about blocked packages (with --pretend)</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[blocks B     ] mail-mta/ssmtp (is blocking mail-mta/postfix-2.2.2-r1)
</pre></div></pre></div>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about blocked packages (without --pretend)</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Error: the mail-mta/postfix package conflicts with another package.
!!!        both can&#39;t be installed on the same system together.
!!!        Please use &#39;emerge --pretend&#39; to determine blockers.
</pre></div></pre></div>
<p>Ebuilds contain specific fields that inform Portage about its dependencies. There are two possible dependencies: build dependencies, declared in DEPEND and run-time dependencies, declared in RDEPEND. When one of these dependencies explicitly marks a package or virtual as being not compatible, it triggers a blockage.
</p><p>While recent versions of Portage are smart enough to work around minor blockages without user intervention, occasionally such blockages need to be resolved manually.
</p><p>To fix a blockage, users can choose to not install the package or unmerge the conflicting package first. In the given example, one can opt not to install postfix or to remove ssmtp first.
</p><p>Sometimes there are also blocking packages with specific atoms, such as <code>&lt;media-video/mplayer-1.0_rc1-r2</code>. In this case, updating to a more recent version of the blocking package could remove the block.
</p><p>It is also possible that two packages that are yet to be installed are blocking each other. In this rare case, try to find out why both would need to be installed. In most cases it is sufficient to do with one of the packages alone. If not, please file a bug on Gentoo's bugtracking system.
</p>
<h3><span class="mw-headline" id="Masked_packages">Masked packages</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about masked packages</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! all ebuilds that could satisfy &quot;bootsplash&quot; have been masked.
</pre></div></pre></div>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about masked packages - reason</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! possible candidates are:
  
- gnome-base/gnome-2.8.0_pre1 (masked by: ~x86 keyword)
- lm-sensors/lm-sensors-2.8.7 (masked by: -sparc keyword)
- sys-libs/glibc-2.3.4.20040808 (masked by: -* keyword)
- dev-util/cvsd-1.0.2 (masked by: missing keyword)
- games-fps/unreal-tournament-451 (masked by: package.mask)
- sys-libs/glibc-2.3.2-r11 (masked by: profile)
- net-im/skype-2.1.0.81 (masked by: skype-eula license(s))
</pre></div></pre></div>
<p>When trying to install a package that isn't available for the system, this masking error occurs. Users should try installing a different application that is available for the system or wait until the package is marked as available. There is always a reason why a package is masked:
</p>
<dl><dt> ~arch keyword</dt>
<dd> the application is not tested sufficiently to be put in the stable branch. Wait a few days or weeks and try again.</dd>
<dt> -arch keyword or -* keyword</dt>
<dd> the application does not work on your architecture. If you believe the package does work file a bug at our bugzilla website.</dd>
<dt> missing keyword</dt>
<dd> the application has not been tested on your architecture yet. Ask the architecture porting team to test the package or test it for them and report the findings on our bugzilla website.</dd>
<dt> package.mask </dt>
<dd> the package has been found corrupt, unstable or worse and has been deliberately marked as do-not-use.</dd>
<dt> profile</dt>
<dd> the package has been found not suitable for the current profile. The application might break the system if it is installed or is just not compatible with the profile currently in use.</dd>
<dt> license </dt>
<dd> the package's license is not compatible with the ACCEPT_LICENSE setting. Permit its license or the right license group by setting it in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> or in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.license</span></dd></dl>
<h3><span class="mw-headline" id="Necessary_USE_flag_changes">Necessary USE flag changes</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about USE flag change requirement</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>The following USE changes are necessary to proceed:
#required by app-text/happypackage-2.0, required by happypackage (argument)
&gt;=app-text/feelings-1.0.0 test
</pre></div></pre></div>
<p>The error message might also be displayed as follows, if <code>--autounmask</code> isn't set:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage error about USE flag change requirement</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>emerge: there are no ebuilds built with USE flags to satisfy &quot;app-text/feelings[test]&quot;.
!!! One of the following packages is required to complete your request:
- app-text/feelings-1.0.0 (Change USE: +test)
(dependency required by &quot;app-text/happypackage-2.0&quot; [ebuild])
(dependency required by &quot;happypackage&quot; [argument])
</pre></div></pre></div>
<p>Such warning or error occurs when a package is requested for installation which not only depends on another package, but also requires that that package is built with a particular USE flag (or set of USE flags). In the given example, the package app-text/feelings needs to be built with USE="test", but this USE flag is not set on the system.
</p><p>To resolve this, either add the requested USE flag to the global USE flags in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>, or set it for the specific package in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span>.
</p>
<h3><span class="mw-headline" id="Missing_dependencies">Missing dependencies</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about missing dependency</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>emerge: there are no ebuilds to satisfy &quot;&gt;=sys-devel/gcc-3.4.2-r4&quot;.
  
!!! Problem with ebuild sys-devel/gcc-3.4.2-r2
!!! Possibly a DEPEND/*DEPEND problem.
</pre></div></pre></div>
<p>The application to install depends on another package that is not available for the system. Please check bugzilla if the issue is known and if not, please report it. Unless the system is configured to mix branches, this should not occur and is therefore a bug.
</p>
<h3><span class="mw-headline" id="Ambiguous_ebuild_name">Ambiguous ebuild name</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about ambiguous ebuild names</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[ Results for search key : listen ]
[ Applications found : 2 ]
  
*  dev-tinyos/listen [ Masked ]
      Latest version available: 1.1.15
      Latest version installed: [ Not Installed ]
      Size of files: 10,032 kB
      Homepage:      http://www.tinyos.net/
      Description:   Raw listen for TinyOS
      License:       BSD
  
*  media-sound/listen [ Masked ]
      Latest version available: 0.6.3
      Latest version installed: [ Not Installed ]
      Size of files: 859 kB
      Homepage:      http://www.listen-project.org
      Description:   A Music player and management for GNOME
      License:       GPL-2
  
!!! The short ebuild name &quot;listen&quot; is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.
</pre></div></pre></div>
<p>The application that is selected for installation has a name that corresponds with more than one package. Supply the category name as well to resolve this. Portage will inform the user about possible matches to choose from.
</p>
<h3><span class="mw-headline" id="Circular_dependencies">Circular dependencies</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about circular dependencies</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Error: circular dependencies: 
  
ebuild / net-print/cups-1.1.15-r2 depends on ebuild / app-text/ghostscript-7.05.3-r1
ebuild / app-text/ghostscript-7.05.3-r1 depends on ebuild / net-print/cups-1.1.15-r2
</pre></div></pre></div>
<p>Two (or more) packages to install depend on each other and can therefore not be installed. This is most likely a bug in one of the packages in the portage tree. Please resync after a while and try again. It might also be beneficial to check bugzilla to see if the issue is known and if not, report it.
</p>
<h3><span class="mw-headline" id="Fetch_failed">Fetch failed</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about fetch failed</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Fetch failed for sys-libs/ncurses-5.4-r5, continuing...
(...)
!!! Some fetch errors were encountered.  Please see above for details.
</pre></div></pre></div>
<p>Portage was unable to download the sources for the given application and will try to continue installing the other applications (if applicable). This failure can be due to a mirror that has not synchronised correctly or because the ebuild points to an incorrect location. The server where the sources reside can also be down for some reason.
</p><p>Retry after one hour to see if the issue still persists.
</p>
<h3><span class="mw-headline" id="System_profile_protection">System profile protection</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Portage warning about profile-protected package</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>!!! Trying to unmerge package(s) in system profile. &#39;sys-apps/portage&#39;
!!! This could be damaging to your system.
</pre></div></pre></div>
<p>The user has asked to remove a package that is part of the system's core packages. It is listed in the profile as required and should therefore not be removed from the system.
</p>
<h3><span class="mw-headline" id="Digest_verification_failure">Digest verification failure</span></h3>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Digest verification failure</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>&gt;&gt;&gt; checking ebuild checksums
!!! Digest verification failed:
</pre></div></pre></div>
<p>This is a sign that something is wrong with the portage tree -- often, it is because a developer may have made a mistake when committing a package to the tree.
</p><p>When the digest verification fails, do not try to re-digest the package personally. Running <code>ebuild foo manifest</code> will not fix the problem; it will almost certainly make it worse!
</p><p>Instead, wait an hour or two for the tree to settle down. It's likely that the error was noticed right away, but it can take a little time for the fix to trickle down the portage tree. Check Bugzilla and see if anyone has reported the problem yet or ask around on #gentoo (IRC). If not, go ahead and file a bug for the broken package.
</p><p>Once the bug has been fixed, re-sync the portage tree to pick up the fixed digest.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Важно</strong><br />This does not mean that re-synchronization of the tree several times in a short time period! As stated in the rsync policy (as well as when running <code>emerge --sync</code>), users who sync too often will be banned! In fact, it's better to just wait until the next scheduled sync, so that resynchronization doesn't overload the rsync servers.</div>
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Finalizing/ru.html" title="Предыдущая часть" class="btn btn-default">&#8592; Завершение</a> <a href="../../ru.html" title="Handbook:AMD64/ru" class="btn btn-default">К содержанию</a> <a href="../../Working/USE/ru.html" title="Следующая часть" class="btn btn-default">USE flags &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Working.html" title="Handbook:AMD64/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Working/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">русский</span> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="What_are_USE_flags">What are USE flags</span></h2>
<h3><span class="mw-headline" id="The_idea_behind_USE_flags">The idea behind USE flags</span></h3>
<p>When installing Gentoo (or any other distribution, or even operating system for that matter) users make choices depending on the environment they are working with. A setup for a server differs from a setup for a workstation. A gaming workstation differs from a 3D rendering workstation.
</p><p>This is not only true for choosing what packages to install, but also what features a certain package should support. If there is no need for OpenGL, why would someone bother to install and maintain OpenGL and build OpenGL support in most of the packages? If someone doesn't want to use KDE, why would they bother compiling packages with KDE support if those packages work flawlessly without?
</p><p>To help users in deciding what to install/activate and what not, Gentoo wanted the user to specify his/her environment in an easy way. This forces the user into deciding what they really want and eases the process for portage to make useful decisions.
</p>
<h3><span class="mw-headline" id="Definition_of_a_USE_flag">Definition of a USE flag</span></h3>
<p>Enter the USE flags. Such a flag is a keyword that embodies support and dependency-information for a certain concept. If someone defines a certain USE flag, Portage will know that they want support for the chosen keyword. Of course this also alters the dependency information for a package.
</p><p>Take a look at a specific example: the kde keyword. If this keyword is not in the USE variable, all packages that have optional KDE support will be compiled <i>without</i> KDE support. All packages that have an optional KDE dependency will be installed <i>without</i> installing the KDE libraries (as dependency). When the kde keyword is defined, then those packages will be compiled <i>with</i> KDE support, and the KDE libraries <i>will</i> be installed as dependency.
</p><p>By correctly defining the keywords the system will be tailored specifically to the user's needs.
</p>
<h3><span class="mw-headline" id="What_USE_flags_exist">What USE flags exist</span></h3>
<p>There are two types of USE flags: global and local USE flags.
</p>
<ul><li> A <i>global USE flag</i> is used by several packages, system-wide. This is what most people see as USE flags.</li>
<li> A <i>local USE flag</i> is used by a single package to make package-specific decisions.</li></ul>
<p>A list of available global USE flags can be found <a rel="nofollow" class="external text" href="https://www.gentoo.org/dyn/use-index.xml#doc_chap1">online</a> or locally in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/use.desc</span>.
</p><p>A list of available local USE flags can be found <a rel="nofollow" class="external text" href="https://www.gentoo.org/dyn/use-index.xml#doc_chap2">online</a> or locally in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/use.local.desc</span>.
</p>
<h2><span class="mw-headline" id="Using_USE_flags">Using USE flags</span></h2>
<h3><span class="mw-headline" id="Declare_permanent_USE_flags">Declare permanent USE flags</span></h3>
<p>As previously mentioned, all USE flags are declared inside the USE variable. To make it easy for users to search and pick USE flags, we already provide a default USE setting. This setting is a collection of USE flags we think are commonly used by the Gentoo users. This default setting is declared in the <span style="font-family: monospace; font-size: 95%">make.defaults</span> files that are part of the selected profile.
</p><p>The profile the system listens to is pointed to by the <span style="font-family: monospace; font-size: 95%">/etc/portage/make.profile</span> symlink. Each profile works on top of other profiles, and the end result is therefore the sum of all profiles. The top profile is the base profile (<span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/base</span>).
</p><p>To view the currently active USE flags (completely), use <code>emerge --info</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --info | grep ^USE</code></div><pre>
USE=&quot;a52 aac acpi alsa branding cairo cdr dbus dts ...&quot;
</pre></div>
<p>As can be seen, this variable already contains quite a lot of keywords. Do not alter any <span style="font-family: monospace; font-size: 95%">make.defaults</span> file to tailor the USE variable to personal needs though: changes in these file will be undone when the portage tree is updated!
</p><p>To change this default setting, add or remove keywords to/from the USE variable. This is done globally by defining the USE variable in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>. In this variable one can add the extra USE flags required, or remove the USE flags that are no longer needed. This latter is done by prefixing the keyword with the minus-sign (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">-</kbd>).
</p><p>For instance, to remove support for KDE and QT but add support for ldap, the following USE can be defined in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Updating USE in make.conf</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-kde -qt4 ldap&quot;</span>
</pre></div></pre>
<h3><span class="mw-headline" id="Declaring_USE_flags_for_individual_packages">Declaring USE flags for individual packages</span></h3>
<p>Sometimes users want to declare a certain USE flag for one (or a couple) of applications but not system-wide. To accomplish this, edit <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span>. This is usually a single file, but can also be a directory; see <code>man portage</code> for more information. The following examples assume <span style="font-family: monospace; font-size: 95%">package.use</span> is a single file.
</p><p>For instance, to only have berkdb support for mysql:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/package.use</code></strong><strong>Enabling berkdb support for MySQL</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>dev-db/mysql berkdb
</pre></div></pre>
<p>Similarly it is possible to explicitly disable USE flags for a certain application. For instance, to disable java support in PHP (but have it for all other packages through the USE flag declaration in <span style="font-family: monospace; font-size: 95%">make.conf</span>):
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/package.use</code></strong><strong>Disable java support in PHP</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>dev-php/php -java
</pre></div></pre>
<h3><span class="mw-headline" id="Declaring_temporary_USE_flags">Declaring temporary USE flags</span></h3>
<p>Sometimes users need to set a USE flag for a brief moment. Instead of editing <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> twice (to do and undo the USE changes) just declare the USE variable as an environment variable. Remember that this setting only applies for the command entered - re-emerging or updating this application (either explicitly or as part of a system update) will undo the changes that were triggered through the (temporary) USE flag definition.
</p><p>The following example temporarily removes java from the USE setting during the installation of seamonkey:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>USE="-java" emerge seamonkey</code></div></div>
<h3><span class="mw-headline" id="Precedence">Precedence</span></h3>
<p>Of course there is a certain precedence on what setting has priority over the USE setting. The precedence for the USE setting is, ordered by priority (first has lowest priority):
</p>
<ol><li> Default USE setting declared in the <span style="font-family: monospace; font-size: 95%">make.defaults</span> files part of your profile</li>
<li> User-defined USE setting in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span></li>
<li> User-defined USE setting in <span style="font-family: monospace; font-size: 95%">/etc/portage/package.use</span></li>
<li> User-defined USE setting as environment variable</li></ol>
<p>To view the final USE setting as seen by Portage, run <code>emerge --info</code>. This will list all relevant variables (including the USE variable) with their current definition as known to portage.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --info</code></div></div>
<h3><span class="mw-headline" id="Adapting_the_entire_system_to_the_new_USE_flags">Adapting the entire system to the new USE flags</span></h3>
<p>After having altered USE flags, the system should be updated to reflect the necessary changes. To do so, use the <code>--newuse</code> option with <code>emerge</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --update --deep --newuse @world</code></div></div>
<p>Next, run portage's depclean to remove the conditional dependencies that were emerged on the "old" system but that have been obsoleted by the new USE flags.
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Предупреждение</strong><br />Running <code>emerge --depclean</code> is a dangerous operation and should be handled with care. Double-check the provided list of "obsoleted" packages to make sure it doesn't remove packages that are needed. In the following example we add the <code>-p</code> switch to have depclean only list the packages without removing them.
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge -p --depclean</code></div></div>
</div>
<p>When depclean has finished, run <code>revdep-rebuild</code> to rebuild the applications that are dynamically linked against shared objects provided by possibly removed packages. <code>revdep-rebuild</code> is part of the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package; don't forget to emerge it first.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>revdep-rebuild</code></div></div>
<p>When all this is accomplished, the system is using the new USE flag settings.
</p>
<h2><span class="mw-headline" id="Package_specific_USE_flags">Package specific USE flags</span></h2>
<h3><span class="mw-headline" id="Viewing_available_USE_flags">Viewing available USE flags</span></h3>
<p>Let's take the example of seamonkey: what USE flags does it listen to? To find out, we use <code>emerge</code> with the <code>--pretend</code> and <code>--verbose</code> options:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --pretend --verbose seamonkey</code></div><pre>
These are the packages that I would merge, in order:
  
Calculating dependencies ...done!
[ebuild   R   ] www-client/seamonkey-1.0.7  USE=&quot;crypt gnome java -debug -ipv6
-ldap -mozcalendar -mozdevelop -moznocompose -moznoirc -moznomail -moznopango
-moznoroaming -postgres -xinerama -xprint&quot; 0 kB
</pre></div>
<p><code>emerge</code> isn't the only tool for this job. In fact, there is a tool dedicated to package information called <code>equery</code> which resides in the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-portage/gentoolkit</code></div></div> 
<p>Now run equery with the <i>uses</i> argument to view the USE flags of a certain package. For instance, for the gnumeric package:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>equery --nocolor uses =gnumeric-1.6.3 -a</code></div><pre>
[ Searching for packages matching =gnumeric-1.6.3... ]
[ Colour Code&#160;: set unset ]
[ Legend&#160;: Left column  (U) - USE flags from make.conf              ]
[       &#160;: Right column (I) - USE flags packages was installed with ]
[ Found these USE variables for app-office/gnumeric-1.6.3 ]
 U I
 - - debug &#160;: Enable extra debug codepaths, like asserts and extra output.
              If you want to get meaningful backtraces see
              http://www.gentoo.org/proj/en/qa/backtraces.xml .
 + + gnome &#160;: Adds GNOME support
 + + python&#160;: Adds support/bindings for the Python language
 - - static&#160;:&#160;!!do not set this during bootstrap!! Causes binaries to be
              statically linked instead of dynamically
</pre></div>
<h2><span class="mw-headline" id="Satisfying_REQUIRED_USE_conditions">Satisfying REQUIRED_USE conditions</span></h2>
<p>Some ebuilds require or forbid certain combinations of USE flags in order to work properly. This is expressed via a <code>REQUIRED_USE</code> condition. This condition ensures that all features and dependencies are complete, the build will succeed and perform as expected. If any of these are not met, emerge will alert you and ask you to fix the issue.
</p><p>Some example conditions are given below.
</p>
<table class="table">

<tr style="vertical-align: top; white-space: nowrap;">
<th> Example
</th>
<th> Description
</th></tr>
<tr>
<td> <code>REQUIRED_USE="foo? ( bar )"</code>
</td>
<td> If <code>foo</code> is set, <code>bar</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="foo? (&#160;!bar )"</code>
</td>
<td> If <code>foo</code> is set, <code>bar</code> must not be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="foo? ( || ( bar baz ) )"</code>
</td>
<td> If <code>foo</code> is set, <code>bar</code> or <code>baz</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="^^ ( foo bar baz )"</code>
</td>
<td> Exactly one of <code>foo</code> <code>bar</code> or <code>baz</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="|| ( foo bar baz )"</code>
</td>
<td> At least one of <code>foo</code> <code>bar</code> or <code>baz</code> must be set
</td></tr>
<tr>
<td> <code>REQUIRED_USE="?? ( foo bar baz )"</code>
</td>
<td> No more than one of <code>foo</code> <code>bar</code> or <code>baz</code> may be set
</td></tr></table>
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Working/Portage.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Working/Features.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
<a href="https://wiki.gentoo.org/index.php?title=Handbook:Parts/Working/Features/ru&amp;action=edit&amp;redlink=1" class="new" title="Handbook:Parts/Working/Features/ru (page does not exist)">Handbook:Parts/Working/Features/ru</a>
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Working.html" title="Handbook:AMD64/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Working/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">русский</span> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Установка
</th></tr>
<tr>
<td> <a href="../../Installation/About/ru.html" title="Handbook:AMD64/Installation/About/ru">Об установке</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ru.html" title="Handbook:AMD64/Installation/Media/ru">Выбор подходящего источника для установки</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ru.html" title="Handbook:AMD64/Installation/Networking/ru">Настройка сети</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ru.html" title="Handbook:AMD64/Installation/Disks/ru">Подготовка дисков</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ru.html" title="Handbook:AMD64/Installation/Stage/ru">Установка stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ru.html" title="Handbook:AMD64/Installation/Base/ru">Установка базовой системы</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ru.html" title="Handbook:AMD64/Installation/Kernel/ru">Настройка ядра</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ru.html" title="Handbook:AMD64/Installation/System/ru">Настройка системы</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ru.html" title="Handbook:AMD64/Installation/Tools/ru">Установка системных средств</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ru.html" title="Handbook:AMD64/Installation/Bootloader/ru">Настройка начального загрузчика</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ru.html" title="Handbook:AMD64/Installation/Finalizing/ru">Завершение</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Работа с Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ru.html" title="Handbook:AMD64/Working/Portage/ru">Введение в Portage</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ru.html" title="Handbook:AMD64/Working/USE/ru">USE-флаги</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ru.html" title="Handbook:AMD64/Working/Features/ru">Возможности Portage</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ru.html" title="Handbook:AMD64/Working/Initscripts/ru">Сценарии инициализации</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ru.html" title="Handbook:AMD64/Working/EnvVar/ru">Переменные окружения</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Работа с Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ru.html" title="Handbook:AMD64/Portage/Files/ru">Файлы и каталоги</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ru.html" title="Handbook:AMD64/Portage/Variables/ru">Переменные</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ru.html" title="Handbook:AMD64/Portage/Branches/ru">Смешение ветвей программного обеспечения</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ru.html" title="Handbook:AMD64/Portage/Tools/ru">Дополнительные средства</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ru.html" title="Handbook:AMD64/Portage/CustomTree/ru">Отступление от официального дерева</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ru.html" title="Handbook:AMD64/Portage/Advanced/ru">Расширенные возможности</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Настройка сети
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ru.html" title="Handbook:AMD64/Networking/Introduction/ru">Начальная настройка</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ru.html" title="Handbook:AMD64/Networking/Advanced/ru">Расширенная настройка</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ru.html" title="Handbook:AMD64/Networking/Modular/ru">Модульное построение сети</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ru.html" title="Handbook:AMD64/Networking/Wireless/ru">Беспроводная сеть</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ru.html" title="Handbook:AMD64/Networking/Extending/ru">Добавляем функциональность</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ru.html" title="Handbook:AMD64/Networking/Dynamic/ru">Динамическое управление</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".D0.A3.D1.80.D0.BE.D0.B2.D0.BD.D0.B8_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0">Уровни запуска</span></h2>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B">Процесс загрузки системы</span></h3>
<p>При загрузке вашей системы по экрану пробегает много текста. Если присмотреться, заметно, что этот текст (обычно) не меняется от загрузки к загрузке. Последовательность всех этих действий называется последовательностью  загрузки и в той или иной степени постоянна.
</p><p>Во-первых, загрузчик размещает в памяти образ ядра, который вы указали в файле его конфигурации. После этого начальный загрузчик просит процессор запустить ядро. Когда ядро загружено и запущено, оно инициализирует относящиеся к ядру структуры и задания, и запускает процесс init.
</p><p>Этот процесс удостоверяется, что все файловые системы (определенные в <span style="font-family: monospace; font-size: 95%">/etc/fstab</span>) смонтированы и готовы к использованию. Затем он выполняет несколько сценариев, находящихся в каталоге <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span>, которые запускают службы, необходимые для нормального запуска системы.
</p><p>И, наконец, когда все сценарии выполнены, init подключает терминалы (чаще всего просто виртуальные консоли, которые видны при нажатии <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd> и т.д.), прикрепляя к каждой консоли специальный процесс под названием <span style="font-family: monospace; font-size: 95%; font-weight: bold;">agetty</span>. Этот процесс впоследствии обеспечивает возможность входа в систему через эти терминалы с помощью login.
</p>
<h3><span class="mw-headline" id=".D0.A1.D1.86.D0.B5.D0.BD.D0.B0.D1.80.D0.B8.D0.B8_.D0.B8.D0.BD.D0.B8.D1.86.D0.B8.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8">Сценарии инициализации</span></h3>
<p>Сейчас процесс init запускает сценарии из каталога <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span> не просто в случайном порядке. Более того, запускаются не все сценарии из <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span>, а только те, которые предписано исполнять. Решение о запуске сценария принимается в результате просмотра каталога <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span>.
</p><p>Во-первых, init запускает все сценарии из <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span>, на которые есть символьные ссылки из <span style="font-family: monospace; font-size: 95%">/etc/runlevels/boot/</span>. Обычно сценарии запускаются в алфавитном порядке, но в некоторых сценариях имеется информация о зависимостях от других сценариев, указывающая системе на необходимость их предварительного запуска.
</p><p>Когда все сценарии, указанные в <span style="font-family: monospace; font-size: 95%">/etc/runlevels/boot/</span>, будут выполнены, init переходит к запуску сценариев, на которые есть символьные ссылки из <span style="font-family: monospace; font-size: 95%">/etc/runlevels/default/</span>. И снова запуск происходит в алфавитном порядке, пока в сценарии не встретится информация о	зависимостях; тогда порядок изменяется для обеспечения правильного порядка запуска. Именно по данной причине команды, используемые во время установки Gentoo Linux, используют <code>default</code>, как в команде <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update add sshd default</span>.
</p>
<h3><span class="mw-headline" id=".D0.9A.D0.B0.D0.BA_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_init">Как работает init</span></h3>
<p>Конечно, init не принимает решений сам по себе. Ему необходим конфигурационный файл, где описаны необходимые действия. Этот файл - <span style="font-family: monospace; font-size: 95%">/etc/inittab</span>.
</p><p>Если вы запомнили последовательность загрузки, описанную чуть ранее, вы вспомните, что первое действие init - это монтирование всех файловых систем. Это определяется в следующей строке файла <span style="font-family: monospace; font-size: 95%">/etc/inittab</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Строка инициализации</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>si::sysinit:/sbin/rc sysinit
</pre></div></pre>
<p>Этой строкой процессу init предписывается выполнить <span style="font-family: monospace; font-size: 95%; font-weight: bold;">/sbin/rc sysinit</span> для инициализации системы. Самой инициализацией занимается сценарий <span style="font-family: monospace; font-size: 95%">/sbin/rc</span>, так что можно сказать, что init делает не слишком много - он просто делегирует задачу по инициализации системы другому процессу.
</p><p>Во-вторых, init выполняет все сценарии, на которые есть символьные ссылки из <span style="font-family: monospace; font-size: 95%">/etc/runlevels/boot/</span>. Это определяется следующей строкой:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Выполнение загрузочных команд</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>rc::bootwait:/sbin/rc boot
</pre></div></pre>
<p>И снова все необходимые действия выполняются сценарием rc. Заметьте, что параметр, переданный rc (boot), совпадает с названием используемого подкаталога в <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span>.
</p><p>Теперь init проверяет свой конфигурационный файл, чтобы определить, какой уровень запуска нужно запустить. Для этого из <span style="font-family: monospace; font-size: 95%">/etc/inittab</span> считывается строка:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Выбор уровня запуска по умолчанию</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>id:3:initdefault:
</pre></div></pre>
<p>В приведенном примере (который подходит для подавляющего большинства пользователей Gentoo) номер уровня запуска - 3. Пользуясь этой информацей, init проверяет, что нужно выполнить для запуска уровня запуска 3:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Определения уровней запуска</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>l0:0:wait:/sbin/rc shutdown
l1:S1:wait:/sbin/rc single
l2:2:wait:/sbin/rc nonetwork
l3:3:wait:/sbin/rc default
l4:4:wait:/sbin/rc default
l5:5:wait:/sbin/rc default
l6:6:wait:/sbin/rc reboot
</pre></div></pre>
<p>В строке, определяющей уровень 3, для запуска служб снова используется сценарий rc (на этот раз с аргументом <code>default</code>). Опять-таки, обратите внимание, что аргумент, передаваемый сценарию rc, совпадает с названием подкаталога из <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span>.
</p><p>По окончании работы rc, init принимает решение о том, какие виртуальные консоли включить и какие команды выполнить в каждой из них:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/inittab</code></strong><strong>Определение виртуальных консолей</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>c1:12345:respawn:/sbin/agetty 38400 tty1 linux
c2:12345:respawn:/sbin/agetty 38400 tty2 linux
c3:12345:respawn:/sbin/agetty 38400 tty3 linux
c4:12345:respawn:/sbin/agetty 38400 tty4 linux
c5:12345:respawn:/sbin/agetty 38400 tty5 linux
c6:12345:respawn:/sbin/agetty 38400 tty6 linux
</pre></div></pre>
<h3><span class="mw-headline" id=".D0.A1.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D1.83.D1.8E.D1.89.D0.B8.D0.B5_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D0.B8_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0">Существующие уровни запуска</span></h3>
<p>В предыдущем разделе мы увидели, что init применяет нумерацию для определения уровня запуска, который надо использовать. Уровень запуска - это то состояние, в котором запускается ваша система, он содержит набор сценариев (сценариев уровня запуска или сценариев инициализации), которые следует выполнять, при входе и выходе из определенного уровня запуска.
</p><p>В Gentoo определено семь уровней запуска: три служебных и четыре определяемых пользователем. Служебные называются <i>sysinit</i>, <i>shutdown</i> и <i>reboot</i>. Действия, совершаемые ими, в точности соответствуют их названиям: инициализация системы, выключение системы и ее перезагрузка.
</p><p>Определяемые пользователем уровни - это те, которым соответствуют подкаталоги в <span style="font-family: monospace; font-size: 95%">/etc/runlevels/</span>: <i>boot</i>, <i>default</i>, <i>nonetwork</i> и <i>single</i>. Уровень <i>boot</i> запускает все службы, необходимые системе и используемые всеми остальными уровнями. Остальные уровни отличаются друг от друга запускаемыми службами: <i>default</i> используется для повседневной работы, <i>nonetwork</i> - для тех случаев, когда не требуется сеть, а <i>single</i> используется при необходимости восстановления системы.
</p>
<h3><span class="mw-headline" id=".D0.A0.D0.B0.D0.B1.D0.BE.D1.82.D0.B0_.D1.81.D0.BE_.D1.81.D1.86.D0.B5.D0.BD.D0.B0.D1.80.D0.B8.D1.8F.D0.BC.D0.B8_.D0.B8.D0.BD.D0.B8.D1.86.D0.B8.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8">Работа со сценариями инициализации</span></h3>
<p>Сценарии, запускаемые процессом rc, называются сценариями инициализации. Каждый сценарий из <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span> может запускаться с аргументами <code>start</code>, <code>stop</code>, <code>restart</code>, <code>zap</code>, <code>status</code>, <code>ineed</code>, <code>iuse</code>, <code>needsme</code>, <code>usesme</code> или <code>broken</code>.
</p><p>Для запуска, остановки или перезапуска службы (и всех, зависящих от нее) следует использовать <code>start</code>, <code>stop</code> и <code>restart</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix start</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Заметка</strong><br />Останавливаются или перезапускаются только те службы, которым необходима данная служба. Остальные зависимые службы (те, которые используют службу, но не нуждаются в ней) эта операция не затрагивает.</div>
<p>Если вы хотите остановить службу, но оставить зависимые от нее работающими, можно использовать опцию <code>--nodeps</code> вместе с аргументом stop:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix --nodeps stop</code></div></div>
<p>Чтобы узнать текущее состояние службы (запущена, остановлена, и т.д.), можно использовать аргумент <code>status</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix status</code></div></div>
<p>Если указано, что служба работает, но вы знаете, что это не так, можно сбросить состояние на <i>stopped </i>, используя аргумент <code>zap</code>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix zap</code></div></div>
<p>Для того, чтобы выяснить зависимости службы, можно использовать аргументы <code>iuse</code> или <code>ineed</code>. С помощью <code>ineed</code> вы увидите те службы, которые действительно необходимы для правильного функционирования интересующей вас службы. С другой стороны, <code>iuse</code> покажет те службы, которые могут использоваться нашей службой, но не обязательны для ее корректной работы.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix ineed</code></div></div>
<p>Аналогично вы можете узнать, какие службы нуждаются в данной службе (<code>needsme</code>) или могут ее использовать (<code>usesme</code>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix needsme</code></div></div>
<p>Наконец, можно просмотреть список служб, требующихся для данной, но отсутствующих в системе:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/postfix broken</code></div></div>
<h2><span class="mw-headline" id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D0.B5.D0.B9_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0">Обновление уровней запуска</span></h2>
<h3><span class="mw-headline" id="rc-update">rc-update</span></h3>
<p>Система инициализации Gentoo использует дерево зависимостей для определения служб, которые запускаются в первую очередь. Так как это очень утомительное занятие, и мы бы не хотели, чтобы пользователь занимался этим вручную, мы разработали инструменты, упрощающие управление уровнями запуска и сценариями инициализации.
</p><p>Используя <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span>, можно включать и исключать сценарии инициализации из уровней запуска. Из <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span> автоматически запускается сценарий <span style="font-family: monospace; font-size: 95%">depscan.sh</span> для перестроения дерева зависимостей.
</p>
<h3><span class="mw-headline" id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8_.D1.83.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.BB.D1.83.D0.B6.D0.B1">Добавление и удаление служб</span></h3>
<p>В процессе установки Gentoo вы уже добавляли сценарии инициализации в уровень запуска <i>default</i>. Ранее в данном документе было объяснено, что означает <i>default</i>. Кроме уровня запуска, сценарию <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span> требуется второй аргумент, определяющий действие: <code>add</code> (добавить), <code>del</code> (удалить) или <code>show</code> (показать).
</p><p>Для того, чтобы добавить или удалить сценарий, просто введите <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span> с аргументом <code>add</code> или <code>del</code>, затем название сценария и уровня запуска. Например:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update del postfix default</code></div></div>
<p>По команде <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update -v show</span> выводится список всех доступных сценариев с указанием соответствующих уровней запуска:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update -v show</code></div></div>
<p>Вы также можете запустить <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update show</span> (без <code>-v</code>) чтобы просто просмотреть включенные инициализационные скрипты и их уровни запуска.
</p>
<h2><span class="mw-headline" id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D0.BB.D1.83.D0.B6.D0.B1">Настройка служб</span></h2>
<h3><span class="mw-headline" id=".D0.9F.D0.BE.D1.87.D0.B5.D0.BC.D1.83_.D0.BD.D0.B5.D0.BE.D0.B1.D1.85.D0.BE.D0.B4.D0.B8.D0.BC.D0.B0_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0">Почему необходима дополнительная настройка</span></h3>
<p>Сценарии инициализации могут быть весьма сложны. Поэтому нежелательно допускать непосредственное редактирование сценария пользователями, т.к. это может привнести в систему множество ошибок. Но, с другой стороны, необходимо правильно настроить службу. Например, может понадобиться передать службе дополнительные параметры.
</p><p>Вторая причина, по которой настройки хранятся отдельно от самого сценария - это возможность обновления сценария без опасения, что все ваши настройки будут утеряны.
</p>
<h3><span class="mw-headline" id=".D0.9A.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3_conf.d">Каталог conf.d</span></h3>
<p>В Gentoo предусмотрен очень простой способ настройки служб: для каждого сценария, предполагающего настройку, в каталоге <span style="font-family: monospace; font-size: 95%">/etc/conf.d/</span> есть конфигурационный файл. Например, у сценария, запускающего <span style="font-family: monospace; font-size: 95%">apache2</span> (под названием <span style="font-family: monospace; font-size: 95%">/etc/init.d/apache2</span>) есть настроечный файл <span style="font-family: monospace; font-size: 95%">/etc/conf.d/apache2</span>, где могут храниться нужные вам параметры, передаваемые серверу Apache 2 при запуске:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/conf.d/apache2</code></strong><strong>Пример настроек для скрипта инициализации apache2</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">APACHE2_OPTS</span><span class="o">=</span><span class="s2">&quot;-D PHP5&quot;</span>
</pre></div></pre>
<p>Такие файлы настроек содержат <i>только</i> переменные (наподобие <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span>), облегчая настройку служб. Это также позволяет нам давать больше информации о переменных (в комментариях).
</p>
<h2><span class="mw-headline" id=".D0.9D.D0.B0.D0.BF.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D1.86.D0.B5.D0.BD.D0.B0.D1.80.D0.B8.D0.B5.D0.B2_.D0.B8.D0.BD.D0.B8.D1.86.D0.B8.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8">Написание сценариев инициализации</span></h2>
<h3><span class="mw-headline" id=".D0.AD.D1.82.D0.BE_.D0.BD.D0.B5.D0.BE.D0.B1.D1.85.D0.BE.D0.B4.D0.B8.D0.BC.D0.BE.3F">Это необходимо?</span></h3>
<p>Нет, написание сценариев инициализации обычно не требуется, т.к. Gentoo содержит готовые сценарии для всех поддерживаемых служб. Однако, вы можете установить какую-либо службу, не используя систему Portage; в таком случае, вероятно, вам придется создавать сценарий инициализации самостоятельно.
</p><p>Не используйте сценарий, идущий со службой, если он не написан специально для Gentoo: сценарии инициализации Gentoo не совместимы со сценариями, используемыми в других дистрибутивах!
</p>
<h3><span class="mw-headline" id=".D0.A1.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0">Структура</span></h3>
<p>Основная структура сценария инициализации показана ниже.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Пример структуры сценарий</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c">#!/sbin/runscript</span>
  
depend<span class="o">()</span> <span class="o">{</span>
  <span class="o">(</span>Информация о зависимостях<span class="o">)</span>
<span class="o">}</span>
  
start<span class="o">()</span> <span class="o">{</span>
  <span class="o">(</span>Команды, необходимые для запуска службы<span class="o">)</span>
<span class="o">}</span>
  
stop<span class="o">()</span> <span class="o">{</span>
  <span class="o">(</span>Команды, необходимые для остановки службы<span class="o">)</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>В любом сценарии должна быть определена функция start(). Все остальные разделы необязательны.
</p>
<h3><span class="mw-headline" id=".D0.97.D0.B0.D0.B2.D0.B8.D1.81.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B8">Зависимости</span></h3>
<p>Существуют две настройки, работающие с зависимостями, которые вы можете определить, и они будут влиять на порядок запуска инициализационных скриптов: <i>use</i> (использую) и <i>need</i> (нуждаюсь). Кроме этих двух, существуют еще два влияющих на порядок загрузки метода, называющихся <i>before</i> (перед) и <i>after</i> (после). Последние два определяют не зависимости, они не заставят выдать ошибку скрипт, если тот скрипт, что в них описан вообще не должен запуститься (или не запустится).
</p>
<ul><li> Настройка <i>use</i> информирует систему init, что данный скрипт использует функциональность некоторого скрипта, но строго от него не зависит. Хорошим примером будет <i>use logger</i> или <i>use dns</i>. Если эти сервисы есть, они будут хорошо использоваться, но если у вас нет логгера, или DNS-сервера, сервисы все равно будут работать. Если сервисы существуют, они будут запущены до того, как запустится скрипт, использующий их.</li>
<li> Настройка <i>need</i> это жесткая зависимость. Она означает, что скрипт, которому нужен другой скрипт, не запустится, пока другой скрипт не запустится успешно. Также, если другой скрипт будет перезапущен, то этот тоже будет перезапущен.</li>
<li> При использовании <i>before</i>, данный скрипт запускается до некоторого скрипта, если выбранный скрипт это часть того же	уровня инициализации. Так, инициализационный скрипт xdm, который определен <i>before alsasound</i> будет запущен до скрипта alsasound, но только если alsasound запланирован запуститься на том же уровне инициализации. Если alsasound не запланирован запуститься, то эта конкретная настройка не будет иметь эффекта, и xdm запустится в тот момент времени, который система init посчитает лучшим вариантом.</li>
<li> Похожим образом, <i>after</i> информирует систему init, что данный скрипт нужно запустить после некоторого скрипта, если выбранный скрипт является частью того же уровня инициализации. Если нет, то настройка не имеет эффекта, и скрипт будет запущен системой init в момент времени, который, как она посчитает, будет наилучшим.</li></ul>
<p>Из вышенаписанного должно быть ясно, что <i>need</i> это единственная <i>действительная</i> настройка зависимостей, так как она влияет на то, будет ли запущен скрипт или нет. Все остальные являются больше указателями системе init, говорящими в каком порядке скрипты могут (или должны) запускаться.
</p><p>Теперь, если вы посмотрите на многие из существующих инициализационных скриптов Gentoo, вы заметите, что некоторые из них имеют зависимости от вещей, которые не являются инициализационными скриптами. Эти <i>вещи</i> мы называем виртуальными.
</p><p><i>Виртуальная зависимость</i> - это зависимость от функций, предоставляемых службой, но не какой-то единственной службой. Сценарий может зависеть от службы системного журнала, но таких достаточно много (metalogd, syslog-ng, sysklogd и т.п.). Поскольку нельзя нуждаться в каждой из них (ни в одной вразумительной системе они не запущены все сразу), мы обеспечили предоставление виртуальной зависимости всеми этими службами.
</p><p>Например, давайте взглянем на информацию о зависимостях postfix.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/init.d/postfix</code></strong><strong>Информация о зависимостях сервиса Postfix</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  need net
  use logger dns
  provide mta
<span class="o">}</span>
</pre></div></pre>
<p>Как можно увидеть, сервис postfix:
</p>
<ul><li> требует сеть (net): виртуальная зависимость, удовлетворяемая, например, <span style="font-family: monospace; font-size: 95%">/etc/init.d/net.eth0</span></li>
<li> использует журнал (logger): виртуальная зависимость, удовлетворяемая, например, <span style="font-family: monospace; font-size: 95%">/etc/init.d/syslog-ng</span></li>
<li> использует службу имен (dns): виртуальная зависимость, удовлетворяемая, например, <span style="font-family: monospace; font-size: 95%">/etc/init.d/named</span></li>
<li> предоставляет почтовый агент (mta): виртуальная зависимость, общая для всех программ - почтовых серверов</li></ul>
<h3><span class="mw-headline" id=".D0.9F.D0.BE.D1.80.D1.8F.D0.B4.D0.BE.D0.BA_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0">Порядок запуска</span></h3>
<p>Как мы описали в предыдущем разделе, вы можете сказать системе init, в каком порядке она должна запускать (или останавливать) скрипты. Этот порядок поддерживается как через настройки зависимостей use и need, так и через настройки порядка before и after. Так как мы описали их ранее, давайте посмотрим на сервис Portmap, как на пример такого инициализационного скрипта.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/init.d/portmap</code></strong><strong>Информация о зависимостях сервиса portmap</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  need net
  before inetd
  before xinetd
<span class="o">}</span>
</pre></div></pre>
<p>Также можно использовать знак "*", чтобы охватить все службы данного уровня запуска, хотя это не рекомендуется.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Использование символа *</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  before *
<span class="o">}</span>
</pre></div></pre></div>
<p>Если ваш сервис должен писать на локальные диски, он должен потребовать localmount. Если он что-либо поместит в <span style="font-family: monospace; font-size: 95%">/var/run/</span>, например, pid-файл, он должен запускаться после bootmisc:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Настройка зависимостей - нам нужен localmount и мы стартуем после bootmisc</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>depend<span class="o">()</span> <span class="o">{</span>
  need localmount
  after bootmisc
<span class="o">}</span>
</pre></div></pre></div>
<h3><span class="mw-headline" id=".D0.A1.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D1.8B.D0.B5_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8">Стандартные функции</span></h3>
<p>Следом за разделом <code>depend()</code> вам потребуется определить функцию <code>start()</code>. В ней содержатся все команды, необходимые для запуска вашей службы. Рекомендуется применять функции <code>ebegin</code> и <code>eend</code> для сообщений пользователю о том, что происходит:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Пример функции start()</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>start<span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">RC_CMD</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;restart&quot;</span> <span class="o">]</span><span class="p">;</span>
  <span class="k">then</span>
    <span class="c"># Что-нибудь сделать, если рестарт требует больше, чем просто последовательный запуск stop и start</span>
  <span class="k">fi</span>
  
  ebegin <span class="s2">&quot;Запуск - моя_служба&quot;</span>
  start-stop-daemon --start --exec /path/to/my_service <span class="se">\</span>
    --pidfile /path/to/my_pidfile
  eend <span class="nv">$?</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>Как <code>--exec</code>, так и <code>--pidfile</code> должны использоваться в функциях start и stop. Если сервис не создает pid-файл, тогда используйте <code>--make-pidfile</code>, если возможно, хотя лучше протестировать это, чтобы быть уверенным. Иначе, не используйте pid-файлы. Вы также можете добавить <code>--quiet</code> к опциям start-stop-daemon, но это не рекомендуется, если только сервис не очень многословный. Использование <code>--quiet</code> может скрыть информацию если сервис не сможет запуститься.
</p><p>Другой интересной настройкой, используемой в вышеприведенном примере является проверка содержимого переменной <var>RC_CMD</var>. В отличие от предыдущей инициализационной системы, новая система openrc не поддерживает отдельную функциональность restart для каждого скрипта. Вместо этого, скрипт должен проверить содержимое переменной <var>RC_CMD</var>, чтобы проверить, вызывается ли функция (как <code>start()</code>, так и <code>stop()</code>) как часть restart, или нет.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Заметка</strong><br />Удостоверьтесь, что <code>--exec</code> действительно вызывает сервис, а не shell-скрипт, который запускает сервисы и выходит — это должен делать сам инициализационный скрипт.</div>
<p>Если вам нужны дополнительные примеры функции <code>start()</code>, пожалуйста, прочитайте исходные коды сценариев инициализации, находящихся в каталоге <span style="font-family: monospace; font-size: 95%">/etc/init.d/</span>.
</p><p>Еще одной функцией, которую можно определить (но вы не обязаны это делать), является <code>stop()</code>. Система инициализации, применяемая нами, достаточно развита и в состоянии самостоятельно заполнить эту функцию, если вы используете start-stop-daemon.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Пример функции stop()</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>stop<span class="o">()</span> <span class="o">{</span>
  ebegin <span class="s2">&quot;Останавливаю Мой_сервис&quot;</span>
  start-stop-daemon --stop --exec /path/to/my_service <span class="se">\</span>
    --pidfile /path/to/my_pidfile
  eend <span class="nv">$?</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>Если ваш сервис запускает некоторый другой скрипт (например, на Bash, Python или Perl), и этот скрипт позднее изменяет имя (например, с <span style="font-family: monospace; font-size: 95%">foo.py</span> на foo), тогда вам нужно добавить <code>--name</code> к start-stop-daemon. Вы должны определить имя, на которое имя файла будет изменено. В приведенном примере, сервис запускает <span style="font-family: monospace; font-size: 95%">foo.py</span>, а потом это имя меняется на foo:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Пример определения сервиса, который запускает скрипт foo</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>start<span class="o">()</span> <span class="o">{</span>
  ebegin <span class="s2">&quot;Запускаю мой_скрипт&quot;</span>
  start-stop-daemon --start --exec /path/to/my_script <span class="se">\</span>
    --pidfile /path/to/my_pidfile --name foo
  eend <span class="nv">$?</span>
<span class="o">}</span>
</pre></div></pre></div>
<p>У start-stop-daemon есть отличная man-страница, которую вы можете посмотреть, если вам нужна дополнительная информация.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>man start-stop-daemon</code></div></div>
<p>Синтаксис сценариев инициализации, применяемых в Gentoo, основан на оболочке POSIX, поэтому вы можете свободно использовать внутри своих сценариев sh-совместимые конструкции. Остальные конструкции, вроде тех, которые 	специфичны только для bash, выносите за пределы инициализационных сценариев, чтобы быть уверенным, что скрипты будут работать независимо от того, что Gentoo может сделать со своей системой инициализации.
</p>
<h3><span class="mw-headline" id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D0.BE.D0.B2">Добавление дополнительных параметров</span></h3>
<p>Если вы хотите ввести в сценарий дополнительные параметры, кроме упоминавшихся, нужно добавить к переменной extra_commands название параметра и создать функцию	с названием, соответствующим параметру. Например, для поддержки параметра restartdelay:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Пример определения метода restartdelay</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">extra_commands</span><span class="o">=</span><span class="s2">&quot;restartdelay&quot;</span>
  
restartdelay<span class="o">()</span> <span class="o">{</span>
  stop
  sleep <span class="m">3</span>    <span class="c"># пауза в 3 секунды перед повторным запуском</span>
  start
<span class="o">}</span>
</pre></div></pre></div>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Важно</strong><br />Функция restart не может быть переназначена в openrc!</div>
<h3><span class="mw-headline" id=".D0.9F.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D0.B5_.D0.B4.D0.BB.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D1.81.D0.BB.D1.83.D0.B6.D0.B1">Переменные для настройки служб</span></h3>
<p>Для поддержки настроечных файлов из каталога <span style="font-family: monospace; font-size: 95%">/etc/conf.d/</span> ничего дополнительно делать не нужно: при запуске вашего сценария инициализации автоматически подключаются следующие файлы (т.е., переменные из них становятся доступны):
</p>
<ul><li> <span style="font-family: monospace; font-size: 95%">/etc/conf.d/ВАШ_СКРИПТ_ИНИЦИАЛИЗАЦИИ</span></li>
<li> <span style="font-family: monospace; font-size: 95%">/etc/conf.d/basic</span></li>
<li> <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span></li></ul>
<p>Кроме того, если ваш инициализационный сценарий предоставляет виртуальную зависимость (например, net), то также подключается файл, соответствующий этой зависимости (например, <span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>).
</p>
<h2><span class="mw-headline" id=".D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D1.8F_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D0.B5.D0.B9_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0">Изменение поведения уровней запуска</span></h2>
<h3><span class="mw-headline" id=".D0.9A.D1.82.D0.BE_.D0.BC.D0.BE.D0.B6.D0.B5.D1.82_.D0.BE.D1.82_.D1.8D.D1.82.D0.BE.D0.B3.D0.BE_.D0.B2.D1.8B.D0.B8.D0.B3.D1.80.D0.B0.D1.82.D1.8C.3F">Кто может от этого выиграть?</span></h3>
<p>Большинству пользователей ноутбуков знакома ситуация: дома вам нужен запуск net.eth0, и наоборот, в дороге запуск net.eth0 не нужен (так как сеть недоступна). В Gentoo можно изменять поведение уровней запуска по своему усмотрению.
</p><p>Например вы можете создать второй загружаемый уровень запуска <i>default</i>, в котором будут другие сценарии. Затем при загрузке вы сможете выбрать, какой из уровней default следует использовать.
</p>
<h3><span class="mw-headline" id="Using_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.BC.D0.BD.D0.BE.D0.B3.D0.BE_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D1.8F_.28softlevel.29">Using программного уровня (softlevel)</span></h3>
<p>Прежде всего, создайте каталог для своего второго уровня запуска <i>default</i>. Например, создадим уровень запуска <i>offline</i>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir /etc/runlevels/offline</code></div></div>
<p>Добавьте необходимые сценарии инициализации в только что созданный уровень запуска. Например, чтобы получить точную копию уровня default, за исключением net.eth0:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /etc/runlevels/default
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>for service in *; do rc-update add $service offline; done
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update del net.eth0 offline
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update show offline</code></div><pre>
(Partial sample Output)
               acpid | offline
          domainname | offline
               local | offline
            net.eth0 |
</pre></div>
<p>Даже несмотря на то, что net.eth0 был удален с уровня запуска offline, udev может попытаться запустить любые устройства, которые найдет, и запустить соответствующие сервисы. Данная функциональность называется hotplugging. По умолчанию, Gentoo отключает hotplugging.
</p><p>Если вы хотите включить hotplugging, но только для конкретного набора скриптов, используйте переменную <var>rc_hotplug</var> в <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/rc.conf</code></strong><strong>Включение hotplugging на интерфейсе WLAN</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">rc_hotplug</span><span class="o">=</span><span class="s2">&quot;net.wlan !net.*&quot;</span>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Заметка</strong><br />Для более детальной информации о сервисах, инициируемых устройствами, просмотрите комментарии в <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span>.</div>
<p>Теперь необходимо отредактировать конфигурацию загрузчика, добавив новую запись для уровня запуска offline. В данной записи добавьте <code>softlevel=offline</code> в качестве параметра загрузки.
</p>
<h3><span class="mw-headline" id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D0.BE.D0.B3.D0.BE_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D1.8F_.28bootlevel.29">Использование загрузочного уровня (bootlevel)</span></h3>
<p>Использование загрузочного уровня полностью аналогично использованию программного уровня. Единственная разница состоит в том, что вы определяете второй уровень <i>boot</i> вместо второго уровня <i>default</i>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Working/Features/ru.html" title="Предыдущая часть" class="btn btn-default">&#8592; </a> <a href="../../ru.html" title="Handbook:AMD64/ru" class="btn btn-default">К содержанию</a> <a href="../../Working/EnvVar/ru.html" title="Следующая часть" class="btn btn-default">Environment variables &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Full/Working (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Working.html" title="Handbook:AMD64/Full/Working (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Working/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/ワーキング (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Working/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">русский</span> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/使用Gentoo (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Установка
</th></tr>
<tr>
<td> <a href="../../Installation/About/ru.html" title="Handbook:AMD64/Installation/About/ru">Об установке</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media/ru.html" title="Handbook:AMD64/Installation/Media/ru">Выбор подходящего источника для установки</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking/ru.html" title="Handbook:AMD64/Installation/Networking/ru">Настройка сети</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks/ru.html" title="Handbook:AMD64/Installation/Disks/ru">Подготовка дисков</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage/ru.html" title="Handbook:AMD64/Installation/Stage/ru">Установка stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base/ru.html" title="Handbook:AMD64/Installation/Base/ru">Установка базовой системы</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel/ru.html" title="Handbook:AMD64/Installation/Kernel/ru">Настройка ядра</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System/ru.html" title="Handbook:AMD64/Installation/System/ru">Настройка системы</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools/ru.html" title="Handbook:AMD64/Installation/Tools/ru">Установка системных средств</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader/ru.html" title="Handbook:AMD64/Installation/Bootloader/ru">Настройка начального загрузчика</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing/ru.html" title="Handbook:AMD64/Installation/Finalizing/ru">Завершение</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Работа с Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage/ru.html" title="Handbook:AMD64/Working/Portage/ru">Введение в Portage</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE/ru.html" title="Handbook:AMD64/Working/USE/ru">USE-флаги</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features/ru.html" title="Handbook:AMD64/Working/Features/ru">Возможности Portage</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts/ru.html" title="Handbook:AMD64/Working/Initscripts/ru">Сценарии инициализации</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar/ru.html" title="Handbook:AMD64/Working/EnvVar/ru">Переменные окружения</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Работа с Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files/ru.html" title="Handbook:AMD64/Portage/Files/ru">Файлы и каталоги</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables/ru.html" title="Handbook:AMD64/Portage/Variables/ru">Переменные</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches/ru.html" title="Handbook:AMD64/Portage/Branches/ru">Смешение ветвей программного обеспечения</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools/ru.html" title="Handbook:AMD64/Portage/Tools/ru">Дополнительные средства</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree/ru.html" title="Handbook:AMD64/Portage/CustomTree/ru">Отступление от официального дерева</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced/ru.html" title="Handbook:AMD64/Portage/Advanced/ru">Расширенные возможности</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Настройка сети
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction/ru.html" title="Handbook:AMD64/Networking/Introduction/ru">Начальная настройка</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced/ru.html" title="Handbook:AMD64/Networking/Advanced/ru">Расширенная настройка</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular/ru.html" title="Handbook:AMD64/Networking/Modular/ru">Модульное построение сети</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless/ru.html" title="Handbook:AMD64/Networking/Wireless/ru">Беспроводная сеть</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending/ru.html" title="Handbook:AMD64/Networking/Extending/ru">Добавляем функциональность</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic/ru.html" title="Handbook:AMD64/Networking/Dynamic/ru">Динамическое управление</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Environment_variables">Environment variables</span></h2>
<h3><span class="mw-headline" id=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5">Введение</span></h3>
<p>An environment variable is a named object that contains information used by one or more applications. Many users (and especially those new to Linux) find this a bit weird or unmanageable. However, this is a mistake: by using environment variables one can easily change a configuration setting for one or more applications.
</p>
<h3><span class="mw-headline" id="Important_examples">Important examples</span></h3>
<p>The following table lists a number of variables used by a Linux system and describes their use. Example values are presented after the table.
</p>
<table class="table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col width=15%"> Variable
</th>
<th> Description
</th></tr>
<tr>
<td> <var>PATH</var>
</td>
<td> This variable contains a colon-separated list of directories in which the system looks for executable files. If a name is entered of an executable (such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ls</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span>, or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge</span>) but this executable is not located in a listed directory, then the system will not execute it (unless the full path is entered as the command, such as <span style="font-family: monospace; font-size: 95%">/bin/ls</span>).
</td></tr>
<tr>
<td> <var>ROOTPATH</var>
</td>
<td> This variable has the same function as <var>PATH</var>, but this one only lists the directories that should be checked when the root-user enters a command.
</td></tr>
<tr>
<td> <var>LDPATH</var>
</td>
<td> This variable contains a colon-separated list of directories in which the dynamical linker searches through to find a library.
</td></tr>
<tr>
<td> <var>MANPATH</var>
</td>
<td> This variable contains a colon-separated list of directories in which the man command searches for the man pages.
</td></tr>
<tr>
<td> <var>INFODIR</var>
</td>
<td> This variable contains a colon-separated list of directories in which the info command searches for the info pages.
</td></tr>
<tr>
<td> <var>PAGER</var>
</td>
<td> This variable contains the path to the program used to list the contents of files through (such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">less</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">more</span>).
</td></tr>
<tr>
<td> <var>EDITOR</var>
</td>
<td> This variable contains the path to the program used to change the contents of files with (such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">nano</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">vi</span>).
</td></tr>
<tr>
<td> <var>KDEDIRS</var>
</td>
<td> This variable contains a colon-separated list of directories which contain KDE-specific material.
</td></tr>
<tr>
<td> <var>CONFIG_PROTECT</var>
</td>
<td> This variable contains a space-delimited list of directories which should be protected by Portage during updates.
</td></tr>
<tr>
<td> <var>CONFIG_PROTECT_MASK</var>
</td>
<td> This variable contains a space-delimited list of directories which should not be protected by Portage during updates.
</td></tr></table>
<p>Below is an example definition of all these variables:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Example settings for the mentioned variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/bin:/usr/bin:/usr/local/bin:/opt/bin:/usr/games/bin&quot;</span>
<span class="nv">ROOTPATH</span><span class="o">=</span><span class="s2">&quot;/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin&quot;</span>
<span class="nv">LDPATH</span><span class="o">=</span><span class="s2">&quot;/lib:/usr/lib:/usr/local/lib:/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.3&quot;</span>
<span class="nv">MANPATH</span><span class="o">=</span><span class="s2">&quot;/usr/share/man:/usr/local/share/man&quot;</span>
<span class="nv">INFODIR</span><span class="o">=</span><span class="s2">&quot;/usr/share/info:/usr/local/share/info&quot;</span>
<span class="nv">PAGER</span><span class="o">=</span><span class="s2">&quot;/usr/bin/less&quot;</span>
<span class="nv">EDITOR</span><span class="o">=</span><span class="s2">&quot;/usr/bin/vim&quot;</span>
<span class="nv">KDEDIRS</span><span class="o">=</span><span class="s2">&quot;/usr&quot;</span>
<span class="nv">CONFIG_PROTECT</span><span class="o">=</span><span class="s2">&quot;/usr/X11R6/lib/X11/xkb /opt/tomcat/conf \</span>
<span class="s2">                /usr/kde/3.1/share/config /usr/share/texmf/tex/generic/config/ \</span>
<span class="s2">                /usr/share/texmf/tex/platex/config/ /usr/share/config&quot;</span>
<span class="nv">CONFIG_PROTECT_MASK</span><span class="o">=</span><span class="s2">&quot;/etc/gconf&quot;</span>
</pre></div></pre></div>
<h2><span class="mw-headline" id="Defining_variables_globally">Defining variables globally</span></h2>
<h3><span class="mw-headline" id="The_env.d_directory">The env.d directory</span></h3>
<p>To centralize the definitions of these variables, Gentoo introduced the <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> directory. Inside this directory a number of files are available, such as <span style="font-family: monospace; font-size: 95%">00basic</span>, <span style="font-family: monospace; font-size: 95%">05gcc</span>, etc. which contain the variables needed by the application mentioned in their name.
</p><p>For instance, when <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gcc</span> is installed, a file called <span style="font-family: monospace; font-size: 95%">05gcc</span> was created by the ebuild which contains the definitions of the following variables:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/env.d/05gcc</code></strong><strong>Default gcc enabled environment variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/i686-pc-linux-gnu/gcc-bin/3.2&quot;</span>
<span class="nv">ROOTPATH</span><span class="o">=</span><span class="s2">&quot;/usr/i686-pc-linux-gnu/gcc-bin/3.2&quot;</span>
<span class="nv">MANPATH</span><span class="o">=</span><span class="s2">&quot;/usr/share/gcc-data/i686-pc-linux-gnu/3.2/man&quot;</span>
<span class="nv">INFOPATH</span><span class="o">=</span><span class="s2">&quot;/usr/share/gcc-data/i686-pc-linux-gnu/3.2/info&quot;</span>
<span class="nv">CC</span><span class="o">=</span><span class="s2">&quot;gcc&quot;</span>
<span class="nv">CXX</span><span class="o">=</span><span class="s2">&quot;g++&quot;</span>
<span class="nv">LDPATH</span><span class="o">=</span><span class="s2">&quot;/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.3&quot;</span>
</pre></div></pre>
<p>Other distributions might tell their users to change or add such environment variable definitions in <span style="font-family: monospace; font-size: 95%">/etc/profile</span> or other locations. Gentoo on the other hand makes it easy for the user (and for Portage) to maintain and manage the environment variables without having to pay attention to the numerous files that can contain environment variables.
</p><p>For instance, when <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gcc</span> is updated, the <span style="font-family: monospace; font-size: 95%">/etc/env.d/05gcc</span> file is updated too without requesting any user-interaction.
</p><p>This not only benefits Portage, but also the user. Occasionally users might be asked to set a certain environment variable system-wide. As an example we take the <var>http_proxy</var> variable. Instead of messing about with <span style="font-family: monospace; font-size: 95%">/etc/profile</span>, users can now just create a file (say <span style="font-family: monospace; font-size: 95%">/etc/env.d/99local</span>) and enter the definition(s) in it:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/env.d/99local</code></strong><strong>Setting a global variable</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">http_proxy</span><span class="o">=</span><span class="s2">&quot;proxy.server.com:8080&quot;</span>
</pre></div></pre>
<p>By using the same file for all self-managed variables, users have a quick overview on the variables they have defined themselves.
</p>
<h3><span class="mw-headline" id="env-update">env-update</span></h3>
<p>Several files in <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> define the PATH variable. This is not a mistake: when <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span> is executed, it will append the several definitions before it updates the environment variables, thereby making it easy for packages (or users) to add their own environment variable settings without interfering with the already existing values.
</p><p>The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span> script will append the values in the alphabetical order of the <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> files. The file names must begin with two decimal digits.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">Код</span> <strong>Update order used by env-update</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>00basic        99kde-env       99local
     +-------------+----------------+-------------+
PATH=&quot;/bin:/usr/bin:/usr/kde/3.2/bin:/usr/local/bin&quot;
</pre></div></pre></div>
<p>The concatenation of variables does not always happen, only with the following variables: <var>ADA_INCLUDE_PATH</var>, <var>ADA_OBJECTS_PATH</var>, <var>CLASSPATH</var>, <var>KDEDIRS</var>, <var>PATH</var>, <var>LDPATH</var>, <var>MANPATH</var>, <var>INFODIR</var>, <var>INFOPATH</var>, <var>ROOTPATH</var>, <var>CONFIG_PROTECT</var>, <var>CONFIG_PROTECT_MASK</var>, <var>PRELINK_PATH</var>, <var>PRELINK_PATH_MASK</var>, <var>PKG_CONFIG_PATH</var>, and <var>PYTHONPATH</var>. For all other variables the latest defined value (in alphabetical order of the files in <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span>) is used.
</p><p>It is possible to add more variables into this list of concatenate-variables by adding the variable name to either <var>COLON_SEPARATED</var> or <var>SPACE_SEPARATED</var> variables (also inside an <span style="font-family: monospace; font-size: 95%">/etc/env.d/</span> file).
</p><p>When executing <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span>, the script will create all environment variables and place them in <span style="font-family: monospace; font-size: 95%">/etc/profile.env</span> (which is used by <span style="font-family: monospace; font-size: 95%">/etc/profile</span>). It will also extract the information from the <var>LDPATH</var> variable and use that to create <span style="font-family: monospace; font-size: 95%">/etc/ld.so.conf</span>. After this, it will run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ldconfig</span> to recreate the <span style="font-family: monospace; font-size: 95%">/etc/ld.so.cache</span> file used by the dynamical linker.
</p><p>To notice the effect of <span style="font-family: monospace; font-size: 95%; font-weight: bold;">env-update</span> immediately after running it, execute the following command to update the environment. Users who have installed Gentoo themselves will probably remember this from the installation instructions:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>env-update &amp;&amp; source /etc/profile</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Заметка</strong><br />The above command only updates the variables in the current terminal, new consoles, and their children. Thus, if the user is working in X11, he needs to either type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">source /etc/profile</span> in every new terminal opened or restart X so that all new terminals source the new variables. If a login manager is used, it is necessary to become root and restart the <span style="font-family: monospace; font-size: 95%">/etc/init.d/xdm</span> service. </div>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Важно</strong><br />It is not possible to use shell variables when defining other variables. This means things like FOO="$BAR" (where $BAR is another variable) are forbidden.</div>
<h2><span class="mw-headline" id="Defining_variables_locally">Defining variables locally</span></h2>
<h3><span class="mw-headline" id="User_specific">User specific</span></h3>
<p>It might not be necessary to define an environment variable globally. For instance, one might want to add <span style="font-family: monospace; font-size: 95%">/home/my_user/bin</span> and the current working directory (the directory the user is in) to the <var>PATH</var> variable but do not want all other users on the system to have that in their <var>PATH</var> too. To define an environment variable locally, use <span style="font-family: monospace; font-size: 95%">~/.bashrc</span> or <span style="font-family: monospace; font-size: 95%">~/.bash_profile</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">Файл</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">~/.bashrc</code></strong><strong>Extending PATH for local usage</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c"># A colon followed by no directory is treated as the current working directory</span>
<span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:/home/my_user/bin:&quot;</span>
</pre></div></pre>
<p>After logout/login, the <var>PATH</var> variable will be updated.
</p>
<h3><span class="mw-headline" id="Session_specific">Session specific</span></h3>
<p>Sometimes even stricter definitions are requested. For instance, a user might want to be able to use binaries from a temporary directory created without using the path to the binaries themselves or editing <span style="font-family: monospace; font-size: 95%">~/.bashrc</span> for the short time necessary.
</p><p>In this case, just define the <var>PATH</var> variable in the current session by using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">export</span> command. As long as the user does not log out, the <var>PATH</var> variable will be using the temporary settings.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export PATH="${PATH}:/home/my_user/tmp/usr/bin"</code></div></div>
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Working/Initscripts.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Portage/Files.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
<span class="error"><strong>Warning:</strong> Display title "Настольная книга Gentoo Linux amd64: Работа с Gentoo" overrides earlier display title "Handbook:AMD64/Full/Working".</span>
</p><p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20160112144153
Cache expiry: 86400
Dynamic content: false
CPU time usage: 1.532 seconds
Real time usage: 1.675 seconds
Preprocessor visited node count: 7427/1000000
Preprocessor generated node count: 7138/1000000
Post‐expand include size: 480837/2097152 bytes
Template argument size: 38639/2097152 bytes
Highest expansion depth: 17/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00% 1147.391      1 - Handbook:Parts/Full/Working/ru
100.00% 1147.391      1 - -total
 44.30%  508.343      1 - Handbook:AMD64/Working/Portage/ru
 44.03%  505.247      1 - Handbook:Parts/Working/Portage/ru
 24.98%  286.615      1 - Handbook:AMD64/Working/Initscripts/ru
 24.73%  283.731      1 - Handbook:Parts/Working/Initscripts/ru
 22.91%  262.864     34 - Template:RootCmd
 22.69%  260.309      3 - Handbook:Parts/TOC/ru
 22.12%  253.772     41 - Template:GenericCmd
 16.51%  189.449      1 - Handbook:AMD64/Working/USE/ru
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:77406-0!*!0!!en!*!* and timestamp 20160112144151 and revision id 191064
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Working/ru&amp;oldid=191064">http://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Working/ru&amp;oldid=191064</a>"</div>
															<div id='catlinks' class='catlinks catlinks-allhidden'></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 27 December 2014, at 15:33.</li>
																															<li id="privacy"><a href="../../../Gentoo_Wiki_Privacy_policy.html" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="../../../Gentoo_Wiki_About.html" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="../../../Gentoo_Wiki_General_disclaimer.html" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "Handbook:AMD64/Full/Working/ru"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="http://piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":1924});
} );</script></body>
<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:AMD64/Full/Working/ru by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 17:23:42 GMT -->
</html>