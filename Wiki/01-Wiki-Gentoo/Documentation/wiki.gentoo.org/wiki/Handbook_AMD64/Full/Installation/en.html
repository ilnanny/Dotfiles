<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:AMD64/Full/Installation/en by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 18:38:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Gentoo Linux amd64 Handbook: Installing Gentoo - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"Handbook","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":560,"wgPageName":"Handbook:AMD64/Full/Installation/en","wgTitle":"AMD64/Full/Installation/en","wgCurRevisionId":229830,"wgRevisionId":229830,"wgArticleId":72592,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Handbook:AMD64/Full/Installation/en","wgRelevantArticleId":72592,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],
"sfgAutocompleteOnAllChars":!1,"sfgFieldProperties":[],"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en","*"],"wgULSCurrentAutonym":"English","wgTranslatePageTranslation":"translation"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.translate","ext.smw.style","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.css" />
<link rel="stylesheet" href="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="Handbook:AMD64/Full/Installation/en" href="https://wiki.gentoo.org/index.php?title=Special:ExportRDF/Handbook:AMD64/Full/Installation/en&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="https://wiki.gentoo.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.gentoo.org/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="https://wiki.gentoo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-560 ns-subject page-Handbook_AMD64_Full_Installation_en skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="https://wiki.gentoo.org/" title="Back to the homepage" class="site-logo"><object data="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.svg" type="image/svg+xml">
							<img src="https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="../../../Special_MyLanguage/Help_Contents.html" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Gentoo.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="../../../Project_Gentoo.html">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="../../../Gentoo_Wiki_Menu-Documentation.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="../../../Handbook_Main_Page.html">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="../../../FAQ.html">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="../../../Project_Documentation/Overview.html">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="../../../Category_Core_system.html">Core system</a></li><li id="n-Hardware"><a href="../../../Category_Hardware.html">Hardware</a></li><li id="n-Software"><a href="../../../Category_Software.html">Software</a></li><li id="n-Desktop"><a href="../../../Category_Desktop.html">Desktop</a></li><li id="n-Server-.26-Security"><a href="../../../Category_Server_and_Security.html">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="../../../Category_Project_and_Community.html">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="../../../Special_WhatLinksHere/Handbook_AMD64/Full/Installation/en.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../../Special_RecentChangesLinked/Handbook_AMD64/Full/Installation/en.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Installation/en&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Installation/en&amp;oldid=229830" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Installation/en&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="../../../Special_Browse/Handbook_AMD64-2FFull-2FInstallation-2Fen.html" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AAMD64%2FFull%2FInstallation%2Fen&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://wiki.gentoo.org/index.php?title=Special:UserLogin&amp;returnto=Handbook%3AAMD64%2FFull%2FInstallation%2Fen" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-handbook" class="selected active"><a href="en.html">Handbook</a></li><li id="ca-talk" class="new"><a href="https://wiki.gentoo.org/index.php?title=Handbook_Talk:AMD64/Full/Installation/en&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="https://wiki.gentoo.org/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Installation/en&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="https://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Installation/en&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="en">
							<span dir="auto">Gentoo Linux amd64 Handbook: Installing Gentoo</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages"><a href="../../../Special_MyLanguage/Handbook_AMD64.html" title="Special:MyLanguage/Handbook:AMD64">Handbook:AMD64</a> | <a href="../../../Special_MyLanguage/Handbook_AMD64/Full.html" title="Special:MyLanguage/Handbook:AMD64/Full">Full</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-translate-page-info" lang="en" dir="ltr">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="http://wiki.gentoo.org/index.php?title=Special:Translate&amp;group=page-Handbook%3AAMD64%2FFull%2FInstallation&amp;action=page&amp;filter=&amp;language=en">translated version</a></span> of the page <a href="../Installation.html" title="Handbook:AMD64/Full/Installation">Handbook:AMD64/Full/Installation</a> and the translation is 100% complete.</div>
<hr /><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2"><a href="#Welcome"><span class="tocnumber">1.1</span> <span class="toctext">Welcome</span></a></li>
<li class="toclevel-2"><a href="#How_is_the_installation_structured"><span class="tocnumber">1.2</span> <span class="toctext">How is the installation structured</span></a></li>
<li class="toclevel-2"><a href="#What_are_the_options"><span class="tocnumber">1.3</span> <span class="toctext">What are the options</span></a></li>
<li class="toclevel-2"><a href="#Troubles"><span class="tocnumber">1.4</span> <span class="toctext">Troubles</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Hardware_requirements"><span class="tocnumber">2</span> <span class="toctext">Hardware requirements</span></a></li>
<li class="toclevel-1"><a href="#Gentoo_Linux_installation_CD"><span class="tocnumber">3</span> <span class="toctext">Gentoo Linux installation CD</span></a>
<ul>
<li class="toclevel-2"><a href="#Minimal_installation_CD"><span class="tocnumber">3.1</span> <span class="toctext">Minimal installation CD</span></a></li>
<li class="toclevel-2"><a href="#The_occasional_Gentoo_LiveDVD"><span class="tocnumber">3.2</span> <span class="toctext">The occasional Gentoo LiveDVD</span></a></li>
<li class="toclevel-2"><a href="#What_are_stages_then.3F"><span class="tocnumber">3.3</span> <span class="toctext">What are stages then?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Downloading_and_burning_the_CD"><span class="tocnumber">4</span> <span class="toctext">Downloading and burning the CD</span></a>
<ul>
<li class="toclevel-2"><a href="#Download_the_media"><span class="tocnumber">4.1</span> <span class="toctext">Download the media</span></a></li>
<li class="toclevel-2"><a href="#Verifying_the_downloaded_files"><span class="tocnumber">4.2</span> <span class="toctext">Verifying the downloaded files</span></a>
<ul>
<li class="toclevel-3"><a href="#Microsoft_Windows_based_verification"><span class="tocnumber">4.2.1</span> <span class="toctext">Microsoft Windows based verification</span></a></li>
<li class="toclevel-3"><a href="#Linux_based_verification"><span class="tocnumber">4.2.2</span> <span class="toctext">Linux based verification</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Burning"><span class="tocnumber">4.3</span> <span class="toctext">Burning</span></a>
<ul>
<li class="toclevel-3"><a href="#Burning_with_Microsoft_Windows"><span class="tocnumber">4.3.1</span> <span class="toctext">Burning with Microsoft Windows</span></a></li>
<li class="toclevel-3"><a href="#Burning_with_Linux"><span class="tocnumber">4.3.2</span> <span class="toctext">Burning with Linux</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Booting_the_CD"><span class="tocnumber">5</span> <span class="toctext">Booting the CD</span></a>
<ul>
<li class="toclevel-2"><a href="#Booting_the_installation_CD"><span class="tocnumber">5.1</span> <span class="toctext">Booting the installation CD</span></a></li>
<li class="toclevel-2"><a href="#Extra_hardware_configuration"><span class="tocnumber">5.2</span> <span class="toctext">Extra hardware configuration</span></a></li>
<li class="toclevel-2"><a href="#Optional:_User_accounts"><span class="tocnumber">5.3</span> <span class="toctext">Optional: User accounts</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Viewing_documentation_while_installing"><span class="tocnumber">5.4</span> <span class="toctext">Optional: Viewing documentation while installing</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Starting_the_SSH_daemon"><span class="tocnumber">5.5</span> <span class="toctext">Optional: Starting the SSH daemon</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Automatic_network_detection"><span class="tocnumber">6</span> <span class="toctext">Automatic network detection</span></a>
<ul>
<li class="toclevel-2"><a href="#Optional:_Configure_any_proxies"><span class="tocnumber">6.1</span> <span class="toctext">Optional: Configure any proxies</span></a></li>
<li class="toclevel-2"><a href="#Testing_the_network"><span class="tocnumber">6.2</span> <span class="toctext">Testing the network</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Automatic_network_configuration"><span class="tocnumber">7</span> <span class="toctext">Automatic network configuration</span></a>
<ul>
<li class="toclevel-2"><a href="#Default:_Using_net-setup"><span class="tocnumber">7.1</span> <span class="toctext">Default: Using net-setup</span></a></li>
<li class="toclevel-2"><a href="#Alternative:_Using_PPP"><span class="tocnumber">7.2</span> <span class="toctext">Alternative: Using PPP</span></a></li>
<li class="toclevel-2"><a href="#Alternative:_Using_PPTP"><span class="tocnumber">7.3</span> <span class="toctext">Alternative: Using PPTP</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Manual_network_configuration"><span class="tocnumber">8</span> <span class="toctext">Manual network configuration</span></a>
<ul>
<li class="toclevel-2"><a href="#Loading_the_appropriate_network_modules"><span class="tocnumber">8.1</span> <span class="toctext">Loading the appropriate network modules</span></a></li>
<li class="toclevel-2"><a href="#Using_DHCP"><span class="tocnumber">8.2</span> <span class="toctext">Using DHCP</span></a></li>
<li class="toclevel-2"><a href="#Preparing_for_wireless_access"><span class="tocnumber">8.3</span> <span class="toctext">Preparing for wireless access</span></a></li>
<li class="toclevel-2"><a href="#Understanding_network_terminology"><span class="tocnumber">8.4</span> <span class="toctext">Understanding network terminology</span></a></li>
<li class="toclevel-2"><a href="#Using_ifconfig_and_route"><span class="tocnumber">8.5</span> <span class="toctext">Using ifconfig and route</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Introduction_to_block_devices"><span class="tocnumber">9</span> <span class="toctext">Introduction to block devices</span></a>
<ul>
<li class="toclevel-2"><a href="#Block_devices"><span class="tocnumber">9.1</span> <span class="toctext">Block devices</span></a></li>
<li class="toclevel-2"><a href="#Partitions"><span class="tocnumber">9.2</span> <span class="toctext">Partitions</span></a>
<ul>
<li class="toclevel-3"><a href="#MBR"><span class="tocnumber">9.2.1</span> <span class="toctext">MBR</span></a></li>
<li class="toclevel-3"><a href="#GPT"><span class="tocnumber">9.2.2</span> <span class="toctext">GPT</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#GPT_or_MBR"><span class="tocnumber">9.3</span> <span class="toctext">GPT or MBR</span></a></li>
<li class="toclevel-2"><a href="#Using_UEFI"><span class="tocnumber">9.4</span> <span class="toctext">Using UEFI</span></a></li>
<li class="toclevel-2"><a href="#Advanced_storage"><span class="tocnumber">9.5</span> <span class="toctext">Advanced storage</span></a></li>
<li class="toclevel-2"><a href="#Default_partitioning_scheme"><span class="tocnumber">9.6</span> <span class="toctext">Default partitioning scheme</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Designing_a_partition_scheme"><span class="tocnumber">10</span> <span class="toctext">Designing a partition scheme</span></a>
<ul>
<li class="toclevel-2"><a href="#How_many_and_how_big.3F"><span class="tocnumber">10.1</span> <span class="toctext">How many and how big?</span></a></li>
<li class="toclevel-2"><a href="#What_about_swap_space.3F"><span class="tocnumber">10.2</span> <span class="toctext">What about swap space?</span></a></li>
<li class="toclevel-2"><a href="#What_is_the_BIOS_boot_partition.3F"><span class="tocnumber">10.3</span> <span class="toctext">What is the BIOS boot partition?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Default:_Using_parted_to_partition_the_disk"><span class="tocnumber">11</span> <span class="toctext">Default: Using parted to partition the disk</span></a>
<ul>
<li class="toclevel-2"><a href="#Viewing_the_current_partition_layout_with_parted"><span class="tocnumber">11.1</span> <span class="toctext">Viewing the current partition layout with parted</span></a></li>
<li class="toclevel-2"><a href="#Setting_the_GPT_label"><span class="tocnumber">11.2</span> <span class="toctext">Setting the GPT label</span></a></li>
<li class="toclevel-2"><a href="#Removing_all_partitions_with_parted"><span class="tocnumber">11.3</span> <span class="toctext">Removing all partitions with parted</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_partitions"><span class="tocnumber">11.4</span> <span class="toctext">Creating the partitions</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Alternative:_Using_fdisk_to_partition_the_disk"><span class="tocnumber">12</span> <span class="toctext">Alternative: Using fdisk to partition the disk</span></a>
<ul>
<li class="toclevel-2"><a href="#Viewing_the_current_partition_layout"><span class="tocnumber">12.1</span> <span class="toctext">Viewing the current partition layout</span></a></li>
<li class="toclevel-2"><a href="#Removing_all_partitions_with_fdisk"><span class="tocnumber">12.2</span> <span class="toctext">Removing all partitions with fdisk</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_BIOS_boot_partition"><span class="tocnumber">12.3</span> <span class="toctext">Creating the BIOS boot partition</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_boot_partition"><span class="tocnumber">12.4</span> <span class="toctext">Creating the boot partition</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_swap_partition"><span class="tocnumber">12.5</span> <span class="toctext">Creating the swap partition</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_root_partition"><span class="tocnumber">12.6</span> <span class="toctext">Creating the root partition</span></a></li>
<li class="toclevel-2"><a href="#Saving_the_partition_layout"><span class="tocnumber">12.7</span> <span class="toctext">Saving the partition layout</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Creating_file_systems"><span class="tocnumber">13</span> <span class="toctext">Creating file systems</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction_2"><span class="tocnumber">13.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#Filesystems"><span class="tocnumber">13.2</span> <span class="toctext">Filesystems</span></a></li>
<li class="toclevel-2"><a href="#Applying_a_filesystem_to_a_partition"><span class="tocnumber">13.3</span> <span class="toctext">Applying a filesystem to a partition</span></a></li>
<li class="toclevel-2"><a href="#Activating_the_swap_partition"><span class="tocnumber">13.4</span> <span class="toctext">Activating the swap partition</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Mounting"><span class="tocnumber">14</span> <span class="toctext">Mounting</span></a></li>
<li class="toclevel-1"><a href="#Installing_a_stage_tarball"><span class="tocnumber">15</span> <span class="toctext">Installing a stage tarball</span></a>
<ul>
<li class="toclevel-2"><a href="#Setting_the_date_and_time"><span class="tocnumber">15.1</span> <span class="toctext">Setting the date and time</span></a></li>
<li class="toclevel-2"><a href="#Downloading_the_stage_tarball"><span class="tocnumber">15.2</span> <span class="toctext">Downloading the stage tarball</span></a></li>
<li class="toclevel-2"><a href="#Unpacking_the_stage_tarball"><span class="tocnumber">15.3</span> <span class="toctext">Unpacking the stage tarball</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Configuring_compile_options"><span class="tocnumber">16</span> <span class="toctext">Configuring compile options</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction_3"><span class="tocnumber">16.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#CFLAGS_and_CXXFLAGS"><span class="tocnumber">16.2</span> <span class="toctext">CFLAGS and CXXFLAGS</span></a></li>
<li class="toclevel-2"><a href="#MAKEOPTS"><span class="tocnumber">16.3</span> <span class="toctext">MAKEOPTS</span></a></li>
<li class="toclevel-2"><a href="#Ready.2C_set.2C_go"><span class="tocnumber">16.4</span> <span class="toctext">Ready, set, go</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Chrooting"><span class="tocnumber">17</span> <span class="toctext">Chrooting</span></a>
<ul>
<li class="toclevel-2"><a href="#Optional:_Selecting_mirrors"><span class="tocnumber">17.1</span> <span class="toctext">Optional: Selecting mirrors</span></a></li>
<li class="toclevel-2"><a href="#Copy_DNS_info"><span class="tocnumber">17.2</span> <span class="toctext">Copy DNS info</span></a></li>
<li class="toclevel-2"><a href="#Mounting_the_necessary_filesystems"><span class="tocnumber">17.3</span> <span class="toctext">Mounting the necessary filesystems</span></a></li>
<li class="toclevel-2"><a href="#Entering_the_new_environment"><span class="tocnumber">17.4</span> <span class="toctext">Entering the new environment</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Configuring_Portage"><span class="tocnumber">18</span> <span class="toctext">Configuring Portage</span></a>
<ul>
<li class="toclevel-2"><a href="#Installing_a_Portage_snapshot"><span class="tocnumber">18.1</span> <span class="toctext">Installing a Portage snapshot</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Updating_the_Portage_tree"><span class="tocnumber">18.2</span> <span class="toctext">Optional: Updating the Portage tree</span></a></li>
<li class="toclevel-2"><a href="#Reading_news_items"><span class="tocnumber">18.3</span> <span class="toctext">Reading news items</span></a></li>
<li class="toclevel-2"><a href="#Choosing_the_right_profile"><span class="tocnumber">18.4</span> <span class="toctext">Choosing the right profile</span></a></li>
<li class="toclevel-2"><a href="#Configuring_the_USE_variable"><span class="tocnumber">18.5</span> <span class="toctext">Configuring the USE variable</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Optional:_Using_systemd"><span class="tocnumber">19</span> <span class="toctext">Optional: Using systemd</span></a></li>
<li class="toclevel-1"><a href="#Timezone"><span class="tocnumber">20</span> <span class="toctext">Timezone</span></a></li>
<li class="toclevel-1"><a href="#Configure_locales"><span class="tocnumber">21</span> <span class="toctext">Configure locales</span></a></li>
<li class="toclevel-1"><a href="#Installing_the_sources"><span class="tocnumber">22</span> <span class="toctext">Installing the sources</span></a></li>
<li class="toclevel-1"><a href="#Default:_Manual_configuration"><span class="tocnumber">23</span> <span class="toctext">Default: Manual configuration</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction_4"><span class="tocnumber">23.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#Activating_required_options"><span class="tocnumber">23.2</span> <span class="toctext">Activating required options</span></a></li>
<li class="toclevel-2"><a href="#Architecture_specific_kernel_configuration"><span class="tocnumber">23.3</span> <span class="toctext">Architecture specific kernel configuration</span></a></li>
<li class="toclevel-2"><a href="#Compiling_and_installing"><span class="tocnumber">23.4</span> <span class="toctext">Compiling and installing</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Building_an_initramfs"><span class="tocnumber">23.5</span> <span class="toctext">Optional: Building an initramfs</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Alternative:_Using_genkernel"><span class="tocnumber">24</span> <span class="toctext">Alternative: Using genkernel</span></a></li>
<li class="toclevel-1"><a href="#Kernel_modules"><span class="tocnumber">25</span> <span class="toctext">Kernel modules</span></a>
<ul>
<li class="toclevel-2"><a href="#Configuring_the_modules"><span class="tocnumber">25.1</span> <span class="toctext">Configuring the modules</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Installing_firmware"><span class="tocnumber">25.2</span> <span class="toctext">Optional: Installing firmware</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Filesystem_information"><span class="tocnumber">26</span> <span class="toctext">Filesystem information</span></a>
<ul>
<li class="toclevel-2"><a href="#About_fstab"><span class="tocnumber">26.1</span> <span class="toctext">About fstab</span></a></li>
<li class="toclevel-2"><a href="#Creating_the_fstab_file"><span class="tocnumber">26.2</span> <span class="toctext">Creating the fstab file</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Networking_information"><span class="tocnumber">27</span> <span class="toctext">Networking information</span></a>
<ul>
<li class="toclevel-2"><a href="#Host_and_domain_information"><span class="tocnumber">27.1</span> <span class="toctext">Host and domain information</span></a></li>
<li class="toclevel-2"><a href="#Configuring_the_network"><span class="tocnumber">27.2</span> <span class="toctext">Configuring the network</span></a></li>
<li class="toclevel-2"><a href="#Automatically_start_networking_at_boot"><span class="tocnumber">27.3</span> <span class="toctext">Automatically start networking at boot</span></a></li>
<li class="toclevel-2"><a href="#The_hosts_file"><span class="tocnumber">27.4</span> <span class="toctext">The hosts file</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Get_PCMCIA_working"><span class="tocnumber">27.5</span> <span class="toctext">Optional: Get PCMCIA working</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#System_information"><span class="tocnumber">28</span> <span class="toctext">System information</span></a>
<ul>
<li class="toclevel-2"><a href="#Root_password"><span class="tocnumber">28.1</span> <span class="toctext">Root password</span></a></li>
<li class="toclevel-2"><a href="#Init_and_boot_configuration"><span class="tocnumber">28.2</span> <span class="toctext">Init and boot configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#System_logger"><span class="tocnumber">29</span> <span class="toctext">System logger</span></a></li>
<li class="toclevel-1"><a href="#Optional:_Cron_daemon"><span class="tocnumber">30</span> <span class="toctext">Optional: Cron daemon</span></a></li>
<li class="toclevel-1"><a href="#Optional:_File_indexing"><span class="tocnumber">31</span> <span class="toctext">Optional: File indexing</span></a></li>
<li class="toclevel-1"><a href="#Optional:_Remote_access"><span class="tocnumber">32</span> <span class="toctext">Optional: Remote access</span></a></li>
<li class="toclevel-1"><a href="#Filesystem_tools"><span class="tocnumber">33</span> <span class="toctext">Filesystem tools</span></a></li>
<li class="toclevel-1"><a href="#Networking_tools"><span class="tocnumber">34</span> <span class="toctext">Networking tools</span></a>
<ul>
<li class="toclevel-2"><a href="#Installing_a_DHCP_client"><span class="tocnumber">34.1</span> <span class="toctext">Installing a DHCP client</span></a></li>
<li class="toclevel-2"><a href="#Optional:_Installing_a_PPPoE_client"><span class="tocnumber">34.2</span> <span class="toctext">Optional: Installing a PPPoE client</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Selecting_a_boot_loader"><span class="tocnumber">35</span> <span class="toctext">Selecting a boot loader</span></a></li>
<li class="toclevel-1"><a href="#Default:_Using_GRUB2"><span class="tocnumber">36</span> <span class="toctext">Default: Using GRUB2</span></a>
<ul>
<li class="toclevel-2"><a href="#Installing_GRUB2"><span class="tocnumber">36.1</span> <span class="toctext">Installing GRUB2</span></a></li>
<li class="toclevel-2"><a href="#Configuring_GRUB2"><span class="tocnumber">36.2</span> <span class="toctext">Configuring GRUB2</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Alternative:_Using_LILO"><span class="tocnumber">37</span> <span class="toctext">Alternative: Using LILO</span></a>
<ul>
<li class="toclevel-2"><a href="#Installing_LILO"><span class="tocnumber">37.1</span> <span class="toctext">Installing LILO</span></a></li>
<li class="toclevel-2"><a href="#Configuring_LILO"><span class="tocnumber">37.2</span> <span class="toctext">Configuring LILO</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Alternative:_Using_efibootmgr"><span class="tocnumber">38</span> <span class="toctext">Alternative: Using efibootmgr</span></a></li>
<li class="toclevel-1"><a href="#Rebooting_the_system"><span class="tocnumber">39</span> <span class="toctext">Rebooting the system</span></a></li>
<li class="toclevel-1"><a href="#User_administration"><span class="tocnumber">40</span> <span class="toctext">User administration</span></a>
<ul>
<li class="toclevel-2"><a href="#Adding_a_user_for_daily_use"><span class="tocnumber">40.1</span> <span class="toctext">Adding a user for daily use</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Disk_cleanup"><span class="tocnumber">41</span> <span class="toctext">Disk cleanup</span></a>
<ul>
<li class="toclevel-2"><a href="#Removing_tarballs"><span class="tocnumber">41.1</span> <span class="toctext">Removing tarballs</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Where_to_go_from_here"><span class="tocnumber">42</span> <span class="toctext">Where to go from here</span></a>
<ul>
<li class="toclevel-2"><a href="#Documentation"><span class="tocnumber">42.1</span> <span class="toctext">Documentation</span></a></li>
<li class="toclevel-2"><a href="#Gentoo_online"><span class="tocnumber">42.2</span> <span class="toctext">Gentoo online</span></a></li>
</ul>
</li>
</ul>
</div>

<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<h3><span class="mw-headline" id="Welcome">Welcome</span></h3>
<p>First of all, welcome to Gentoo. You are about to enter the world of choices and performance. Gentoo is all about choices. When installing Gentoo, this is made clear several times - users can choose how much they want to compile themselves, how to install Gentoo, what system logger to use, etc.
</p><p>Gentoo is a fast, modern meta-distribution with a clean and flexible design. Gentoo is built around free software and doesn't hide from its users what is beneath the hood. Portage, the package maintenance system which Gentoo uses, is written in Python, meaning the user can easily view and modify the source code. Gentoo's packaging system uses source code (although support for precompiled packages is included too) and configuring Gentoo happens through regular text files. In other words, openness everywhere.
</p><p>It is very important that everybody understands that choices are what makes Gentoo run. We try not to force users into anything they don't like. If anyone believes otherwise, please <a rel="nofollow" class="external text" href="https://bugs.gentoo.org/">bug report</a> it.
</p>
<h3><span class="mw-headline" id="How_is_the_installation_structured">How is the installation structured</span></h3>
<p>The Gentoo Installation can be seen as a 10-step procedure, corresponding to the next set of chapters. Each step results in a certain state:
</p>
<table class="table-condensed table-striped">

<tr>
<th scope="col" width="15%"> Step </th>
<th> Result
</th></tr>
<tr>
<td> 1 </td>
<td> The user is in a working environment ready to install Gentoo.
</td></tr>
<tr>
<td> 2 </td>
<td> The Internet connection is ready to install Gentoo.
</td></tr>
<tr>
<td> 3 </td>
<td> The hard disks are initialized to host the Gentoo installation.
</td></tr>
<tr>
<td> 4 </td>
<td> The installation environment is prepared and the user is ready to chroot into the new environment.
</td></tr>
<tr>
<td> 5 </td>
<td> Core packages, which are the same on all Gentoo installations, are installed.
</td></tr>
<tr>
<td> 6 </td>
<td> The Linux kernel is installed.
</td></tr>
<tr>
<td> 7 </td>
<td> The user will have configured most of the Gentoo system configuration files.
</td></tr>
<tr>
<td> 8 </td>
<td> The necessary system tools are installed.
</td></tr>
<tr>
<td> 9 </td>
<td> The proper boot loader has been installed and configured.
</td></tr>
<tr>
<td> 10 </td>
<td> The freshly installed Gentoo Linux environment is ready to be explored.
</td></tr></table>
<p>Whenever a certain choice is presented the handbook will try to explain the pros and cons of each choice. Although the text then continues with a default choice (identified by "Default: " in the title), the other possibilities will be documented as well (marked by "Alternative: " in the title). Do not think that the default is what Gentoo recommends. It is however what Gentoo believes most users will use.
</p><p>Sometimes an optional step can be followed. Such steps are marked as "Optional: " and are therefore not needed to install Gentoo. However, some optional steps are dependent on a previously made decision. The instructions will inform the reader when this happens, both when the decision is made, and right before the optional step is described.
</p>
<h3><span class="mw-headline" id="What_are_the_options">What are the options</span></h3>
<p>Gentoo can be installed in many different ways. It can be downloaded and installed from one of Gentoo's Installation CDs, from a distribution already installed, from a non-Gentoo bootable CD (such as Knoppix), from a netbooted environment, from a rescue floppy, etc.
</p><p>This document covers the installation using a Gentoo Installation CD or, in certain cases, netbooting.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />For help on the other installation approaches, including using non-Gentoo CDs, please read our <a href="../../../Installation_alternatives.html" title="Installation alternatives">Alternative installation guide</a>.</div>
<p>We also provide a <a href="../../../Gentoo_installation_tips_and_tricks.html" title="Gentoo installation tips and tricks">Gentoo installation tips and tricks</a> document that might be useful to read as well.
</p>
<h3><span class="mw-headline" id="Troubles">Troubles</span></h3>
<p>If a problem is found in the installation (or in the installation documentation), please visit our <a rel="nofollow" class="external text" href="https://bugs.gentoo.org/">bug tracking system</a> and check if the bug is known. If not, please create a bug report for it so we can take care of it. Do not be afraid of the developers who are assigned to the bugs - they (generally) don't eat people.
</p><p>Note though that, although this document is architecture-specific, it might contain references to other architectures as well. This is due to the fact that large parts of the Gentoo Handbook use source code that is common for all architectures (to avoid duplication of efforts and starvation of development resources). We will try to keep this to a minimum to avoid confusion.
</p><p>If there is some uncertainty whether or not the problem is a user-problem (some error made despite having read the documentation carefully) or a software-problem (some error we made despite having tested the installation/documentation carefully) everybody is welcome to join <span style="font-family: monospace; font-size: 95%;"><a rel="nofollow" class="external text" href="irc://irc.gentoo.org/gentoo">#gentoo</a></span> on irc.freenode.net. Of course, everyone is welcome otherwise too as our chat channel covers the broad Gentoo spectrum.
</p><p>Speaking of which, if there are any additional questions regarding Gentoo, check out the <a href="../../../FAQ.html" title="FAQ">Frequently Asked Questions</a> available on the <a href="../../../Main_Page.html" title="Main Page">Wiki</a>. There are also <a rel="nofollow" class="external text" href="https://forums.gentoo.org/viewforum.php?f=40">FAQs</a> on the <a rel="nofollow" class="external text" href="https://forums.gentoo.org/">Gentoo Forums</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../../Handbook_AMD64.html" title="Previous part" class="btn btn-default">&#8592; </a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Media.html" title="Next part" class="btn btn-default">Choosing the media &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Hardware_requirements">Hardware requirements</span></h2>
<p>Before we start, we first list what hardware requirements are needed to successfully install Gentoo on a amd64 box.
</p><p><br />
</p>
<table class="table table-striped table-condensed" style="text-align: left;">

<tr>
<td>
</td>
<th> Minimal CD
</th>
<th> LiveDVD
</th></tr>
<tr>
<th> CPU
</th>
<td colspan="2"> Any AMD64 CPU or <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/EMT64#Intel_64">EM64T</a> CPU (Core 2 Duo &amp; Quad processors are EM64T)
</td></tr>
<tr>
<th> Memory
</th>
<td> 256 MB
</td>
<td> 512 MB
</td></tr>
<tr>
<th> Disk space
</th>
<td colspan="2">2.5 GB (excluding swap space)
</td></tr>
<tr>
<th> Swap space
</th>
<td colspan="2">At least 256 MB
</td></tr></table>
<p>The <a href="../../../Project_AMD64.html" title="Project:AMD64">Gentoo AMD64 project page</a> is a good place to be for more information about Gentoo's <b><span style="font-family: monospace; font-size: 95%; color: #54487a">amd64</span></b> support.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Gentoo_Linux_installation_CD">Gentoo Linux installation CD</span></h2>
<h3><span class="mw-headline" id="Minimal_installation_CD">Minimal installation CD</span></h3>
<p>The Gentoo minimal installation CD is a bootable CD which contains a self-sustained Gentoo environment. It allows the user to boot Linux from the CD. During the boot process the hardware is detected and the appropriate drivers are loaded. The CD is maintained by Gentoo developers and allows anyone to install Gentoo if an active Internet connection is available.
</p><p>The Minimal Installation CD is called <span style="font-family: monospace; font-size: 95%">install-amd64-minimal-&lt;release&gt;.iso</span>.
</p>
<h3><span class="mw-headline" id="The_occasional_Gentoo_LiveDVD">The occasional Gentoo LiveDVD</span></h3>
<p>Occasionally, a special DVD is crafted by the Gentoo Ten project which can be used to install Gentoo. The instructions further down this chapter target the Minimal Installation CD so might be a bit different. However, the LiveDVD (or any other bootable Linux environment) supports getting a root prompt by just invoking <span style="font-family: monospace; font-size: 95%; font-weight: bold;">sudo su -</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">sudo -i</span> in a terminal.
</p>
<h3><span class="mw-headline" id="What_are_stages_then.3F">What are stages then?</span></h3>
<p>A stage3 tarball is an archive containing a minimal Gentoo environment, suitable to continue the Gentoo installation using the instructions in this manual. Previously, the Gentoo Handbook described the installation using one of three stage tarballs. While Gentoo still offers stage1 and stage2 tarballs, the official installation method uses the stage3 tarball. If you are interested in performing a Gentoo installation using a stage1 or stage2 tarball, please read the Gentoo FAQ on <a href="../../../FAQ.html#How_do_I_Install_Gentoo_Using_a_Stage1_or_Stage2_Tarball.3F" title="FAQ">How do I Install Gentoo Using a Stage1 or Stage2 Tarball</a>?
</p><p>Stage3 tarballs can be downloaded from <span style="font-family: monospace; font-size: 95%">releases/amd64/autobuilds/</span> on any of the <a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/mirrors/">official Gentoo mirrors</a> and are not provided by the installation CD.
</p>
<h2><span class="mw-headline" id="Downloading_and_burning_the_CD">Downloading and burning the CD</span></h2>
<h3><span class="mw-headline" id="Download_the_media">Download the media</span></h3>
<p>The default installation media that Gentoo Linux uses are the <i>minimal installation CDs</i>, which host a bootable, very small Gentoo Linux environment with the right tools to install Gentoo Linux from. The CD images themselves can be downloaded from the <a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/">downloads page of the main website</a> (recommended) or by browsing one of the many <a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/mirrors/">available mirrors</a>.
</p><p>If downloading from a mirror, the minimal installation CDs can be found as follows:
</p>
<ol><li> Go to the <span style="font-family: monospace; font-size: 95%">releases/</span> directory</li>
<li> Select the correct target architecture, such as <span style="font-family: monospace; font-size: 95%">amd64/</span></li>
<li> Select the <span style="font-family: monospace; font-size: 95%">autobuilds/</span> directory</li>
<li> For <b><span style="font-family: monospace; font-size: 95%; color: #54487a">amd64</span></b> and <b><span style="font-family: monospace; font-size: 95%; color: #54487a">x86</span></b> architectures select either the <span style="font-family: monospace; font-size: 95%">current-install-amd64-minimal/</span> or <span style="font-family: monospace; font-size: 95%">current-install-x86-minimal/</span> directory; all other architectures should select the <span style="font-family: monospace; font-size: 95%">current-iso/</span> directory</li></ol>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Some target architectures such as <b><span style="font-family: monospace; font-size: 95%; color: #54487a">arm</span></b>, <b><span style="font-family: monospace; font-size: 95%; color: #54487a">mips</span></b>, and <b><span style="font-family: monospace; font-size: 95%; color: #54487a">s390</span></b> will not have minimal install CDs. At this time The <a href="../../../Project_RelEng.html" title="Project:RelEng">Gentoo Release Engineering project</a> does not support building <span style="font-family: monospace; font-size: 95%">.ISO</span> files for these targets.</div>
<p>Inside this location, the installation CD file is the file with the <span style="font-family: monospace; font-size: 95%">.iso</span> suffix. For instance, take a look at the following listing:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example list of downloadable files at releases/amd64/autobuilds/current-iso/</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[DIR] hardened/                                          05-Dec-2014 01:42    -   
[   ] install-amd64-minimal-20141204.iso                 04-Dec-2014 21:04  208M  
[   ] install-amd64-minimal-20141204.iso.CONTENTS        04-Dec-2014 21:04  3.0K  
[   ] install-amd64-minimal-20141204.iso.DIGESTS         04-Dec-2014 21:04  740   
[TXT] install-amd64-minimal-20141204.iso.DIGESTS.asc     05-Dec-2014 01:42  1.6K  
[   ] stage3-amd64-20141204.tar.bz2                      04-Dec-2014 21:04  198M  
[   ] stage3-amd64-20141204.tar.bz2.CONTENTS             04-Dec-2014 21:04  4.6M  
[   ] stage3-amd64-20141204.tar.bz2.DIGESTS              04-Dec-2014 21:04  720   
[TXT] stage3-amd64-20141204.tar.bz2.DIGESTS.asc          05-Dec-2014 01:42  1.5K
</pre></div></pre></div>
<p>In the above example, the <span style="font-family: monospace; font-size: 95%">install-amd64-minimal-20141204.iso</span> file is the minimal installation CD itself. But as can be seen, other related files exist as well:
</p>
<ul><li> A <span style="font-family: monospace; font-size: 95%">.CONTENTS</span> file which is a text file listing all files available on the installation CD. This file can be useful to verify if particular firmware or drivers are available on the installation CD before downloading it.</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file which contains the hash of the ISO file itself, in various hashing formats/algorithms. This file can be used to verify if the downloaded ISO file is corrupt or not.</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file which not only contains the hash of the ISO file (like the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file), but also a cryptographic signature of that file. This can be used to both verify if the downloaded ISO file is corrupt or not, as well as verify that the download is indeed provided by the Gentoo Release Engineering team and has not been tampered with.</li></ul>
<p>Ignore the other files available at this location for now - those will come back when the installation has proceeded further. Download the <span style="font-family: monospace; font-size: 95%">.ISO</span> file and, if verification of the download is wanted, download the  <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file for the ISO file as well. The <span style="font-family: monospace; font-size: 95%">.CONTENTS</span> file does not need to be downloaded as the installation instructions will not refer to this file anymore, and the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file should contain the same information as the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file, except that the latter also contains a signature on top of it.
</p>
<h3><span class="mw-headline" id="Verifying_the_downloaded_files">Verifying the downloaded files</span></h3>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />This is an optional step and not necessary to install Gentoo Linux. However, it is recommended as it ensures that the downloaded file is not corrupt and has indeed been provided by the Gentoo Infrastructure team.</div>
<p>Through the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> and <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> files, the validity of the ISO file can be confirmed using the right set of tools. This verification is usually done in two steps:
</p>
<ol><li> First, the cryptographic signature is validated to make sure that the installation file is provided by the Gentoo Release Engineering team</li>
<li> If the cryptographic signature validates, then the checksum is verified to make sure that the downloaded file itself is not corrupted</li></ol>
<h4><span class="mw-headline" id="Microsoft_Windows_based_verification">Microsoft Windows based verification</span></h4>
<p>On a Microsoft Windows system, chances are low that the right set of tools to verify checksums and cryptographic signatures are in place.
</p><p>To first verify the cryptographic signature, tools such as <a rel="nofollow" class="external text" href="http://www.gpg4win.org/">GPG4Win</a> can be used. After installation, the public keys of the Gentoo Release Engineering team need to be imported. The list of keys is available on the <a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/signatures/">signatures page</a>. Once imported, the user can then verify the signature of the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Important</strong><br />This does not verify that the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file is correct, only that the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file is. That also implies that the checksum should be verified against the values in the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file, which is why the instructions above only refer to downloading the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file.</div>
<p>The checksum itself can be verified using the <a rel="nofollow" class="external text" href="http://www.sinf.gr/en/hashcalc.html">Hashcalc application</a>, although many others exist as well. Most of the time, these tools will show the user the calculated checksum, and the user is requested to verify this checksum with the value that is inside the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file.
</p>
<h4><span class="mw-headline" id="Linux_based_verification">Linux based verification</span></h4>
<p>On a Linux system, the most common method for verifying the cryptographic signature is to use the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-crypt/gnupg">app-crypt/gnupg</a> software. With this package installed, the following commands can be used to verify the cryptographic signature of the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file.
</p><p>First, download the right set of keys as made available on the <a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/signatures/">signatures page</a>:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>gpg --recv-keys 0xBB572E0E2D182910</code></div><pre>
gpg: requesting key 0xBB572E0E2D182910 from hkp server pool.sks-keyservers.net
gpg: key 0xBB572E0E2D182910: &quot;Gentoo Linux Release Engineering (Automated Weekly Release Key) &lt;releng@gentoo.org&gt;&quot; 1 new signature
gpg: 3 marginal(s) needed, 1 complete(s) needed, classic trust model
gpg: depth: 0  valid:   3  signed:  20  trust: 0-, 0q, 0n, 0m, 0f, 3u
gpg: depth: 1  valid:  20  signed:  12  trust: 9-, 0q, 0n, 9m, 2f, 0u
gpg: next trustdb check due at 2018-09-15
gpg: Total number processed: 1
gpg:         new signatures: 1
</pre></div>
<p>Next verify the cryptographic signature of the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>gpg --verify install-amd64-minimal-20141204.iso.DIGESTS.asc</code></div><pre>
gpg: Signature made Fri 05 Dec 2014 02:42:44 AM CET
gpg:                using RSA key 0xBB572E0E2D182910
gpg: Good signature from &quot;Gentoo Linux Release Engineering (Automated Weekly Release Key) &lt;releng@gentoo.org&gt;&quot; [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 13EB BDBE DE7A 1277 5DFD  B1BA BB57 2E0E 2D18 2910
</pre></div>
<p>To be absolutely certain that everything is valid, verify the fingerprint shown with the fingerprint on the <a rel="nofollow" class="external text" href="https://www.gentoo.org/downloads/signatures/">Gentoo signatures page</a>.
</p><p>With the cryptographic signature validated, next verify the checksum to make sure the downloaded ISO file is not corrupted. The <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file contains multiple hashing algorithms, so one of the methods to validate the right one is to first look at the checksum registered in the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file. For instance, to get the SHA512 checksum:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>grep -A 1 -i sha512 install-amd64-minimal-20141204.iso.DIGESTS.asc</code></div><pre>
# SHA512 HASH
364d32c4f8420605f8a9fa3a0fc55864d5b0d1af11aa62b7a4d4699a427e5144b2d918225dfb7c5dec8d3f0fe2cddb7cc306da6f0cef4f01abec33eec74f3024  install-amd64-minimal-20141204.iso
--
# SHA512 HASH
0719a8954dc7432750de2e3076c8b843a2c79f5e60defe43fcca8c32ab26681dfb9898b102e211174a895ff4c8c41ddd9e9a00ad6434d36c68d74bd02f19b57f  install-amd64-minimal-20141204.iso.CONTENTS
</pre></div>
<p>In the above output, two SHA512 checksums are shown - one for the <span style="font-family: monospace; font-size: 95%">install-amd64-minimal-20141204.iso</span> file and one for its accompanying <span style="font-family: monospace; font-size: 95%">.CONTENTS</span> file. Only the first checksum is of interest, as it needs to be compared with the calculated SHA512 checksum which can be generated as follows:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>sha512sum install-amd64-minimal-20141204.iso</code></div><pre>
364d32c4f8420605f8a9fa3a0fc55864d5b0d1af11aa62b7a4d4699a427e5144b2d918225dfb7c5dec8d3f0fe2cddb7cc306da6f0cef4f01abec33eec74f3024  install-amd64-minimal-20141204.iso
</pre></div>
<p>As both checksums match, the file is not corrupted and the installation can continue.
</p>
<h3><span class="mw-headline" id="Burning">Burning</span></h3>
<p>Of course, with just an ISO file downloaded, the Gentoo Linux installation cannot be started. The ISO file needs to be burned on a CD to boot from, and in such a way that its <i>content</i> is burned on the CD, not just the file itself. Below a few common methods are described - a more elaborate set of instructions can be found in <a href="../../../FAQ.html#How_do_I_burn_an_ISO_file.3F" title="FAQ">Our FAQ on burning an ISO file</a>.
</p>
<h4><span class="mw-headline" id="Burning_with_Microsoft_Windows">Burning with Microsoft Windows</span></h4>
<p>On Microsoft Windows, a number of tools exist that support burning ISOs on CDs.
</p>
<ul><li> With EasyCD Creator, select <span style="font-family: monospace; font-size: 95%">File</span>, <span style="font-family: monospace; font-size: 95%">Record CD from CD image</span>. Then change the <span style="font-family: monospace; font-size: 95%">Files of type</span> to <b>ISO image file</b>. Then locate the ISO file and click <span style="font-family: monospace; font-size: 95%">Open</span>. After clicking on <span style="font-family: monospace; font-size: 95%">Start recording</span> the ISO image will be burned correctly onto the CD-R.</li>
<li> With Nero Burning ROM, cancel the wizard which automatically pops up and select <span style="font-family: monospace; font-size: 95%">Burn Image</span> from the <span style="font-family: monospace; font-size: 95%">File</span> menu. Select the image to burn and click <span style="font-family: monospace; font-size: 95%">Open</span>. Now hit the <span style="font-family: monospace; font-size: 95%">Burn</span> button and watch the brand new CD being burnt.</li></ul>
<h4><span class="mw-headline" id="Burning_with_Linux">Burning with Linux</span></h4>
<p>On Linux, the ISO file can be burned on a CD using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">cdrecord</span> command, part of the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-cdr/cdrtools">app-cdr/cdrtools</a> package.
</p><p>For instance, to burn the ISO file on the CD in the <span style="font-family: monospace; font-size: 95%">/dev/sr0</span> device (this is the first CD device on the system - substitute with the right device file if necessary):
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>cdrecord dev=/dev/sr0 install--minimal-20141204.iso</code></div></div>
<p>Users that prefer a graphical user interface can use K3B, part of the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-cdr/k3b">app-cdr/k3b</a> package. In K3B, go to <span style="font-family: monospace; font-size: 95%">Tools</span> and use <span style="font-family: monospace; font-size: 95%">Burn CD Image</span>. Then follow the instructions provided by K3B.
</p>
<h2><span class="mw-headline" id="Booting_the_CD">Booting the CD</span></h2>
<h3><span class="mw-headline" id="Booting_the_installation_CD">Booting the installation CD</span></h3>
<p>Once the installation CD is burned, it is time to boot it. Remove all CDs from the CD drives, reboot the system and enter the BIOS or UEFI. This is usually done by hitting <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">DEL</kbd>, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd> or <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">ESC</kbd>, which is highly depending on the system and motherboard used. Inside the BIOS or UEFI menu, change the boot order so that the CD-ROM is tried before the hard disk. Without this change, the system will just reboot from the hard disk, ignoring the CD-ROM.
</p>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Important</strong><br />When installing Gentoo with the purpose of using the UEFI interface instead of BIOS, it is recommended to boot with UEFI immediately. If not, then it might be necessary to create a bootable UEFI USB stick (or other medium) once before finalizing the Gentoo Linux installation.</div>
<p>Now place the installation CD in the CD-ROM drive and reboot. A boot prompt should be shown. At this screen, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd> will begin the boot process with the default boot options. To boot the installation CD with custom boot options, specify a kernel followed by boot options and then hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>.
</p><p>At the boot prompt, users get the option of displaying the available kernels (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>) and boot options (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd>). If no choice is made within 15 seconds (either displaying information or using a kernel) then the installation CD will fall back to booting from disk. This allows installations to reboot and try out their installed environment without the need to remove the CD from the tray (something well appreciated for remote installations).
</p><p>We mentioned specifying a kernel. On the installation CD, several kernels are provided. The default one is called <i>gentoo</i>. Other kernels are for specific hardware needs and the <i>-nofb</i> variants disable framebuffer support.
</p><p>The next table gives a short overview of the available kernels.
</p>
<table class="table table-striped table-condensed" style="text-align: left;">

<tr>
<th> Kernel
</th>
<th> Description
</th></tr>
<tr>
<td> gentoo
</td>
<td> Default kernel with support for K8 CPUs (including NUMA support) and EM64T CPUs
</td></tr>
<tr>
<td> gentoo-nofb
</td>
<td> Same as <i>gentoo</i> but without framebuffer support
</td></tr>
<tr>
<td> memtest86
</td>
<td> Test the local RAM for errors
</td></tr></table>
<p>Alongside the kernel, boot options help in tuning the boot process further. 
</p>
<table class="table table-striped table-condensed" style="text-align: left;">

<tr>
<th colspan="2"> Hardware options
</th></tr>
<tr>
<td> acpi=on
</td>
<td> This loads support for ACPI and also causes the acpid daemon to be started by the CD on boot. This is only needed if the system requires ACPI to function properly. This is not required for Hyperthreading support.
</td></tr>
<tr>
<td> acpi=off
</td>
<td> Completely disables ACPI. This is useful on some older systems and is also a requirement for using APM. This will disable any Hyperthreading support of your processor.
</td></tr>
<tr>
<td> console=X
</td>
<td> This sets up serial console access for the CD. The first option is the device, usually ttyS0 on x86, followed by any connection options, which are comma separated. The default options are 9600,8,n,1.
</td></tr>
<tr>
<td> dmraid=X
</td>
<td> This allows for passing options to the device-mapper RAID subsystem. Options should be encapsulated in quotes.
</td></tr>
<tr>
<td> doapm
</td>
<td> This loads APM driver support. This also requires that <code>acpi=off</code>.
</td></tr>
<tr>
<td> dopcmcia
</td>
<td> This loads support for PCMCIA and Cardbus hardware and also causes the pcmcia cardmgr to be started by the CD on boot. This is only required when booting from PCMCIA/Cardbus devices.
</td></tr>
<tr>
<td> doscsi
</td>
<td> This loads support for most SCSI controllers. This is also a requirement for booting most USB devices, as they use the SCSI subsystem of the kernel.
</td></tr>
<tr>
<td> sda=stroke
</td>
<td> This allows the user to partition the whole hard disk even when the BIOS is unable to handle large disks. This option is only used on machines with an older BIOS. Replace sda with the device that requires this option.
</td></tr>
<tr>
<td> ide=nodma
</td>
<td> This forces the disabling of DMA in the kernel and is required by some IDE chipsets and also by some CDROM drives. If the system is having trouble reading from the IDE CDROM, try this option. This also disables the default hdparm settings from being executed.
</td></tr>
<tr>
<td> noapic
</td>
<td> This disables the Advanced Programmable Interrupt Controller that is present on newer motherboards. It has been known to cause some problems on older hardware.
</td></tr>
<tr>
<td> nodetect
</td>
<td> This disables all of the autodetection done by the CD, including device autodetection and DHCP probing. This is useful for doing debugging of a failing CD or driver.
</td></tr>
<tr>
<td> nodhcp
</td>
<td> This disables DHCP probing on detected network cards. This is useful on networks with only static addresses.
</td></tr>
<tr>
<td> nodmraid
</td>
<td> Disables support for device-mapper RAID, such as that used for on-board IDE/SATA RAID controllers.
</td></tr>
<tr>
<td> nofirewire
</td>
<td> This disables the loading of Firewire modules. This should only be necessary if your Firewire hardware is causing a problem with booting the CD.
</td></tr>
<tr>
<td> nogpm
</td>
<td> This disables gpm console mouse support.
</td></tr>
<tr>
<td> nohotplug
</td>
<td> This disables the loading of the hotplug and coldplug init scripts at boot. This is useful for doing debugging of a failing CD or driver.
</td></tr>
<tr>
<td> nokeymap
</td>
<td> This disables the keymap selection used to select non-US keyboard layouts.
</td></tr>
<tr>
<td> nolapic
</td>
<td> This disables the local APIC on Uniprocessor kernels.
</td></tr>
<tr>
<td> nosata
</td>
<td> This disables the loading of Serial ATA modules. This is used if the system is having problems with the SATA subsystem.
</td></tr>
<tr>
<td> nosmp
</td>
<td> This disables SMP, or Symmetric Multiprocessing, on SMP-enabled kernels. This is useful for debugging SMP-related issues with certain drivers and motherboards.
</td></tr>
<tr>
<td> nosound
</td>
<td> This disables sound support and volume setting. This is useful for systems where sound support causes problems.
</td></tr>
<tr>
<td> nousb
</td>
<td> This disables the autoloading of USB modules. This is useful for debugging USB issues.
</td></tr>
<tr>
<td> slowusb
</td>
<td> This adds some extra pauses into the boot process for slow USB CDROMs, like in the IBM BladeCenter.
</td></tr>
<tr>
<th colspan="2"> Logical volume/device management
</th></tr>
<tr>
<td> dolvm
</td>
<td> This enables support for Linux's Logical Volume Management.
</td></tr>
<tr>
<th colspan="2"> Other options
</th></tr>
<tr>
<td> debug
</td>
<td> Enables debugging code. This might get messy, as it displays a lot of data to the screen.
</td></tr>
<tr>
<td> docache
</td>
<td> This caches the entire runtime portion of the CD into RAM, which allows the user to umount <span style="font-family: monospace; font-size: 95%">/mnt/cdrom</span> and mount another CDROM. This option requires that there is at least twice as much available RAM as the size of the CD.
</td></tr>
<tr>
<td> doload=X
</td>
<td> This causes the initial ramdisk to load any module listed, as well as dependencies. Replace X with the module name. Multiple modules can be specified by a comma-separated list.
</td></tr>
<tr>
<td> dosshd
</td>
<td> Starts sshd on boot, which is useful for unattended installs.
</td></tr>
<tr>
<td> passwd=foo
</td>
<td> Sets whatever follows the equals as the root password, which is required for <i>dosshd</i> since the root password is by default scrambled.
</td></tr>
<tr>
<td> noload=X
</td>
<td> This causes the initial ramdisk to skip the loading of a specific module that may be causing a problem. Syntax matches that of doload.
</td></tr>
<tr>
<td> nonfs
</td>
<td> Disables the starting of portmap/nfsmount on boot.
</td></tr>
<tr>
<td> nox
</td>
<td> This causes an X-enabled LiveCD to not automatically start X, but rather, to drop to the command line instead.
</td></tr>
<tr>
<td> scandelay
</td>
<td> This causes the CD to pause for 10 seconds during certain portions the boot process to allow for devices that are slow to initialize to be ready for use.
</td></tr>
<tr>
<td> scandelay=X
</td>
<td> This allows the user to specify a given delay, in seconds, to be added to certain portions of the boot process to allow for devices that are slow to initialize to be ready for use. Replace X with the number of seconds to pause.
</td></tr></table>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The CD will check for <code>no*</code> options before <code>do*</code> options, so that options can be overriden in the exact order specified.</div>
<p>Now boot the CD, select a kernel (if the default <code>gentoo</code> kernel does not suffice) and boot options. As an example, we boot the <code>gentoo</code> kernel, with <code>dopcmcia</code> as a kernel parameter:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">boot:</code><span class="tripleclick-separator"></span><code>gentoo dopcmcia</code></div></div>
<p>Next the user will be greeted with a boot screen and progress bar. If the installation is done on a system with a non-US keyboard, make sure to immediately press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd> to switch to verbose mode and follow the prompt. If no selection is made in 10 seconds the default (US keyboard) will be accepted and the boot process will continue. Once the boot process completes, the user is automatically logged in to the "Live" Gentoo Linux environment as the <i>root</i> user, the super user. A root prompt is displayed on the current console, and one can switch to other consoles by pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd>, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F3</kbd> and <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F4</kbd>. Get back to the one started on by pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd> + <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>.
</p><p><br />
</p>
<h3><span class="mw-headline" id="Extra_hardware_configuration">Extra hardware configuration</span></h3>
<p>When the Installation CD boots, it tries to detect all the hardware devices and loads the appropriate kernel modules to support the hardware. In the vast majority of cases, it does a very good job. However, in some cases it may not auto-load the kernel modules needed by the system. If the PCI auto-detection missed some of the system's hardware, the appropriate kernel modules have to be loaded manually.
</p><p>In the next example the 8139too module (which supports certain kinds of network interfaces) is loaded:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>modprobe 8139too</code></div></div> 
<h3><span class="mw-headline" id="Optional:_User_accounts">Optional: User accounts</span></h3>
<p>If other people need access to the installation environment, or there is need to run commands as a non-root user on the installation CD (such as to chat using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">irssi</span> without root privileges for security reasons), then an additional user account needs to be created and the root password set to a strong password.
</p><p>To change the root password, use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">passwd</span> utility:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd</code></div><pre>
New password: (Enter the new password)
Re-enter password: (Re-enter the password)
</pre></div>
<p>To create a user account, first enter their credentials, followed by the account's password. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">useradd</span> and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">passwd</span> commands are used for these tasks.
</p><p>In the next example, a user called <i>john</i> is created:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>useradd -m -G users john
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd john</code></div><pre>
New password: (Enter john's password)
Re-enter password: (Re-enter john's password)
</pre></div>
<p>To switch from the (current) <i>root</i> user to the newly created user account, use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">su</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>su - john</code></div></div>
<h3><span class="mw-headline" id="Optional:_Viewing_documentation_while_installing">Optional: Viewing documentation while installing</span></h3>
<p>To view the Gentoo handbook during the installation, first create a user account as described above. Then press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F2</kbd> to go to a new terminal.
</p><p>During the installation, the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span> command can be used to browse the Gentoo handbook - of course only from the moment that the Internet connection is working.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>links <a rel="nofollow" class="external free" href="../../../Handbook_AMD64.html">https://wiki.gentoo.org/wiki/Handbook:AMD64</a></code></div></div>
<p>To go back to the original terminal, press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Alt</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">F1</kbd>.
</p>
<h3><span class="mw-headline" id="Optional:_Starting_the_SSH_daemon">Optional: Starting the SSH daemon</span></h3>
<p>To allow other users to access the system during the installation (perhaps to support during an installation, or even do it remotely), a user account needs to be created (as was documented earlier on) and the SSH daemon needs to be started.
</p><p>To fire up the SSH daemon, execute the following command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/etc/init.d/sshd start</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If users log on to the system, they will get a message that the host key for this system needs to be confirmed (through what is called a fingerprint). This is to be expected as it is the first time people log on to the system. However, later when the system is set up and someone logs on to the newly created system, the SSH client will warn that the host key has been changed. This is because the user now log on to - for SSH - a different server (namely the freshly installed Gentoo system rather than the live environment that the installation is currently using). Follow the instructions given on the screen then to replace the host key on the client system.</div>
<p>To be able to use sshd, the network needs to function properly. Continue with the chapter on <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/About.html" title="Previous part" class="btn btn-default">&#8592; About the installation</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Networking.html" title="Next part" class="btn btn-default">Configuring the network &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Automatic_network_detection">Automatic network detection</span></h2>
<p>Maybe it just works?
</p><p>If the system is plugged into an Ethernet network with a DHCP server, it is very likely that the networking configuration has already been set up automatically. If so, then the many included network-aware commands on the installation CD such as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ssh</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">scp</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ping</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">irssi</span>, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">wget</span>, and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, among others, will work immediately.
</p><p>If networking has been configured, the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span> command should list some network interfaces besides lo, such as <span style="font-family: monospace; font-size: 95%">eth0</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig</code></div><pre>
(...)
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11 Base address:0xe800 
</pre></div>
<p>The interface name on the system can be quite different from <span style="font-family: monospace; font-size: 95%">eth0</span>. Recent installation media might show regular network interfaces names like <span style="font-family: monospace; font-size: 95%">eno0</span>, <span style="font-family: monospace; font-size: 95%">ens1</span>, or <span style="font-family: monospace; font-size: 95%">enp5s0</span>. Just seek the interface in the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span> output that has an IP address related to the local network.
</p><p>In the remainder of this document, we will assume that the interface is called <span style="font-family: monospace; font-size: 95%">eth0</span>.
</p>
<h3><span class="mw-headline" id="Optional:_Configure_any_proxies">Optional: Configure any proxies</span></h3>
<p>If the Internet is accessed through a proxy, then it is necessary to set up proxy information during the installation. It is very easy to define a proxy: just define a variable which contains the proxy server information.
</p><p>In most cases, it is sufficient to define the variables using the server hostname. As an example, we assume the proxy is called proxy.gentoo.org and the port is 8080.
</p><p>To set up an HTTP proxy (for HTTP and HTTPS traffic):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export http_proxy="<a rel="nofollow" class="external free" href="http://proxy.gentoo.org:8080/">http://proxy.gentoo.org:8080</a>"</code></div></div>
<p>To set up an FTP proxy:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export ftp_proxy="<a rel="nofollow" class="external free" href="ftp://proxy.gentoo.org:8080/">ftp://proxy.gentoo.org:8080</a>"</code></div></div>
<p>To set up an RSYNC proxy:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export RSYNC_PROXY="proxy.gentoo.org:8080"</code></div></div>
<p>If the proxy requires a username and password, use the following syntax for the variable:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Adding username/password to the proxy variable</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>http://username:password@proxy.gentoo.org:8080
</pre></div></pre></div>
<h3><span class="mw-headline" id="Testing_the_network">Testing the network</span></h3>
<p>Try pinging your ISP's DNS server (found in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>) and a web site of choice. This ensures that the network is functioning properly and that the network packets are reaching the net, DNS name resolution is working correctly, etc.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ping -c 3 www.gentoo.org</code></div></div>
<p>If this all works, then the remainder of this chapter can be skipped to jump right to the next step of the installation instructions (<a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>).
</p>
<h2><span class="mw-headline" id="Automatic_network_configuration">Automatic network configuration</span></h2>
<p>If the network doesn't work immediately, some installation media allow the user to use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> (for regular or wireless networks), <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> (for ADSL users) or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pptp</span> (for PPTP users).
</p><p>If the installation medium does not contain any of these tools, continue with the <a href="#Manual_network_configuration">Manual network configuration</a>.
</p>
<ul><li> Regular Ethernet users should continue with <a href="#Default:_Using_net-setup">Default: Using net-setup</a></li>
<li> ADSL users should continue with <a href="#Alternative:_Using_PPP">Alternative: Using PPP</a></li>
<li> PPTP users should continue with <a href="#Alternative:_Using_PPTP">Alternative: Using PPTP</a></li></ul>
<h3><span class="mw-headline" id="Default:_Using_net-setup">Default: Using net-setup</span></h3>
<p>The simplest way to set up networking if it didn't get configured automatically is to run the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> script:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>net-setup eth0</code></div></div>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> will ask some questions about the network environment. When all is done, the network connection should work. Test the network connection as stated before. If the tests are positive, congratulations! Skip the rest of this section and continue with <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>.
</p><p>If the network still doesn't work, continue with <a href="#Manual_network_configuration">Manual network configuration</a>.
</p>
<h3><span class="mw-headline" id="Alternative:_Using_PPP">Alternative: Using PPP</span></h3>
<p>Assuming PPPoE is needed to connect to the Internet, the installation CD (any version) has made things easier by including ppp. Use the provided <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> script to configure the connection. During the setup the Ethernet device that is connected to your ADSL modem, the username and password, the IPs of the DNS servers and if a basic firewall is needed or not will be asked.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>pppoe-setup
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>pppoe-start</code></div></div>
<p>If something goes wrong, double-check that the username and password are correct by looking at <span style="font-family: monospace; font-size: 95%">etc/ppp/pap-secrets</span> or <span style="font-family: monospace; font-size: 95%">/etc/ppp/chap-secrets</span> and make sure to use the right Ethernet device. If the Ethernet device does not exist, the appropriate network modules need to be loaded. In that case continue with <a href="#Manual_network_configuration">Manual network configuration</a> as it will explain how to load the appropriate network modules there.
</p><p>If everything worked, continue with <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>.
</p>
<h3><span class="mw-headline" id="Alternative:_Using_PPTP">Alternative: Using PPTP</span></h3>
<p>If PPTP support is needed, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pptpclient</span> which is provided by the installation CDs. But first make sure that the configuration is correct. Edit <span style="font-family: monospace; font-size: 95%">/etc/ppp/pap-secrets</span> or <span style="font-family: monospace; font-size: 95%">/etc/ppp/chap-secrets</span> so it contains the correct username/password combination:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/ppp/chap-secrets</code></div></div>
<p>Then adjust <span style="font-family: monospace; font-size: 95%">/etc/ppp/options.pptp</span> if necessary:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/ppp/options.pptp</code></div></div>
<p>When all that is done, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pptp</span> (along with the options that couldn't be set in <span style="font-family: monospace; font-size: 95%">options.pptp</span>) to connect the server:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>pptp &lt;server ip&gt;</code></div></div>
<p>Now continue with <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>.
</p>
<h2><span class="mw-headline" id="Manual_network_configuration">Manual network configuration</span></h2>
<h3><span class="mw-headline" id="Loading_the_appropriate_network_modules">Loading the appropriate network modules</span></h3>
<p>When the Installation CD boots, it tries to detect all the hardware devices and loads the appropriate kernel modules (drivers) to support the hardware. In the vast majority of cases, it does a very good job. However, in some cases, it may not auto-load the kernel modules needed.
</p><p>If <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> failed, then it is possible that the network card wasn't found immediately. This means users may have to load the appropriate kernel modules manually.
</p><p>To find out what kernel modules are provided for networking, use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ls</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /lib/modules/`uname -r`/kernel/drivers/net</code></div></div>
<p>If a driver is found for the network device, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">modprobe</span> to load the kernel module. For instance, to load the <span style="font-family: monospace; font-size: 95%">pcnet32</span> module:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>modprobe pcnet32</code></div></div>
<p>To check if the network card is now detected, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span>. A detected network card would result in something like this (again, <span style="font-family: monospace; font-size: 95%">eth0</span> here is just an example):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig eth0</code></div><pre>
eth0      Link encap:Ethernet  HWaddr FE:FD:00:00:00:00  
          BROADCAST NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
</pre></div>
<p>If however the following error is shown, the network card is not detected:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig eth0</code></div><pre>
eth0: error fetching interface information: Device not found
</pre></div>
<p>The available network interface names on the system can be listed through the <span style="font-family: monospace; font-size: 95%">/sys</span> file system:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /sys/class/net</code></div><pre>
dummy0  eth0  lo  sit0  tap0  wlan0
</pre></div>
<p>In the above example, 6 interfaces are found. The <span style="font-family: monospace; font-size: 95%">eth0</span> one is most likely the (wired) Ethernet adapter whereas wlan0 is the wireless one.
</p><p>Assuming that the network card is now detected, retry <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">pppoe-setup</span> again (which should work now), but for the hardcore people we explain how to configure the network manually as well.
</p><p>Select one of the following sections based on your network setup:
</p>
<ul><li> <a href="#Using_DHCP">Using DHCP</a> for automatic IP retrieval</li>
<li> <a href="#Preparing_for_wireless_access">Preparing for wireless access</a> if a wireless network is used</li>
<li> <a href="#Understanding_network_terminology">Understanding network terminology</a> explains the basics about networking</li>
<li> <a href="#Using_ifconfig_and_route">Using ifconfig and route</a> explains how to set up networking manually</li></ul>
<h3><span class="mw-headline" id="Using_DHCP">Using DHCP</span></h3>
<p>DHCP (Dynamic Host Configuration Protocol) makes it possible to automatically receive networking information (IP address, netmask, broadcast address, gateway, nameservers etc.). This only works if a DHCP server is in the network (or if the ISP provider provides a DHCP service). To have a network interface receive this information automatically, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">dhcpcd</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>dhcpcd eth0</code></div></div>
<p>Some network administrators require that the hostname and domainname provided by the DHCP server is used by the system. In that case, use:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>dhcpcd -HD eth0</code></div></div>
<p>If this works (try pinging some Internet server, like Google), then everything is set and ready to continue. Skip the rest of this section and continue with <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>.
</p>
<h3><span class="mw-headline" id="Preparing_for_wireless_access">Preparing for wireless access</span></h3>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Support for the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> command might be architecture-specific. If the command is not available see if the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-wireless/wireless-tools">net-wireless/wireless-tools</a> package is available for the current architecture. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> command will be unavailable unless the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-wireless/wireless-tools">net-wireless/wireless-tools</a> package has been installed.</div>
<p>When using a wireless (802.11) card, the wireless settings need to be configured before going any further. To see the current wireless settings on the card, one can use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span>. Running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> might show something like:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0</code></div><pre>
eth0      IEEE 802.11-DS  ESSID:&quot;GentooNode&quot;                                   
          Mode:Managed  Frequency:2.442GHz  Access Point: 00:09:5B:11:CC:F2    
          Bit Rate:11Mb/s   Tx-Power=20 dBm   Sensitivity=0/65535               
          Retry limit:16   RTS thr:off   Fragment thr:off                       
          Power Management:off                                                  
          Link Quality:25/10  Signal level:-51 dBm  Noise level:-102 dBm        
          Rx invalid nwid:5901 Rx invalid crypt:0 Rx invalid frag:0 Tx          
          excessive retries:237 Invalid misc:350282 Missed beacon:84            
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Some wireless cards may have a device name of <span style="font-family: monospace; font-size: 95%">wlan0</span> or <span style="font-family: monospace; font-size: 95%">ra0</span> instead of <span style="font-family: monospace; font-size: 95%">eth0</span>. Run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span> without any command-line parameters to determine the correct device name.</div>
<p>For most users, there are only two settings that might be important to change, the ESSID (aka wireless network name) or the WEP key. If the ESSID and Access Point address listed are already those of the environment's access point and the environment is not not using WEP, then the wireless configuration is already working.
</p><p>To change the ESSID, or add a WEP key, issue the following commands.
</p>
<ul><li> To set the network name to <i>GentooNode</i>:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0 essid GentooNode</code></div></div></dd></dl>
<ul><li> To set a hex WEP key:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0 key 1234123412341234abcd</code></div></div></dd></dl>
<ul><li> To set an ASCII WEP key, prefix the key with <code>s:</code>:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>iwconfig eth0 key s:some-password</code></div></div></dd></dl>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If the wireless network is set up with WPA or WPA2, then <span style="font-family: monospace; font-size: 95%; font-weight: bold;">wpa_supplicant</span> needs to be used. For more information on configuring wireless networking in Gentoo Linux, please read the <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless networking chapter</a> in the Gentoo Handbook.</div>
<p>Confirm the wireless settings again by using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">iwconfig</span>. Once wireless is working,continue configuring the IP level networking options as described in the next section (<a href="#Understanding_network_terminology">Understanding network terminology</a>) or use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">net-setup</span> tool as described previously.
</p>
<h3><span class="mw-headline" id="Understanding_network_terminology">Understanding network terminology</span></h3>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If the IP address, broadcast address, netmask and nameservers are known, then skip this subsection and continue with <a href="#Using_ifconfig_and_route">Using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span> and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">route</span></a>.</div>
<p>If all of the above fails, the network will need to be configured manually. This is not difficult at all. However, some knowledge of network terminology and basic concepts might be necessary. After reading this section, users will know what a gateway is, what a netmask serves for, how a broadcast address is formed and why systems need nameservers.
</p><p>In a network, hosts are identified by their IP address (Internet Protocol address). Such an address is perceived as a combination of four numbers between 0 and 255. Well, at least when using IPv4 (IP version 4). In reality, such an IPv4 address consists of 32 bits (ones and zeros). Let's view an example:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example of an IPv4 address</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>IP Address (numbers):   192.168.0.2
IP Address (bits):      11000000 10101000 00000000 00000010
                        -------- -------- -------- --------
                           192      168       0        2
</pre></div></pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The successor of IPv4, IPv6, uses 128 bits (ones and zeros). In this section, the focus is on IPv4 addresses.</div>
<p>Such an IP address is unique to a host as far as all accessible networks are concerned (i.e. every host that one wants to be able to reach must have a unique IP address). In order to distinguish between hosts inside and outside a network, the IP address is divided in two parts: the network part and the host part.
</p><p>The separation is written down with the netmask, a collection of ones followed by a collection of zeros. The part of the IP that can be mapped on the ones is the network-part, the other one is the host-part. As usual, the netmask can be written down as an IP address.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example of network/host separation</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>IP address:    192      168      0         2
            11000000 10101000 00000000 00000010
Netmask:    11111111 11111111 11111111 00000000
               255      255     255        0
           +--------------------------+--------+
                    Network              Host
</pre></div></pre></div>
<p>In other words, 192.168.0.14 is part of the example network, but 192.168.1.2 is not.
</p><p>The broadcast address is an IP address with the same network-part as the network, but with only ones as host-part. Every host on the network listens to this IP address. It is truly meant for broadcasting packets.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Broadcast address</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>IP address:    192      168      0         2
            11000000 10101000 00000000 00000010
Broadcast:  11000000 10101000 00000000 11111111
               192      168      0        255
           +--------------------------+--------+
                     Network             Host
</pre></div></pre></div>
<p>To be able to surf on the Internet, each computer in the network must know which host shares the Internet connection. This host is called the gateway. Since it is a regular host, it has a regular IP address (for instance 192.168.0.1).
</p><p>Previously we stated that every host has its own IP address. To be able to reach this host by a name (instead of an IP address) we need a service that translates a name (such as dev.gentoo.org) to an IP address (such as 64.5.62.82). Such a service is called a <i>name service</i>. To use such a service, the necessary name servers need to be defined in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>.
</p><p>In some cases, the gateway also serves as a nameserver. Otherwise the nameservers provided by the ISP need to be entered in this file.
</p><p>To summarize, the following information is needed before continuing:
</p>
<table class="table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col" width="15%"> Network item
</th>
<th> Example
</th></tr>
<tr>
<td> The system IP address
</td>
<td> 192.168.0.2
</td></tr>
<tr>
<td> Netmask
</td>
<td> 255.255.255.0
</td></tr>
<tr>
<td> Broadcast
</td>
<td> 192.168.0.255
</td></tr>
<tr>
<td> Gateway
</td>
<td> 192.168.0.1
</td></tr>
<tr>
<td> Nameserver(s)
</td>
<td> 195.130.130.5, 195.130.130.133
</td></tr></table>
<h3><span class="mw-headline" id="Using_ifconfig_and_route">Using ifconfig and route</span></h3>
<p>Setting up the network consists of three steps:
</p>
<ol><li> Assign an IP address using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ifconfig</span></li>
<li> Set up routing to the gateway using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">route</span></li>
<li> Finish up by placing the nameserver IPs in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span></li></ol>
<p>To assign an IP address, the IP address, broadcast address and netmask are needed. Then execute the following command, substituting <var>${IP_ADDR}</var> with the right IP address, <var>${BROADCAST}</var> with the right broadcast address and <var>${NETMASK}</var> with the right netmask:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ifconfig eth0 ${IP_ADDR} broadcast ${BROADCAST} netmask ${NETMASK} up</code></div></div>
<p>Set up routing using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">route</span>. Substitute <var>${GATEWAY}</var> with the right gateway IP address:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>route add default gw ${GATEWAY}</code></div></div>
<p>Now open <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/resolv.conf</code></div></div>
<p>Fill in the nameserver(s) using the following as a template. Make sure to substitute <var>${NAMESERVER1}</var> and <var>${NAMESERVER2}</var> with the appropriate nameserver addresses:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Default template to use for /etc/resolv.conf</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>nameserver ${NAMESERVER1}
nameserver ${NAMESERVER2}
</pre></div></pre></div>
<p>That's it. Now test the network by pinging some Internet server (like Google). If this works, congratulations then. Continue with <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Media.html" title="Previous part" class="btn btn-default">&#8592; Choosing the media</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Disks.html" title="Next part" class="btn btn-default">Preparing the disks &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Introduction_to_block_devices">Introduction to block devices</span></h2>
<h3><span class="mw-headline" id="Block_devices">Block devices</span></h3>
<p>Let's take a good look at disk-oriented aspects of Gentoo Linux and Linux in general, including Linux filesystems, partitions and block devices. Once the ins and outs of disks and filesystems are understood, we will set up partitions and filesystems for the Gentoo Linux installation.
</p><p>To begin, let's look at block devices. The most famous block device is probably the one that represents the first drive in a Linux system, namely <span style="font-family: monospace; font-size: 95%">/dev/sda</span>. SCSI and Serial ATA drives are both labeled <span style="font-family: monospace; font-size: 95%">/dev/sd*</span>; even IDE drives are labeled <span style="font-family: monospace; font-size: 95%">/dev/sd*</span> with the new libata framework in the kernel. When using the old device framework, then the first IDE drive is <span style="font-family: monospace; font-size: 95%">/dev/hda</span>.
</p><p>The block devices above represent an abstract interface to the disk. User programs can use these block devices to interact with your disk without worrying about whether the drives are IDE, SCSI or something else. The program can simply address the storage on the disk as a bunch of contiguous, randomly-accessible 512-byte blocks.
</p><p><br />
</p>
<h3><span class="mw-headline" id="Partitions">Partitions</span></h3>
<p>Although it is theoretically possible to use a full disk to house a Linux system, this is almost never done in practice. Instead, full disk block devices are split up in smaller, more manageable block devices. On amd64 systems, these are called partitions. There are currently two standard partitioning technologies in use: MBR and GPT.
</p>
<h4><span class="mw-headline" id="MBR">MBR</span></h4>
<p>The <i>MBR (Master Boot Record)</i> setup uses 32-bit identifiers for the start sector and length of the partitions, and supports three partition types: primary, extended and logical. Primary partitions have their information stored in the master boot record itself - a very small (usually 512 bytes) location at the very beginning of a disk. Due to this small space, only four primary partitions are supported (for instance, <span style="font-family: monospace; font-size: 95%">/dev/sda1</span> to <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>).
</p><p>To support more partitions, one of the primary partitions can be marked as an extended partition. This partition can then contain logical partitions (partitions within a partition).
</p><p>Each partition is limited to 2 TB in size (due to the 32-bit identifiers). Also, the MBR setup does not provide any backup-MBR, so if an application or user overwrites the MBR, all partition information is lost.
</p>
<h4><span class="mw-headline" id="GPT">GPT</span></h4>
<p>The <i>GPT (GUID Partition table)</i> setup uses 64-bit identifiers for the partitions. The location in which it stores the partition information is also much bigger than the 512 bytes of an MBR, and there is no limit on the amount of partitions. Also the size of a partition is bounded by a much greater limit (almost 8 ZB - yes, zettabytes).
</p><p>When a system's software interface between the operating system and firmware is UEFI (instead of BIOS), GPT is almost mandatory as compatibility issues will arise with MBR here.
</p><p>GPT also has the advantage that it has a backup GPT at the end of the disk, which can be used to recover damage of the primary GPT at the beginning. GPT also carries CRC32 checksums to detect errors in the header and partition tables.
</p>
<h3><span class="mw-headline" id="GPT_or_MBR">GPT or MBR</span></h3>
<p>From the description above, one might think that using GPT should always be the recommended approach. But there are a few caveats with this.
</p><p>Using GPT on a BIOS-based computer works, but then one cannot dual-boot with a Microsoft Windows operating system. The reason is that Microsoft Windows will boot in EFI mode if it detects a GPT partition label.
</p><p>Some buggy BIOSes or EFIs configured to boot in BIOS/CSM/legacy mode might also have problems with booting from GPT labeled disks. If that is the case, it might be possible to work around the problem by adding the boot/active flag on the protective MBR partition which has to be done through <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> with the <code>-t dos</code> option to force it to read the partition table using the MBR format.
</p><p>In this case, launch <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> and toggle the flag using the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">a</kbd> key. Press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">1</kbd> to select the first partition, then press the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">w</kbd> key to write the changes to the disk and exit the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> application:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>fdisk -t dos /dev/sda</code></div><pre>
Welcome to fdisk (util-linux 2.24.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.
  
Command (m for help): a
Partition number (1-4): 1
  
Command (m for help): w
</pre></div>
<h3><span class="mw-headline" id="Using_UEFI">Using UEFI</span></h3>
<p>When installing Gentoo on a system that uses UEFI to boot the operating system (instead of BIOS), then it is important that an EFI system partition is created. The instructions for <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> below contain the necessary pointers for this.
</p><p>The EFI system partition also needs to be a FAT32 partition (or <i>vfat</i> as it is shown on Linux systems). The instructions at the end of this chapter use <i>ext2</i> as the example file system for the <span style="font-family: monospace; font-size: 95%">/boot/</span> partition. Make sure to use <i>vfat</i>, like so:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.vfat /dev/sda2</code></div></div>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />If the boot partition is not using the FAT32 (vfat) file system, then the systems UEFI firmware will not be able to find the Linux kernel and boot the system!</div>
<h3><span class="mw-headline" id="Advanced_storage">Advanced storage</span></h3>
<p>The amd64 Installation CDs provide support for LVM2. LVM2 increases the flexibility offered by the partitioning setup. During the installation instructions, we will focus on "regular" partitions, but it is still good to know LVM2 is supported as well.
</p>
<h3><span class="mw-headline" id="Default_partitioning_scheme">Default partitioning scheme</span></h3>
<p>Throughout the remainder of the handbook, the following partitioning scheme is used. If this suffices, then the reader can immediately jump to <a href="#Default:_Using_parted_to_partition_the_disk">Default: Using parted to partition the disk</a> or <a href="#Alternative:_Using_fdisk_to_partition_the_disk">Alternative: Using fdisk to partition the disk</a>. Both are partitioning tools, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> is well known and stable and recommended for the MBR partition layout, while <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> is more recent and recommended for GPT layouts.
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> Partition
</th>
<th> Filesystem
</th>
<th> Size
</th>
<th> Description
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> (bootloader)
</td>
<td> 2M
</td>
<td> BIOS boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> ext2 (or vfat)
</td>
<td> 128M
</td>
<td> Boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> (swap)
</td>
<td> 512M or higher
</td>
<td> Swap partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> ext4
</td>
<td> Rest of the disk
</td>
<td> Root partition
</td></tr></table>
<p>Before going to the creation instructions, the first set of sections will describe in more detail how partitioning schemes can be created and what the common pitfalls are.
</p>
<h2><span class="mw-headline" id="Designing_a_partition_scheme">Designing a partition scheme</span></h2>
<h3><span class="mw-headline" id="How_many_and_how_big.3F">How many and how big?</span></h3>
<p>The number of partitions is highly dependent on the environment. For instance, if there are lots of users, then it is advised to have <span style="font-family: monospace; font-size: 95%">/home/</span> separate as it increases security and makes backups easier. If Gentoo is being installed to perform as a mail server, then <span style="font-family: monospace; font-size: 95%">/var/</span> should be separate as all mails are stored inside <span style="font-family: monospace; font-size: 95%">/var/</span>. A good choice of filesystem will then maximize the performance. Game servers will have a separate <span style="font-family: monospace; font-size: 95%">/opt/</span> as most gaming servers are installed there. The reason is similar for <span style="font-family: monospace; font-size: 95%">/home/</span>: security and backups. In most situations, <span style="font-family: monospace; font-size: 95%">/usr/</span> is to be kept big: not only will it contain the majority of applications, the Portage tree alone takes around 500 MBs excluding the various sources that are stored in it.
</p><p>As can be seen, it very much depends on what the administrator wants to achieve. Separate partitions or volumes have the following advantages:
</p>
<ul><li> Choose the best performing filesystem for each partition or volume.</li>
<li> The entire system cannot run out of free space if one defunct tool is continuously writing files to a partition or volume.</li>
<li> If necessary, file system checks are reduced in time, as multiple checks can be done in parallel (although this advantage is more with multiple disks than it is with multiple partitions).</li>
<li> Security can be enhanced by mounting some partitions or volumes read-only, <code>nosuid</code> (setuid bits are ignored), <code>noexec</code> (executable bits are ignored) etc.</li></ul>
<p>However, multiple partitions have disadvantages as well. If not configured properly, the system might have lots of free space on one partition and none on another. Another nuisance is that separate partitions - especially for important mount points like <span style="font-family: monospace; font-size: 95%">/usr/</span> or <span style="font-family: monospace; font-size: 95%">/var/</span> - often require the administrator to boot with an initramfs to mount the partition before other boot scripts start. This isn't always the case though, so results may vary.
</p><p>There is also a 15-partition limit for SCSI and SATA unless the disk uses GPT labels.
</p>
<h3><span class="mw-headline" id="What_about_swap_space.3F">What about swap space?</span></h3>
<p>There is no perfect value for the swap partition. The purpose of swap space is to provide disk storage to the kernel when internal memory (RAM) is under pressure. A swap space allows for the kernel to move memory pages that are not likely to be accessed soon to disk (swap or page-out), freeing memory. Of course, if that memory is suddenly needed, these pages need to be put back in memory (page-in) which will take a while (as disks are very slow compared to internal memory).
</p><p>When the system is not going to run memory intensive applications or the system has lots of memory available, then it probably does not need much swap space. However, swap space is also used to store the entire memory in case of hibernation. If the system is going to need hibernation, then a bigger swap space necessary, often at least the amount of memory installed in the system.
</p><p><br />
</p>
<h3><span class="mw-headline" id="What_is_the_BIOS_boot_partition.3F">What is the BIOS boot partition?</span></h3>
<p>A BIOS boot partition is a very small (1 to 2 MB) partition in which boot loaders like GRUB2 can put additional data that doesn't fit in the allocated storage (a few hundred bytes in case of MBR) and cannot be placed elsewhere.
</p><p>Such partitions are not always necessary, but considering the low space consumption and the difficulties we have with documenting the plethora of partitioning differences otherwise, it is recommended to create it in either case.
</p><p>For completeness, the BIOS boot partition is needed when GPT partition layout is used with GRUB2, or when the MBR partition layout is used with GRUB2 when the first partition starts earlier than the 1 MB location on the disk.
</p>
<h2><span class="mw-headline" id="Default:_Using_parted_to_partition_the_disk">Default: Using parted to partition the disk</span></h2>
<p>In this chapter, the example partition layout mentioned earlier in the instructions will be used:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> Partition
</th>
<th> Description
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> BIOS boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> Boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> Swap partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> Root partition
</td></tr></table>
<p>Change the partition layout according to personal preference. 
</p>
<h3><span class="mw-headline" id="Viewing_the_current_partition_layout_with_parted">Viewing the current partition layout with parted</span></h3>
<p>The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> application offers a simple interface for partitioning the disks and supports very large partitions (more than 2 TB). Fire up <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> against the disk (in our example, we use <span style="font-family: monospace; font-size: 95%">/dev/sda</span>). It is recommended to ask <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> to use optimal partition alignment:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>parted -a optimal /dev/sda</code></div><pre>
GNU Parted 2.3
Using /dev/sda
Welcome to GNU Parted! Type 'help' to view a list of commands.
</pre></div>
<p>Alignment means that partitions are started on well-known boundaries within the disk, ensuring that operations on the disk from the operating system level (retrieve pages from the disk) use the least amount of internal disk operations. Misaligned partitions might require the disk to fetch two pages instead of one even if the operating system asked for a single page.
</p><p>To find out about all options supported by parted, type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">help</span> and press return.
</p>
<h3><span class="mw-headline" id="Setting_the_GPT_label">Setting the GPT label</span></h3>
<p>Most disks on the <b><span style="font-family: monospace; font-size: 95%; color: #54487a">x86</span></b> or <b><span style="font-family: monospace; font-size: 95%; color: #54487a">amd64</span></b> architectures are prepared using an <i>msdos</i> label. Using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span>, the command to put a GPT label on the disk is <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel gpt</span>:
</p>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />Changing the partition type will remove all partitions from the disk. All data on the disk will be lost.</div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mklabel gpt</code></div></div>
<p>To have the disk with MBR layout, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel msdos</span>.
</p>
<h3><span class="mw-headline" id="Removing_all_partitions_with_parted">Removing all partitions with parted</span></h3>
<p>If this isn't done yet (for instance through the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mklabel</span> operation earlier, or because the disk is a freshly formatted one), first remove all existing partitions from the disk. Type <span style="font-family: monospace; font-size: 95%; font-weight: bold;">print</span> to view the current partitions, and <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rm NUMBER</span> where NUMBER is the partition to remove.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>rm 2</code></div></div>
<p>Do the same for all other partitions that aren't needed. However, make sure to not make any mistakes here - parted executes the changes immediately (unlike <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> which stages them, allowing a user to "undo" his changes before saving or exiting fdisk).
</p>
<h3><span class="mw-headline" id="Creating_the_partitions">Creating the partitions</span></h3>
<p>Now create the partitions. Creating partitions with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> isn't very difficult - all we need to do is inform parted about the following settings:
</p>
<ul><li> The partition type to use. This usually is <i>primary</i>. If the msdos partition label is used, keep in mind that there can be no more than 4 primary partitions. If more than 4 partitions are needed, make one of the first four partitions extended and create logical partitions inside it.</li>
<li> The start location of a partition (which can be expressed in MB, GB, ...)</li>
<li> The end location of the partition (which can be expressed in MB, GB, ...)</li></ul>
<p>First, tell parted that the size unit we work with is megabytes (actually mebibytes, abbreviated as MiB which is the "standard" notation, but we will use MB in the text throughout as it is much more common):
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>unit mib</code></div></div>
<p>Now create a 2 MB partition that will be used by the GRUB2 boot loader later. Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkpart</span> command for this, and inform <span style="font-family: monospace; font-size: 95%; font-weight: bold;">parted</span> to start from 1 MB and end at 3 MB (creating a partition of 2 MB in size).
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 1 3
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 1 grub
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>set 1 bios_grub on
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>print</code></div><pre>
Model: Virtio Block Device (virtblk)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
  
Number   Start      End      Size     File system  Name   Flags
 1       1.00MiB    3.00MiB  2.00MiB               grub   bios_grub
</pre></div>
<p>Do the same for the boot partition (128 MB), swap partition (in the example, 512 MB) and the root partition that spans the remaining disk (for which the end location is marked as -1, meaning the end of the disk minus one MB, which is the farthest a partition can go).
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 3 131
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 2 boot
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 131 643
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 3 swap
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>mkpart primary 643 -1
</code></div><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>name 4 rootfs</code></div></div>
<p>When using the UEFI interface to boot the system (instead of BIOS), mark the boot partition as the EFI System Partition. Parted does this automatically when the <i>boot</i> option is set on the partition:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>set 2 boot on</code></div></div>
<p>The end result looks like so:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">(parted)</code><span class="tripleclick-separator"></span><code>print</code></div><pre>
Model: Virtio Block Device (virtblk)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
  
Number   Start      End      Size     File system  Name   Flags
 1       1.00MiB    3.00MiB  2.00MiB               grub   bios_grub
 2       3.00MiB    131MiB   128MiB                boot   boot
 3       131MiB     643MiB   512MiB                swap
 4       643MiB     20479MiB 19836MiB              rootfs
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />On an UEFI installation, the boot flag will show up on the boot partition.</div>
<p>Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">quit</span> command to exit parted.
</p>
<h2><span class="mw-headline" id="Alternative:_Using_fdisk_to_partition_the_disk">Alternative: Using fdisk to partition the disk</span></h2>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Although recent <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> should support GPT, it has still shown to have some issues with it. The instructions given below assume that the partition layout being used is MBR.</div>
<p>The following parts explain how to create the example partition layout using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span>. The example partition layout was mentioned earlier:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th> Partition
</th>
<th> Description
</th></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>
</td>
<td> BIOS boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda2</span>
</td>
<td> Boot partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>
</td>
<td> Swap partition
</td></tr>
<tr>
<td> <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>
</td>
<td> Root partition
</td></tr></table>
<p>Change the partition layout according to personal preference. 
</p>
<h3><span class="mw-headline" id="Viewing_the_current_partition_layout">Viewing the current partition layout</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> is a popular and powerful tool to split a disk into partitions. Fire up <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> against the disk (in our example, we use <span style="font-family: monospace; font-size: 95%">/dev/sda</span>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>fdisk /dev/sda</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />To use GPT support, add <code>-t gpt</code>. It is recommended to closely investigate the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> output in case more recent developments in <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> change its default behavior of defaulting to MBR. The remainder of the instructions assume an MBR layout.</div>
<p>Use the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> key to display the disk's current partition configuration:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 240 heads, 63 sectors, 2184 cylinders
Units = cylinders of 15120 * 512 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1   *         1        14    105808+  83  Linux
/dev/sda2            15        49    264600   82  Linux swap
/dev/sda3            50        70    158760   83  Linux
/dev/sda4            71      2184  15981840    5  Extended
/dev/sda5            71       209   1050808+  83  Linux
/dev/sda6           210       348   1050808+  83  Linux
/dev/sda7           349       626   2101648+  83  Linux
/dev/sda8           627       904   2101648+  83  Linux
/dev/sda9           905      2184   9676768+  83  Linux
</pre></div>
<p>This particular disk is configured to house seven Linux filesystems (each with a corresponding partition listed as "Linux") as well as a swap partition (listed as "Linux swap").
</p>
<h3><span class="mw-headline" id="Removing_all_partitions_with_fdisk">Removing all partitions with fdisk</span></h3>
<p>First remove all existing partitions from the disk. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">d</kbd> to delete a partition. For instance, to delete an existing <span style="font-family: monospace; font-size: 95%">/dev/sda1</span>:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>d</code></div><pre>
Partition number (1-4): 1
</pre></div>
<p>The partition has now been scheduled for deletion. It will no longer show up when printing the list of partitions (<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd>, but it will not be erased until the changes have been saved. This allows users to abort the operation if a mistake was made - in that case, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">q</kbd> immediately and hit enter and the partition will not be deleted.
</p><p>Repeatedly type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to print out a partition listing and then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">d</kbd> and the number of the partition to delete it. Eventually, the partition table will be empty:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
Device Boot    Start       End    Blocks   Id  System
</pre></div>
<p>Now that the in-memory partition table is empty, we're ready to create the partitions.
</p>
<h3><span class="mw-headline" id="Creating_the_BIOS_boot_partition">Creating the BIOS boot partition</span></h3>
<p>First create a very small BIOS boot partition. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to select a primary partition, followed by <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">1</kbd> to select the first primary partition. When prompted for the first sector, make sure it starts from 2048 (which is needed for the boot loader) and hit enter. When prompted for the last sector, type +2M to create a partition 2 Mbyte in size:
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The start from sector 2048 is a fail-safe in case the boot loader does not detect this partition as being available for its use.</div>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>n</code></div><pre>
Command action
  e   extended
  p   primary partition (1-4)
p
Partition number (1-4): 1
First sector (64-10486533532, default 64): 2048
Last sector, +sectors +size{M,K,G} (4096-10486533532, default 10486533532): +2M
</pre></div>
<p>Mark the partition for EFI purposes:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>t</code></div><pre>
Selected partition 1
Hex code (type L to list codes): 4
Changed system type of partition 1 to 4 (BIOS boot)
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Using EFI with MBR partition layout is discouraged. If an EFI capable system is used, please use GPT layout.</div>
<h3><span class="mw-headline" id="Creating_the_boot_partition">Creating the boot partition</span></h3>
<p>Now create a small boot partition. Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to select a primary partition, followed by <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">2</kbd> to select the second primary partition. When prompted for the first sector, accept the default by hitting <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, type +128M to create a partition 128 Mbyte in size:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>n</code></div><pre>
Command action
  e   extended
  p   primary partition (1-4)
p
Partition number (1-4): 2
First sector (5198-10486533532, default 5198): (Hit enter)
Last sector, +sectors +size{M,K,G} (4096-10486533532, default 10486533532): +128M
</pre></div>
<p>Now, when pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd>, the following partition printout is displayed:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1             1         3      5198+  ef  EFI (FAT-12/16/32)
/dev/sda2             3        14    105808+  83  Linux
</pre></div>
<p>Type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">a</kbd> to toggle the bootable flag on a partition and select <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">2</kbd>. After pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> again, notice that an * is placed in the "Boot" column.
</p>
<h3><span class="mw-headline" id="Creating_the_swap_partition">Creating the swap partition</span></h3>
<p>To create the swap partition, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to tell fdisk to create a primary partition. Then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">3</kbd> to create the third primary partition, <span style="font-family: monospace; font-size: 95%">/dev/sda3</span>. When prompted for the first sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, type +512M (or any other size needed for the swap space) to create a partition 512MB in size.
</p><p>After all this is done, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">t</kbd> to set the partition type, <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">3</kbd> to select the partition just created and then type in <i>82</i> to set the partition type to "Linux Swap".
</p>
<h3><span class="mw-headline" id="Creating_the_root_partition">Creating the root partition</span></h3>
<p>Finally, to create the root partition, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">n</kbd> to create a new partition, then <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> to tell <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span> to create a primary partition. Then type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">4</kbd> to create the fourth primary partition, <span style="font-family: monospace; font-size: 95%">/dev/sda4</span>. When prompted for the first sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd>. When prompted for the last sector, hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Enter</kbd> to create a partition that takes up the rest of the remaining space on the disk. After completing these steps, typing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">p</kbd> should display a partition table that looks similar to this:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>p</code></div><pre>
Disk /dev/sda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes
  
   Device Boot    Start       End    Blocks   Id  System
/dev/sda1             1         3      5198+  ef  EFI (FAT-12/16/32)
/dev/sda2   *         3        14    105808+  83  Linux
/dev/sda3            15        81    506520   82  Linux swap
/dev/sda4            82      3876  28690200   83  Linux
</pre></div>
<h3><span class="mw-headline" id="Saving_the_partition_layout">Saving the partition layout</span></h3>
<p>To save the partition layout and exit <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fdisk</span>, type <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">w</kbd>.
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">Command (m for help):</code><span class="tripleclick-separator"></span><code>w</code></div></div>
<p>With the partitions created, it is now time to put filesystems on them.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Creating_file_systems">Creating file systems</span></h2>
<h3><span class="mw-headline" id="Introduction_2">Introduction</span></h3>
<p>Now that the partitions are created, it is time to place a filesystem on them. In the next section the various file systems that Linux supports are described. Readers that already know which filesystem to use can continue with <a href="#Applying_a_filesystem_to_a_partition">Applying a filesystem to a partition</a>. The others should read on to learn about the available filesystems...
</p>
<h3><span class="mw-headline" id="Filesystems">Filesystems</span></h3>
<p>Several filesystems are available. Some of them are found stable on the amd64 architecture - it is advised to read up on the filesystems and their support state before selecting a more experimental one for important partitions.
</p>
<dl><dt> btrfs</dt>
<dd> A next generation filesystem that provides many advanced features such as snapshotting, self-healing through checksums, transparent compression, subvolumes and integrated RAID. A few distributions have begun to ship it as an out-of-the-box option, but it is not production ready. Reports of filesystem corruption are common. Its developers urge people to run the latest kernel version for safety because the older ones have known problems. This has been the case for years and it is too early to tell if things have changed. Fixes for corruption issues are rarely backported to older kernels. Proceed with caution when using this filesystem!</dd>
<dt> ext2</dt>
<dd> This is the tried and true Linux filesystem but doesn't have metadata journaling, which means that routine ext2 filesystem checks at startup time can be quite time-consuming. There is now quite a selection of newer-generation journaled filesystems that can be checked for consistency very quickly and are thus generally preferred over their non-journaled counterparts. Journaled filesystems prevent long delays when the system is booted and the filesystem happens to be in an inconsistent state.</dd>
<dt> ext3</dt>
<dd> The journaled version of the ext2 filesystem, providing metadata journaling for fast recovery in addition to other enhanced journaling modes like full data and ordered data journaling. It uses an HTree index that enables high performance in almost all situations. In short, ext3 is a very good and reliable filesystem.</dd>
<dt> ext4 </dt>
<dd> Initially created as a fork of ext3, ext4 brings new features, performance improvements, and removal of size limits with moderate changes to the on-disk format. It can span volumes up to 1 EB and with maximum file size of 16TB. Instead of the classic ext2/3 bitmap block allocation ext4 uses extents, which improve large file performance and reduce fragmentation. Ext4 also provides more sophisticated block allocation algorithms (delayed allocation and multiblock allocation) giving the filesystem driver more ways to optimize the layout of data on the disk. Ext4 is the recommended all-purpose all-platform filesystem.</dd>
<dt> JFS</dt>
<dd> IBM's high-performance journaling filesystem. JFS is a light, fast and reliable B+tree-based filesystem with good performance in various conditions.</dd>
<dt> ReiserFS</dt>
<dd> A B+tree-based journaled filesystem that has good overall performance, especially when dealing with many tiny files at the cost of more CPU cycles. ReiserFS appears to be less maintained than other filesystems.</dd>
<dt> XFS </dt>
<dd> A filesystem with metadata journaling which comes with a robust feature-set and is optimized for scalability. XFS seems to be less forgiving to various hardware problems.</dd>
<dt> vfat</dt>
<dd> Also known as FAT32, is supported by Linux but does not support any permission settings. It is mostly used for interoperability with other operating systems (mainly Microsoft Windows) but is also a necessity for some system firmware (like UEFI).</dd></dl>
<p>When using ext2, ext3 or ext4 on a small partition (less than 8GB), then the file system must be created with the proper options to reserve enough inodes. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mke2fs</span> application uses the "bytes-per-inode" setting to calculate how many inodes a file system should have. On smaller partitions, it is advised to increase the calculated number of inodes.
</p><p>On ext2, this can be done using the following command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -T small /dev/&lt;device&gt;</code></div></div>
<p>On ext3 and ext4, add the <code>-j</code> option to enable journaling:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -j -T small /dev/&lt;device&gt;</code></div></div>
<p>This will generally quadruple the number of inodes for a given file system as its "bytes-per-inode" reduces from one every 16kB to one every 4kB. This can be tuned even further by providing the ratio:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mke2fs -i &lt;ratio&gt; /dev/&lt;device&gt;</code></div></div>
<h3><span class="mw-headline" id="Applying_a_filesystem_to_a_partition">Applying a filesystem to a partition</span></h3>
<p>To create a filesystem on a partition or volume, there are user space utilities available for each possible filesystem. Click the filesystem's name in the table below for additional information on each filesystem:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col" width="15%"> Filesystem
</th>
<th> Creation command
</th></tr>
<tr>
<td> <a href="../../../Btrfs.html" title="Btrfs">btrfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.btrfs</span>
</td></tr>
<tr>
<td> <a href="../../../Ext2.html" title="Ext2">ext2</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext2</span>
</td></tr>
<tr>
<td> <a href="../../../Ext3.html" title="Ext3">ext3</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext3</span>
</td></tr>
<tr>
<td> <a href="../../../Ext4.html" title="Ext4">ext4</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.ext4</span>
</td></tr>
<tr>
<td> <a href="../../../JFS.html" title="JFS">jfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.jfs</span>
</td></tr>
<tr>
<td> <a href="https://wiki.gentoo.org/index.php?title=Reiserfs&amp;action=edit&amp;redlink=1" class="new" title="Reiserfs (page does not exist)">reiserfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkreiserfs</span>
</td></tr>
<tr>
<td> <a href="../../../XFS.html" title="XFS">xfs</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.xfs</span>
</td></tr>
<tr>
<td> <a href="../../../FAT.html" title="FAT">vfat</a>
</td>
<td> <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkfs.vfat</span>
</td></tr></table>
<p>For instance, to have the boot partition (<span style="font-family: monospace; font-size: 95%">/dev/sda2</span>) in ext2 and the root partition (<span style="font-family: monospace; font-size: 95%">/dev/sda4</span>) in ext4 as used in the example partition structure, the following commands would be used:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.ext2 /dev/sda2</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkfs.ext4 /dev/sda4</code></div></div>
<p>Now create the filesystems on the newly created partitions (or logical volumes).
</p>
<h3><span class="mw-headline" id="Activating_the_swap_partition">Activating the swap partition</span></h3>
<p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">mkswap</span> is the command that is used to initialize swap partitions:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkswap /dev/sda3</code></div></div>
<p>To activate the swap partition, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">swapon</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>swapon /dev/sda3</code></div></div>
<p>Create and activate the swap with the commands mentioned above.
</p>
<h2><span class="mw-headline" id="Mounting">Mounting</span></h2>
<p>Now that the partitions are initialized and are housing a filesystem, it is time to mount those partitions. Use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mount</span> command, but don't forget to create the necessary mount directories for every partition created. As an example we mount the root and boot partition:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount /dev/sda4 /mnt/gentoo</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir /mnt/gentoo/boot</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount /dev/sda2 /mnt/gentoo/boot</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If <span style="font-family: monospace; font-size: 95%">/tmp/</span> needs to reside on a separate partition, be sure to change its permissions after mounting:
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>chmod 1777 /mnt/gentoo/tmp</code></div></div>
This also holds for <span style="font-family: monospace; font-size: 95%">/var/tmp</span>.</div>
<p>Later in the instructions the proc filesystem (a virtual interface with the kernel) as well as other kernel psuedo-filesystems will be mounted. But first we <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">install the Gentoo installation files</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Networking.html" title="Previous part" class="btn btn-default">&#8592; Configuring the network</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Stage.html" title="Next part" class="btn btn-default">Installing Stage3 &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Installing_a_stage_tarball">Installing a stage tarball</span></h2>
<h3><span class="mw-headline" id="Setting_the_date_and_time">Setting the date and time</span></h3>
<p>Before installing Gentoo, make sure that the date and time are set correctly. A mis-configured clock may lead to strange results in the future!
</p><p>To verify the current date and time, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">date</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>date</code></div><pre>
Fri Mar 29 16:21:18 UTC 2005
</pre></div>
<p>If the date/time displayed is wrong, update it using the <code>MMDDhhmmYYYY</code> syntax (Month, Day, hour, minute and Year). At this stage, it is recommended to use UTC time. Later on during the installation, the timezone will be defined.
</p><p>For instance, to set the date to March 29th, 16:21 in the year 2014:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>date 032916212014</code></div></div>
<h3><span class="mw-headline" id="Downloading_the_stage_tarball">Downloading the stage tarball</span></h3>
<p>Go to the Gentoo mount point where the root file system is mounted (most likely <span style="font-family: monospace; font-size: 95%">/mnt/gentoo</span>):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /mnt/gentoo</code></div></div>
<p>Depending on the installation medium, there are a couple of tools available to download a stage. One of these tools is <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, a non-graphical, menu-driven browser. To download a stage, surf to the Gentoo mirror list like so:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>links <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>To use an HTTP proxy with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span>, pass on the URL with the <code>-http-proxy</code> option:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>links -http-proxy proxy.server.com:8080 <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>Next to <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span> there is also the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">lynx</span> browser. Like <span style="font-family: monospace; font-size: 95%; font-weight: bold;">links</span> it is a non-graphical browser but it is not menu-driven.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>lynx <a rel="nofollow" class="external free" href="https://www.gentoo.org/downloads/mirrors/">https://www.gentoo.org/downloads/mirrors/</a></code></div></div>
<p>If a proxy needs to be defined, export the <var>http_proxy</var> and/or <var>ftp_proxy</var> variables:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export http_proxy="<a rel="nofollow" class="external free" href="http://proxy.server.com:port/">http://proxy.server.com:port</a>"
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export ftp_proxy="<a rel="nofollow" class="external free" href="http://proxy.server.com:port/">http://proxy.server.com:port</a>"</code></div></div>
<p>On the mirror list, select a mirror close by. Usually HTTP mirrors suffice, but other protocols are available as well. Move to the <span style="font-family: monospace; font-size: 95%">releases/amd64/autobuilds/</span> directory. There all available stage files are displayed (they might be stored within subdirectories named after the individual sub-architectures). Select one and press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">D</kbd> to download.
</p><p>Like with the minimal installation CDs, additional downloads are available:
</p>
<ul><li> A <span style="font-family: monospace; font-size: 95%">.CONTENTS</span> file that contains a list of all files inside the stage tarball</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file that contains checksums of the stage file, in different algorithms</li>
<li> A <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file that, like the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> file, contains checksums of the stage file in different algorithms, but is also cryptographically signed to ensure it is provided by the Gentoo project</li></ul>
<p>When finished, press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Q</kbd> to quit the browser.
</p><p>After downloading the stage file, it is possible to verify the integrity of the downloaded stage tarball. Use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">openssl</span> and compare the output with the checksums provided by the <span style="font-family: monospace; font-size: 95%">.DIGESTS</span> or <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file.
</p><p>For instance, to validate the SHA512 checksum:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>openssl dgst -r -sha512 stage3-amd64-&lt;release&gt;.tar.bz2</code></div></div>
<p>Another way is to use the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">sha512sum</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>sha512sum stage3-amd64-&lt;release&gt;.tar.bz2</code></div></div>
<p>To validate the Whirlpool checksum:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>openssl dgst -r -whirlpool stage3-amd64-&lt;release&gt;.tar.bz2</code></div></div>
<p>Compare the output of these commands with the value registered in the <span style="font-family: monospace; font-size: 95%">.DIGESTS(.asc)</span> files. The values need to match, otherwise the downloaded file might be corrupt (or the digests file is).
</p><p>Just like with the ISO file, it is also possible to verify the cryptographic signature of the <span style="font-family: monospace; font-size: 95%">.DIGESTS.asc</span> file using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">gpg</span> to make sure the checksums have not been tampered with:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>gpg --verify stage3-amd64-&lt;release&gt;.tar.bz2.DIGESTS.asc</code></div></div>
<h3><span class="mw-headline" id="Unpacking_the_stage_tarball">Unpacking the stage tarball</span></h3>
<p>Now unpack the downloaded stage onto the system. We use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">tar</span> to proceed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>tar xvjpf stage3-*.tar.bz2 --xattrs</code></div></div>
<p>Make sure that the same options (<code>xvjpf</code> and <code>--xattrs</code>) are used. The x stands for Extract, the v for Verbose to see what happens during the extraction process (optional), the j for Decompress with bzip2, the p for Preserve permissions and the f to denote that we want to extract a File, not standard input. Finally, the <code>--xattrs</code> is to include the extended attributes stored in the archive as well.
</p><p>Now that the stage is installed, continue with <a href="#Configuring_the_compile_options">Configuring the compile options</a>.
</p>
<h2><span class="mw-headline" id="Configuring_compile_options">Configuring compile options</span></h2>
<h3><span class="mw-headline" id="Introduction_3">Introduction</span></h3>
<p>To optimize Gentoo, it is possible to set a couple of variables which impacts the behavior of Portage, Gentoo's officially supported package manager. All those variables can be set as environment variables (using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">export</span>) but that isn't permanent. To keep the settings, Portage reads in the <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> file, a configuration file for Portage.
</p><p>There is currently only one officially supported package manager for Gentoo, however alternatives to Portage do exist! <a href="../../../Paludis.html" title="Paludis">Paludis</a> is a semi-popular alternative package manager found in the main Gentoo repository. From here on out the Handbook will presume Portage will be used as the system's package manager.
</p>
<div class="alert alert-success gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong>Tip</strong><br />A <a href="../../../Paludis/Guide.html" title="Paludis/Guide">Paludis guide</a> has been written for users who are interested in configuring their system to use Paludis instead of Portage. Just remember: if things do not work out as expected Gentoo help channels will not provide support for non-official package managers!</div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />A commented listing of all possible variables can be found in <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/usr/share/portage/config/make.conf.example</span>. For a successful Gentoo installation only the variables that are mentioned below need to be set.</div>
<p>Fire up an editor (in this guide we use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">nano</span>) to alter the optimization variables we will discuss hereafter.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>From the <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file it is obvious how the file should be structured: commented lines start with "#", other lines define variables using the VARIABLE="content" syntax. Several of those variables are discussed next.
</p>
<h3><span class="mw-headline" id="CFLAGS_and_CXXFLAGS">CFLAGS and CXXFLAGS</span></h3>
<p>The <var>CFLAGS</var> and <var>CXXFLAGS</var> variables define the optimization flags for the GCC C and C++ compiler respectively. Although those are defined generally here, for maximum performance one would need to optimize these flags for each program separately. The reason for this is because every program is different. However, this is not manageable, hence the definition of these flags in the <span style="font-family: monospace; font-size: 95%">make.conf</span> file.
</p><p>In <span style="font-family: monospace; font-size: 95%">make.conf</span> one should define the optimization flags that will make the system the most responsive generally. Don't place experimental settings in this variable; too much optimization can make programs behave bad (crash, or even worse, malfunction).
</p><p>We will not explain all possible optimization options. To understand them all, read the <a rel="nofollow" class="external text" href="http://gcc.gnu.org/onlinedocs/">GNU Online Manual(s)</a> or the gcc info page (<span style="font-family: monospace; font-size: 95%; font-weight: bold;">info gcc</span> - only works on a working Linux system). The <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file itself also contains lots of examples and information; don't forget to read it too.
</p><p>A first setting is the <code>-march=</code> or <code>-mtune=</code> flag, which specifies the name of the target architecture. Possible options are described in the <span style="font-family: monospace; font-size: 95%">make.conf.example</span> file (as comments). A commonly used value is <i>native</i> as that tells the compiler to select the target architecture of the current system (the one users are installing Gentoo on).
</p><p>A second one is the <code>-O</code> flag (that is a capital O, not a zero), which specifies the gcc optimization class flag. Possible classes are s (for size-optimized), 0 (zero - for no optimizations), 1, 2 or even 3 for more speed-optimization flags (every class has the same flags as the one before, plus some extras). <code>-O2</code> is the recommended default. <code>-O3</code> is known to cause problems when used system-wide, so we recommend to stick to <code>-O2</code>.
</p><p>Another popular optimization flag is <code>-pipe</code> (use pipes rather than temporary files for communication between the various stages of compilation). It has no impact on the generated code, but uses more memory. On systems with low memory, gcc might get killed. In that case, do not use this flag.
</p><p>Using <code>-fomit-frame-pointer</code> (which doesn't keep the frame pointer in a register for functions that don't need one) might have serious repercussions on the debugging of applications.
</p><p>When the <var>CFLAGS</var> and <var>CXXFLAGS</var> variables are defined, combine the several optimization flags in one string. The default values contained in the stage3 archive that is unpacked should be good enough. The following one is just an example:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example CFLAGS and CXXFLAGS variables</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-march=native -O2 -pipe&quot;</span>
<span class="c"># Use the same settings for both variables</span>
<span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CFLAGS</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div></pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The <a href="../../../GCC_optimization.html" title="GCC optimization">GCC optimization guide</a> has more information on how the various compilation options can affect a system.</div>
<h3><span class="mw-headline" id="MAKEOPTS">MAKEOPTS</span></h3>
<p>The <var>MAKEOPTS</var> variable defines how many parallel compilations should occur when installing a package. A good choice is the number of CPUs (or CPU cores) in the system plus one, but this guideline isn't always perfect.
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Example MAKEOPTS declaration in make.conf</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">MAKEOPTS</span><span class="o">=</span><span class="s2">&quot;-j2&quot;</span>
</pre></div></pre></div>
<h3><span class="mw-headline" id="Ready.2C_set.2C_go">Ready, set, go</span></h3>
<p>Update the <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/etc/portage/make.conf</span> file to match personal preference and save (nano users would hit <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Ctrl</kbd>+<kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">X</kbd>). 
</p><p>Then continue with <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing the Gentoo base system</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Disks.html" title="Previous part" class="btn btn-default">&#8592; Preparing the disks</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Base.html" title="Next part" class="btn btn-default">Installing base system &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Chrooting">Chrooting</span></h2>
<h3><span class="mw-headline" id="Optional:_Selecting_mirrors">Optional: Selecting mirrors</span></h3>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />The <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-portage/mirrorselect">app-portage/mirrorselect</a> program has not been updated to handle modifying the target chroots <span style="font-family: monospace; font-size: 95%">repos.conf/gentoo.conf</span> file yet. Also, the <var>SYNC</var> variable in <span style="font-family: monospace; font-size: 95%">make.conf</span> is deprecated and no longer used by Portage. This section needs to be updated, please skip for the time being...</div>
<p>In order to download source code quickly it is recommended to select a fast mirror. Portage will look in the <span style="font-family: monospace; font-size: 95%">make.conf</span> file for the <var>GENTOO_MIRRORS</var> variable and use the mirrors listed therein. It is possible to surf to the Gentoo mirror list and search for a mirror (or mirrors) that is close to the system's physical location (as those are most frequently the fastest ones). However, we provide a nice tool called <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span> which provides users with a nice interface to select the mirrors needed. Just navigate to the mirrors of choice and press <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">Spacebar</kbd> to select one or more mirrors.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>A second important setting is the <var>SYNC</var> setting in <span style="font-family: monospace; font-size: 95%">make.conf</span>. This variable contains the rsync server to use when updating the Portage tree (the collection of ebuilds and related files containing all the information Portage needs to download and install software). Again, it is possible to manually enter a <var>SYNC</var> server, but <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span> can ease that operation considerably:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mirrorselect -i -r -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</code></div></div>
<p>After running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mirrorselect</span> it is advisable to double-check the settings in <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/etc/portage/make.conf</span>&#160;!
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />When manually selecting a <var>SYNC</var> server in <span style="font-family: monospace; font-size: 95%">make.conf</span>, check out the community mirrors list for the mirrors closest to you. It is recommended to choose a rotation link, such as rsync.us.gentoo.org, rather than choosing a single mirror. This helps spread out the load and provides a fail safe in case a specific mirror is offline.</div>
<h3><span class="mw-headline" id="Copy_DNS_info">Copy DNS info</span></h3>
<p>One thing still remains to be done before entering the new environment and that is copying over the DNS information in <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span>. This needs to be done to ensure that networking still works even after entering the new environment. <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span> contains the name servers for the network.
</p><p>To copy this information, it is recommended to use the <code>-L</code> option to the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">cp</span> command. This ensures that, if <span style="font-family: monospace; font-size: 95%">/etc/resolv.conf</span> is a symbolic link, that the link's target file is copied instead of the symbolic link itself. Otherwise in the new environment the symbolic link would point to a non-existing file (as the link's target is most likely not available inside the new environment).
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cp -L /etc/resolv.conf /mnt/gentoo/etc/</code></div></div>
<h3><span class="mw-headline" id="Mounting_the_necessary_filesystems">Mounting the necessary filesystems</span></h3>
<p>In a few moments, the Linux root will be changed towards the new location. To make sure that the new environment works properly, certain filesystems need to be made available there as well.
</p><p>The filesystems that need to be made available are:
</p>
<ul><li> <span style="font-family: monospace; font-size: 95%">/proc/</span> which is a pseudo-filesystem (it looks like regular files, but is actually generated on-the-fly) from which the Linux kernel exposes information to the environment</li>
<li> <span style="font-family: monospace; font-size: 95%">/sys/</span> which is a pseudo-filesystem, like <span style="font-family: monospace; font-size: 95%">/proc/</span> which it was once meant to replace, and is more structured than <span style="font-family: monospace; font-size: 95%">/proc/</span></li>
<li> <span style="font-family: monospace; font-size: 95%">/dev/</span> is a regular file system, partially managed by the Linux device manager (usually <span style="font-family: monospace; font-size: 95%; font-weight: bold;">udev</span>), which contains all device files</li></ul>
<p>The <span style="font-family: monospace; font-size: 95%">/proc/</span> location will be mounted on <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/proc/</span> whereas the other two are bind-mounted. The latter means that, for instance, <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/sys/</span> will actually <i>be</i> <span style="font-family: monospace; font-size: 95%">/sys/</span> (it is just a second entry point to the same filesystem) whereas <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/proc/</span> is a new mount (instance so to speak) of the filesystem.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount -t proc proc /mnt/gentoo/proc
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --rbind /sys /mnt/gentoo/sys
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --make-rslave /mnt/gentoo/sys
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --rbind /dev /mnt/gentoo/dev
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount --make-rslave /mnt/gentoo/dev</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The <code>--make-rslave</code> operations are needed for systemd support later in the installation.</div>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />When using non-Gentoo installation media, this might not be sufficient. Some distributions make <span style="font-family: monospace; font-size: 95%">/dev/shm</span> a symbolic link to <span style="font-family: monospace; font-size: 95%">/run/shm/</span> which, after the chroot, becomes invalid. Making <span style="font-family: monospace; font-size: 95%">/dev/shm/</span> a proper tmpfs mount up front can fix this:
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rm /dev/shm &amp;&amp; mkdir /dev/shm
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mount -t tmpfs -o nosuid,nodev,noexec shm /dev/shm</code></div></div>
<p>Also ensure that mode 1777 is set
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code> chmod 1777 /dev/shm</code></div></div>
</div>
<h3><span class="mw-headline" id="Entering_the_new_environment">Entering the new environment</span></h3>
<p>Now that all partitions are initialized and the base environment installed, it is time to enter the new installation environment by chrooting into it. This means that the session will change its root (most top-level location that can be accessed) from the current installation environment (installation CD or other installation medium) to the installation system (namely the initialized partitions). Hence the name, <i>change root</i> or <i>chroot</i>.
</p><p>This chrooting is done in three steps:
</p>
<ol><li> The root location is changed from <span style="font-family: monospace; font-size: 95%">/</span> (on the installation medium) to <span style="font-family: monospace; font-size: 95%">/mnt/gentoo/</span> (on the partitions) using chroot</li>
<li> Some settings (those in <span style="font-family: monospace; font-size: 95%">/etc/profile</span>) are reloaded in memory using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">source</span> command</li>
<li> The primary prompt is changed to help us remember that this session is inside a chroot environment.</li></ol>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>chroot /mnt/gentoo /bin/bash
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>source /etc/profile
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>export PS1="(chroot) $PS1"</code></div></div>
<p>From this point, all actions performed are immediately on the new Gentoo Linux environment. Of course it is far from finished, which is why the installation still has some sections left&#160;:-)
</p>
<h2><span class="mw-headline" id="Configuring_Portage">Configuring Portage</span></h2>
<h3><span class="mw-headline" id="Installing_a_Portage_snapshot">Installing a Portage snapshot</span></h3>
<p>Next step is to install a Portage snapshot, a collection of files that inform Portage what software titles are available to install, which profiles the administrator can select, etc.
</p><p>The use of <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span> is recommended. This will fetch the latest Portage snapshot (which Gentoo releases on a daily basis) from one of Gentoo's mirrors and install it onto the system.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge-webrsync</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />During this operation, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span> might complain about a missing <span style="font-family: monospace; font-size: 95%">/usr/portage/</span> location. This is to be expected and nothing to worry about - the tool will create the location.</div>
<p>From this point onward, Portage might mention that certain updates are recommended to be executed. This is because certain system packages installed through the stage3 file might have newer versions available, and Portage is now aware of this because a new Portage snapshot is installed. This can be safely ignored for now; the updates can be triggered after the Gentoo installation has finished.
</p>
<h3><span class="mw-headline" id="Optional:_Updating_the_Portage_tree">Optional: Updating the Portage tree</span></h3>
<p>It is possible to update the Portage tree to the latest version. The previous <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span> command will have installed a very recent Portage snapshot (usually recent up to 24h) so this step is definitely optional.
</p><p>Suppose there is a need for the last package updates (up to 1 hour), then use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --sync</span>. This command will use the rsync protocol to update the Portage tree (which was fetched earlier on through <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge-webrsync</span>) to the latest state.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync</code></div></div>
<p>On slow terminals, like some framebuffers or serial consoles, it is recommended to use the <code>--quiet</code> option to speed up the process:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --sync --quiet</code></div></div>
<h3><span class="mw-headline" id="Reading_news_items">Reading news items</span></h3>
<p>When a Portage tree is synchronized to the system, it might warn the user with a message similar to the following:
</p>
<div class="gw-box"><div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #204A87">CODE</span> <strong>Portage informing the user about news items</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre> * IMPORTANT: 2 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.
</pre></div></pre></div>
<p>Portage news items were created to provide a communication medium to push critical messages to users via the rsync tree. To manage them, use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect news</span>. The <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span> application is a Gentoo application that allows for a common management interface towards system changes and operations. In this case, <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span> is asked to use its <code>news</code> module.
</p><p>For the <code>news</code> module, three operations are most used:
</p>
<ul><li> With <code>list</code> an overview of the available news items is displayed.</li>
<li> With <code>read</code> the news items can be read.</li>
<li> With <code>purge</code> news items can be removed once they have been read and will not be reread anymore.</li></ul>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect news list
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect news read</code></div></div>
<p>More information about the newsreader is available through its manual page: 
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>man news.eselect</code></div></div>
<h3><span class="mw-headline" id="Choosing_the_right_profile">Choosing the right profile</span></h3>
<p>A <i>profile</i> is a building block for any Gentoo system. Not only does it specify default values for <var>USE</var>, <var>CFLAGS</var>, and other important variables, it also locks the system to a certain range of package versions. This is all maintained by the Gentoo developers.
</p><p>You can see what profile the system is currently using with <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span>, now using the <code>profile</code> module:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile list</code></div><pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0 *
  [2]   default/linux/amd64/13.0/desktop
  [3]   default/linux/amd64/13.0/desktop/gnome
  [4]   default/linux/amd64/13.0/desktop/kde
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The output of the command is just an example and evolves over time.</div>
<p>As can be seen, there are also desktop subprofiles available for some architectures.
</p><p>After viewing the available profiles for the amd64 architecture, users can select a different profile to use:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile set 2</code></div></div>
<p><br />
</p><p>In order to select a pure 64-bit environment, with no 32-bit applications or libraries, use a non-multilib profile:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile list</code></div><pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0 *
  [2]   default/linux/amd64/13.0/desktop
  [3]   default/linux/amd64/13.0/desktop/gnome
  [4]   default/linux/amd64/13.0/desktop/kde
  [5]   default/linux/amd64/13.0/no-multilib
</pre></div>
<p>Next select the <i>no-multilib</i> profile:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile set 5
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect profile list</code></div><pre>
Available profile symlink targets:
  [1]   default/linux/amd64/13.0
  [2]   default/linux/amd64/13.0/desktop
  [3]   default/linux/amd64/13.0/desktop/gnome
  [4]   default/linux/amd64/13.0/desktop/kde
  [5]   default/linux/amd64/13.0/no-multilib *
</pre></div>
<p><br />
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The developer subprofile is specifically for Gentoo Linux development and is not meant to be used by regular users.</div>
<h3><span class="mw-headline" id="Configuring_the_USE_variable">Configuring the USE variable</span></h3>
<p><var>USE</var> is one of the most powerful variables Gentoo provides to its users. Several programs can be compiled with or without optional support for certain items. For instance, some programs can be compiled with gtk-support, or with qt-support. Others can be compiled with or without SSL support. Some programs can even be compiled with framebuffer support (svgalib) instead of X11 support (X-server).
</p><p>Most distributions compile their packages with support for as much as possible, increasing the size of the programs and startup time, not to mention an enormous amount of dependencies. With Gentoo users can define what options a package should be compiled with. This is where <var>USE</var> comes into play.
</p><p>In the <var>USE</var> variable users define keywords which are mapped onto compile-options. For instance, <code>ssl</code> will compile ssl-support in the programs that support it. <code>-X</code> will remove X-server support (note the minus sign in front). <code>gnome gtk -kde -qt4</code> will compile programs with GNOME (and GTK) support, and not with KDE (and Qt) support, making the system fully tweaked for GNOME (if the architecture supports it).
</p><p>The default USE settings are placed in the <span style="font-family: monospace; font-size: 95%">make.defaults</span> files of the Gentoo profile used by the system. Gentoo uses a (complex) inheritance system for its profiles, which we will not dive into at this stage. The easiest way to check the currently active <var>USE</var> settings is to run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge --info</span> and select the line that starts with USE:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --info | grep ^USE</code></div><pre>
USE=&quot;X acl alsa amd64 berkdb bindist bzip2 cli cracklib crypt cxx dri ...&quot;
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The above example is truncated, the actual list of <var>USE</var> values is much, much larger.</div>
<p>A full description on the available USE flags can be found on the system in <span style="font-family: monospace; font-size: 95%">/usr/portage/profiles/use.desc</span>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>less /usr/portage/profiles/use.desc</code></div></div>
<p>Inside the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">less</span> command, scrolling can be done using the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">↑</kbd> and <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">↓</kbd> keys, and exited by pressing <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">q</kbd>.
</p><p>As an example we show a USE setting for a KDE-based system with DVD, ALSA and CD Recording support:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/portage/make.conf</code></div></div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Enabling USE for a KDE-based system with DVD, ALSA and CD recording support</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-gtk -gnome qt4 kde dvd alsa cdr&quot;</span>
</pre></div></pre>
<p>When <var>USE</var> is defined in <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> it is <i>added</i> (or <i>removed</i> if the USE flag starts with the <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">-</kbd> sign) from that default list. Users who want to ignore any default USE settings and manage it completely themselves should start the <var>USE</var> definition in <span style="font-family: monospace; font-size: 95%">make.conf</span> with <code>-*</code>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/make.conf</code></strong><strong>Ignoring default USE flags</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-* X acl alsa ...&quot;</span>
</pre></div></pre>
<h2><span class="mw-headline" id="Optional:_Using_systemd">Optional: Using systemd</span></h2>
<p>The remainder of the Gentoo Handbook focuses on OpenRC as the default init support system. If systemd is wanted instead, or you are planning to use Gnome 3.8 and later (which requires systemd), please consult the <a href="../../../Systemd.html" title="Systemd">systemd</a> page as it elaborates on the different configuration settings and methods.
</p><p>The Gentoo handbook can then be followed with that page in mind.
</p>
<h2><span class="mw-headline" id="Timezone">Timezone</span></h2>
<p>Select the timezone for the system. Look for the available timezones in <span style="font-family: monospace; font-size: 95%">/usr/share/zoneinfo/</span>, then write it in the <span style="font-family: monospace; font-size: 95%">/etc/timezone</span> file.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /usr/share/zoneinfo</code></div></div>
<p>Suppose the timezone of choice is <i>Europe/Brussels</i>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>echo "Europe/Brussels" &gt; /etc/timezone</code></div></div>
<p>Please avoid the <span style="font-family: monospace; font-size: 95%">/usr/share/zoneinfo/Etc/GMT*</span> timezones as their names do not indicate the expected zones. For instance, <span style="font-family: monospace; font-size: 95%">GMT-8</span> is in fact <span style="font-family: monospace; font-size: 95%">GMT+8</span>.
</p><p>Next, reconfigure the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-libs/timezone-data">sys-libs/timezone-data</a> package, which will update the <span style="font-family: monospace; font-size: 95%">/etc/localtime</span> file for us, based on the <span style="font-family: monospace; font-size: 95%">/etc/timezone</span> entry. The <span style="font-family: monospace; font-size: 95%">/etc/localtime</span> file is used by the system C library to know the timezone the system is in.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --config sys-libs/timezone-data</code></div></div>
<h2><span class="mw-headline" id="Configure_locales">Configure locales</span></h2>
<p>Most users will want to use only one or two locales on their system.
</p><p>Locales specify not only the language that the system should use to interact with the system, but also what the rules are for sorting strings, displaying dates and times, etc. 
</p><p>The locales that a system should support should be mentioned in <span style="font-family: monospace; font-size: 95%">/etc/locale.gen</span>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/locale.gen</code></div></div>
<p>The following locales are an example to get both English (United States) and German (Germany) with the accompanying character formats (like UTF-8).
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/locale.gen</code></strong><strong>Enabling US and DE locales with the appropriate character formats</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>en_US ISO-8859-1
en_US.UTF-8 UTF-8
de_DE ISO-8859-1
de_DE@euro ISO-8859-15
</pre></div></pre>
<div class="alert alert-danger gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-triangle"></i> Warning</strong><br />We strongly suggest to use at least one UTF-8 locale because some applications may require it.</div>
<p>The next step is to run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">locale-gen</span>. It will generate all the locales specified in the <span style="font-family: monospace; font-size: 95%">/etc/locale.gen</span> file.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>locale-gen</code></div></div>
<p>To verify that the selected locales are now available, run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">locale -a</span>.
</p><p>Once done, it is now time to set the system-wide locale settings. Again we use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect</span> for this, now with the <code>locale</code> module.
</p><p>With <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect locale list</span>, the available targets are displayed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect locale list</code></div><pre>
Available targets for the LANG variable:
  [1] C
  [2] POSIX
  [3] en_US
  [4] en_US.iso88591
  [5] en_US.utf8
  [6] de_DE
  [7] de_DE.iso88591
  [8] de_DE.iso885915
  [9] de_DE.utf8
  [ ] (free form)
</pre></div>
<p>With <span style="font-family: monospace; font-size: 95%; font-weight: bold;">eselect locale set VALUE</span> the correct locale can be set:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>eselect locale set 9</code></div></div>
<p>Manually, this can still be accomplished through the <span style="font-family: monospace; font-size: 95%">/etc/env.d/02locale</span> file:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/env.d/02locale</code></strong><strong>Manually setting system locale definitions</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">LANG</span><span class="o">=</span><span class="s2">&quot;de_DE.UTF-8&quot;</span>
<span class="nv">LC_COLLATE</span><span class="o">=</span><span class="s2">&quot;C&quot;</span>
</pre></div></pre>
<p>Make sure a locale is set, as the system would otherwise display warnings and errors during kernel builds and other software deployments later in the installation.
</p><p>Now reload the environment:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>env-update &amp;&amp; source /etc/profile</code></div></div>
<p>We made a full <a href="../../../Localization/Guide.html" title="Localization/Guide">Localization guide</a> to help the user guide through this process. Another interesting article is the <a href="../../../UTF-8.html" title="UTF-8">UTF-8</a> guide for very specific information to enable UTF-8 on the system.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Stage.html" title="Previous part" class="btn btn-default">&#8592; Installing Stage3</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Kernel.html" title="Next part" class="btn btn-default">Configuring the kernel &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Installing_the_sources">Installing the sources</span></h2>
<p>The core around which all distributions are built is the Linux kernel. It is the layer between the user programs and the system hardware. Gentoo provides its users several possible kernel sources. A full listing with description is available at the <a href="../../../Kernel/Overview.html" title="Kernel/Overview">Kernel overview page</a>.
</p><p>For amd64-based systems Gentoo recommends the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/gentoo-sources"> sys-kernel/gentoo-sources</a> package.
</p><p>Choose an appropriate kernel source and install it using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-kernel/gentoo-sources</code></div></div> 
<p>This will install the Linux kernel sources in <span style="font-family: monospace; font-size: 95%">/usr/src/</span> in which a symbolic link called <span style="font-family: monospace; font-size: 95%">linux</span> will be pointing to the installed kernel source:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls -l /usr/src/linux</code></div><pre>
lrwxrwxrwx    1 root   root    12 Oct 13 11:04 /usr/src/linux -&gt; linux-3.16.5-gentoo
</pre></div>
<p>Now it is time to configure and compile the kernel sources. There are two approaches for this:
</p>
<ol><li> The kernel is manually configured and built.</li>
<li> A tool called <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> is used to automatically build and install the Linux kernel.</li></ol>
<p>We explain the manual configuration as the default choice here as it is the best way to optimize an environment.
</p>
<h2><span class="mw-headline" id="Default:_Manual_configuration">Default: Manual configuration</span></h2>
<h3><span class="mw-headline" id="Introduction_4">Introduction</span></h3>
<p>Manually configuring a kernel is often seen as the most difficult procedure a Linux user ever has to perform. Nothing is less true - after configuring a couple of kernels no-one even remembers that it was difficult&#160;;)
</p><p>However, one thing is true: it is vital to know the system when a kernel is configured manually. Most information can be gathered by emerging <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-apps/pciutils">sys-apps/pciutils</a> which contains the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">lspci</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-apps/pciutils</code></div></div> 
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Inside the chroot, it is safe to ignore any pcilib warnings (like <i>pcilib: cannot open /sys/bus/pci/devices</i>) that <span style="font-family: monospace; font-size: 95%; font-weight: bold;">lspci</span> might throw out.</div>
<p>Another source of system information is to run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">lsmod</span> to see what kernel modules the installation CD uses as it might provide a nice hint on what to enable.
</p><p>Now go to the kernel source directory and execute <span style="font-family: monospace; font-size: 95%; font-weight: bold;">make menuconfig</span>. This will fire up menu-driven configuration screen.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /usr/src/linux
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>make menuconfig</code></div></div>
<p>The Linux kernel configuration has many, many sections. Let's first list some options that must be activated (otherwise Gentoo will not function, or not function properly without additional tweaks). We also have a <a href="../../../Kernel/Gentoo_Kernel_Configuration_Guide.html" title="Kernel/Gentoo Kernel Configuration Guide">Gentoo kernel configuration guide</a> on the Gentoo wiki that might help out further.
</p>
<h3><span class="mw-headline" id="Activating_required_options">Activating required options</span></h3>
<p>Make sure that every driver that is vital to the booting of the system (such as SCSI controller, ...) is compiled in the kernel and not as a module, otherwise the system will not be able to boot completely.
</p><p>Next select the exact processor type. It is also recommended to enable MCE features (if available) so that users are able to be notified of any hardware problems. On some architectures (such as x86_64), these errors are not printed to dmesg, but to <span style="font-family: monospace; font-size: 95%">/dev/mcelog</span>. This requires the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/mcelog">app-admin/mcelog</a> package. 
</p><p>Also select <i>Maintain a devtmpfs file system to mount at /dev</i> so that critical device files are already available early in the boot process.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Enabling devtmpfs support</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Device Drivers ---&gt;
  Generic Driver Options ---&gt;
    [*] Maintain a devtmpfs filesystem to mount at /dev
    [ ]   Automount devtmpfs at /dev, after the kernel mounted the rootfs
</pre>
</pre></div></pre>
<p>Now go to File Systems and select support for the filesystems you use. Don't compile the file system that is used for the root filesystem as module, otherwise the Gentoo system will not be able to mount the partition. Also select <i>Virtual memory</i> and <i>/proc file system</i>.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Selecting necessary file systems</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
File systems ---&gt;
(Select one or more of the following options as needed by your system)
  &lt;*&gt; Second extended fs support
  &lt;*&gt; Ext3 journalling file system support
  &lt;*&gt; The Extended 4 (ext4) filesystem
  &lt;*&gt; Reiserfs support
  &lt;*&gt; JFS filesystem support
  &lt;*&gt; XFS filesystem support
  ...
  Pseudo Filesystems ---&gt;
    [*] /proc file system support
    [*] Virtual memory file system support (former shm fs)
</pre>
</pre></div></pre>
<p>If PPPoE is used to connect to the Internet, or a dial-up modem is used, then enable the following options:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Selecting PPPoE necessary drivers</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Device Drivers ---&gt;
  Network device support ---&gt;
    &lt;*&gt; PPP (point-to-point protocol) support
    &lt;*&gt;   PPP support for async serial ports
    &lt;*&gt;   PPP support for sync tty ports
</pre>
</pre></div></pre>
<p>The two compression options won't harm but are not definitely needed, neither does the PPP over Ethernet option, that might only be used by ppp when configured to do kernel mode PPPoE.
</p><p>Don't forget to include support in the kernel for the network (Ethernet or wireless) cards.
</p><p>Most systems also have multiple cores at their disposal, so it is important to activate <i>Symmetric multi-processing support</i>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Activating SMP support</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Processor type and features  ---&gt;
  [*] Symmetric multi-processing support
</pre>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />In multi-core systems, each core counts as one processor.</div>
<p>If USB input devices (like keyboard or mouse) are used don't forget to enable those as well:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Activating USB Support for input devices</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Device Drivers ---&gt;
  [*] HID Devices  ---&gt;
    &lt;*&gt;   USB Human Interface Device (full HID) support
</pre>
</pre></div></pre>
<p><br />
</p>
<h3><span class="mw-headline" id="Architecture_specific_kernel_configuration">Architecture specific kernel configuration</span></h3>
<p>Make sure to select IA32 Emulation if 32-bit programs should be supported (multilib). Gentoo will install a multilib system (mixed 32-bit/64-bit computing) by default, so unless a <span style="font-family: monospace; font-size: 95%">no-multilib</span> profile is used, this option is required.
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Selecting processor types and features</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Processor type and features  ---&gt;
   [ ] Machine Check / overheating reporting 
   [ ]   Intel MCE Features
   [ ]   AMD MCE Features
  Processor family (AMD-Opteron/Athlon64)  ---&gt;
    ( ) Opteron/Athlon64/Hammer/K8
    ( ) Intel P4 / older Netburst based Xeon
    ( ) Core 2/newer Xeon
    ( ) Intel Atom
    ( ) Generic-x86-64
Executable file formats / Emulations  ---&gt;
   [*] IA32 Emulation
</pre>
</pre></div></pre>
<p>Enable GPT partition label support if that was used previously when partitioning the disk:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Enable support for GPT</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
-*- Enable the block layer ---&gt;
    ...
    Partition Types ---&gt;
    [*] Advanced partition selection
      ...
      [*] EFI GUID Partition support
</pre>
</pre></div></pre>
<p>Enable EFI stub support and EFI variables in the Linux kernel if UEFI is used to boot the system:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #4E9A06">KERNEL</span> <strong>Enable support for UEFI</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
Processor type and features  ---&gt;
    [*] EFI runtime service support 
    [*]   EFI stub support
  
Firmware Drivers  ---&gt;
    &lt;*&gt; EFI Variable Support via sysfs
</pre>
</pre></div></pre>
<h3><span class="mw-headline" id="Compiling_and_installing">Compiling and installing</span></h3>
<p>With the configuration now done, it is time to compile and install the kernel. Exit the configuration and start the compilation process:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>make &amp;&amp; make modules_install</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />It is possible to enable parallel builds using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">make -jX</span> with <code>X</code> being an integer number of parallel tasks that the build process is allowed to launch. This is similar to the instructions about <span style="font-family: monospace; font-size: 95%">/etc/portage/make.conf</span> earlier, with the <var>MAKEOPTS</var> variable.</div>
<p>When the kernel has finished compiling, copy the kernel image to <span style="font-family: monospace; font-size: 95%">/boot/</span>. This is handled by the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">make install</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>make install</code></div></div>
<p>This will copy the kernel image into <span style="font-family: monospace; font-size: 95%">/boot/</span> together with the <span style="font-family: monospace; font-size: 95%">System.map</span> file and the kernel configuration file.
</p><p>With UEFI systems, create the <span style="font-family: monospace; font-size: 95%">/boot/efi/boot/</span> location, and then copy the kernel into this location, calling it <span style="font-family: monospace; font-size: 95%">bootx64.efi</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>mkdir -p /boot/efi/boot
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cp /boot/vmlinuz-* /boot/efi/boot/bootx64.efi
</code></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id="Optional:_Building_an_initramfs">Optional: Building an initramfs</span></h3>
<p>In certain cases it is necessary to build an initramfs - an initial ram-based file system. The most common reason is when important file system locations (like <span style="font-family: monospace; font-size: 95%">/usr/</span> or <span style="font-family: monospace; font-size: 95%">/var/</span>) are on separate partitions. With an initramfs, these partitions can be mounted using the tools available inside the initramfs.
</p><p>Without an initramfs, there is a huge risk that the system will not boot up properly as the tools that are responsible for mounting the file systems need information that resides on those file systems. An initramfs will pull in the necessary files into an archive which is used right after the kernel boots, but before the control is handed over to the init tool. Scripts on the initramfs will then make sure that the partitions are properly mounted before the system continues booting.
</p><p>To install an initramfs, install <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/genkernel">sys-kernel/genkernel</a> first, then have it generate an initramfs:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-kernel/genkernel</code></div></div> 
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>genkernel --install initramfs</code></div></div>
<p>In order to enable specific support in the initramfs, such as lvm or raid, add in the appropriate options to <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span>. See <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel --help</span> for more information. In the next example we enables support for LVM and software raid (mdadm):
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>genkernel --lvm --mdadm --install initramfs</code></div></div>
<p>The initramfs will be stored in <span style="font-family: monospace; font-size: 95%">/boot/</span>. The resulting file can be found by simply listing the files starting with <i>initramfs</i>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /boot/initramfs*</code></div></div>
<p>Now continue with <a href="#Kernel_modules">Kernel modules</a>.
</p>
<h2><span class="mw-headline" id="Alternative:_Using_genkernel">Alternative: Using genkernel</span></h2>
<p>If a manual configuration looks too daunting, then using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> is recommended. It will configure and build the kernel automatically.
</p><p><span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> works by configuring a kernel nearly identically to the way the installation CD kernel is configured. This means that when <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> is used to build the kernel, the system will generally detect all  hardware at boot-time, just like the installation CD does. Because <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> doesn't require any manual kernel configuration, it is an ideal solution for those users who may not be comfortable compiling their own kernels.
</p><p>Now, let's see how to use genkernel. First, emerge the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/genkernel">sys-kernel/genkernel</a> ebuild:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-kernel/genkernel</code></div></div> 
<p>Next, edit the <span style="font-family: monospace; font-size: 95%">/etc/fstab</span> file so that the line containing <span style="font-family: monospace; font-size: 95%">/boot/</span> as second field has the first field pointing to the right device. If the partitioning example from the handbook is followed, then this device is most likely /dev/sda2 with the ext2 file system. This would make the entry in the file look like so:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/fstab</code></div></div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/fstab</code></strong><strong>Configuring the /boot mountpoint</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
/dev/sda2	/boot	ext2	defaults	0 2
</pre>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Further in the Gentoo installation, <span style="font-family: monospace; font-size: 95%">/etc/fstab</span> will be configured again. The <span style="font-family: monospace; font-size: 95%">/boot</span> setting is needed right now as the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> application reads in this configuration.</div>
<p>Now, compile the kernel sources by running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel all</span>. Be aware though, as <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> compiles a kernel that supports almost all hardware, this compilation will take quite a while to finish!
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If the boot partition doesn't use ext2 or ext3 as filesystem it <i>might</i> be necessary to manually configure the kernel using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel --menuconfig all</span> and add support for this particular filesystem in the kernel (i.e. not as a module). Users of LVM2 will probably want to add <code>--lvm</code> as an argument as well.</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>genkernel all</code></div></div>
<p>Once genkernel completes, a kernel, full set of modules and initial ram disk (initramfs) will be created. We will use the kernel and initrd when configuring a boot loader later in this document. Write down the names of the kernel and initrd as this information is used when the boot loader configuration file is edited. The initrd will be started immediately after booting to perform hardware autodetection (just like on the installation CD) before the "real" system starts up.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ls /boot/kernel* /boot/initramfs*</code></div></div>
<h2><span class="mw-headline" id="Kernel_modules">Kernel modules</span></h2>
<h3><span class="mw-headline" id="Configuring_the_modules">Configuring the modules</span></h3>
<p>List the modules that need to be loaded automatically in <span style="font-family: monospace; font-size: 95%">/etc/conf.d/modules</span>. Extra options can be added to the modules too if necessary.
</p><p>To view all available modules, run the following <span style="font-family: monospace; font-size: 95%; font-weight: bold;">find</span> command. Don't forget to substitute "&lt;kernel version&gt;" with the version of the kernel just compiled:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>find /lib/modules/&lt;kernel version&gt;/ -type f -iname '*.o' -or -iname '*.ko' | less</code></div></div>
<p>For instance, to automatically load the <span style="font-family: monospace; font-size: 95%">3c59x.ko</span> module (which is the driver for a specific 3Com network card family), edit the <span style="font-family: monospace; font-size: 95%">/etc/conf.d/modules</span> file and enter the module name in it.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/modules</code></div><pre>
modules=&quot;3c59x&quot;
</pre></div>
<p>Continue the installation with <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>.
</p>
<h3><span class="mw-headline" id="Optional:_Installing_firmware">Optional: Installing firmware</span></h3>
<p>Some drivers require additional firmware to be installed on the system before they work. This is often the case for network interfaces, especially wireless network interfaces. Most of the firmware is packaged in <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-kernel/linux-firmware">sys-kernel/linux-firmware</a>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-kernel/linux-firmware</code></div></div> 
<p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Base.html" title="Previous part" class="btn btn-default">&#8592; Installing base system</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/System.html" title="Next part" class="btn btn-default">Configuring the system &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Filesystem_information">Filesystem information</span></h2>
<h3><span class="mw-headline" id="About_fstab">About fstab</span></h3>
<p>Under Linux, all partitions used by the system must be listed in <span style="font-family: monospace; font-size: 95%">/etc/fstab</span>. This file contains the mount points of those partitions (where they are seen in the file system structure), how they should be mounted and with what special options (automatically or not, whether users can mount them or not, etc.)
</p>
<h3><span class="mw-headline" id="Creating_the_fstab_file">Creating the fstab file</span></h3>
<p>The <span style="font-family: monospace; font-size: 95%">/etc/fstab</span> file uses a table-like syntax. Every line consists of six fields, separated by whitespace (space(s), tabs or a mixture). Each field has its own meaning:
</p>
<ol><li> The first field shows the partition described (the path to the device file)</li>
<li> The second field shows the mount point at which the partition should be mounted</li>
<li> The third field shows the filesystem used by the partition</li>
<li> The fourth field shows the mount options used by <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mount</span> when it wants to mount the partition. As every filesystem has its own mount options, users are encouraged to read the mount man page (<span style="font-family: monospace; font-size: 95%; font-weight: bold;">man mount</span>) for a full listing. Multiple mount options are comma-separated.</li>
<li> The fifth field is used by dump to determine if the partition needs to be dumped or not. This can generally be left as 0 (zero).</li>
<li> The sixth field is used by <span style="font-family: monospace; font-size: 95%; font-weight: bold;">fsck</span> to determine the order in which filesystems should be checked if the system wasn't shut down properly. The root filesystem should have 1 while the rest should have 2 (or 0 if a filesystem check isn't necessary).</li></ol>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Important</strong><br />The default <span style="font-family: monospace; font-size: 95%">/etc/fstab</span> file provided by Gentoo is not a valid fstab file but instead more of a template.</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/fstab</code></div></div>
<p>In the remainder of the text, we use the default <span style="font-family: monospace; font-size: 95%">/dev/sd*</span> block device files as partition. Users can also opt to use the symbolic links in the <span style="font-family: monospace; font-size: 95%">/dev/disk/by-id/</span> or <span style="font-family: monospace; font-size: 95%">/dev/disk/by-uuid/</span> locations. These names are not likely to change, whereas the default block device files naming depends on a number of factors (such as how and in what order the disks are attached to the system). However, unless someone intends to fiddle with the disk ordering, one can continue with the default block device files safely.
</p><p>Let us take a look at how to write down the options for the <span style="font-family: monospace; font-size: 95%">/boot/</span> partition. This is just an example, and should be modified according to the partitioning decisions made earlier in the installation.
In our amd64 partitioning example, <span style="font-family: monospace; font-size: 95%">/boot/</span> is usually the <span style="font-family: monospace; font-size: 95%">/dev/sda2</span> partition, with ext2 as filesystem. It needs to be checked during boot, so we would write down:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/fstab</code></strong><strong>An example /boot line for /etc/fstab</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
/dev/sda2   /boot     ext2    defaults        0 2
</pre>
</pre></div></pre>
<p>Some users don't want their <span style="font-family: monospace; font-size: 95%">/boot/</span> partition to be mounted automatically to improve their system's security. Those people should substitute <i>defaults</i> with <i>noauto</i>. This does mean that those users will need to manually mount this partition every time they want to use it.
</p><p>Add the rules that match the previously decided partitioning scheme and append rules for devices such as CD-ROM drive(s), and of course, if other partitions or drives are used, for those too.
</p><p>Below is a more elaborate example of an <span style="font-family: monospace; font-size: 95%">/etc/fstab</span> file:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/fstab</code></strong><strong>A full /etc/fstab example</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
/dev/sda2   /boot        ext2    defaults,noatime     0 2
/dev/sda3   none         swap    sw                   0 0
/dev/sda4   /            ext4    noatime              0 1
  
/dev/cdrom  /mnt/cdrom   auto    noauto,user          0 0
</pre>
</pre></div></pre>
<p>When <code>auto</code> is used in the third field, it makes the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">mount</span> command guess what the filesystem would be. This is recommended for removable media as they can be created with one of many filesystems. The <code>user</code> option in the fourth field makes it possible for non-root users to mount the CD.
</p><p>To improve performance, most users would want to add the <code>noatime</code> mount option, which results in a faster system since access times aren't registered (those are not needed generally anyway). This is also recommended for solid state drive (SSD) users, who should also enable the <code>discard</code> mount option (ext4 and btrfs only for now) which makes the <code>TRIM</code> command work.
</p><p>Double-check the <span style="font-family: monospace; font-size: 95%">/etc/fstab</span> file, save and quit to continue.
</p>
<h2><span class="mw-headline" id="Networking_information">Networking information</span></h2>
<h3><span class="mw-headline" id="Host_and_domain_information">Host and domain information</span></h3>
<p>One of the choices the user has to make is name his/her PC. This seems to be quite easy, but lots of users are having difficulties finding the appropriate name for their Linux PC. To speed things up, know that the decision is not final - it can be changed afterwards. In the examples below, the hostname <i>tux</i> is used within the domain <i>homenetwork</i>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/hostname</code></div><pre>
# Set the hostname variable to the selected host name
hostname=&quot;tux&quot;
</pre></div>
<p>Second, if a domain name is needed, set it in <span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>. This is only necessary if the ISP or network administrator says so, or if the network has a DNS server but not a DHCP server. Don't worry about DNS or domain names if the system uses DHCP for dynamic IP address allocation and network configuration.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The <span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span> file does not exist by default, so needs to be created.</div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/net</code></div><pre>
# Set the dns_domain_lo variable to the selected domain name
dns_domain_lo=&quot;homenetwork&quot;
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If no domain name is configured, then users will notice they get "This is hostname.(none)" messages at their login screen. This should then be fixed by editing <span style="font-family: monospace; font-size: 95%">/etc/issue</span> and deleting the string <code>.\O</code> from that file.</div>
<p>If a NIS domain is needed (users that do not know this will not need one), define that one too:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/net</code></div><pre>
# Set the nis_domain_lo variable to the selected NIS domain name
nis_domain_lo=&quot;my-nisdomain&quot;
</pre></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />For more information on configuring DNS and NIS, please read the examples provided in <span style="font-family: monospace; font-size: 95%">/usr/share/doc/netifrc-*/net.example.bz2</span> which can be read using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">bzless</span>. Also, it might be interesting to install <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-dns/openresolv">net-dns/openresolv</a> to help manage the DNS/NIS setup.</div>
<h3><span class="mw-headline" id="Configuring_the_network">Configuring the network</span></h3>
<p>During the Gentoo Linux installation, networking was already configured. However, that was for the installation CD itself and not for the installed environment. Right now, the network configuration is made for the installed Gentoo Linux system.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />More detailed information about networking, including advanced topics like bonding, bridging, 802.1Q VLANs or wireless networking is covered in the Gentoo Network Configuration section.</div>
<p>All networking information is gathered in <span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>. It uses a straightforward yet perhaps not intuitive syntax. But don't fear, everything is explained below. A fully commented example that covers many different configurations is available in <span style="font-family: monospace; font-size: 95%">/usr/share/doc/netifrc-*/net.example.bz2</span>.
</p><p>First install <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-misc/netifrc">net-misc/netifrc</a>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask&#160;--noreplace net-misc/netifrc</code></div></div> 
<p>DHCP is used by default. For DHCP to work, a DHCP client needs to be installed. This is described later in Installing Necessary System Tools.
</p><p>If the network connection needs to be configured because of specific DHCP options or because DHCP is not used at all, then open <span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/net</code></div></div>
<p>Set both <var>config_eth0</var> and <var>routes_eth0</var> to enter IP address information and routing information:
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />This assumes that the network interface will be called eth0. This is, however, very system dependent. It is recommended to assume that the interface is named the same as the interface name when booted from the installation media if the installation media is sufficiently recent. More information can be found in Network Interface Naming.</div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/conf.d/net</code></strong><strong>Static IP definition</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">config_eth0</span><span class="o">=</span><span class="s2">&quot;192.168.0.2 netmask 255.255.255.0 brd 192.168.0.255&quot;</span>
<span class="nv">routes_eth0</span><span class="o">=</span><span class="s2">&quot;default via 192.168.0.1&quot;</span>
</pre></div></pre>
<p>To use DHCP, define <var>config_eth0</var>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/conf.d/net</code></strong><strong>DHCP definition</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nv">config_eth0</span><span class="o">=</span><span class="s2">&quot;dhcp&quot;</span>
</pre></div></pre>
<p>Please read <span style="font-family: monospace; font-size: 95%">/usr/share/doc/netifrc-*/net.example.bz2</span> for a list of all available options. Be sure to also read up on the DHCP client man page if specific DHCP options need to be set.
</p><p>If the system has several network interfaces, then repeat the above steps for <var>config_eth1</var>, <var>config_eth2</var>, etc.
</p><p>Now save the configuration and exit to continue.
</p>
<h3><span class="mw-headline" id="Automatically_start_networking_at_boot">Automatically start networking at boot</span></h3>
<p>To have the network interfaces activated at boot, they need to be added to the default runlevel.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>cd /etc/init.d
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>ln -s net.lo net.eth0
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add net.eth0 default</code></div></div>
<p>If the system has several network interfaces, then the appropriate <span style="font-family: monospace; font-size: 95%">net.*</span> files need to be created just like we did with <span style="font-family: monospace; font-size: 95%">net.eth0</span>.
</p><p>If after booting the system we find out that the assumption about the network interface name (which is currently documented as <code>eth0</code>) was wrong, then execute the following steps to rectify this:
</p>
<ol><li> Update the <span style="font-family: monospace; font-size: 95%">/etc/conf.d/net</span> file with the correct interface name (like <code>enp3s0</code> instead of <code>eth0</code>).</li>
<li> Create new symbolic link (like <span style="font-family: monospace; font-size: 95%">/etc/init.d/net.enp3s0</span>).</li>
<li> Remove the old symbolic link (<span style="font-family: monospace; font-size: 95%; font-weight: bold;">rm /etc/init.d/net.eth0</span>).</li>
<li> Add the new one to the default runlevel.</li>
<li> Remove the old one using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update del net.eth0 default</span>.</li></ol>
<h3><span class="mw-headline" id="The_hosts_file">The hosts file</span></h3>
<p>Next inform Linux about the network environment. This is defined in <span style="font-family: monospace; font-size: 95%">/etc/hosts</span> and helps in resolving host names to IP addresses for hosts that aren't resolved by the nameserver. 
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/hosts</code></div></div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/hosts</code></strong><strong>Filling in the networking information</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre># This defines the current system and must be set
127.0.0.1     tux.homenetwork tux localhost
  
# Optional definition of extra systems on the network
192.168.0.5   jenny.homenetwork jenny
192.168.0.6   benny.homenetwork benny
</pre></div></pre>
<p>Save and exit the editor to continue.
</p>
<h3><span class="mw-headline" id="Optional:_Get_PCMCIA_working">Optional: Get PCMCIA working</span></h3>
<p>PCMCIA users should now install the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-apps/pcmciautils">sys-apps/pcmciautils</a> package.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-apps/pcmciautils</code></div></div> 
<h2><span class="mw-headline" id="System_information">System information</span></h2>
<h3><span class="mw-headline" id="Root_password">Root password</span></h3>
<p>Set the root password using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">passwd</span> command. 
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd</code></div></div>
<p>The root Linux account is an all-powerful account, so pick a strong password. Later an additional regular user account will be created for daily operations.
</p>
<h3><span class="mw-headline" id="Init_and_boot_configuration">Init and boot configuration</span></h3>
<p>Gentoo (at least when using OpenRC) uses <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span> to configure the services, startup, and shutdown of a system. Open up <span style="font-family: monospace; font-size: 95%">/etc/rc.conf</span> and enjoy all the comments in the file. Review the settings and change where needed.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/rc.conf</code></div></div>
<p>Next, open <span style="font-family: monospace; font-size: 95%">/etc/conf.d/keymaps</span> to handle keyboard configuration. Edit it to configure and select the right keyboard.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/keymaps</code></div></div>
<p>Take special care with the <var>keymap</var> variable. If the wrong keymap is selected, then weird results will come up when typing on the keyboard.
</p><p>Finally, edit <span style="font-family: monospace; font-size: 95%">/etc/conf.d/hwclock</span> to set the clock options. Edit it according to personal preference.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/conf.d/hwclock</code></div></div>
<p>If the hardware clock is not using UTC, then it is necessary to set <code>clock="local"</code> in the file. Otherwise the system might show clock skew behavior.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Kernel.html" title="Previous part" class="btn btn-default">&#8592; Configuring the kernel</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Tools.html" title="Next part" class="btn btn-default">Installing tools &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="System_logger">System logger</span></h2>
<p>Some tools are missing from the stage3 archive because several packages provide the same functionality. It is now up to the user to choose which ones to install.
</p><p>The first tool to decide on has to provide logging facilities for the system. Unix and Linux have an excellent history of logging capabilities - if needed, everything that happens on the system can be logged in log files. This happens through the system logger.
</p><p>Gentoo offers several system logger utilities. A few of these include:
</p>
<ul><li> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/sysklogd">app-admin/sysklogd</a> - Offers the traditional set of system logging daemons. The default logging configuration works well for beginners which makes this package a good option for beginner.</li>
<li> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/syslog-ng">app-admin/syslog-ng</a> - An advanced system logger. Requires additional configuration in order to actually start logging. Some advanced users may choose this package.</li>
<li> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/metalog">app-admin/metalog</a> - A highly-configurable system logger.</li></ul>
<p>Others are available through Portage as well - the number of available packages increases on a daily basis.
</p><p>If sysklogd or syslog-ng are going to be used, it is recommended to install <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/logrotate">app-admin/logrotate</a> afterwards as those system loggers don't provide any rotation mechanism for the log files.
</p><p>To install the system logger of choice, emerge it and have it added to the default runlevel using <span style="font-family: monospace; font-size: 95%; font-weight: bold;">rc-update</span>. The following example installs <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/app-admin/sysklogd">app-admin/sysklogd</a>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask app-admin/sysklogd</code></div></div> 
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add sysklogd default</code></div></div>
<h2><span class="mw-headline" id="Optional:_Cron_daemon">Optional: Cron daemon</span></h2>
<p>Next is the cron daemon. Although it is optional and not required for every system, it is wise to install one.
</p><p>A cron daemon executes scheduled commands. It is very handy if some command needs to be executed regularly (for instance daily, weekly or monthly).
</p><p>Gentoo offers several possible cron daemons, including <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/bcron">sys-process/bcron</a>, <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/dcron">sys-process/dcron</a>, <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/fcron">sys-process/fcron</a>, and <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/cronie">sys-process/cronie</a>. Installing one of them is similar to installing a system logger. The following example uses <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-process/cronie">sys-process/cronie</a>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-process/cronie</code></div></div> 
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add cronie default</code></div></div>
<p>If dcron or fcron are used, an additional initialization command needs to be executed:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>crontab /etc/crontab</code></div></div>
<h2><span class="mw-headline" id="Optional:_File_indexing">Optional: File indexing</span></h2>
<p>In order to index the file system to provide faster file location capabilities, install <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-apps/mlocate">sys-apps/mlocate</a>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-apps/mlocate</code></div></div> 
<h2><span class="mw-headline" id="Optional:_Remote_access">Optional: Remote access</span></h2>
<p>To be able to access the system remotely after installation, add the <span style="font-family: monospace; font-size: 95%">sshd</span> init script to the default runlevel:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rc-update add sshd default</code></div></div>
<p>If serial console access is needed (which is possible in case of remote servers), uncomment the serial console section in <span style="font-family: monospace; font-size: 95%">/etc/inittab</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/inittab</code></div><pre>
# SERIAL CONSOLES
s0:12345:respawn:/sbin/agetty 9600 ttyS0 vt100
s1:12345:respawn:/sbin/agetty 9600 ttyS1 vt100
</pre></div>
<h2><span class="mw-headline" id="Filesystem_tools">Filesystem tools</span></h2>
<p>Depending on the filesystems used, it is necessary to install the necessary file system utilities (for checking the filesystem integrity, creating additional file systems etc.). Note that tools for managing ext2, ext3, or ext4 filesystems (e2fsprogs) are already installed as a part of the <a href="../../../System_set_(Portage).html" title="System set (Portage)">system set</a>.
</p><p>The following table lists the tools to install if a certain filesystem is used:
</p>
<table class="table table-condensed table-striped" style="text-align: left;">

<tr>
<th scope="col" width="20%"> Filesystem
</th>
<th> Package
</th></tr>
<tr>
<td> Ext2, 3, and 4
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/e2fsprogs">sys-fs/e2fsprogs</a>
</td></tr>
<tr>
<td> XFS
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/xfsprogs">sys-fs/xfsprogs</a>
</td></tr>
<tr>
<td> ReiserFS
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/reiserfsprogs">sys-fs/reiserfsprogs</a>
</td></tr>
<tr>
<td> JFS
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/jfsutils">sys-fs/jfsutils</a>
</td></tr>
<tr>
<td> VFAT (FAT32, ...)
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/dosfstools">sys-fs/dosfstools</a>
</td></tr>
<tr>
<td> Btrfs
</td>
<td> <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-fs/btrfs-progs">sys-fs/btrfs-progs</a>
</td></tr></table>
<div class="alert alert-success gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong>Tip</strong><br />For more information on filesystems in Gentoo see the <a href="../../../Filesystem.html" title="Filesystem">filesystem article</a>.</div>
<h2><span class="mw-headline" id="Networking_tools">Networking tools</span></h2>
<p>If there is no need for any additional networking tools, continue immediately with the section on <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring a bootloader</a>.
</p>
<h3><span class="mw-headline" id="Installing_a_DHCP_client">Installing a DHCP client</span></h3>
<div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Important</strong><br />Although optional, the majority of users will find that they need a DHCP client to connect to the DHCP server on their network. Please take this opportunity to install a DHCP client. If this step is forgotten, then the system might not be able to get on the network thus making it impossible to download a DHCP client afterward.</div>
<p>In order for the system to automatically obtain an IP address for one or more network interface(s) using netifrc scripts, it is necessary to install a DHCP client. We recommend the use of <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-misc/dhcpcd">net-misc/dhcpcd</a> although many other DHCP clients are available through the Portage tree:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask net-misc/dhcpcd</code></div></div> 
<p>More information on <span style="font-family: monospace; font-size: 95%; font-weight: bold;">dhcpcd</span> can be found in the <a href="../../../Dhcpcd.html" title="Dhcpcd">dhcpcd article</a>.
</p>
<h3><span class="mw-headline" id="Optional:_Installing_a_PPPoE_client">Optional: Installing a PPPoE client</span></h3>
<p>If PPP is used to connect to the internet, install the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/net-dialup/ppp">net-dialup/ppp</a> package:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask net-dialup/ppp</code></div></div> 
<p>Now continue with <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/System.html" title="Previous part" class="btn btn-default">&#8592; Configuring the system</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Bootloader.html" title="Next part" class="btn btn-default">Configuring the bootloader &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="Selecting_a_boot_loader">Selecting a boot loader</span></h2>
<p>With the Linux kernel configured, system tools installed and configuration files edited, it is time to install the last important piece of a Linux installation: the boot loader.
</p><p>The boot loader is responsible for firing up the Linux kernel upon boot - without it, the system would not know how to proceed when the power button has been pressed.
</p><p>For <b><span style="font-family: monospace; font-size: 95%; color: #54487a">amd64</span></b>, we document how to configure either <a href="#Default:_Using_GRUB2">GRUB2</a> or <a href="#Alternative:_Using_LILO">LILO</a> for BIOS based systems, and <a href="#Default:_Using_GRUB2">GRUB2</a> or <a href="#Alternative:_Using_efibootmgr">efibootmgr</a> for UEFI systems.
</p>
<h2><span class="mw-headline" id="Default:_Using_GRUB2">Default: Using GRUB2</span></h2>
<p>Previously, Gentoo Linux used what is now called <i>GRUB Legacy</i> as the recommended boot loader. As the name implies, the older GRUB package is no longer actively maintained and has been superseded by GRUB2. For more information about the legacy GRUB, please refer to its <a href="../../../GRUB.html" title="GRUB">GRUB</a> article on the Gentoo Wiki.
</p>
<h3><span class="mw-headline" id="Installing_GRUB2">Installing GRUB2</span></h3>
<p>GRUB2 is provided through the <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-boot/grub">sys-boot/grub</a> package.
</p>
<ul><li> When using BIOS:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/grub</code></div></div> </dd></dl>
<ul><li> When using UEFI, users will need to add <code>GRUB_PLATFORMS="efi-64"</code> to <span style="font-family: monospace; font-size: 95%">make.conf</span> <i>before</i> emerging GRUB2 so that the package will be built with EFI functionality:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>echo GRUB_PLATFORMS="efi-64" &gt;&gt; /etc/portage/make.conf</code></div></div></dd></dl>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/grub</code></div></div> </dd></dl>
<dl><dd> If GRUB2 was somehow emerged without first adding <code>GRUB_PLATFORMS="efi-64"</code> to <span style="font-family: monospace; font-size: 95%">make.conf</span> the line (as shown above) can be added then and dependencies for the <a href="../../../World_set_(Portage).html" title="World set (Portage)">world package set</a> re-calculated by passing the <code>--newuse --deep</code> options to <span style="font-family: monospace; font-size: 95%; font-weight: bold;">emerge</span>:</dd></dl>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask&#160;--newuse --deep @world</code></div></div> </dd></dl>
<p>The GRUB2 software is now installed on the system, but not activated yet.
</p>
<h3><span class="mw-headline" id="Configuring_GRUB2">Configuring GRUB2</span></h3>
<p>Next, install the necessary GRUB2 files to the <span style="font-family: monospace; font-size: 95%">/boot/grub/</span> directory via the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-install</span> command. Presuming the first disk (the one where the system boots from) is <span style="font-family: monospace; font-size: 95%">/dev/sda</span>, one of the following commands will do:
</p>
<ul><li> When using BIOS:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>grub2-install /dev/sda</code></div></div></dd></dl>
<ul><li> When using UEFI:</li></ul>
<dl><dd> <div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>grub2-install --target=x86_64-efi --efi-directory=/boot</code></div></div></dd></dl>
<dl><dd> <div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />Modify the efi-directory setting to the root of the vfat EFI System Partition. This necessary if the <span style="font-family: monospace; font-size: 95%">/boot</span> partition was not formatting as vfat.</div></dd></dl>
<dl><dd> <div class="alert alert-warning gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-exclamation-circle"></i> Important</strong><br />Make sure the EFI system partition has been mounted <i>before</i> running <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-install</span>. It is possible for <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-install</span> to install the GRUB EFI file (<span style="font-family: monospace; font-size: 95%">grubx64.efi</span>) into the wrong directory <i>without</i> providing indication the wrong directory was used.</div></dd></dl>
<p>Next, generate the GRUB2 configuration based on the user configuration specified in the <span style="font-family: monospace; font-size: 95%">/etc/default/grub</span> file and <span style="font-family: monospace; font-size: 95%">/etc/grub.d</span> scripts. In most cases, no configuration is needed by users as GRUB2 will automatically detect which kernel to boot (the highest one available in <span style="font-family: monospace; font-size: 95%">/boot/</span>) and what the root file system is.
</p><p>To generate the final GRUB2 configuration, run the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">grub2-mkconfig</span> command:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>grub2-mkconfig -o /boot/grub/grub.cfg</code></div><pre>
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.16.5-gentoo
Found initrd image: /boot/initramfs-genkernel-amd64-3.16.5-gentoo
done
</pre></div>
<p>The output of the command must mention that at least one Linux image is found, as those are needed to boot the system. If an initramfs is used or <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> was used to build the kernel, the correct initrd image should be detected as well. If this is not the case, go to <span style="font-family: monospace; font-size: 95%">/boot/</span> and check the contents using the <span style="font-family: monospace; font-size: 95%; font-weight: bold;">ls</span> command. If the files are indeed missing, go back to the kernel configuration and installation instructions.
</p>
<h2><span class="mw-headline" id="Alternative:_Using_LILO">Alternative: Using LILO</span></h2>
<h3><span class="mw-headline" id="Installing_LILO">Installing LILO</span></h3>
<p>LILO, the LInuxLOader, is the tried and true workhorse of Linux boot loaders. However, it lacks some features that GRUB has. The reason why LILO is still used is that, on some systems, GRUB doesn't work and LILO does. Of course, it is also used because some people know LILO and want to stick with it. Either way, Gentoo supports both.
</p><p>Installing LILO is a breeze; just use emerge.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/lilo</code></div></div> 
<h3><span class="mw-headline" id="Configuring_LILO">Configuring LILO</span></h3>
<p>To configure LILO, first create <span style="font-family: monospace; font-size: 95%">/etc/lilo.conf</span>:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>nano -w /etc/lilo.conf</code></div></div>
<p>In the configuration file, sections are used to refer to the bootable kernel. Make sure that the kernel files (with kernel version) and initramfs files are known, as they need to be referred to in this configuration file.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If the root filesystem is JFS, add an <code>append="ro"</code> line after each boot item since JFS needs to replay its log before it allows read-write mounting.</div>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/lilo.conf</code></strong><strong>Example LILO configuration</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
boot=/dev/sda             # Install LILO in the MBR
prompt                    # Give the user the chance to select another section
timeout=50                # Wait 5 (five) seconds before booting the default section
default=gentoo            # When the timeout has passed, boot the &quot;gentoo&quot; section
  
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo            # Name we give to this section
  read-only               # Start with a read-only root. Do not alter!
  root=/dev/sda4          # Location of the root filesystem
  
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo.rescue     # Name we give to this section
  read-only               # Start with a read-only root. Do not alter!
  root=/dev/sda4         # Location of the root filesystem
  append=&quot;init=/bin/bb&quot;   # Launch the Gentoo static rescue shell
  
# The next two lines are for dual booting with a Windows system.
# In this example, Windows is hosted on /dev/sda6.
other=/dev/sda6
  label=windows
</pre>
</pre></div></pre>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />If a different partitioning scheme and/or kernel image is used, adjust accordingly.</div>
<p>If an initramfs is necessary, then change the configuration by referring to this initramfs file and telling the initramfs where the root device is located:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/lilo.conf</code></strong><strong>Adding initramfs information to a boot entry</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo
  read-only
  append=&quot;root=/dev/sda4&quot;
  initrd=/boot/initramfs-genkernel-amd64-3.16.5-gentoo
</pre>
</pre></div></pre>
<p>If additional options need to be passed to the kernel, use an <code>append</code> statement. For instance, to add the <code>video</code> statement to enable framebuffer:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/lilo.conf</code></strong><strong>Adding video parameter to the boot options</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><pre>
image=/boot/vmlinuz-3.16.5-gentoo
  label=gentoo
  read-only
  root=/dev/sda4
  append=&quot;video=uvesafb:mtrr,ywrap,1024x768-32@85&quot;
</pre>
</pre></div></pre>
<p>Users that used <span style="font-family: monospace; font-size: 95%; font-weight: bold;">genkernel</span> should know that their kernels use the same boot options as is used for the installation CD. For instance, if SCSI device support needs to be enabled, add <code>doscsi</code> as kernel option.
</p><p>Now save the file and exit.
</p><p>To finish up, run <span style="font-family: monospace; font-size: 95%">/sbin/lilo</span> so LILO can apply the <span style="font-family: monospace; font-size: 95%">/etc/lilo.conf</span> settings to the system (I.E. install itself on the disk). Keep in mind that <span style="font-family: monospace; font-size: 95%">/sbin/lilo</span> must be executed each time a new kernel is installed or a change has been made to the <span style="font-family: monospace; font-size: 95%">lilo.conf</span> file in order for the system to boot if the filename of the kernel has changed.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>/sbin/lilo</code></div></div>
<h2><span class="mw-headline" id="Alternative:_Using_efibootmgr">Alternative: Using efibootmgr</span></h2>
<p>On UEFI based systems, the boot loader itself is the UEFI firmware of the system. Such systems do not need additional boot loaders to help boot the system, although EFI-based bootloaders do exist to extend the functionality of UEFI systems during boot.
</p><p>The <a rel="nofollow" class="external text" href="https://packages.gentoo.org/packages/sys-boot/efibootmgr">sys-boot/efibootmgr</a> application is not a boot loader, but a tool to interact with the UEFI firmware and update its settings, so that the Linux kernel that was previously installed can be booted with additional options (if necessary), or to allow multiple boot entries. This interaction is done through the EFI variables (hence the need for the support of EFI vars in the past).
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />efibootmgr is <i>not</i> a requirement to boot from an UEFI system. The Linux kernel itself can (and will) be booted immediately, and additional boot options can be made part of the Linux kernel itself (there is a kernel configuration that allows the user to specify the boot parameters). Even an initramfs can be made part of the kernel itself.</div>
<p>First install the software:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge --ask sys-boot/efibootmgr</code></div></div> 
<p>Next, tell the UEFI firmware that a boot entry called "Gentoo" is to be created, which has the freshly installed Linux kernel booted:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>efibootmgr --create --disk /dev/sda --part 2 --label "Gentoo" --loader "\efi\boot\bootx64.efi"</code></div></div>
<p>If an initial ram file system (initramfs) is used, add the proper boot option to it:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>efibootmgr -c -d /dev/sda -p 2 -L "Gentoo" -l "\efi\boot\bootx64.efi" initrd='\initramfs-genkernel-amd64-3.16.5-gentoo'</code></div></div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />The use of <kbd style="color: black; font-size: small; border: 0.2em solid; border-color: #DDD #BBB #BBB #DDD; padding: 0 0.4em; background: #EEE; white-space: nowrap;">\</kbd> as directory separator is mandatory when using EFI definitions.</div>
<p>With these changes done, when the system reboots, a boot entry called "Gentoo" will be available.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Rebooting_the_system">Rebooting the system</span></h2>
<p>Exit the chrooted environment and unmount all mounted partitions. Then type in that one magical command that initiates the final, true test: <span style="font-family: monospace; font-size: 95%; font-weight: bold;">reboot</span>.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>exit</code></div></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>cd
</code></div><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>umount -l /mnt/gentoo/dev{/shm,/pts,}
</code></div><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>umount /mnt/gentoo{/boot,/sys,/proc,}
</code></div><div><code style="color: #ef2929; font-weight: bold;">cdimage ~#</code><span class="tripleclick-separator"></span><code>reboot</code></div></div>
<p>Of course, don't forget to remove the bootable CD, otherwise the CD might be booted again instead of the new Gentoo system.
</p><p>Once rebooted in the freshly installed Gentoo environment, finish up with <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing the Gentoo installation</a>.
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Tools.html" title="Previous part" class="btn btn-default">&#8592; Installing tools</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Installation/Finalizing.html" title="Next part" class="btn btn-default">Finalizing &#8594;</a></div>
<p><br />
</p><p><br />
</p>
<div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a href="de.html" title="Handbuch:AMD64/Komplett/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">Deutsch</a> • ‎<a href="../Installation.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete">English</a> • ‎<a href="es.html" title="Handbook:AMD64/Full/Installation/es (100% translated)" class="mw-pt-progress mw-pt-progress--complete">español</a> • ‎<a href="fr.html" title="Handbook:AMD64/Full/Installation/fr (100% translated)" class="mw-pt-progress mw-pt-progress--complete">français</a> • ‎<a href="ja.html" title="ハンドブック:AMD64/フル/インストール (100% translated)" class="mw-pt-progress mw-pt-progress--complete">日本語</a> • ‎<a href="ko.html" title="Handbook:AMD64/Full/Installation/ko (100% translated)" class="mw-pt-progress mw-pt-progress--complete">한국어</a> • ‎<a href="pt-br.html" title="Manual:AMD64/Completo/Instalação (100% translated)" class="mw-pt-progress mw-pt-progress--complete">português do Brasil</a> • ‎<a href="ru.html" title="Handbook:AMD64/Full/Installation (100% translated)" class="mw-pt-progress mw-pt-progress--complete">русский</a> • ‎<a href="zh-cn.html" title="手册：AMD64/完整/安装 (100% translated)" class="mw-pt-progress mw-pt-progress--complete">中文（中国大陆）‎</a></div></div>
<table style="width: 15em; font-size: 90%; border: 1px solid #463c65; background-color: #f9f9f9; color: black; margin-bottom: 0.5em; margin-left: 1em; padding: 0.2em; float: right; clear: right; text-align:center;">
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Installation
</th></tr>
<tr>
<td> <a href="../../Installation/About.html" title="Handbook:AMD64/Installation/About">About the installation</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Media.html" title="Handbook:AMD64/Installation/Media">Choosing the media</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Networking.html" title="Handbook:AMD64/Installation/Networking">Configuring the network</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Disks.html" title="Handbook:AMD64/Installation/Disks">Preparing the disks</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Stage.html" title="Handbook:AMD64/Installation/Stage">Installing stage3</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Base.html" title="Handbook:AMD64/Installation/Base">Installing base system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Kernel.html" title="Handbook:AMD64/Installation/Kernel">Configuring the kernel</a>
</td></tr>
<tr>
<td> <a href="../../Installation/System.html" title="Handbook:AMD64/Installation/System">Configuring the system</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Tools.html" title="Handbook:AMD64/Installation/Tools">Installing tools</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Bootloader.html" title="Handbook:AMD64/Installation/Bootloader">Configuring the bootloader</a>
</td></tr>
<tr>
<td> <a href="../../Installation/Finalizing.html" title="Handbook:AMD64/Installation/Finalizing">Finalizing</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Gentoo
</th></tr>
<tr>
<td> <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Portage introduction</a>
</td></tr>
<tr>
<td> <a href="../../Working/USE.html" title="Handbook:AMD64/Working/USE">USE flags</a>
</td></tr>
<tr>
<td> <a href="../../Working/Features.html" title="Handbook:AMD64/Working/Features">Portage features</a>
</td></tr>
<tr>
<td> <a href="../../Working/Initscripts.html" title="Handbook:AMD64/Working/Initscripts">Initscript system</a>
</td></tr>
<tr>
<td> <a href="../../Working/EnvVar.html" title="Handbook:AMD64/Working/EnvVar">Environment variables</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Working with Portage
</th></tr>
<tr>
<td> <a href="../../Portage/Files.html" title="Handbook:AMD64/Portage/Files">Files and directories</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Variables.html" title="Handbook:AMD64/Portage/Variables">Variables</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Branches.html" title="Handbook:AMD64/Portage/Branches">Mixing software branches</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Tools.html" title="Handbook:AMD64/Portage/Tools">Additional tools</a>
</td></tr>
<tr>
<td> <a href="../../Portage/CustomTree.html" title="Handbook:AMD64/Portage/CustomTree">Custom Portage tree</a>
</td></tr>
<tr>
<td> <a href="../../Portage/Advanced.html" title="Handbook:AMD64/Portage/Advanced">Advanced features</a>
</td></tr>
<tr>
<th style="text-align: center; background-color:#54487a; color: white;"> Network configuration
</th></tr>
<tr>
<td> <a href="../../Networking/Introduction.html" title="Handbook:AMD64/Networking/Introduction">Getting started</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Advanced.html" title="Handbook:AMD64/Networking/Advanced">Advanced configuration</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Modular.html" title="Handbook:AMD64/Networking/Modular">Modular networking</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Wireless.html" title="Handbook:AMD64/Networking/Wireless">Wireless</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Extending.html" title="Handbook:AMD64/Networking/Extending">Adding functionality</a>
</td></tr>
<tr>
<td> <a href="../../Networking/Dynamic.html" title="Handbook:AMD64/Networking/Dynamic">Dynamic management</a>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="User_administration">User administration</span></h2>
<h3><span class="mw-headline" id="Adding_a_user_for_daily_use">Adding a user for daily use</span></h3>
<p>Working as root on a Unix/Linux system is dangerous and should be avoided as much as possible. Therefore it is strongly recommended to add a user for day-to-day use.
</p><p>The groups the user is member of define what activities the user can perform. The following table lists a number of important groups:
</p>
<table class="table table-condensed table-striped" style="text-align: left; width: auto;">

<tr>
<th scope="col" width="25%"> Group
</th>
<th scope="col" width="75%"> Description
</th></tr>
<tr>
<td> audio
</td>
<td> Be able to access the audio devices.
</td></tr>
<tr>
<td> cdrom
</td>
<td> Be able to directly access optical devices.
</td></tr>
<tr>
<td> floppy
</td>
<td> Be able to directly access floppy devices.
</td></tr>
<tr>
<td> games
</td>
<td> Be able to play games.
</td></tr>
<tr>
<td> portage
</td>
<td> Be able to access portage restricted resources.
</td></tr>
<tr>
<td> usb
</td>
<td> Be able to access USB devices.
</td></tr>
<tr>
<td> video
</td>
<td> Be able to access video capturing hardware and doing hardware acceleration.
</td></tr>
<tr>
<td> wheel
</td>
<td> Be able to use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">su</span>.
</td></tr></table>
<p>For instance, to create a user called <a href="../../../User_Larry.html" title="User:Larry">larry</a> who is member of the <i>wheel</i>, <i>users</i>, and <i>audio</i> groups, log in as root first (only root can create users) and run <span style="font-family: monospace; font-size: 95%; font-weight: bold;">useradd</span>:
</p>
<div class="cmd-box"><div><code style="color: white; font-weight: bold;">Login:</code><span class="tripleclick-separator"></span><code>root</code></div><pre>
Password: (Enter the root password)
</pre></div>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>useradd -m -G users,wheel,audio -s /bin/bash larry
</code></div><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>passwd larry</code></div><pre>
Password: (Enter the password for larry)
Re-enter password: (Re-enter the password to verify)
</pre></div>
<p>If a user ever needs to perform some task as root, they can use <span style="font-family: monospace; font-size: 95%; font-weight: bold;">su -</span> to temporarily receive root privileges. Another way is to use the <a href="../../../Sudo.html" title="Sudo">sudo</a> package which is, if correctly configured, very secure.
</p>
<h2><span class="mw-headline" id="Disk_cleanup">Disk cleanup</span></h2>
<h3><span class="mw-headline" id="Removing_tarballs">Removing tarballs</span></h3>
<p>With the Gentoo installation finished and the system rebooted, if everything has gone well, we can now remove the downloaded stage3 tarball from the hard disk. Remember that they were downloaded to the <span style="font-family: monospace; font-size: 95%">/</span> directory.
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>rm /stage3-*.tar.bz2*</code></div></div>
<h2><span class="mw-headline" id="Where_to_go_from_here">Where to go from here</span></h2>
<h3><span class="mw-headline" id="Documentation">Documentation</span></h3>
<p>Where to go from here? What are the options now? What to explore first? Gentoo provides its users with lots of possibilities, and therefore lots of documented (and less documented) features.
</p><p>Definitely take a look at the next part of the Gentoo Handbook entitled <a href="../../Working/Portage.html" title="Handbook:AMD64/Working/Portage">Working with Gentoo</a> which explains how to keep the software up to date, how to install more software, what USE flags are, how the Gentoo init system works, etc.
</p><p>Apart from the handbook, you should also feel encouraged to explore other corners of the Gentoo Wiki to find additional, community-provided documentation. The Gentoo documentation team also offers a <a href="../../../Project_Documentation/Overview.html" title="Project:Documentation/Overview">Documentation overview</a> which lists a fine selection of Wiki articles. For instance, it refers to the <a href="../../../Localization/HOWTO.html" title="Localization/HOWTO" class="mw-redirect">localization guide</a> to make a system feel more at home.
</p>
<h3><span class="mw-headline" id="Gentoo_online">Gentoo online</span></h3>
<p>Everyone is of course always welcome on our <a rel="nofollow" class="external text" href="https://forums.gentoo.org/">Gentoo forums</a> or on one of our many <a rel="nofollow" class="external text" href="https://www.gentoo.org/get-involved/irc-channels/">Gentoo IRC channels</a>.
</p><p>We also have <a rel="nofollow" class="external text" href="https://www.gentoo.org/get-involved/mailing-lists/">several mailing lists</a> open to all our users. Information on how to join is contained in that page.
</p><p>Enjoy your installation!&#160;:)
</p><p><br />
</p>
<div class="btn-group btn-group-justified"><a href="../../Installation/Bootloader.html" title="Previous part" class="btn btn-default">&#8592; Configuring the bootloader</a> <a href="../../../Handbook_AMD64.html" title="Handbook:AMD64" class="btn btn-default">Home</a> <a href="../../Working/Portage.html" title="Next part" class="btn btn-default"> &#8594;</a></div>
<p><br />
</p><p><br />
<span class="error"><strong>Warning:</strong> Display title "Gentoo Linux amd64 Handbook: Installing Gentoo" overrides earlier display title "Handbook:AMD64/Full/Installation".</span>
</p><p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20160112183422
Cache expiry: 86400
Dynamic content: false
CPU time usage: 5.004 seconds
Real time usage: 5.306 seconds
Preprocessor visited node count: 24847/1000000
Preprocessor generated node count: 17689/1000000
Post‐expand include size: 1230820/2097152 bytes
Template argument size: 87010/2097152 bytes
Highest expansion depth: 17/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00% 3684.962      1 - -total
100.00% 3684.962      1 - Handbook:Parts/Full/Installation
 33.33% 1228.189    140 - Template:RootCmd
 31.29% 1153.115    165 - Template:GenericCmd
 21.63%  797.012     11 - Handbook:Parts/TOC
 14.52%  535.037      1 - Handbook:AMD64/Installation/Disks
 14.44%  532.009      1 - Handbook:Parts/Installation/Disks
 12.19%  449.130      1 - Handbook:AMD64/Installation/Base
 12.10%  446.002      1 - Handbook:Parts/Installation/Base
 11.07%  407.822      1 - Handbook:AMD64/Installation/Media
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:72592-0!*!0!!en!*!* and timestamp 20160112183417 and revision id 229830
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Installation/en&amp;oldid=229830">http://wiki.gentoo.org/index.php?title=Handbook:AMD64/Full/Installation/en&amp;oldid=229830</a>"</div>
															<div id='catlinks' class='catlinks catlinks-allhidden'></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 4 January 2015, at 15:33.</li>
																															<li id="privacy"><a href="../../../Gentoo_Wiki_Privacy_policy.html" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="../../../Gentoo_Wiki_About.html" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="../../../Gentoo_Wiki_General_disclaimer.html" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://1b9a50f4f9de4348cd9f-e703bc50ba0aa66772a874f8c7698be7.ssl.cf5.rackcdn.com/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="https://wiki.gentoo.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "Handbook:AMD64/Full/Installation/en"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="http://piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":5528});
} );</script></body>
<!-- Mirrored from wiki.gentoo.org/wiki/Handbook:AMD64/Full/Installation/en by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Jan 2016 18:38:15 GMT -->
</html>