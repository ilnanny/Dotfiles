# Plymouth

cat << 'EOF' > /etc/portage/package.use/plymouth
x11-libs/cairo X
x11-libs/libdrm libkms
EOF

echo 'sys-boot/plymouth-openrc-plugin ~amd64' > /etc/portage/package.accept_keywords/plymouth

emerge --ask sys-boot/plymouth sys-boot/plymouth-openrc-plugin


# Lista dei temi con  plymouth-set-default-theme --list
plymouth-set-default-theme spinfinity

echo 'media-libs/mesa bindist' > /etc/portage/package.use/mesa
emerge --ask x11-base/xorg-drivers

emerge --ask media-libs/libtxc_dxtn

# Aggiungere 'quiet splash'
# anche in /etc/default/grub
# GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"
# ricostruire gli initramfs ogni volta che cambi tema

/bin/bash -c "dracut --kver \$(ls /lib/modules | head -n 1) -f /boot/initramfs-current.img"
grub-mkconfig -o /boot/grub/grub.cfg

cat << 'EOF' > /etc/portage/package.use/lightdm
dev-libs/glib dbus
sys-auth/consolekit policykit
EOF

emerge --ask x11-misc/lightdm x11-misc/lightdm-gtk-greeter

cat << 'EOF' > /etc/conf.d/xdm
#
CHECKVT=7
#
DISPLAYMANAGER="lightdm"
EOF

rc-update add dbus default
rc-update add xdm default

# XFCE4

cat << 'EOF' > /etc/portage/package.use/xfce
sys-apps/dbus X
x11-libs/gdk-pixbuf X
EOF


emerge --ask xfce-base/xfce4-meta

cat << 'EOF' > /etc/lightdm/lightdm.conf
[Seat:*]
allow-guest=false
greeter-hide-users=true
greeter-setup-script=/usr/bin/numlockx on
greeter-show-manual-login=true
session-wrapper=/etc/lightdm/Xsession
user-session=xfce
EOF

cat << 'EOF' > /etc/lightdm/lightdm-gtk-greeter.conf
background=/boot/grub/larrygrub.png
theme-name = Adwaita-dark
icon-theme-name = Adwaita
font-name = DejaVu Sans Semi-Condensed 10
user-background = false
hide-user-image = true
screensaver-timeout = 30
indicators =
position = 30% 50%

EOF


# Numlock default in GUI
emerge --ask x11-misc/numlockx

emerge --ask x11-apps/xrandr

#  SSH & GPG
#xfconf-query -c xfce4-session -p /startup/ssh-agent/enabled -t bool -s false -n
#xfconf-query -c xfce4-session -p /startup/gpg-agent/enabled -t bool -s false -n


# Aggiungi in /etc/lightdm/lightdm.conf nella sezione  [Seat:*]

greeter-setup-script=/usr/bin/numlockx on

# X Console
emerge --ask x11-terms/xfce4-terminal
emerge --ask x11-terms/xterm-351


# File browser
cat << 'EOF' > /etc/portage/package.use/thunar
gnome-base/gvfs udisks
xfce-base/thunar udisks
EOF

emerge --ask xfce-base/thunar xfce-extra/thunar-media-tags-plugin \
  xfce-extra/thunar-volman xfce-extra/tumbler

# Ide & editor testo
emerge --ask dev-util/geany
emerge --ask app-editors/leafpad

# Audio
rc-update add consolekit default
#rc-service consolekit start

cat << 'EOF' > /etc/portage/package.use/pulseaudio
dev-cpp/cairomm X
dev-cpp/gtkmm X
media-sound/pulseaudio gnome
media-plugins/alsa-plugins pulseaudio
EOF

emerge --ask --newuse --deep --update @world
emerge --ask media-sound/alsa-utils media-sound/paprefs media-sound/pavucontrol \
media-sound/pulseaudio

# Notifiche
emerge --ask xfce-extra/xfce4-notifyd

# Image-view
echo 'x11-libs/gdk-pixbuf jpeg' > /etc/portage/package.use/eog
emerge --ask media-gfx/eog media-gfx/eog-plugins

# Task manager
emerge --ask xfce-extra/xfce4-taskmanager

# Screenshot
emerge --ask xfce-extra/xfce4-screenshooter

# Webcam
emerge --ask media-tv/v4l-utils


# PDF Reader
echo 'app-text/poppler cairo' > /etc/portage/package.use/evince
emerge --ask app-text/evince

# Dashboard
echo 'media-libs/clutter X' > /etc/portage/package.use/xfdashboard
emerge --ask xfce-extra/xfdashboard


# Web Browser
cat << 'EOF' > /etc/portage/package.use/firefox
dev-lang/python sqlite
media-libs/libpng apng
media-plugins/alsa-plugins ffmpeg pulseaudio
media-sound/pulseaudio dbus equalizer gtk X
EOF

cat << 'EOF' > /etc/portage/package.accept_keywords/firefox
www-client/firefox-bin ~amd64
EOF

emerge --ask www-client/firefox-bin

#
